<!DOCTYPE html>


<html lang="en">


<head>
  <meta charset="utf-8" />
   
  <meta name="keywords" content="博客，学习网站，hexo，周琛，周琛的个人博客" />
   
  <meta name="description" content="周琛的博客" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     周琛的博客
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.png" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

  

<link rel="alternate" href="/atom.xml" title="琛" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    
      <canvas class="fireworks"></canvas>
      <style>
        .fireworks {
          position: fixed;
          left: 0;
          top: 0;
          z-index: 99999;
          pointer-events: none;
        }
      </style>
      
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/ZhChen7"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">琛</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['学习', '学习使我快乐', '快乐，开心～'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-DevelopmentEnvironment"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/07/19/DevelopmentEnvironment/"
    >开发环境</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/07/19/DevelopmentEnvironment/" class="article-date">
  <time datetime="2019-07-19T09:57:31.000Z" itemprop="datePublished">2019-07-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a> / <a class="article-category-link" href="/categories/JS/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">开发环境</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h1><blockquote>
<p>讲解在面试过程中，面试官可能会问及的前端开发环境的问题，例如 <strong>IDE</strong> ，<strong>Git</strong> ，<strong>模块化</strong> ，<strong>打包工具</strong> ，<strong>上线流程</strong> ，这些类别的题目。</p>
<p>知识点：</p>
<p>7-1 IDE</p>
<p>7-2 Git</p>
<p>7-3 模块化</p>
<p>7-4 构建工具</p>
<p>7-5 上线和回滚</p>
</blockquote>
<h3 id="关于开发环境"><a href="#关于开发环境" class="headerlink" title="关于开发环境"></a>关于开发环境</h3><ul>
<li>面试官想通过开发环境了解面试者的经验</li>
<li>开发环境，最能体现工作产出的效率</li>
<li>会以聊天的形式为主，而不是出具体的问题</li>
</ul>
<h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><blockquote>
<p><strong>IDE</strong> ，<strong>Git</strong> ，<strong>JS 模块化</strong> ，<strong>打包工具</strong> ，<strong>上线流程</strong> ，</p>
</blockquote>
<ul>
<li>IDE （ 写代码的效率 ）</li>
<li>git （ 代码版本管理 ，多人协作开发 ）</li>
<li>JS 模块化</li>
<li>打包工具</li>
<li>上线回滚的流程</li>
</ul>
<h2 id="7-1-IDE"><a href="#7-1-IDE" class="headerlink" title="7-1 IDE"></a>7-1 IDE</h2><ul>
<li>webstorm （ 我平常基本用的就是 <strong>webstorm</strong> ）</li>
<li>sublime</li>
<li>vscode</li>
<li>atom</li>
<li>插件 插件 插件 ！！！</li>
</ul>
<p><img src="http://static.zxinc520.com/blog/20190719/MxVs8IUJKDhO.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190719/QNC5aBgIVByU.png?imageslim" alt="mark"></p>
<p><strong>注意：</strong></p>
<ul>
<li>千万不要说你使用 Dreamweaver 或者 notpad ++</li>
<li>不做 .net 也不要用 Visual Studio</li>
<li>不做 java 也不要用 eclipse</li>
</ul>
<h2 id="7-2-Git"><a href="#7-2-Git" class="headerlink" title="7-2 Git"></a>7-2 Git</h2><blockquote>
<p>Git 详细介绍：可参考的的博客：<a target="_blank" rel="noopener" href="http://zxinc520.com/lcj/%225d285a027b8c9f7d8dc4f627%22">Git 篇</a></p>
</blockquote>
<ul>
<li>正式项目都需要代码版本管理</li>
<li>大型项目需要多人协作开发</li>
<li>Git 和 linux 是一个作者</li>
</ul>
<h2 id="7-3-模块化"><a href="#7-3-模块化" class="headerlink" title="7-3 模块化"></a>7-3 模块化</h2><blockquote>
<p>模块化编程就是通过组合一些<strong>相对独立可复用的模块</strong>来进行功能的实现，其最核心的两部分是<strong>定义模块</strong>和<strong>引入模块</strong>；</p>
<ul>
<li>定义模块时，每个模块内部的执行逻辑是不被外部感知的，只是导出（暴露）出部分方法和数据；</li>
<li>引入模块时，同步 / 异步去加载待引入的代码，执行并获取到其暴露的方法和数据；</li>
</ul>
<p><strong>模块化的发展情况</strong> ：无模块化–&gt;CommonJS 规范–&gt;AMD 规范–&gt;CMD 规范–&gt;ES6 模块化</p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5b6c222a6fb9a04fde5af4ee">Javascript 模块化指北</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5b4420e7f265da0f4b7a7b27">这一次，我要弄懂 javascript 的模块化</a></p>
</blockquote>
<h3 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>不使用模块化的情况</li>
<li>使用模块化</li>
<li>AMD</li>
<li>CommonJS</li>
</ul>
<h4 id="无模块化"><a href="#无模块化" class="headerlink" title="无模块化"></a>无模块化</h4><p>script 标签引入 js 文件，相互罗列，但是被依赖的放在前面，否则使用就会报错。如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;jquery.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">　　&lt;script src=<span class="string">&quot;jquery_scroller.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">　　&lt;script src=<span class="string">&quot;main.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">　　&lt;script src=<span class="string">&quot;other1.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">　　&lt;script src=<span class="string">&quot;other2.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">　　&lt;script src=<span class="string">&quot;other3.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>​ 即简单的将所有的 js 文件统统放在一起。但是这些文件的顺序还不能出错，比如 jquery 需要先引入，才能引入 jquery 插件，才能在其他的文件中使用 jquery。缺点很明显：</p>
<ul>
<li>污染全局作用域</li>
<li>维护成本高</li>
<li>依赖关系不明显</li>
</ul>
<h3 id="AMD-规范"><a href="#AMD-规范" class="headerlink" title="AMD 规范"></a>AMD 规范</h3><blockquote>
<p>异步模块定义（<strong>AMD</strong>）API 指定了一种定义模块的机制，以便可以异步加载模块及其依赖项。这特别适用于浏览器环境，其中模块的同步加载会导致性能，可用性，调试和跨域访问问题。</p>
</blockquote>
<ul>
<li>require.js <a target="_blank" rel="noopener" href="https://requirejs.org/">https://requirejs.org/</a></li>
<li>全局 define 函数</li>
<li>全局 require 函数</li>
<li>依赖 JS 会自动、异步加载</li>
</ul>
<p>AMD 标准中，定义了下面三个 API：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="built_in">module</span>], callback);</span><br><span class="line">define(id, [depends], callback);</span><br><span class="line"><span class="built_in">require</span>.config();</span><br></pre></td></tr></table></figure>

<p>即通过 define 来<strong>定义</strong>一个模块，然后使用 require 来<strong>加载</strong>一个模块, 使用 require.config()指定引用路径。</p>
<h4 id="举例说明："><a href="#举例说明：" class="headerlink" title="举例说明："></a>举例说明：</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script</span><br><span class="line">  src=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js&quot;</span></span><br><span class="line">  data-main=<span class="string">&quot;./main.js&quot;</span></span><br><span class="line">&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><em>main.js:</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">&quot;./a.js&quot;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  a.printDate(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><em>a.js:</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">&quot;./a-util.js&quot;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">aUtil</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = &#123;</span><br><span class="line">    printDate: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(aUtil.aGetFormatDate(data));</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> a;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><em>a-util.js:</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">&quot;./util.js&quot;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">util</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> aUtil = &#123;</span><br><span class="line">    aGetFormatDate: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> util.getFormatDate(data, <span class="number">2</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> aUtil;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><em>util.js:</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> util = &#123;</span><br><span class="line">    getFormatDate: <span class="function"><span class="keyword">function</span> (<span class="params">data, type</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (type === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;2019-07-19&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (type === <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;2019年6月20日&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> util;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190719/tVkLYFlEzrtH.png?imageslim" alt="mark"></p>
<h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><blockquote>
<p>2009 年 ry 发布 Node.js 的第一个版本，CommonJS 作为其中最核心的特性之一，适用于服务端下的场景；历年来的考察和时间的洗礼，以及前端工程化对其的充分支持，CommonJS 被广泛运用于 Node.js 和浏览器；</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Core Module</span></span><br><span class="line"><span class="keyword">const</span> cp = <span class="built_in">require</span>(<span class="string">&quot;child_process&quot;</span>);</span><br><span class="line"><span class="comment">// Npm Module</span></span><br><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">&quot;axios&quot;</span>);</span><br><span class="line"><span class="comment">// Custom Module</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="built_in">require</span>(<span class="string">&quot;./foo&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123; axios &#125;;</span><br><span class="line"><span class="built_in">exports</span>.foo = foo;</span><br></pre></td></tr></table></figure>

<p><strong>规范</strong></p>
<ul>
<li>module (Object): 模块本身</li>
<li>exports (*): 模块的导出部分，即暴露出来的内容</li>
<li>require (Function): 加载模块的函数，获得目标模块的导出值（基础类型为复制，引用类型为浅拷贝），可以加载内置模块、npm 模块和自定义模块。</li>
</ul>
<p><strong>nodejs 模块化规范，现在被大量用前端，原因</strong> ：</p>
<ul>
<li>前端开发依赖的插件课库，都可以从 npm 中获取</li>
<li>构建工具的高度自动化，使得使用 npm 的成本非常低</li>
<li>CommonJS 不会异步加载 JS ，而是同步一次性加载出来</li>
</ul>
<h4 id="使用-CommonJS"><a href="#使用-CommonJS" class="headerlink" title="使用 CommonJS"></a>使用 CommonJS</h4><blockquote>
<p><strong>module</strong> (Object)、<strong>exports</strong> (*)、<strong>require</strong> (Function)</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//util.ls</span></span><br><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">  getFormatDate: <span class="function"><span class="keyword">function</span> (<span class="params">data, type</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;2019-07-19&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;2019年6月20日&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//a-util.js</span></span><br><span class="line"><span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">&quot;util.js&quot;</span>);</span><br><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">  aGetFormatDate: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> util.getFormatDate(data, <span class="number">2</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="特性总结"><a href="#特性总结" class="headerlink" title="特性总结"></a>特性总结</h4><ul>
<li>同步执行模块声明和引入逻辑，分析一些复杂的依赖引用（如循环依赖）时需注意；</li>
<li>缓存机制，性能更优，同时限制了内存占用；</li>
<li>Module 模块可供改造的灵活度高，可以实现一些定制需求（如热更新、任意文件类型模块支持）；</li>
</ul>
<h4 id="AMD-和-CommonJS-的使用场景"><a href="#AMD-和-CommonJS-的使用场景" class="headerlink" title="AMD 和 CommonJS 的使用场景"></a>AMD 和 CommonJS 的使用场景</h4><ul>
<li>需要异步加载 JS ，使用 AMD</li>
<li>使用了 npm 之后建议使用 CommonJS</li>
</ul>
<h3 id="重点总结"><a href="#重点总结" class="headerlink" title="重点总结"></a>重点总结</h3><ul>
<li>AMD</li>
<li>CommonJS</li>
<li>两者的区别</li>
</ul>
<h2 id="7-4-构建工具"><a href="#7-4-构建工具" class="headerlink" title="7-4 构建工具"></a>7-4 构建工具</h2><blockquote>
<p>我们一定会感叹前端技术发展之快，各种可以提高开发效率的新思想和框架层出不穷。但是他们都有一个共同特点：源代码无法直接运行，必须通过转换后才能正常运行。</p>
<p>比如：Grunt 、Gulp、FIS 3、<strong>Webpack</strong> …</p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/entry/5ae5c8c9f265da0b9f400d8e">前端构建工具发展及其比较</a></p>
<p><a target="_blank" rel="noopener" href="http://zxinc520.com/lcj/%225cb181596d3d4a5cb52b65c9%22">webpack 学习可参考我的博客 </a> 和 <a target="_blank" rel="noopener" href="http://zxinc520.com/lcj/%225cb72a04009ae94788aa0d7f%22">我的另一篇博客</a> 均有 涉及。</p>
</blockquote>
<p>构建工具就是做这件事，将源代码转换成可以执行的 JavaScript、CSS、HTML 代码，包括如下内容：</p>
<ul>
<li>代码转换：将 TypeScript 编译成 JavaScript、将 SCSS 编译成 CSS 等。</li>
<li>文件优化：压缩 JavaScript、CSS、HTML 代码，压缩合并图片等。</li>
<li>代码分割：提取多个页面的公共代码，提取首屏不需要执行部分代码让其异步记在。</li>
<li>模块合并：在采用模块化的项目里会有很多个模块和文件，需要通过构建功能将模块分类合并成一个文件。</li>
<li>自动刷新：监听本地源代码变化，自动重新构建、刷新浏览器。</li>
<li>代码校验：在代码被提交到仓库前需要校验代码是否符合规范，以及单元测试是否通过。</li>
<li>自动发布：更新代码后，自动构建出线上发布代码并传输给发布系统。</li>
</ul>
<p>构建其实是工程化、自动化思想在前端开发中的体现，将一系列流程用代码去实现，让代码自动化地执行这一系列复杂的流程。构建为前端开发注入了更大的活力，解放了我们的生产力。</p>
<p>历史上先后出现了一系列构建工具，他们各有优缺点。由于前端工程师很熟悉 JavaScript，Node.js 又可以胜任所有构建需求，所以大多数构建工具都是用 Node.js 开发的。</p>
<h2 id="7-5-上线和回滚"><a href="#7-5-上线和回滚" class="headerlink" title="7-5 上线和回滚"></a>7-5 上线和回滚</h2><ul>
<li>不会有具体的问题，交流询问的方式</li>
</ul>
<h3 id="知识点-2"><a href="#知识点-2" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>上线和回滚的基本流程</li>
<li>linux 基本命令</li>
</ul>
<h4 id="上线和回滚的基本流程"><a href="#上线和回滚的基本流程" class="headerlink" title="上线和回滚的基本流程"></a>上线和回滚的基本流程</h4><ul>
<li><p>是非常重要的开发环节</p>
</li>
<li><p>各个公司的具体流程不同</p>
</li>
<li><p>由专门的工具后者系统完成，我们无需关心细节</p>
</li>
<li><p>如果你没有参与过，面试时也要说出要点</p>
</li>
<li><p>只讲要点，具体实现无法讲解</p>
</li>
</ul>
<h3 id="上线流程要点"><a href="#上线流程要点" class="headerlink" title="上线流程要点"></a>上线流程要点</h3><ul>
<li>将测试完成的代码提交到 git 版本库的 master 分支</li>
<li>将当前服务器的代码全部打包并记录版本号，备份</li>
<li>将 master 分支的代码提交覆盖到线上服务器，生成新版本号</li>
</ul>
<h3 id="回滚的流程要点"><a href="#回滚的流程要点" class="headerlink" title="回滚的流程要点"></a>回滚的流程要点</h3><ul>
<li>将当前服务器的代码打包并记录版本号，备份</li>
<li>将备份的上一个版本号解压，覆盖到线上服务器，并生成新的版本号</li>
</ul>
<h3 id="linux-基本命令"><a href="#linux-基本命令" class="headerlink" title="linux 基本命令"></a>linux 基本命令</h3><ul>
<li>服务器使用 linux 居多，server 版，只有命令行</li>
<li>测试环境要匹配线上环境，因此也是 linux</li>
<li>经常需要登录测试机来自己配置，获取数据</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IDE/" rel="tag">IDE</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B8%8A%E7%BA%BF%E5%92%8C%E5%9B%9E%E6%BB%9A/" rel="tag">上线和回滚</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" rel="tag">构建工具</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/" rel="tag">模块化</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-gitLearning"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/07/12/gitLearning/"
    >Git 学习</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/07/12/gitLearning/" class="article-date">
  <time datetime="2019-07-12T09:59:30.000Z" itemprop="datePublished">2019-07-12</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Git-学习"><a href="#Git-学习" class="headerlink" title="Git 学习"></a>Git 学习</h1><blockquote>
<p><strong>Git 学习</strong></p>
<p>Git 的优势</p>
<p>Git 与 SVN 的主要区别</p>
<p>安装 Git</p>
<p>初始化 Git 仓储/（仓库）</p>
<p>配置使用者的用户名和邮箱</p>
<p>把代码 存储到仓库中</p>
<p>Git 查看日志</p>
<p>Git 版本回退</p>
<p>Git 分支的新建与合并</p>
<p>上传至 github</p>
<p>通过 ssh 方式 上传 代码</p>
<p>push 和 pull 简写</p>
</blockquote>
<h3 id="什么是-Git？"><a href="#什么是-Git？" class="headerlink" title="什么是 Git？"></a>什么是 Git？</h3><blockquote>
<p>git – fast 版本控制</p>
<p>Git 是由“Linux 之父” <strong>Linus Torvalds</strong> 创建的。因为他发现找不到满意的方案来管理 Linux Kernel 联合开发的版本控制，就自己写了 Git。</p>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/">官方网站</a></p>
</blockquote>
<ul>
<li>Git 是一个<a target="_blank" rel="noopener" href="https://git-scm.com/about/free-and-open-source">免费的开源</a> 分布式版本控制系统，旨在快速高效地处理从小型到大型项目的所有事务</li>
<li>Git <a target="_blank" rel="noopener" href="https://git-scm.com/doc">易于学习</a>， <a target="_blank" rel="noopener" href="https://git-scm.com/about/small-and-fast">占地面积小，具有闪电般快速的性能</a>。它超越了 Subversion，CVS，Perforce 和 ClearCase 等 SCM 工具，具有<a target="_blank" rel="noopener" href="https://git-scm.com/about/branching-and-merging">廉价本地分支</a>，便捷的<a target="_blank" rel="noopener" href="https://git-scm.com/about/staging-area">临时区域</a>和 <a target="_blank" rel="noopener" href="https://git-scm.com/about/distributed">多个工作流程等功能</a>。</li>
</ul>
<h3 id="Git-的优势"><a href="#Git-的优势" class="headerlink" title="Git 的优势"></a>Git 的优势</h3><p>说到优势，那么自然是相对与 SVN 而言的</p>
<ol>
<li><p><strong>版本库本地化，支持离线提交，相对独立不影响协同开发。</strong>每个开发者都拥有自己的版本控制库，在自己的版本库上可以任意的执行提交代码、创建分支等行为。例如，开发者认为自己提交的代码有问题？没关系，因为版本库是自己的，回滚历史、反复提交、归并分支并不会影响到其他开发者。</p>
</li>
<li><p><strong>更少的“仓库污染”。</strong>git 对于每个工程只会产生一个.git 目录，这个工程所有的版本控制信息都在这个目录中，不会像 SVN 那样在每个目录下都产生.svn 目录。</p>
</li>
<li><p><strong>把内容按元数据方式存储，完整克隆版本库。</strong>所有版本信息位于.git 目录中，它是处于你的机器上的一个克隆版的版本库，它拥有中心版本库上所有的东西，例如标签、分支、版本记录等。</p>
</li>
<li><p><strong>支持快速切换分支方便合并，比较合并性能好。</strong>在同一目录下即可切换不同的分支，方便合并，且合并文件速度比 SVN 快。</p>
</li>
<li><p><strong>分布式版本库，无单点故障，内容完整性好。</strong>内容存储使用的是 SHA-1 哈希算法。这能确保代码内容的完整性，确保在遇到磁盘故障和网络问题时降低对版本库的破坏。</p>
</li>
</ol>
<h3 id="Git-与-SVN-的主要区别"><a href="#Git-与-SVN-的主要区别" class="headerlink" title="Git 与 SVN 的主要区别"></a>Git 与 SVN 的主要区别</h3><p>Git 是<strong>分布式</strong>SCM，而 SVN 是基于<strong>服务器</strong>的，也就是说每个开发者本地都有一套 git 库，每个人维护自己的版本（或者合并其他人的版本），而 SVN 是每个人写完代码后都及时的 checkin 到服务器上，进行合并。</p>
<h3 id="安装-Git"><a href="#安装-Git" class="headerlink" title="安装 Git"></a>安装 Git</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/896043488029600/896067074338496">廖雪峰的官方网站 git 安装</a></p>
</blockquote>
<p>鼠标 <strong>右键</strong>，选中 <code>Git Bash Here</code> 在里面输入相关命令：</p>
<p><img src="http://static.zxinc520.com/blog/20190711/litoDVMJqNVb.png?imageslim" alt="mark"></p>
<h2 id="使用-Git"><a href="#使用-Git" class="headerlink" title="使用 Git"></a>使用 Git</h2><h3 id="初始化-Git-仓储-（仓库）"><a href="#初始化-Git-仓储-（仓库）" class="headerlink" title="初始化 Git 仓储/（仓库）"></a>初始化 Git 仓储/（仓库）</h3><ol>
<li><strong>新建</strong>一个文件夹</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/9NbV1d2Bf3H2.png?imageslim" alt="mark"></p>
<ol start="2">
<li><strong>进入</strong>文件夹，鼠标<strong>右键</strong> 选中 <code>Git Bash Here</code>，输入命令 <code>git init</code> 回车。</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/PApIqKpihnsJ.gif" alt="mark"></p>
<h3 id="配置使用者的用户名和邮箱"><a href="#配置使用者的用户名和邮箱" class="headerlink" title="配置使用者的用户名和邮箱"></a>配置使用者的用户名和邮箱</h3><blockquote>
<p>配置使用者的用户名和邮箱 （自报家门）,每一次备份都会把当前备份者的信息存储起来。</p>
<p><strong>配置用户名</strong> ： <code>git config --global user.name &quot;zhouchen&quot;</code></p>
<p><strong>配置邮箱</strong>： <code>git config --global user.email &quot;1583741285@qq.com&quot;</code></p>
</blockquote>
<ol>
<li><p>配置使用者的<strong>用户名</strong>：<strong>进入</strong>文件夹，鼠标<strong>右键</strong> 选中 <code>Git Bash Here</code>，</p>
<p>输入命令 <code>git config --global user.name &quot;zhouchen&quot;</code> 回车 。</p>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/FUG7gTH6S2Mh.png?imageslim" alt="mark"></p>
<ol start="2">
<li><p>同样的配置使用者的 <strong>邮箱</strong>：<strong>进入</strong>文件夹，鼠标<strong>右键</strong> 选中 <code>Git Bash Here</code>，</p>
<p>输入命令 <code>git config --global user.email &quot;1583741285@qq.com&quot;</code> 回车 。</p>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/p62Mz0UPYcY9.png?imageslim" alt="mark"></p>
<h3 id="把代码-存储到仓库中"><a href="#把代码-存储到仓库中" class="headerlink" title="把代码 存储到仓库中"></a>把代码 存储到仓库中</h3><blockquote>
<p>把代码 存储到仓库中</p>
</blockquote>
<p><strong>需求</strong>：将 readme.md 文件 存储到仓库中</p>
<p><img src="http://static.zxinc520.com/blog/20190711/KwUDn18LHU1f.png?imageslim" alt="mark"></p>
<ol>
<li><p><strong>进入</strong>文件夹，鼠标<strong>右键</strong> 选中 <code>Git Bash Here</code>，</p>
<p>输入命令 <code>git add ./readme.md</code> 回车 。</p>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/P1DnSzDuSOBO.png?imageslim" alt="mark"></p>
<ol start="2">
<li>紧接上一步，输入命令 <code>git commit -m &quot;add Introductions&quot;</code> 回车 。</li>
</ol>
<p><u>add Introductions</u>—–可以自定义，一个辅助的解释 <strong>说明</strong>。</p>
<p><img src="http://static.zxinc520.com/blog/20190711/FqHM4n7stzsF.png?imageslim" alt="mark"></p>
<h4 id="查看提交状态"><a href="#查看提交状态" class="headerlink" title="查看提交状态"></a>查看提交状态</h4><p>命令：<code>git status</code></p>
<p><img src="http://static.zxinc520.com/blog/20190711/85IXkLM5Wusf.png?imageslim" alt="mark"></p>
<h4 id="add-补充-–-添加到大门口"><a href="#add-补充-–-添加到大门口" class="headerlink" title="add 补充 – 添加到大门口"></a>add 补充 – 添加到大门口</h4><p>命令 ：<code>git add .</code></p>
<h4 id="一次性-–-放入仓库"><a href="#一次性-–-放入仓库" class="headerlink" title="一次性 – 放入仓库"></a>一次性 – 放入仓库</h4><blockquote>
<p>合并 add 和 commit 命令</p>
</blockquote>
<p>命令：<code>git commit --all -m &quot;这是一次性的操作&quot;</code></p>
<h3 id="Git-查看日志"><a href="#Git-查看日志" class="headerlink" title="Git 查看日志"></a>Git 查看日志</h3><blockquote>
<p>查看日志—-能够查看自己提交的信息</p>
<p><code>git log</code>：查看历史提交的日志</p>
<p><code>git log --oneline</code> 可以看到精简版的日志</p>
</blockquote>
<p>命令：<code>git log</code></p>
<p><img src="http://static.zxinc520.com/blog/20190711/PBubR1jYW0fX.png?imageslim" alt="mark"></p>
<p>命令：<code>git log --oneline</code></p>
<p><img src="http://static.zxinc520.com/blog/20190711/bDLltWMjdSo2.png?imageslim" alt="mark"></p>
<h3 id="Git-版本回退"><a href="#Git-版本回退" class="headerlink" title="Git 版本回退"></a>Git 版本回退</h3><blockquote>
<p>git 版本回退</p>
<p>场景：如果最后一次提交的代码有误，可以通过 git 版本回退，回到代码无误的那一个状态。</p>
</blockquote>
<h4 id="根据索引回退"><a href="#根据索引回退" class="headerlink" title="根据索引回退"></a>根据索引回退</h4><ol>
<li>使用命令 <code>git log --oneline</code>查看状态</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/3RDzcU0Fo8Vy.png?imageslim" alt="mark"></p>
<ol start="2">
<li>命令：<code>git reset --hard Head~0 </code> ( 向后退 <strong>0</strong> 次)</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/Uobb7X1EwPUd.png?imageslim" alt="mark"></p>
<ol start="3">
<li>命令：<code>git reset --hard Head~1</code> （向后退 <strong>1</strong> 次）；此时代码回退了<strong>一次</strong> 。</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/3lM4UYpv7mQw.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190711/rwuTTeqbAFNc.png?imageslim" alt="mark"></p>
<h4 id="通过版本号回退"><a href="#通过版本号回退" class="headerlink" title="通过版本号回退"></a>通过版本号回退</h4><blockquote>
<p>通过版本号回退</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190712/VsLjP0uf8h8D.png?imageslim" alt="mark"></p>
<p>命令：<code>git reset --hard ac97cbc </code> 回车执行</p>
<p><img src="http://static.zxinc520.com/blog/20190712/puqQzAUO57un.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190712/4b2kofXa5m3B.png?imageslim" alt="mark"></p>
<h4 id="git-reflog"><a href="#git-reflog" class="headerlink" title="git reflog"></a>git reflog</h4><blockquote>
<p>可以看到每一次切换版本记录</p>
</blockquote>
<p>命令：<code>git reflog</code> 查看总体记录</p>
<p><img src="http://static.zxinc520.com/blog/20190712/rIsddoYu54q2.png?imageslim" alt="mark"></p>
<h3 id="Git-分支的新建与合并"><a href="#Git-分支的新建与合并" class="headerlink" title="Git 分支的新建与合并"></a>Git 分支的新建与合并</h3><blockquote>
<p>git 创建分支</p>
<p>运用场景：放开发者只开发完成部分代码，想保存代码,为了能够后续继续开发，可以创建分支。</p>
</blockquote>
<p><strong>现在让我们来看一个简单的分支与合并的例子，实际工作中大体也会用到这样的工作流程：</strong></p>
<ol>
<li>开发某个网站。</li>
<li>为实现某个新的需求，创建一个分支。</li>
<li>在这个分支上开展工作。</li>
</ol>
<p><strong>假设此时，你突然接到一个电话说有个很严重的问题需要紧急修补，那么可以按照下面的方式处理：</strong></p>
<ol>
<li>返回到原先已经发布到生产服务器上的分支。</li>
<li>为这次紧急修补建立一个新分支，并在其中修复问题。</li>
<li>通过测试后，回到生产服务器所在的分支，将修补分支合并进来，然后再推送到生产服务器上。</li>
<li>切换到之前实现新需求的分支，继续工作。</li>
</ol>
<h3 id="Git-分支的新建"><a href="#Git-分支的新建" class="headerlink" title="Git 分支的新建"></a>Git 分支的新建</h3><p><strong>新建分支</strong> ：命令：<code>git branch &lt;name&gt;</code></p>
<p><img src="http://static.zxinc520.com/blog/20190712/vCIxtjnYlgsu.png?imageslim" alt="mark"></p>
<p><strong>查看分支信息</strong> ：命令：<code>git branch</code> （ <strong>绿色</strong> –&gt; 代表正处于此分支）</p>
<p><img src="http://static.zxinc520.com/blog/20190712/R3t4POgEphiO.png?imageslim" alt="mark"></p>
<p><strong>切换分支</strong> ：命令 <code>git checkout dev</code></p>
<p><img src="http://static.zxinc520.com/blog/20190712/MQQVVoNGu41k.png?imageslim" alt="mark"></p>
<h4 id="在分支中提交部分代码"><a href="#在分支中提交部分代码" class="headerlink" title="在分支中提交部分代码"></a>在分支中提交部分代码</h4><blockquote>
<p>类似于主分支 提交（一样）</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190712/gBcACkrl5Gxf.png?imageslim" alt="mark"></p>
<h3 id="Git-合并分支"><a href="#Git-合并分支" class="headerlink" title="Git 合并分支"></a>Git 合并分支</h3><blockquote>
<p>合并分支</p>
<p><strong>需求</strong>：将 dev 分支 合并到主分支（master 分支）上。</p>
</blockquote>
<ol>
<li>切换到 <strong>master</strong> 分支：命令：<code>git checkout master</code></li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190712/bKIzXXwv3Xnm.png?imageslim" alt="mark"></p>
<ol start="2">
<li>合并 dev 分支 到 master 分支上：命令：<code>git merge dev</code></li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190712/uMQR0k4u6qTT.png?imageslim" alt="mark"></p>
<ol start="3">
<li>查看自己的提交记录 命令：<code>git log --oneline</code></li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190712/gu7FKi6tGBkf.png?imageslim" alt="mark"></p>
<h3 id="上传至-github"><a href="#上传至-github" class="headerlink" title="上传至 github"></a>上传至 github</h3><blockquote>
<p><code>git push [地址] master</code></p>
<p><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/896043488029600/900937935629664">参考廖雪峰的官方网站 github 篇</a></p>
<p>【地址】：例如：<a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Travel.git">https://github.com/ZhChen7/Travel.git</a></p>
</blockquote>
<p><strong>git push</strong> 推项目到 github：<code>git push [地址] master</code></p>
<h4 id="从-github-拉下项目"><a href="#从-github-拉下项目" class="headerlink" title="从 github 拉下项目"></a>从 github 拉下项目</h4><blockquote>
<p>github 拉下项目</p>
<p>【地址】：例如：<a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Travel.git">https://github.com/ZhChen7/Travel.git</a></p>
</blockquote>
<p><strong>git pull</strong> 从 github 拉下项目 ：<code>git pull [地址] master</code></p>
<p><strong>git clone</strong> 从 github 复制项目（往往在第一次使用）：<code>git clone [地址]</code></p>
<h3 id="通过-ssh-方式-上传-代码"><a href="#通过-ssh-方式-上传-代码" class="headerlink" title="通过 ssh 方式 上传 代码"></a>通过 ssh 方式 上传 代码</h3><blockquote>
<p>公钥 和 私钥 ；两者之间是有关联的。</p>
</blockquote>
<ol>
<li><p>生成 <strong>公钥</strong> 和 <strong>私钥</strong></p>
<p>命令：<code>ssh-keygen -t rsa -C &lt;邮箱&gt;</code></p>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190712/2GKvEKipn11B.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190712/9qHzNoUvBgy2.png?imageslim" alt="mark"></p>
<p><strong>找到生成的文件</strong> ：</p>
<p><img src="http://static.zxinc520.com/blog/20190712/DPxGphRT9AXv.png?imageslim" alt="mark"></p>
<p><strong>给自己的 github 配置 ssh</strong> ：</p>
<p><img src="http://static.zxinc520.com/blog/20190712/eK9KUtgXVIrN.png?imageslim" alt="mark"></p>
<h3 id="提交冲突"><a href="#提交冲突" class="headerlink" title="提交冲突"></a>提交冲突</h3><blockquote>
<p>先 <strong>pull</strong> 还是 先 <strong>push</strong></p>
<p>应用场景：多人共同提交时，产生提交冲突时。</p>
</blockquote>
<p><strong>解决方案</strong>：<strong>先 pull</strong> 然后 <strong>后 push</strong></p>
<h3 id="push-和-pull-简写"><a href="#push-和-pull-简写" class="headerlink" title="push 和 pull 简写"></a>push 和 pull 简写</h3><blockquote>
<p>push 和 pull 简写</p>
<p>【地址简写】：<code>git remote add &lt;变量名&gt; &lt;远程地址&gt;</code></p>
</blockquote>
<p><strong>配置远程地址</strong>（设置别名）：方便每一次不用输入很长的地址</p>
<p>命令：<code>git remote add origin git@github.com:ZhChen7/Travel.git</code></p>
<p>即：为 <code>git@github.com:ZhChen7/Travel.git</code>设置别名： **origin **</p>
<h4 id="默认关联"><a href="#默认关联" class="headerlink" title="默认关联"></a>默认关联</h4><blockquote>
<p>当我们在 push 时，加上 <strong>-u 参数</strong> ，那么在<strong>下次 push 时</strong>；只用 写 <code>git push</code> 即可上传代码。</p>
<p>（加上 <strong>-u</strong> 之后，git 会把当前分支 与 远程指定的分支 进行<strong>关联</strong>）</p>
</blockquote>
<p>下次 直接写 <code>git push</code> 相当于 写 <code>git push origin master</code> 。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-DataStructure"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/06/25/DataStructure/"
    >数组API</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/06/25/DataStructure/" class="article-date">
  <time datetime="2019-06-25T03:42:57.000Z" itemprop="datePublished">2019-06-25</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/API/">API</a> / <a class="article-category-link" href="/categories/API/%E6%95%B0%E7%BB%84API/">数组API</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="JavaScript-数组那些事"><a href="#JavaScript-数组那些事" class="headerlink" title="JavaScript 数组那些事"></a>JavaScript 数组那些事</h2><blockquote>
<p>JavaScript 数据结构与算法 — <strong>数组</strong> 篇</p>
<p>迭代器函数</p>
<p>ECMAScript 6 和 数组 新功能</p>
</blockquote>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><blockquote>
<p>数组对象的作用是：使用单独的变量名来存储一系列的值**.**</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array">总的方法参考</a></p>
</blockquote>
<h3 id="数组相关操作"><a href="#数组相关操作" class="headerlink" title="数组相关操作:"></a>数组相关操作:</h3><h4 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h4><ul>
<li><p>添加末尾元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr.push(<span class="number">11</span>);</span><br><span class="line">arr.push(<span class="number">12</span>, <span class="number">13</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加首位元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.unshift();</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h4><ul>
<li><p>删除末尾元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.pop();</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除首位元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.shift();</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="在任意位置添加或删除元素"><a href="#在任意位置添加或删除元素" class="headerlink" title="在任意位置添加或删除元素"></a>在任意位置添加或删除元素</h4><blockquote>
<p><strong>splice()</strong> 方法通过删除或替换现有元素或者原地添加新的元素来修改数组,并以数组形式返回被修改的内容。此方法会改变原数组。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/splice">参考</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> months = [<span class="string">&quot;Jan&quot;</span>, <span class="string">&quot;March&quot;</span>, <span class="string">&quot;April&quot;</span>, <span class="string">&quot;June&quot;</span>];</span><br><span class="line">months.splice(<span class="number">1</span>, <span class="number">0</span>, <span class="string">&quot;Feb&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入到索引为1的位置</span></span><br><span class="line"><span class="built_in">console</span>.log(months);</span><br><span class="line"><span class="comment">// 结果: Array [&#x27;Jan&#x27;, &#x27;Feb&#x27;, &#x27;March&#x27;, &#x27;April&#x27;, &#x27;June&#x27;]</span></span><br><span class="line"></span><br><span class="line">months.splice(<span class="number">4</span>, <span class="number">1</span>, <span class="string">&quot;May&quot;</span>);</span><br><span class="line"><span class="comment">// 从索引为4开始 删除一个数据并添加一个 May数据</span></span><br><span class="line"><span class="built_in">console</span>.log(months);</span><br><span class="line"><span class="comment">// 结果: Array [&#x27;Jan&#x27;, &#x27;Feb&#x27;, &#x27;March&#x27;, &#x27;April&#x27;, &#x27;May&#x27;]</span></span><br></pre></td></tr></table></figure>

<h2 id="迭代器函数"><a href="#迭代器函数" class="headerlink" title="迭代器函数"></a>迭代器函数</h2><blockquote>
<p>处理集合中的每个项是很常见的操作。JavaScript 提供了许多迭代集合的方法，从简单的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for"><code>for</code></a>循环到<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>map()</code></a>和<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>filter()</code></a>。迭代器和生成器将迭代的概念直接带入核心语言，并提供了一种机制来自定义<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...of"><code>for...of</code></a>循环的行为 。</p>
</blockquote>
<h3 id="every"><a href="#every" class="headerlink" title="every:"></a>every:</h3><blockquote>
<p><code>**every()**</code> 方法测试一个数组内的所有元素是否都能通过某个指定函数的测试。它返回一个布尔值。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every">参考</a></p>
<p>描述: <code>every</code> 方法为数组中的每个元素执行一次 <code>callback</code> 函数，直到它找到一个会使 <code>callback</code> 返回 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Glossary/falsy">falsy</a> 的元素。如果发现了一个这样的元素，<code>every</code> 方法将会立即返回 <code>false</code>。否则，<code>callback</code> 为每一个元素返回 <code>true</code>，<code>every</code> 就会返回 <code>true</code>。<code>callback</code> 只会为那些已经被赋值的索引调用。不会为那些被删除或从未被赋值的索引调用。</p>
<p><strong>注意</strong>：若收到一个空数组，此方法在一切情况下都会返回 <code>true</code>。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBigEnough</span>(<span class="params">element, index, array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> element &gt;= <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line">[<span class="number">12</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">130</span>, <span class="number">44</span>].every(isBigEnough); <span class="comment">// false</span></span><br><span class="line">[<span class="number">12</span>, <span class="number">54</span>, <span class="number">18</span>, <span class="number">130</span>, <span class="number">44</span>].every(isBigEnough); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="some"><a href="#some" class="headerlink" title="some:"></a>some:</h3><blockquote>
<p><code>**some()**</code> 方法测试是否至少有一个元素可以通过被提供的函数方法。该方法返回一个 Boolean 类型的值。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/some">参考</a></p>
<p><code>some()</code> 为数组中的每一个元素执行一次 <code>callback</code> 函数，直到找到一个使得 callback <strong>返回一个“真值”</strong>（即可转换为布尔值 true 的值）。如果找到了这样一个值，<code>some()</code> 将会立即返回 <code>true</code>。否则，<code>some()</code> 返回 <code>false</code>。<code>callback</code> 只会在那些”有值“的索引上被调用，不会在那些被删除或从来未被赋值的索引上调用。</p>
<p><code>callback</code> 被调用时传入三个参数：元素的值，元素的索引，被遍历的数组。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBelowThreshold</span>(<span class="params">currentValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> currentValue &lt; <span class="number">40</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="number">30</span>, <span class="number">41</span>, <span class="number">29</span>, <span class="number">10</span>, <span class="number">13</span>];</span><br><span class="line"><span class="keyword">var</span> array2 = [<span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>];</span><br><span class="line">array1.some(isBelowThreshold); <span class="comment">//true</span></span><br><span class="line">array2.some(isBelowThreshold); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach:"></a>foreach:</h3><blockquote>
<p><code>**forEach()**</code> 方法对数组的每个元素执行一次提供的函数。</p>
<p><code>forEach</code> 方法按升序为数组中含有效值的每一项执行一次<code>callback</code> 函数，那些已删除或者未初始化的项将被跳过（例如在稀疏数组上）。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach">参考</a></p>
</blockquote>
<blockquote>
<p><strong>注意：</strong> foreach 没有办法中止或者跳出 <code>forEach()</code> 循环，除了抛出一个异常。如果你需要这样，使用 <code>forEach()</code> 方法是错误的。</p>
<p>若你需要提前终止循环，你可以使用：</p>
<ul>
<li>简单循环</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...of">for…of</a> 循环</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every"><code>Array.prototype.every()</code></a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/some"><code>Array.prototype.some()</code></a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/find"><code>Array.prototype.find()</code></a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex"><code>Array.prototype.findIndex()</code></a></li>
</ul>
<p>这些数组方法可以对数组元素判断，以便确定是否需要继续遍历：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every"><code>every()</code></a>，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/some"><code>some()</code></a>，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/find"><code>find()</code></a>，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex"><code>findIndex()</code></a></p>
<p>译者注：若条件允许，也可以使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>filter()</code></a> 提前过滤出需要遍历的部分，再用 <code>forEach()</code> 处理。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line"></span><br><span class="line">array1.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(element);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// expected output: &quot;a&quot;</span></span><br><span class="line"><span class="comment">// expected output: &quot;b&quot;</span></span><br><span class="line"><span class="comment">// expected output: &quot;c&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="map-和-filter-方法"><a href="#map-和-filter-方法" class="headerlink" title="map 和 filter 方法"></a>map 和 filter 方法</h3><blockquote>
<p>JavaScript 还有两个会 <strong>返回新数组</strong> 的遍历方法.</p>
</blockquote>
<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><blockquote>
<p><code>**map()**</code> 方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map">参考</a></p>
<p><code>map</code> 方法会给原数组中的每个元素都按顺序调用一次 <code>callback</code> 函数。<code>callback</code> 每次执行后的返回值（包括 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>）组合起来形成一个新数组。 <code>callback</code> 函数只会在有值的索引上被调用；那些从来没被赋过值或者使用 <code>delete</code> 删除的索引则不会被调用。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// pass a function to map</span></span><br><span class="line"><span class="keyword">const</span> map1 = array1.map(<span class="function">(<span class="params">x</span>) =&gt;</span> x * <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map1);</span><br><span class="line"><span class="comment">// expected output: Array [2, 8, 18, 32]</span></span><br></pre></td></tr></table></figure>

<h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><blockquote>
<p><code>**filter()**</code> 方法创建一个新数组, 其包含通过所提供函数实现的测试的所有元素。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter">参考</a></p>
<p><code>filter</code> 为数组中的每个元素调用一次 <code>callback</code> 函数，并利用所有使得 <code>callback</code> 返回 true 或<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Truthy">等价于 true 的值</a>的元素创建一个新数组。<code>callback</code> 只会在已经赋值的索引上被调用，对于那些已经被删除或者从未被赋值的索引不会被调用。那些没有通过 <code>callback</code> 测试的元素会被跳过，不会被包含在新数组中.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> words = [<span class="string">&quot;spray&quot;</span>, <span class="string">&quot;limit&quot;</span>, <span class="string">&quot;elite&quot;</span>, <span class="string">&quot;exuberant&quot;</span>, <span class="string">&quot;destruction&quot;</span>, <span class="string">&quot;present&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = words.filter(<span class="function">(<span class="params">word</span>) =&gt;</span> word.length &gt; <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 上面是ES6里面的箭头函数,下面是完整版</span></span><br><span class="line"><span class="comment">* const result = words.filter(function (e) &#123;</span></span><br><span class="line"><span class="comment">    return e.length&gt;6</span></span><br><span class="line"><span class="comment">&#125;);</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="comment">// expected output: Array [&quot;exuberant&quot;, &quot;destruction&quot;, &quot;present&quot;]</span></span><br></pre></td></tr></table></figure>

<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce:"></a>reduce:</h3><blockquote>
<p><code>**reduce()**</code> 方法对数组中的每个元素执行一个由您提供的<strong>reducer</strong>函数(升序执行)，将其结果汇总为单个返回值。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">参考</a></p>
<p><code>reduce</code>为数组中的每一个元素依次执行<code>callback</code>函数，不包括数组中被删除或从未被赋值的元素，接受四个参数：</p>
<ul>
<li><code>accumulator 累计器</code></li>
<li><code>currentValue 当前值</code></li>
<li><code>currentIndex 当前索引</code></li>
<li><code>array 数组</code></li>
</ul>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> reducer = <span class="function">(<span class="params">accumulator, currentValue</span>) =&gt;</span> accumulator + currentValue;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 + 2 + 3 + 4</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.reduce(reducer));</span><br><span class="line"><span class="comment">// expected output: 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5 + 1 + 2 + 3 + 4</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.reduce(reducer, <span class="number">5</span>));</span><br><span class="line"><span class="comment">// expected output: 15</span></span><br></pre></td></tr></table></figure>

<p>_假如运行下段<code>reduce()</code>代码_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].reduce(<span class="function"><span class="keyword">function</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  accumulator,</span></span></span><br><span class="line"><span class="function"><span class="params">  currentValue,</span></span></span><br><span class="line"><span class="function"><span class="params">  currentIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">  array</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> accumulator + currentValue;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>_callback 被调用四次，每次调用的参数和返回值如下表_：</p>
<p><img src="http://static.zxinc520.com/blog/20190625/FxoC6IyrTRcr.png?imageslim" alt="mark"></p>
<h2 id="ECMAScript-6-和-数组-新功能"><a href="#ECMAScript-6-和-数组-新功能" class="headerlink" title="ECMAScript 6 和 数组 新功能"></a>ECMAScript 6 和 数组 新功能</h2><blockquote>
<p>ECMAScript 6 和 数组 新功能</p>
<p>这里主要介绍下 <strong>数组 ES6</strong> 新特性</p>
<p><a target="_blank" rel="noopener" href="http://es6.ruanyifeng.com/#docs/iterator">Iterator 和 for…of 循环</a></p>
</blockquote>
<h3 id="for-…of-循环迭代"><a href="#for-…of-循环迭代" class="headerlink" title="for …of 循环迭代"></a>for …of 循环迭代</h3><blockquote>
<p><strong>强大的 for-of 循环</strong></p>
<p>还记得在《<a target="_blank" rel="noopener" href="http://www.infoq.com/cn/articles/es6-in-depth-an-introduction">深入浅出 ES6（一）：ES6 是什么</a>》中我向你们承诺过的话么？ES6 不会破坏你已经写好的 JS 代码。目前看来，成千上万的 Web 网站依赖 for-in 循环，其中一些网站甚至将其用于数组遍历。如果想通过修正 for-in 循环增加数组遍历支持会让这一切变得更加混乱，因此，标准委员会在 ES6 中增加了一种新的循环语法来解决目前的问题。</p>
<p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/es6-in-depth-iterators-and-the-for-of-loop">参考</a></p>
</blockquote>
<hr>
<h4 id="关于-for…in"><a href="#关于-for…in" class="headerlink" title="关于 for…in"></a>关于 for…in</h4><blockquote>
<p>这 <strong>绝对是一个糟糕的选择</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> myArray) &#123;</span><br><span class="line">  <span class="comment">// 千万别这样做</span></span><br><span class="line">  <span class="built_in">console</span>.log(myArray[index]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这 <strong>绝对是一个糟糕的选择</strong>，为什么呢？</p>
<ul>
<li>在这段代码中，赋给 index 的值不是实际的数字，而是字符串“0”、“1”、“2”，此时很可能在无意之间进行字符串算数计算，例如：“2” + 1 == “21”，这给编码过程带来极大的不便。</li>
<li>作用于数组的 for-in 循环体除了遍历数组元素外，还会遍历<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Glossary/Expando">自定义</a>属性。举个例子，如果你的数组中有一个可枚举属性 myArray.name，循环将额外执行一次，遍历到名为“name”的索引。就连数组原型链上的属性都能被访问到。</li>
<li>最让人震惊的是，在某些情况下，这段代码可能按照随机顺序遍历数组元素。</li>
<li>简而言之，for-in 是为普通对象设计的，你可以遍历得到字符串类型的键，因此不适用于数组遍历。</li>
</ul>
<hr>
<h3 id="强大的-for-of-循环"><a href="#强大的-for-of-循环" class="headerlink" title="强大的 for-of 循环"></a>强大的 for-of 循环</h3><blockquote>
<p>我们将要探究一下 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of">for-of</a> 循环的外表下隐藏着哪些强大的功能。</p>
<p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/es6-in-depth-iterators-and-the-for-of-loop">参考</a></p>
</blockquote>
<p><strong>优势:</strong></p>
<ul>
<li>这是最简洁、最直接的遍历数组元素的语法</li>
<li>这个方法避开了 for-in 循环的所有缺陷</li>
<li>与 forEach() 不同的是，它可以正确响应 <strong>break</strong>、<strong>continue</strong> 和 <strong>return</strong> 语句</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> value <span class="keyword">of</span> myArray) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="使用-ES6-新的迭代器"><a href="#使用-ES6-新的迭代器" class="headerlink" title="使用 ES6 新的迭代器"></a>使用 ES6 新的迭代器</h2><blockquote>
<p>使用 ES6 新的迭代器</p>
<p><a target="_blank" rel="noopener" href="http://es6.ruanyifeng.com/#docs/iterator">参考</a></p>
</blockquote>
<h3 id="Iterator（遍历器）的概念"><a href="#Iterator（遍历器）的概念" class="headerlink" title="Iterator（遍历器）的概念"></a>Iterator（遍历器）的概念</h3><p>JavaScript 原有的表示“集合”的数据结构，主要是数组（<code>Array</code>）和对象（<code>Object</code>），ES6 又添加了<code>Map</code>和<code>Set</code>。这样就有了四种数据集合，用户还可以组合使用它们，定义自己的数据结构，比如数组的成员是<code>Map</code>，<code>Map</code>的成员是对象。这样就需要一种统一的接口机制，来处理所有不同的数据结构。</p>
<p>遍历器（Iterator）就是这样一种机制。它是一种接口，为各种不同的数据结构提供统一的访问机制。任何数据结构只要部署 Iterator 接口，就可以完成遍历操作（即依次处理该数据结构的所有成员）。</p>
<p><strong>Iterator 的作用有三个</strong>：</p>
<ul>
<li><p>一是为各种数据结构，提供一个统一的、简便的访问接口；</p>
</li>
<li><p>二是使得数据结构的成员能够按某种次序排列；</p>
</li>
<li><p>三是 ES6 创造了一种新的遍历命令<code>for...of</code>循环，Iterator 接口主要供<code>for...of</code>消费。</p>
</li>
</ul>
<p><strong>Iterator 的遍历过程是这样的</strong> :</p>
<p>（1）创建一个指针对象，指向当前数据结构的起始位置。也就是说，遍历器对象本质上，就是一个指针对象。</p>
<p>（2）第一次调用指针对象的<code>next</code>方法，可以将指针指向数据结构的第一个成员。</p>
<p>（3）第二次调用指针对象的<code>next</code>方法，指针就指向数据结构的第二个成员。</p>
<p>（4）不断调用指针对象的<code>next</code>方法，直到它指向数据结构的结束位置。</p>
<p>每一次调用<code>next</code>方法，都会返回数据结构的当前成员的信息。具体来说，就是返回一个包含<code>value</code>和<code>done</code>两个属性的对象。其中，<code>value</code>属性是当前成员的值，<code>done</code>属性是一个布尔值，表示遍历是否结束</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> it = makeIterator([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>]);</span><br><span class="line"></span><br><span class="line">it.next(); <span class="comment">// &#123; value: &quot;a&quot;, done: false &#125;</span></span><br><span class="line">it.next(); <span class="comment">// &#123; value: &quot;b&quot;, done: false &#125;</span></span><br><span class="line">it.next(); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeIterator</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> nextIndex = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    next: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> nextIndex &lt; array.length</span><br><span class="line">        ? &#123; <span class="attr">value</span>: array[nextIndex++], <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">        : &#123; <span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面代码定义了一个<code>makeIterator</code>函数，它是一个遍历器生成函数，作用就是返回一个遍历器对象。对数组<code>[&#39;a&#39;, &#39;b&#39;]</code>执行这个函数，就会返回该数组的遍历器对象（即指针对象）<code>it</code>。</p>
<h3 id="默认-Iterator-接口"><a href="#默认-Iterator-接口" class="headerlink" title="默认 Iterator 接口"></a>默认 Iterator 接口</h3><blockquote>
<p>Iterator 接口的目的，就是为所有数据结构，提供了一种统一的访问机制，即<code>for...of</code>循环（详见下文）。当使用<code>for...of</code>循环遍历某种数据结构时，该循环会自动去寻找 Iterator 接口。</p>
<p>一种数据结构只要部署了 Iterator 接口，我们就称这种数据结构是“可遍历的”（iterable）。</p>
</blockquote>
<p>ES6 的有些数据结构原生具备 Iterator 接口（比如数组），即不用任何处理，就可以被<code>for...of</code>循环遍历。原因在于，这些数据结构原生部署了<code>Symbol.iterator</code>属性（详见下文），另外一些数据结构没有（比如对象）。凡是部署了<code>Symbol.iterator</code>属性的数据结构，就称为部署了遍历器接口。调用这个接口，就会返回一个遍历器对象。</p>
<p>原生具备 Iterator 接口的数据结构如下。</p>
<ul>
<li>Array</li>
<li>Map</li>
<li>Set</li>
<li>String</li>
<li>TypedArray</li>
<li>函数的 arguments 对象</li>
<li>NodeList 对象</li>
</ul>
<p>下面的例子是数组的<code>Symbol.iterator</code>属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> iter = arr[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line"></span><br><span class="line">iter.next(); <span class="comment">// &#123; value: &#x27;a&#x27;, done: false &#125;</span></span><br><span class="line">iter.next(); <span class="comment">// &#123; value: &#x27;b&#x27;, done: false &#125;</span></span><br><span class="line">iter.next(); <span class="comment">// &#123; value: &#x27;c&#x27;, done: false &#125;</span></span><br><span class="line">iter.next(); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，变量<code>arr</code>是一个数组，原生就具有遍历器接口，部署在<code>arr</code>的<code>Symbol.iterator</code>属性上面。所以，调用这个属性，就得到遍历器对象。</p>
<h3 id="数组的-entries、keys-和-values-方法"><a href="#数组的-entries、keys-和-values-方法" class="headerlink" title="数组的 entries、keys 和 values 方法"></a>数组的 entries、keys 和 values 方法</h3><blockquote>
<p>ES6 提供三个新的方法——<code>entries()</code>，<code>keys()</code>和<code>values()</code>——用于遍历数组。它们都返回一个遍历器对象（详见《Iterator》一章），可以用<code>for...of</code>循环进行遍历，唯一的区别是<code>keys()</code>方法是对 <strong>键名</strong> 的遍历、<code>values()</code>方法是对 <strong>键值</strong> 的遍历，<code>entries()</code>方法是对 <strong>键值对</strong> 的遍历。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">of</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>].keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> elem <span class="keyword">of</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>].values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;a&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;b&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [index, elem] <span class="keyword">of</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>].entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index, elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0 &quot;a&quot;</span></span><br><span class="line"><span class="comment">// 1 &quot;b&quot;</span></span><br></pre></td></tr></table></figure>

<p>如果不使用<code>for...of</code>循环，可以手动调用遍历器对象的<code>next</code>方法，进行遍历。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> letter = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> entries = letter.entries();</span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [0, &#x27;a&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [1, &#x27;b&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [2, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="Array-from-方法"><a href="#Array-from-方法" class="headerlink" title="Array.from()方法"></a>Array.from()方法</h3><blockquote>
<p><code>Array.from()</code>方法用于将两类对象转为真正的数组：类似数组的对象（array-like object）和可遍历（iterable）的对象（包括 ES6 新增的数据结构 Set 和 Map）。</p>
<p><a target="_blank" rel="noopener" href="http://www.waibo.wang/bible/es6/html/8/8.2.html">参考</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">  <span class="number">0</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="string">&quot;b&quot;</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="string">&quot;c&quot;</span>,</span><br><span class="line">  length: <span class="number">3</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5的写法 ==&gt; [].slice.call(arguments)能将具有length属性的对象转成数组：</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [].slice.call(arrayLike); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6的写法</span></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="built_in">Array</span>.from(arrayLike); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ae57baecc57d">你遇到过 [ ].slice.call() 吗？</a></p>
<p>实际应用中，常见的类似数组的对象是 DOM 操作返回的 NodeList 集合，以及函数内部的<code>arguments</code>对象。<code>Array.from()</code>方法都可以将它们转为真正的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NodeList对象</span></span><br><span class="line"><span class="keyword">let</span> ps = <span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;p&quot;</span>);</span><br><span class="line"><span class="built_in">Array</span>.from(ps).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">p</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(p);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// arguments对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>querySelectorAll</code>方法返回的是一个类似数组的对象，可以将这个对象转为真正的数组，再使用<code>forEach</code>方法。</p>
<p>只要是部署了 Iterator 接口的数据结构，<code>Array.from()</code>方法都能将其转为数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="comment">// [&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> namesSet = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>]);</span><br><span class="line"><span class="built_in">Array</span>.from(namesSet); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>值得提醒的是，扩展运算符（<code>...</code>）也可以将某些数据结构转为数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// arguments对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> args = [...arguments];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NodeList对象</span></span><br><span class="line">[...document.querySelectorAll(<span class="string">&quot;div&quot;</span>)];</span><br></pre></td></tr></table></figure>

<p>扩展运算符背后调用的是遍历器接口（<code>Symbol.iterator</code>），如果一个对象没有部署这个接口，就无法转换。<code>Array.from()</code>方法还支持类似数组的对象。所谓类似数组的对象，本质特征只有一点，即必须有<code>length</code>属性。因此，任何有<code>length</code>属性的对象，都可以通过<code>Array.from()</code>方法转为数组，而此时扩展运算符就无法转换。</p>
<p>对于还没有部署该方法的浏览器，可以用<code>Array.prototype.slice</code>方法替代。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> toArray = (<span class="function">() =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from ? <span class="built_in">Array</span>.from : <span class="function">(<span class="params">obj</span>) =&gt;</span> [].slice.call(obj))();</span><br></pre></td></tr></table></figure>

<p>Array.from()<code>方法还可以接受第二个参数，作用类似于数组的</code>map`方法，用来对每个元素进行处理，将处理后的值放入返回的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(arrayLike, <span class="function">(<span class="params">x</span>) =&gt;</span> x * x);</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="built_in">Array</span>.from(arrayLike).map(<span class="function">(<span class="params">x</span>) =&gt;</span> x * x);</span><br><span class="line"></span><br><span class="line">arr1 = <span class="built_in">Array</span>.from([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="function">(<span class="params">e</span>) =&gt;</span> e * e);</span><br><span class="line"><span class="built_in">console</span>.log(arr1); <span class="comment">//  [ 1, 4, 9 ]</span></span><br></pre></td></tr></table></figure>

<h3 id="Array-of-方法"><a href="#Array-of-方法" class="headerlink" title="Array.of()方法"></a>Array.of()方法</h3><blockquote>
<p><code>Array.of()</code>方法用于将一组值，转换为数组。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>, <span class="number">11</span>, <span class="number">8</span>); <span class="comment">// [3,11,8]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>); <span class="comment">// [3]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>).length; <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>这个方法的主要目的，是弥补数组构造函数<code>Array()</code>的不足。因为参数个数的不同，会导致<code>Array()</code>的行为有差异。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>(); <span class="comment">// []</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>); <span class="comment">// [, , ,]</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>, <span class="number">11</span>, <span class="number">8</span>); <span class="comment">// [3, 11, 8]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">//[ &lt;3 empty items&gt; ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr.length); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>Array</code>方法没有参数、一个参数、三个参数时，返回结果都不一样。只有当参数个数不少于 2 个时，<code>Array()</code>才会返回由参数组成的新数组。参数个数只有一个时，实际上是指定数组的长度。</p>
<p><code>Array.of()</code>方法基本上可以用来替代<code>Array()</code>或<code>new Array()</code>，并且不存在由于参数不同而导致的重载。它的行为非常统一。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of(); <span class="comment">// []</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="literal">undefined</span>); <span class="comment">// [undefined]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>); <span class="comment">// [1]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure>

<p><code>Array.of()</code>方法总是返回参数值组成的数组。如果没有参数，就返回一个空数组。</p>
<p><code>Array.of()</code>方法可以用下面的代码模拟实现。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ArrayOf</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [].slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数组实例的-fill-方法"><a href="#数组实例的-fill-方法" class="headerlink" title="数组实例的 fill()方法"></a>数组实例的 fill()方法</h3><blockquote>
<p><code>fill()</code>方法使用给定值，填充一个数组。</p>
<p><a target="_blank" rel="noopener" href="http://www.waibo.wang/bible/es6/html/8/8.6.html">参考</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>].fill(<span class="number">7</span>); <span class="comment">// [7, 7, 7]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>).fill(<span class="number">7</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [7, 7, 7]</span></span><br></pre></td></tr></table></figure>

<p>上面代码表明，<code>fill()</code>方法用于空数组的初始化非常方便。数组中已有的元素，会被全部抹去。</p>
<p><code>fill()</code>方法还可以接受第二个和第三个参数，用于指定填充的起始位置和结束位置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>]</span><br><span class="line">  .fill(<span class="number">7</span>, <span class="number">1</span>, <span class="number">2</span>) <span class="comment">// [&#x27;a&#x27;, 7, &#x27;c&#x27;]</span></span><br><span class="line">  [(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)].fill(<span class="number">7</span>, <span class="number">1</span>, <span class="number">4</span>); <span class="comment">// [ &#x27;a&#x27;, 7, 7, 7, 2, 3 ]</span></span><br></pre></td></tr></table></figure>

<p>上面代码表示，<code>fill()</code>方法从 1 号位开始，向原数组填充 7，到 2 号位之前结束。</p>
<h3 id="数组实例的-copyWithin-方法"><a href="#数组实例的-copyWithin-方法" class="headerlink" title="数组实例的 copyWithin()方法"></a>数组实例的 copyWithin()方法</h3><blockquote>
<p>数组实例的<code>copyWithin()</code>方法，在当前数组内部，将指定位置的成员复制到其他位置（会覆盖原有成员），然后返回当前数组。也就是说，使用这个方法，会修改当前数组。</p>
</blockquote>
<p><u>Array.prototype.copyWithin(target, start = 0, end = this.length)</u> ：</p>
<ul>
<li>它接受三个参数。<ul>
<li>target（必需）：从该位置开始替换数据。</li>
<li>start（可选）：从该位置开始读取数据，默认为 0。如果为负值，表示倒数。</li>
<li>end（可选）：到该位置前停止读取数据，默认等于数组长度。如果为负值，表示倒数。</li>
</ul>
</li>
</ul>
<p>这三个参数都应该是数值，如果不是，会自动转为数值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>); <span class="comment">// [4, 5, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<p>上面代码表示将从 3 号位直到数组结束的成员（4 和 5），复制到从 0 号位开始的位置，结果覆盖了原来的 1 和 2。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将3号位复制到0号位</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>) <span class="comment">// [4, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// -2相当于3号位，-1相当于4号位</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">-2</span>, <span class="number">-1</span>) <span class="comment">// [4, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将3号位复制到0号位</span></span><br><span class="line">[].copyWithin.call(&#123;<span class="attr">length</span>: <span class="number">5</span>, <span class="number">3</span>: <span class="number">1</span>&#125;, <span class="number">0</span>, <span class="number">3</span>) <span class="comment">// &#123;0: 1, 3: 1, length: 5&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将2号位到数组结束，复制到0号位</span></span><br><span class="line"><span class="keyword">let</span> i32a = <span class="keyword">new</span> <span class="built_in">Int32Array</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">i32a.copyWithin(<span class="number">0</span>, <span class="number">2</span>);<span class="comment">// Int32Array [3, 4, 5, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对于没有部署 TypedArray 的 copyWithin 方法的平台</span></span><br><span class="line"><span class="comment">// 需要采用下面的写法</span></span><br><span class="line">[].copyWithin.call(<span class="keyword">new</span> <span class="built_in">Int32Array</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]), <span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="comment">// Int32Array [4, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<h3 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h3><blockquote>
<p>扩展运算符（spread）是三个点（<code>...</code>）。它好比 rest 参数的逆运算，将一个数组转为用逗号分隔的参数序列。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]) <span class="comment">// 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>, ...[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>) <span class="comment">// 1 2 3 4 5</span></span><br><span class="line"></span><br><span class="line">[...document.querySelectorAll(<span class="string">&#x27;div&#x27;</span>)] <span class="comment">// [&lt;div&gt;, &lt;div&gt;, &lt;div&gt;]</span></span><br></pre></td></tr></table></figure>

<p>该运算符主要用于函数调用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">array, ...items</span>) </span>&#123;</span><br><span class="line">  array.push(...items);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numbers = [<span class="number">4</span>, <span class="number">38</span>];</span><br><span class="line">add(...numbers); <span class="comment">// 42</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>array.push(...items)</code>和<code>add(...numbers)</code>这两行，都是函数的调用，它们的都使用了扩展运算符。该运算符将一个数组，变为参数序列。</p>
<p>扩展运算符与正常的函数参数可以结合使用，非常灵活。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">v, w, x, y, z</span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">const</span> args = [<span class="number">0</span>, <span class="number">1</span>];</span><br><span class="line">f(<span class="number">-1</span>, ...args, <span class="number">2</span>, ...[<span class="number">3</span>]);</span><br></pre></td></tr></table></figure>

<h4 id="替代数组的-apply-方法"><a href="#替代数组的-apply-方法" class="headerlink" title="替代数组的 apply 方法"></a>替代数组的 apply 方法</h4><blockquote>
<p>由于扩展运算符可以展开数组，所以不再需要<code>apply</code>方法，将数组转为函数的参数了。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5 的写法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y, z</span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> args = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">f.apply(<span class="literal">null</span>, args);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6的写法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y, z</span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">let</span> args = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">f(...args);</span><br></pre></td></tr></table></figure>

<p>下面是扩展运算符取代<code>apply</code>方法的一个实际的例子，应用<code>Math.max</code>方法，简化求出一个数组最大元素的写法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5 的写法</span></span><br><span class="line"><span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, [<span class="number">14</span>, <span class="number">3</span>, <span class="number">77</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 的写法</span></span><br><span class="line"><span class="built_in">Math</span>.max(...[<span class="number">14</span>, <span class="number">3</span>, <span class="number">77</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="built_in">Math</span>.max(<span class="number">14</span>, <span class="number">3</span>, <span class="number">77</span>);</span><br></pre></td></tr></table></figure>

<p>上面代码中，由于 JavaScript 不提供求数组最大元素的函数，所以只能套用<code>Math.max</code>函数，将数组转为一个参数序列，然后求最大值。有了扩展运算符以后，就可以直接用<code>Math.max</code>了。</p>
<p>另一个例子是通过<code>push</code>函数，将一个数组添加到另一个数组的尾部。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5的 写法</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(arr1, arr2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 的写法</span></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr1.push(...arr2);</span><br></pre></td></tr></table></figure>

<h3 id="扩展运算符的应用"><a href="#扩展运算符的应用" class="headerlink" title="扩展运算符的应用"></a>扩展运算符的应用</h3><blockquote>
<p>扩展运算符的应用</p>
</blockquote>
<h4 id="复制数组"><a href="#复制数组" class="headerlink" title="复制数组"></a>复制数组</h4><p>扩展运算符提供了复制数组的简便写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a1 = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a2 = [...a1]; <span class="comment">// 写法一</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [...a2] = a1; <span class="comment">// 写法二</span></span><br></pre></td></tr></table></figure>

<p>上面的两种写法，<code>a2</code>都是<code>a1</code>的克隆。</p>
<h4 id="合并数组"><a href="#合并数组" class="headerlink" title="合并数组"></a>合并数组</h4><p>扩展运算符提供了数组合并的新写法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>].concat(more)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, ...more]</span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> arr3 = [<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5的合并数组</span></span><br><span class="line">arr1.concat(arr2, arr3); <span class="comment">// [ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27; ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6的合并数组</span></span><br><span class="line">[...arr1, ...arr2, ...arr3] <span class="comment">// [ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27; ]</span></span><br></pre></td></tr></table></figure>

<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>扩展运算符还可以将字符串转为真正的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...<span class="string">&quot;hello&quot;</span>]; <span class="comment">// [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]</span></span><br></pre></td></tr></table></figure>

<p>上面的写法，有一个重要的好处，那就是能够正确识别四个字节的 Unicode 字符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;x\uD83D\uDE80y&#x27;</span>.length <span class="comment">// 4</span></span><br><span class="line">[...<span class="string">&#x27;x\uD83D\uDE80y&#x27;</span>].length <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h3 id="数组实例的-find-和-findIndex-方法"><a href="#数组实例的-find-和-findIndex-方法" class="headerlink" title="数组实例的 find() 和 findIndex()方法"></a>数组实例的 find() 和 findIndex()方法</h3><blockquote>
<p>数组实例的<code>find()</code>方法，用于找出第一个符合条件的数组成员。它的参数是一个回调函数，所有数组成员依次执行该回调函数，直到找出第一个返回值为<code>true</code>的成员，然后返回该成员。如果没有符合条件的成员，则返回<code>undefined</code>。</p>
<p>ECMAScript6—find() 和 findIndex()方法——搜索</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">-5</span>, <span class="number">10</span>].find(<span class="function">(<span class="params">n</span>) =&gt;</span> n &lt; <span class="number">0</span>); <span class="comment">// -5</span></span><br></pre></td></tr></table></figure>

<p>上面代码找出数组中第一个小于 0 的成员。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>].find(<span class="function"><span class="keyword">function</span> (<span class="params">value, index, arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value &gt; <span class="number">9</span>;</span><br><span class="line">&#125;); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>find()</code>方法的回调函数可以接受三个参数，依次为当前的值、当前的位置和原数组。</p>
<p>这两个方法都可以接受第二个参数，用来绑定回调函数的<code>**this</code>对象** 。</p>
<p>另外，这两个方法都可以发现<code>NaN</code>，弥补了数组的<code>indexOf()</code>方法的不足。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="literal">NaN</span>]</span><br><span class="line">  .indexOf(<span class="literal">NaN</span>) <span class="comment">// -1</span></span><br><span class="line"></span><br><span class="line">  [<span class="literal">NaN</span>].findIndex(<span class="function">(<span class="params">y</span>) =&gt;</span> <span class="built_in">Object</span>.is(<span class="literal">NaN</span>, y)); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>indexOf</code>方法无法识别数组的<code>NaN</code>成员，但是<code>findIndex()</code>方法可以借助<code>Object.is</code>方法做到。</p>
<h3 id="数组实例的-includes-方法"><a href="#数组实例的-includes-方法" class="headerlink" title="数组实例的 includes()方法"></a>数组实例的 includes()方法</h3><blockquote>
<p><code>Array.prototype.includes()</code>方法返回一个布尔值，表示某个数组是否包含给定的值，与字符串的<code>includes()</code>方法类似。ES2016 引入了该方法。</p>
<p>ECMAScript7 —includes()方法 ——搜索</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">  .includes(<span class="number">2</span>) <span class="comment">// true</span></span><br><span class="line">  [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)].includes(<span class="number">4</span>) <span class="comment">// false</span></span><br><span class="line">  [(<span class="number">1</span>, <span class="number">2</span>, <span class="literal">NaN</span>)].includes(<span class="literal">NaN</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>该方法的第二个参数表示搜索的起始位置，默认为<code>0</code>。如果第二个参数为负数，则表示倒数的位置，如果这时它大于数组长度（比如第二个参数为<code>-4</code>，但数组长度为<code>3</code>），则会重置为从<code>0</code>开始。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">3</span>, <span class="number">3</span>); <span class="comment">// false</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">3</span>, <span class="number">-1</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">  .includes(<span class="number">2</span>, <span class="number">1</span>) <span class="comment">//true</span></span><br><span class="line">  [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)].includes(<span class="number">2</span>, <span class="number">2</span>); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p>没有该方法之前，我们通常使用数组的<code>indexOf()</code>方法，检查是否包含某个值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (arr.indexOf(el) !== <span class="number">-1</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>indexOf()</code>方法有两个缺点，一是不够语义化，它的含义是找到参数值的第一个出现位置，所以要去比较是否不等于<code>-1</code>，表达起来不够直观。二是，它内部使用严格相等运算符（<code>===</code>）进行判断，这会导致对<code>NaN</code>的误判。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>); <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>

<p>另外，Map 和 Set 数据结构有一个<code>has</code>方法，需要注意与<code>includes()</code>区分。</p>
<ul>
<li>Map 结构的<code>has</code>方法，是用来查找键名的，比如<code>Map.prototype.has(key)</code>、<code>WeakMap.prototype.has(key)</code>、<code>Reflect.has(target, propertyKey)</code>。</li>
<li>Set 结构的<code>has</code>方法，是用来查找值的，比如<code>Set.prototype.has(value)</code>、<code>WeakSet.prototype.has(value)</code>。</li>
</ul>
<h3 id="数组的空位"><a href="#数组的空位" class="headerlink" title="数组的空位"></a>数组的空位</h3><blockquote>
<p>数组的空位，是指数组的某一个位置没有任何值。比如，<code>Array</code>构造函数返回的数组都是空位。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>); <span class="comment">// [, , ,]</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>Array(3)</code>返回一个具有 3 个空位的数组。</p>
<p>注意，空位不是<code>undefined</code>，一个位置的值等于<code>undefined</code>，依然是有值的。空位是没有任何值，<code>in</code>运算符可以说明这一点。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> <span class="keyword">in</span> [<span class="literal">undefined</span>, <span class="literal">undefined</span>, <span class="literal">undefined</span>]; <span class="comment">// true</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">in</span> [, , ,]; <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>上面代码说明，第一个数组的 0 号位置是有值的，第二个数组的 0 号位置没有值。</p>
<h4 id="ES5-对空位的处理，已经很不一致了，大多数情况下会忽略空位。"><a href="#ES5-对空位的处理，已经很不一致了，大多数情况下会忽略空位。" class="headerlink" title="ES5 对空位的处理，已经很不一致了，大多数情况下会忽略空位。"></a>ES5 对空位的处理，已经很不一致了，大多数情况下会忽略空位。</h4><ul>
<li><code>forEach()</code>,<code>filter()</code>,<code>reduce()</code>,<code>every()</code>和<code>some()</code>都会跳过空位。</li>
<li><code>map()</code>会跳过空位，但会保留这个值</li>
<li><code>join()</code>和<code>toString()</code>会将空位视为<code>undefined</code>，而<code>undefined</code>和<code>null</code>会被处理成空字符串。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// forEach方法</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].forEach(<span class="function">(<span class="params">x,i</span>) =&gt;</span> <span class="built_in">console</span>.log(x+<span class="string">&#x27;---&#x27;</span>+i)); <span class="comment">// a---1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// filter方法</span></span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>,,<span class="string">&#x27;b&#x27;</span>].filter(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// [&#x27;a&#x27;,&#x27;b&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// every方法</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].every(<span class="function"><span class="params">x</span> =&gt;</span> x===<span class="string">&#x27;a&#x27;</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// reduce方法</span></span><br><span class="line">[<span class="number">1</span>,,<span class="number">2</span>].reduce(<span class="function">(<span class="params">x,y</span>) =&gt;</span> <span class="keyword">return</span> x+y) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// some方法</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].some(<span class="function"><span class="params">x</span> =&gt;</span> x !== <span class="string">&#x27;a&#x27;</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="ES6-则是明确将空位转为undefined。"><a href="#ES6-则是明确将空位转为undefined。" class="headerlink" title="ES6 则是明确将空位转为undefined。"></a>ES6 则是明确将空位转为<code>undefined</code>。</h4><p><code>Array.from</code>方法会将数组的空位，转为<code>undefined</code>，也就是说，这个方法不会忽略空位。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from([<span class="string">&quot;a&quot;</span>, , <span class="string">&quot;b&quot;</span>]); <span class="comment">// [ &quot;a&quot;, undefined, &quot;b&quot; ]</span></span><br></pre></td></tr></table></figure>

<p>扩展运算符（<code>...</code>）也会将空位转为<code>undefined</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...[<span class="string">&quot;a&quot;</span>, , <span class="string">&quot;b&quot;</span>]]; <span class="comment">// [ &quot;a&quot;, undefined, &quot;b&quot; ]</span></span><br></pre></td></tr></table></figure>

<p>copyWithin() 会连空位一起拷贝</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, ,].copyWithin(<span class="number">2</span>, <span class="number">0</span>); <span class="comment">// [,&quot;a&quot;,,&quot;a&quot;]</span></span><br></pre></td></tr></table></figure>

<p><code>fill()</code>会将空位视为正常的数组位置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>).fill(<span class="string">&quot;a&quot;</span>); <span class="comment">// [&quot;a&quot;,&quot;a&quot;,&quot;a&quot;]</span></span><br></pre></td></tr></table></figure>

<p><code>for...of</code>循环也会遍历空位。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [, ,];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，数组<code>arr</code>有两个空位，<code>for...of</code>并没有忽略它们。如果<strong>改成<code>map</code>方法遍历</strong>，空位是会<strong>跳过</strong>的。</p>
<p><code>entries()</code>、<code>keys()</code>、<code>values()</code>、<code>find()</code>和<code>findIndex()</code>会将空位处理成<code>undefined</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// entries()</span></span><br><span class="line">[...[,<span class="string">&#x27;a&#x27;</span>].entries()] <span class="comment">// [[0,undefined], [1,&quot;a&quot;]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// keys()</span></span><br><span class="line">[...[,<span class="string">&#x27;a&#x27;</span>].keys()] <span class="comment">// [0,1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// values()</span></span><br><span class="line">[...[,<span class="string">&#x27;a&#x27;</span>].values()] <span class="comment">// [undefined,&quot;a&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// find()</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].find(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// findIndex()</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].findIndex(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<h2 id="组数排序"><a href="#组数排序" class="headerlink" title="组数排序"></a>组数排序</h2><blockquote>
<p>组数排序</p>
</blockquote>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><blockquote>
<p><code>**sort()**</code> 方法用<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/In-place_algorithm">原地算法</a>对数组的元素进行排序，并返回数组。排序算法现在是<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95#.E7.A9.A9.E5.AE.9A.E6.80.A7">稳定的</a>。默认排序顺序是根据字符串 Unicode 码点。</p>
<p>由于它取决于具体实现，因此无法保证排序的时间和空间复杂性。</p>
<p><strong>sort()</strong> 用来指定按某种顺序进行排列的函数。如果省略，元素按照转换为的字符串的各个字符的 Unicode 位点进行排序。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort">参考</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> months = [<span class="string">&#x27;March&#x27;</span>, <span class="string">&#x27;Jan&#x27;</span>, <span class="string">&#x27;Feb&#x27;</span>, <span class="string">&#x27;Dec&#x27;</span>];</span><br><span class="line">months.sort();</span><br><span class="line"><span class="built_in">console</span>.log(months);</span><br><span class="line"><span class="comment">// expected output: Array [&quot;Dec&quot;, &quot;Feb&quot;, &quot;Jan&quot;, &quot;March&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="number">30</span>, <span class="number">4</span>, <span class="number">21</span>, <span class="number">100000</span>];</span><br><span class="line">array1.sort();</span><br><span class="line"><span class="built_in">console</span>.log(array1);</span><br><span class="line"><span class="comment">// expected output: Array [1, 100000, 21, 30, 4]</span></span><br></pre></td></tr></table></figure>

<h4 id="描述："><a href="#描述：" class="headerlink" title="描述："></a>描述：</h4><p>​ 如果没有指明 <code>compareFunction</code> ，那么元素会按照转换为的字符串的诸个字符的 Unicode 位点进行排序。例如 “Banana” 会被排列到 “cherry” 之前。当数字按由小到大排序时，9 出现在 80 之前，但因为（没有指明 <code>compareFunction</code>），比较的数字会先被转换为字符串，所以在 Unicode 顺序上 “80” 要比 “9” 要靠前。</p>
<p>如果指明了 <code>compareFunction</code> ，那么数组会按照调用该函数的返回值排序。即 a 和 b 是两个将要被比较的元素：</p>
<ul>
<li><p>如果 <code>compareFunction(a, b)</code> 小于 0 ，那么 a 会被排列到 b 之前；</p>
</li>
<li><p>如果 <code>compareFunction(a, b)</code> 等于 0 ， a 和 b 的相对位置不变。备注： ECMAScript 标准并不保证这一行为，而且也不是所有浏览器都会遵守（例如 Mozilla 在 2003 年之前的版本）；</p>
</li>
<li><p>如果 <code>compareFunction(a, b)</code> 大于 0 ， b 会被排列到 a 之前。</p>
</li>
<li><p><code>compareFunction(a, b)</code> 必须总是对相同的输入返回相同的比较结果，否则排序的结果将是不确定的。</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (a &lt; b) &#123;</span><br><span class="line">    <span class="comment">// 按某种排序标准进行比较, a 小于 b</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// a must be equal to b</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>要比较数字而非字符串，比较函数可以简单的以 a 减 b，如下的函数将会将数组升序排列</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compareNumbers</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>sort</code> 方法可以使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/function">函数表达式</a> 方便地书写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = [<span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>];</span><br><span class="line">numbers.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(numbers);</span><br><span class="line"></span><br><span class="line">也可以写成：</span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>];</span><br><span class="line">numbers.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line"><span class="built_in">console</span>.log(numbers);</span><br><span class="line"></span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<h2 id="输出数组为字符串"><a href="#输出数组为字符串" class="headerlink" title="输出数组为字符串"></a>输出数组为字符串</h2><blockquote>
<p>输出数组为字符串</p>
</blockquote>
<h3 id="toString-和-join"><a href="#toString-和-join" class="headerlink" title="toString 和 join"></a>toString 和 join</h3><blockquote>
<p>将数组转为字符串</p>
</blockquote>
<h4 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString"></a>toString</h4><blockquote>
<p><code>**toString()**</code> 返回一个字符串，表示指定的数组及其元素。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Array"><code>Array</code></a>对象覆盖了<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object"><code>Object</code></a>的 <code>toString</code> 方法。对于数组对象，<code>toString</code> 方法连接数组并返回一个字符串，其中包含用逗号分隔的每个数组元素。</p>
<p>当一个数组被作为文本值或者进行字符串连接操作时，将会自动调用其 <code>toString</code> 方法。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;1a&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1.toString()); <span class="comment">// &quot;1,2,a,1a&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="join"><a href="#join" class="headerlink" title="join"></a>join</h4><blockquote>
<p>该<code>**join()**</code>方法通过连接数组（或类<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Indexed_collections#Working_with_array-like_objects">数组对象</a>）中的所有元素（由逗号或指定的分隔符字符串分隔）来创建并返回新字符串。如果数组只有一个项目，那么将返回该项目而不使用分隔符。</p>
<p>指定用于分隔数组的每对相邻元素的字符串。如有必要，分隔符将转换为字符串。如果省略，则数组元素用逗号（“，”）分隔。如果<code>separator</code>是空字符串，则连接所有元素，它们之间没有任何字符。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elements = [<span class="string">&quot;Fire&quot;</span>, <span class="string">&quot;Air&quot;</span>, <span class="string">&quot;Water&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(elements.join()); <span class="comment">//  &quot;Fire,Air,Water&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(elements.join(<span class="string">&quot;&quot;</span>)); <span class="comment">// &quot;FireAirWater&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(elements.join(<span class="string">&quot;-&quot;</span>)); <span class="comment">//  &quot;Fire-Air-Water&quot;</span></span><br></pre></td></tr></table></figure>

<p>下面的示例创建一个<code>a</code>包含三个元素的数组，然后将数组连接四次：使用默认分隔符，然后是逗号和空格，然后是加号和空字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&quot;Wind&quot;</span>, <span class="string">&quot;Water&quot;</span>, <span class="string">&quot;Fire&quot;</span>];</span><br><span class="line">a.join(); <span class="comment">// &#x27;Wind,Water,Fire&#x27;</span></span><br><span class="line">a.join(<span class="string">&quot;, &quot;</span>); <span class="comment">// &#x27;Wind, Water, Fire&#x27;</span></span><br><span class="line">a.join(<span class="string">&quot; + &quot;</span>); <span class="comment">// &#x27;Wind + Water + Fire&#x27;</span></span><br><span class="line">a.join(<span class="string">&quot;&quot;</span>); <span class="comment">// &#x27;WindWaterFire&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>加入类似数组的对象</strong></p>
<p>以下示例<code>arguments</code>通过调用<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call"><code>Function.prototype.call</code></a>on 来连接类似于 array 的对象（）<code>Array.prototype.join</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> s = <span class="built_in">Array</span>.prototype.join.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(s); <span class="comment">// &#x27;1,a,true&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">f(<span class="number">1</span>, <span class="string">&quot;a&quot;</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">//expected output: &quot;1,a,true&quot;</span></span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/API/" rel="tag">API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E7%BB%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/" rel="tag">数组相关操作</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-OperatingSystemCourseDesign"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/06/15/OperatingSystemCourseDesign/"
    >操作系统课程设计</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/06/15/OperatingSystemCourseDesign/" class="article-date">
  <time datetime="2019-06-15T05:24:42.000Z" itemprop="datePublished">2019-06-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/">课程设计</a> / <a class="article-category-link" href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E8%AE%AD/">操作系统实训</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="操作系统课程设计"><a href="#操作系统课程设计" class="headerlink" title="操作系统课程设计"></a>操作系统课程设计</h1><p><img src="http://static.zxinc520.com/blog/20190615/PaXCTq1hgEbO.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190615/HbzHoGRT91yz.png?imageslim" alt="mark"></p>
<table>
<thead>
<tr>
<th>课题</th>
<th>操作系统</th>
</tr>
</thead>
<tbody><tr>
<td>院系</td>
<td>计算机与信息工程学院</td>
</tr>
<tr>
<td>班级</td>
<td>1701</td>
</tr>
<tr>
<td>姓名</td>
<td>周琛</td>
</tr>
<tr>
<td>学号</td>
<td>2017115010124</td>
</tr>
</tbody></table>
<h2 id="实验一-处理器调度"><a href="#实验一-处理器调度" class="headerlink" title="实验一 处理器调度"></a>实验一 处理器调度</h2><h3 id="一、实习内容"><a href="#一、实习内容" class="headerlink" title="一、实习内容"></a>一、实习内容</h3><p>​ 选择一个调度算法，实现处理器调度。</p>
<h3 id="二、实习目的"><a href="#二、实习目的" class="headerlink" title="二、实习目的"></a>二、实习目的</h3><p>​ 在采用多道程序设计的系统中，往往有若干个进程同时处于就绪状态。当就绪进程个数大于处理器数时，就必须依照某种策略来决定哪些进程优先占用处理器。本实习模拟在单处理器情况下的处理器调度，帮助学生加深了解处理器调度的工作。</p>
<h3 id="三、实习题目"><a href="#三、实习题目" class="headerlink" title="三、实习题目"></a>三、实习题目</h3><p>​ 本实习有两个题，学生可选择其中的一题做实习。</p>
<p>​ 第一题：设计一个<strong>按优先数调度算法</strong>实现处理器调度的程序。</p>
<h4 id="提示"><a href="#提示" class="headerlink" title="提示:"></a>提示:</h4><ol>
<li><p>假定系统有五个进程，每一个进程用一个进程控制块 PCB 来代表，进程控制块的<strong>格式为</strong>：</p>
<p><img src="http://static.zxinc520.com/blog/20190615/BvLSkm8uRm2W.png?imageslim" alt="mark"></p>
</li>
</ol>
<p>其中，进程名——作为进程的标识，假设五个进程的进程名分别为 P1，P2，P3，P4，P5。</p>
<ul>
<li>指针——按优先数的大小把五个进程连成队列，用指针指出下一个进程的进程控制块的首地址，最后一个进程中的指针为“0”。</li>
<li>要求运行时间——假设进程需要运行的单位时间数。</li>
<li>优先数——赋予进程的优先数，调度时总是选取优先数大的进程先执行。</li>
<li>状态——可假设有两种状态，“就绪”状态和“结束”状态。五个进程的初始状态都为“就绪”，用“R”表示，当一个进程运行结束后，它的状态为“结束”，用“E”表示。</li>
</ul>
<ol start="2">
<li><p>在每次运行你所设计的处理器调度程序之前，为每个进程任意确定它的“优先数”和“要求运行时间”。</p>
</li>
<li><p>为了调度方便，把五个进程按给定的优先数从大到小连成队列。用一单元指出队首进程，用指针指出队列的连接情况。例：</p>
<p><strong>队首标志</strong></p>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190615/cAeym1O3lvaj.png?imageslim" alt="mark"></p>
<ol start="4">
<li>处理器调度总是选队首进程运行。采用动态改变优先数的办法，进程每运行一次优先数就减“1”。由于本实习是模拟处理器调度，所以，对被选中的进程并不实际的启动运行，而是执行：</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190615/nEAGCE9sJJqJ.png?imageslim" alt="mark"></p>
<p><strong>提醒注意的是：</strong>在实际的系统中，当一个进程被选中运行时，必须恢复进程的现场，让它占有处理器运行，直到出现等待事件或运行结束。在这里省去了这些工作。</p>
<ol start="5">
<li>进程运行一次后，若要求运行时间 ¹0，则再将它加入队列（按优先数大小插入，且置队首标志）；若要求运行时间=0，则把它的状态修改成“结束”（E），且退出队列。</li>
<li>若“就绪”状态的进程队列不为空，则重复上面（4）和（5）的步骤，直到所有进程都成为“结束”状态。</li>
<li>在所设计的程序中应有显示或打印语句，能显示或打印每次被选中进程的进程名以及运行一次后进程队列的变化。</li>
<li>为五个进程任意确定一组“优先数”和“要求运行时间”，启动所设计的处理器调度程序，显示或打印逐次被选中进程的进程名以及进程控制块的动态变化过程。</li>
</ol>
<p><strong>源代码:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt; //strcpy()</span><br><span class="line">#include&lt;stdlib.h&gt;//malloc()</span><br><span class="line"><span class="keyword">void</span> insertQuestion();</span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line"><span class="keyword">void</span> view();</span><br><span class="line"><span class="keyword">void</span> arithmetic();</span><br><span class="line">typedef struct process</span><br><span class="line">&#123;</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">    int Priority;</span><br><span class="line">    int Time;</span><br><span class="line">    int processState;</span><br><span class="line">    struct process *next;</span><br><span class="line">&#125;nodelist;</span><br><span class="line"></span><br><span class="line">nodelist *pHead=NULL;<span class="comment">//存放调度的首节点地址</span></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    insertQuestion();</span><br><span class="line">    arithmetic();</span><br><span class="line">    <span class="comment">// view();</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加问题</span></span><br><span class="line"><span class="keyword">void</span> insertQuestion()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">    int Priority;</span><br><span class="line">    int Time;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int n;</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      scanf(<span class="string">&quot;%s %d %d&quot;</span>,ProcessName,&amp;Priority,&amp;Time);</span><br><span class="line">      insertNode(ProcessName,Priority,Time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将数据插入链表</span></span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//申请存储空间</span></span><br><span class="line">    nodelist *pNew=(nodelist *)malloc(sizeof(nodelist));</span><br><span class="line">    nodelist *p,*q;</span><br><span class="line">    strcpy(pNew-&gt;ProcessName,ProcessName);</span><br><span class="line">    pNew-&gt;Priority = Priority;</span><br><span class="line">    pNew-&gt;Time = Time;</span><br><span class="line">    pNew-&gt;processState=<span class="number">1</span>;</span><br><span class="line">    pNew-&gt;next=NULL;</span><br><span class="line">        <span class="keyword">if</span>(pHead==NULL) <span class="comment">//插入前链表为空，新插入的节点为头节点</span></span><br><span class="line">        &#123;</span><br><span class="line">            pHead=pNew;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            p=pHead;</span><br><span class="line">            <span class="keyword">if</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                q=p-&gt;next;</span><br><span class="line">                p=q;</span><br><span class="line">                &#125;</span><br><span class="line">                p-&gt;next=pNew;</span><br><span class="line">                pNew-&gt;next=NULL;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p-&gt;next==<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                p-&gt;next=pNew;</span><br><span class="line">                p=pNew;</span><br><span class="line">                pNew-&gt;next=NULL;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示链表中的数据</span></span><br><span class="line"><span class="keyword">void</span> view()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* 显示所有的结果 */</span></span><br><span class="line">    nodelist *p=pHead;</span><br><span class="line">    <span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">    &#123;</span><br><span class="line">    	    printf(<span class="string">&quot;进程名\t优先数\t时间\t就绪状态\n&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span>(p!=NULL)</span><br><span class="line">            &#123;</span><br><span class="line">                printf(<span class="string">&quot;%s\t&quot;</span>,p-&gt;ProcessName);</span><br><span class="line">                printf(<span class="string">&quot;%d\t&quot;</span>,p-&gt;Priority);</span><br><span class="line">                printf(<span class="string">&quot;%d\t&quot;</span>,p-&gt;Time);</span><br><span class="line">                 printf(<span class="string">&quot;%d\t&quot;</span>,p-&gt;processState);</span><br><span class="line">                p=p-&gt;next;</span><br><span class="line">                printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      printf(<span class="string">&quot;链表中啥都没有！\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> arithmetic()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//相关算法实现</span></span><br><span class="line">    nodelist *p=pHead;</span><br><span class="line">    nodelist *q=pHead;</span><br><span class="line">    nodelist *m=pHead;</span><br><span class="line">    int max=p-&gt;Priority;</span><br><span class="line">    int flag=<span class="number">0</span>;</span><br><span class="line">    int i;</span><br><span class="line">    int sum=<span class="number">0</span>;</span><br><span class="line">    char firstName[<span class="number">5</span>];</span><br><span class="line">    char ReturnProcessName[<span class="number">5</span>];</span><br><span class="line">    strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m!=<span class="number">0</span>)&#123;</span><br><span class="line">        sum+=m-&gt;Time;</span><br><span class="line">        m=m-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sum; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(p!=NULL)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>( max &lt; (p-&gt;Priority) &amp;&amp; (p-&gt;Time&gt;<span class="number">0</span>))&#123;</span><br><span class="line">                    max= p-&gt;Priority;</span><br><span class="line">                    strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line">                    flag=<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                p=p-&gt;next;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">                      <span class="keyword">while</span>(q!=NULL)</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="keyword">if</span>(strcmp(q-&gt;ProcessName,ReturnProcessName) == <span class="number">0</span>)&#123;</span><br><span class="line">                            	printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                            	printf(<span class="string">&quot;被选中进程的进程名:&quot;</span>);</span><br><span class="line">                                printf(<span class="string">&quot;%s\n&quot;</span>,q-&gt;ProcessName);</span><br><span class="line">                                q-&gt;Priority--;</span><br><span class="line">                                q-&gt;Time--;</span><br><span class="line">                            &#125;</span><br><span class="line">	                              <span class="keyword">if</span> (q-&gt;Time==<span class="number">0</span>)</span><br><span class="line">					                &#123;</span><br><span class="line">					                	q-&gt;processState=<span class="number">0</span>;</span><br><span class="line">					                &#125;</span><br><span class="line">                            q=q-&gt;next;</span><br><span class="line">                        &#125;</span><br><span class="line">                    p=pHead;</span><br><span class="line">                    q=pHead;</span><br><span class="line">                    max=p-&gt;Priority;</span><br><span class="line">                    printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                    printf(<span class="string">&quot;运行一次后进程队列的变化:\n&quot;</span>);</span><br><span class="line">                    printf(<span class="string">&quot;----------------------------------\n&quot;</span>);</span><br><span class="line">                    view();</span><br><span class="line">                    printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">                    strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果:</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190615/1Xn16500J847.jpg?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190615/qCGSz0Azzdif.jpg?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190615/FMiq4WyNObOV.gif" alt="mark"></p>
<h2 id="实验二-主存储器空间的分配和回收"><a href="#实验二-主存储器空间的分配和回收" class="headerlink" title="实验二 主存储器空间的分配和回收"></a>实验二 主存储器空间的分配和回收</h2><h3 id="一、实习内容-1"><a href="#一、实习内容-1" class="headerlink" title="一、实习内容"></a>一、实习内容</h3><p>​ 主存储器空间的分配和回收。</p>
<h3 id="二、实习目的-1"><a href="#二、实习目的-1" class="headerlink" title="二、实习目的"></a>二、实习目的</h3><p>​ 一个好的计算机系统不仅要有一个足够容量的、存取速度高的、稳定可靠的主存储器，而且要能合理地分配和使用这些存储空间。当用户提出申请存储器空间时，存储管理必须根据申请者的要求，按一定的策略分析主存空间的使用情况，找出足够的空闲区域分配给申请者。当作业撤离或主动归还主存资源时，则存储管理要收回作业占用的主存空间或归还部分主存空间。主存的分配和回收的实现虽与主存储器的管理方式有关的，通过本实习帮助学生理解在不同的存储管理方式下应怎样实现主存空间的分配和回收。</p>
<h3 id="三、实习题目-1"><a href="#三、实习题目-1" class="headerlink" title="三、实习题目"></a>三、实习题目</h3><p>​ 模拟在分页式管理方式下采用位示图来表示主存分配情况，实现主存空间的分配和回收。</p>
<h4 id="提示："><a href="#提示：" class="headerlink" title="提示："></a>提示：</h4><ol>
<li><p>分页式存储器把主存分成大小相等的若干块，作业的信息也按块的大小分页，作业装入主存时可把作业的信息按页分散存放在主存的空闲块中，为了说明主存中哪些块已经被占用，哪些块是尚未分配的空闲块，可用一张位示图来指出。位示图可由若干存储单元来构成，其中每一位与一个物理块对应，用 0/1 表示对应块为空闲/已占用。</p>
</li>
<li><p>假设某系统的主存被分成大小相等的 64 块，则位示图可用 8 个字节来构成，另用一单元记录当前空闲块数。如果已有第 0，1，4，5，6，9，11，13，24，31，共 10 个主存块被占用了，那么位示图情况如下：</p>
<p><img src="http://static.zxinc520.com/blog/20190615/y2yBXTmrC7SP.png?imageslim" alt="mark"></p>
</li>
<li><p>当要装入一个作业时，根据作业对主存的需要量，先查当前空闲块数是否能满足作业要求，若不能满足则输出分配不成功。若能满足，则查位示图，找出为“0”的一些位，置上占用标志“1”，从“当前空闲块数”中减去本次占用块数。</p>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190615/Wq5YpOTIc25K.png?imageslim" alt="mark"></p>
<p>其中，j 表示找到的是第 n 个字节，I 表示对应的是第 n 位。</p>
<p>根据分配给作业的块号，为作业建立一张<strong>页表</strong>，页表格式：</p>
<p><img src="http://static.zxinc520.com/blog/20190615/fWnQmUT7up8x.png?imageslim" alt="mark"></p>
<ol start="4">
<li><p>当一个作业执行结束，归还主存时，根据该作业的页表可以知道应归还的块号，由块号可计算出在位示图中的对应位置，把对应位的占用标志清成“0”，表示对应的块已成为空闲块。归还的块数加入到当前空闲块数中。由块号计算在位示图中的位置的公式如下：</p>
<p><img src="http://static.zxinc520.com/blog/20190615/0zJ5vnMejiNd.png?imageslim" alt="mark"></p>
</li>
<li><p>设计实现主存分配和回收的程序。假定位示图的初始状态如（2）所述，现有一信息量为 5 页的作业要装入，运行你所设计的分配程序，为作业分配主存且建立页表（格式如（3）所述）。然后假定有另一作业执行结束，它占用的块号为第 4，5，6 和 31 块，运行你所设计的回收程序，收回作业归还的主存块。</p>
</li>
</ol>
<p>要求能显示和打印分配或回收前后的位示图和当前空闲块数，对完成一次分配后还要显示或打印为作业建立的页表。</p>
<h3 id="四、实习报告"><a href="#四、实习报告" class="headerlink" title="四、实习报告"></a>四、实习报告</h3><ol>
<li>实习题目。</li>
<li>程序中使用的数据结构及符号说明。</li>
<li>流程图。</li>
<li>打印一份源程序并附上注释。</li>
<li>打印程序运行时的初值和运行结果，要求如下：</li>
</ol>
<h4 id="输出要求"><a href="#输出要求" class="headerlink" title="输出要求:"></a>输出要求:</h4><p>​ 打印位示图和当前空闲块数的初值；要求装入的作业对主存的申请量，为作业分配后的位示图、当前空闲块数和页表；作业归还的块号、回收作业所占主存后的位示图和当前空闲块数。</p>
<p><strong>源代码:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;stdio.h&quot;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">  int arr[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">  int n=<span class="number">0</span>;</span><br><span class="line">  int sumsheng=<span class="number">54</span>;</span><br><span class="line">  int i=<span class="number">0</span>,j=<span class="number">0</span>;</span><br><span class="line">  int count=<span class="number">0</span>;</span><br><span class="line">  int indexI=<span class="number">0</span>;</span><br><span class="line">  int flag=<span class="number">0</span>;</span><br><span class="line">  int arr1[<span class="number">64</span>];</span><br><span class="line">  int finallyIndex=<span class="number">0</span>;</span><br><span class="line">  int arrindex=<span class="number">0</span>;</span><br><span class="line">  int arrindex2=<span class="number">0</span>;</span><br><span class="line">  int indexflag=<span class="number">0</span>;</span><br><span class="line">  int x[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">  int ReturnNum=<span class="number">0</span>;</span><br><span class="line">  int term;</span><br><span class="line">  arr[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">4</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">5</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">6</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">9</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">11</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">13</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">24</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">31</span>]=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  printf(<span class="string">&quot;装入的作业对主存的申请量:&quot;</span>);</span><br><span class="line">  scanf(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// printf(&quot;%d\n&quot;, sumsheng);</span></span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;-------------------------------------\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;初始位示图:\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span> (i%<span class="number">8</span>==<span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  printf(<span class="string">&quot;%d &quot;</span>,arr[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;当前空闲块数的初值:%d\n&quot;</span>,sumsheng );</span><br><span class="line">printf(<span class="string">&quot;-------------------------------------\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">sumsheng=sumsheng-n;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (n&gt;sumsheng)</span><br><span class="line">    &#123;</span><br><span class="line">      printf(<span class="string">&quot;分配不成功\n&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            indexI=i;</span><br><span class="line">            goto LOOP;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">       LOOP:<span class="keyword">for</span>(i=indexI;i&lt;<span class="number">64</span>;i++)&#123;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            arr[i]=<span class="number">1</span>;</span><br><span class="line">            arr1[indexflag]=i;</span><br><span class="line">            indexflag++;</span><br><span class="line">            count++;</span><br><span class="line">            <span class="keyword">if</span>(count==n)&#123;</span><br><span class="line">                 finallyIndex=i;</span><br><span class="line">                 goto A;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">       A:printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">printf(<span class="string">&quot;-------------------------------------\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;为作业分配后的位示图:\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span> (i%<span class="number">8</span>==<span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  printf(<span class="string">&quot;%d &quot;</span>,arr[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;为作业分配后的空闲块数:%d\n&quot;</span>,sumsheng);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;页表:\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;页号\t块号\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">&#123;</span><br><span class="line">  printf(<span class="string">&quot;%d\t%d\n&quot;</span>,i,arr1[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">&quot;-------------------------------------\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;-------------------------------------\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;输入作业归还的块号的数量:&quot;</span>);</span><br><span class="line">scanf(<span class="string">&quot;%d&quot;</span>,&amp;ReturnNum);</span><br><span class="line">printf(<span class="string">&quot;输入作业归还的块号:&quot;</span>);</span><br><span class="line"> <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;ReturnNum ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        scanf(<span class="string">&quot;%d&quot;</span>,&amp;x[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; ReturnNum; i++)</span><br><span class="line">    &#123;</span><br><span class="line">       term=x[i];</span><br><span class="line">       arr[term]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">printf(<span class="string">&quot;回收作业所占主存后的位示图:\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span> (i%<span class="number">8</span>==<span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  printf(<span class="string">&quot;%d &quot;</span>,arr[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;当前空闲块数:%d\n&quot;</span>,sumsheng+ReturnNum);</span><br><span class="line">printf(<span class="string">&quot;-------------------------------------\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果:</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190615/oPYSHAezbqWC.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190615/5tuH6MxvT5cc.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190615/Mhg1pbnGuPwe.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190615/DePT3qGywNBk.gif" alt="mark"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%AE%AD/" rel="tag">学习实训</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-Database"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/06/11/Database/"
    >大二数据库实验</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/06/11/Database/" class="article-date">
  <time datetime="2019-06-11T10:10:52.000Z" itemprop="datePublished">2019-06-11</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%A4%A7%E5%AD%A6%E5%AE%9E%E8%AE%AD/">大学实训</a> / <a class="article-category-link" href="/categories/%E5%A4%A7%E5%AD%A6%E5%AE%9E%E8%AE%AD/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="大二数据库实验"><a href="#大二数据库实验" class="headerlink" title="大二数据库实验"></a>大二数据库实验</h1><h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><blockquote>
<p>数据库课程实验综合小实验（做一个项目实现增删改查功能）</p>
<p>大二下学期期末大作业！</p>
</blockquote>
<h3 id="技术运用："><a href="#技术运用：" class="headerlink" title="技术运用："></a>技术运用：</h3><p>​ <u>运用到的技术</u>：<strong>bootstrap</strong>+ <strong>art-template</strong> + <strong>node.js</strong> + <strong>mysql</strong></p>
<table>
<thead>
<tr>
<th>课题</th>
<th>数据库</th>
</tr>
</thead>
<tbody><tr>
<td>班级</td>
<td>1701</td>
</tr>
<tr>
<td>作者姓名</td>
<td>周琛</td>
</tr>
<tr>
<td>学号</td>
<td>2017115010124</td>
</tr>
<tr>
<td>所在院系</td>
<td>计算机信息与工程学院</td>
</tr>
<tr>
<td>学科专业名称</td>
<td>计算机科学与技术</td>
</tr>
<tr>
<td>导师及职称</td>
<td>童强</td>
</tr>
</tbody></table>
<p>​</p>
<h2 id="一、实验目的与要求"><a href="#一、实验目的与要求" class="headerlink" title="一、实验目的与要求"></a>一、实验目的与要求</h2><ol>
<li>用 node 设计一个应用程序，实现对平时实验数据库的增、删、改、查。</li>
<li>说明文档中有 node 连接数据库的关键代码说明。</li>
<li>给了一个实例代码，实现了对一张表的增删改查功能（说明文档中可以看到数据库及表的名称，和有关连接数据库和实现增删改查的关键代码）。</li>
<li>可以运行，实现对学生课程数据库的操作；</li>
</ol>
<h2 id="二-步骤操作"><a href="#二-步骤操作" class="headerlink" title="二.步骤操作"></a>二.步骤操作</h2><h4 id="1-用-node-设计一个应用程序，实现对平时实验数据库的增、删、改、查。"><a href="#1-用-node-设计一个应用程序，实现对平时实验数据库的增、删、改、查。" class="headerlink" title="1. 用 node 设计一个应用程序，实现对平时实验数据库的增、删、改、查。"></a>1. 用 node 设计一个应用程序，实现对平时实验数据库的增、删、改、查。</h4><p><strong>效果图:</strong></p>
<p>用图说话：</p>
<p><img src="http://static.zxinc520.com/blog/20190525/JWCuqSFLOqbB.png?imageslim" alt="mark"></p>
<h3 id="视频"><a href="#视频" class="headerlink" title="视频:"></a><img src="http://static.zxinc520.com/blog/20190525/KHUkC8mo5c0L.png?imageslim" alt="mark">视频:</h3><video id="video" controls="" preload="none" poster="http://static.zxinc520.com/blog/20190613/yhdLmF30B7EP.png?imageslim">
      <source id="mp4" src="http://static.zxinc520.com/bandicam%202019-05-28%2012-50-22-208.mp4" type="video/mp4">
      </video>

<h3 id="2-说明文档中有-node-连接数据库的关键代码"><a href="#2-说明文档中有-node-连接数据库的关键代码" class="headerlink" title="2. 说明文档中有 node 连接数据库的关键代码"></a>2. 说明文档中有 node 连接数据库的关键代码</h3><blockquote>
<p>文件 : mysql.js</p>
<p><strong>作用: 连接数据库,执行数据操作、 封装、暴露方法.</strong></p>
</blockquote>
<p><strong>mysql.js</strong>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&quot;mysql&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行数据操作、 封装、暴露方法</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  query: <span class="function"><span class="keyword">function</span> (<span class="params">sql, params, callback</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.创建链接</span></span><br><span class="line">    <span class="keyword">const</span> connection = mysql.createConnection(&#123;</span><br><span class="line">      host: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">      user: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">      password: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">      database: <span class="string">&quot;zc&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//每次使用的时候需要创建链接，数据操作完成之后要关闭连接</span></span><br><span class="line">    connection.connect(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;数据库链接失败&quot;</span>);</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//开始数据操作</span></span><br><span class="line">      <span class="comment">//传入三个参数，第一个参数sql语句，第二个参数sql语句中需要的数据，第三个参数回调函数</span></span><br><span class="line">      connection.query(sql, params, <span class="function"><span class="keyword">function</span> (<span class="params">err, results, fields</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&quot;数据操作失败&quot;</span>);</span><br><span class="line">          <span class="keyword">throw</span> err;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//将查询出来的数据返回给回调函数</span></span><br><span class="line">        callback &amp;&amp; callback(results, fields);</span><br><span class="line">        <span class="comment">//results作为数据操作后的结果，fields作为数据库连接的一些字段</span></span><br><span class="line">        <span class="comment">//停止链接数据库，必须再查询语句后，要不然一调用这个方法，就直接停止链接，数据操作就会失败</span></span><br><span class="line">        connection.end(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;关闭数据库连接失败！&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> err;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="3-实现了对一张表的增删改查功能"><a href="#3-实现了对一张表的增删改查功能" class="headerlink" title="3.实现了对一张表的增删改查功能"></a>3.实现了对一张表的增删改查功能</h2><blockquote>
<p>给了一个实例代码，实现了对一张表的增删改查功能（说明文档中可以看到数据库及表的名称，和有关连接数据库和实现增删改查的关键代码）。</p>
</blockquote>
<h4 id="添加功能实现"><a href="#添加功能实现" class="headerlink" title="添加功能实现:"></a>添加功能实现:</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">router.post(<span class="string">&quot;/add&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> body = req.body;</span><br><span class="line">  <span class="built_in">console</span>.log(body);</span><br><span class="line">  <span class="keyword">let</span> addSql = <span class="string">&quot;INSERT INTO user(id,username,tel) VALUES(?,?,?)&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> addSqlParams = [body.id, body.username, body.tel];</span><br><span class="line">  db.query(addSql, addSqlParams, <span class="function"><span class="keyword">function</span> (<span class="params">result, fields</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;添加成功&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">      err_code: <span class="number">0</span>,</span><br><span class="line">      message: <span class="string">&quot;OK&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>效果图:</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190525/Q4p9PqfySpYr.png?imageslim" alt="mark"></p>
<h4 id="删除功能实现"><a href="#删除功能实现" class="headerlink" title="删除功能实现 :"></a>删除功能实现 :</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">&quot;/delete&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> deleteSql = <span class="string">&quot;DELETE FROM user  WHERE id = ?&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> deleteSqlParams = req.query.id;</span><br><span class="line">  db.query(deleteSql, deleteSqlParams, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">    res.redirect(<span class="number">302</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>效果图:</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190611/Gu16nhNmt2FM.png?imageslim" alt="mark"></p>
<h4 id="修改功能实现"><a href="#修改功能实现" class="headerlink" title="修改功能实现"></a>修改功能实现</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">&quot;/fix&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  fixsql = <span class="string">&quot;SELECT * FROM user WHERE id = ?&quot;</span>;</span><br><span class="line">  fixSqlParams = req.query.id;</span><br><span class="line">  db.query(fixsql, fixSqlParams, <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&quot;fix.html&quot;</span>, &#123;</span><br><span class="line">      result: result[<span class="number">0</span>],</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">&quot;/fix&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.body);</span><br><span class="line">  updatasql = <span class="string">&quot;UPDATE user SET username = ?,tel=? WHERE id = ?&quot;</span>;</span><br><span class="line">  updataSqlParams = [req.body.username, req.body.tel, req.body.id];</span><br><span class="line">  db.query(updatasql, updataSqlParams, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">      err_code: <span class="number">0</span>,</span><br><span class="line">      message: <span class="string">&quot;OK&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>效果图:</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190525/RdNGNjvSnJNF.png?imageslim" alt="mark"></p>
<h4 id="查找功能实现"><a href="#查找功能实现" class="headerlink" title="查找功能实现"></a>查找功能实现</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">router.post(<span class="string">&quot;/search&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.body);</span><br><span class="line">  arr = [];</span><br><span class="line">  db.query(<span class="string">&quot;select * from user&quot;</span>, [], <span class="function"><span class="keyword">function</span> (<span class="params">result, fields</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">    result.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        e.id.indexOf(req.body.value) &gt;= <span class="number">0</span> ||</span><br><span class="line">        e.username.indexOf(req.body.value) &gt;= <span class="number">0</span> ||</span><br><span class="line">        e.tel.indexOf(req.body.value) &gt;= <span class="number">0</span></span><br><span class="line">      ) &#123;</span><br><span class="line">        arr.push(e);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">      err_code: <span class="number">0</span>,</span><br><span class="line">      message: arr,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>效果图:</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190611/Ed1NKxGH1I4I.png?imageslim" alt="mark"></p>
<h2 id="4-运行程序"><a href="#4-运行程序" class="headerlink" title="4. 运行程序"></a>4. 运行程序</h2><p>相关代码源代码以上传至码云,地址为:</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/zxinc/sophomore_database_experiment">源码地址</a></p>
<video id="video" controls="" preload="none" poster="http://static.zxinc520.com/blog/20190613/yhdLmF30B7EP.png?imageslim">
 <source id="mp4" src="http://static.zxinc520.com/bandicam%202019-05-28%2012-50-22-208.mp4" type="video/mp4">
  </video>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%A7%E4%BA%8C/" rel="tag">大二</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E8%AE%AD/" rel="tag">数据库实训</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-Promise"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/13/Promise/"
    >Promise</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/05/13/Promise/" class="article-date">
  <time datetime="2019-05-13T04:52:54.000Z" itemprop="datePublished">2019-05-13</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a> / <a class="article-category-link" href="/categories/JS/%E5%BC%82%E6%AD%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">异步解决方案</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><blockquote>
<p>前言: Promise 是 <strong>异步编程</strong> 的一种解决方案, 相比传统的解决方案—&gt;回调函数和事件更加强大.由社区最早提出和实现,ES6 将其写进了语言标准,统一了用法,原生提供了 Promise 对象.</p>
<p>没有 Promise 之前,解决异步都是依赖回调,但执行多个具备前后顺序的异步操作时代码就会非常乱并且出现问题难调试.</p>
<p>Promise 的 <strong>本质</strong> 是要干什么的：就是单纯的为了解决 <strong>回调地狱问题</strong>，但是并不能帮我们减少代码量。</p>
</blockquote>
<h3 id="“回调地狱”是什么"><a href="#“回调地狱”是什么" class="headerlink" title="“回调地狱”是什么"></a>“回调地狱”是什么</h3><p>”回调地狱“也叫”回调金字塔“，我们平时写代码的时候 js 如果异步 回调是不可避免的<br>例如 ajax 不断的进行异步请求数据 回调方法里还要对数据进行处理，继续回调…形成回调地狱<br>这会使得我们的代码可读性变差，出现问题 不好调试 也会导致性能下降</p>
<p>而 nodejs 是一种单线程的事件驱动而且是非阻塞的 I/O 模型，而 I/O 模型，是异步的，这样 nodejs 在处理结果的时候 就需要在回调函数中执行，这样也就形成了回调地狱。</p>
<p><img src="http://static.zxinc520.com/blog/20190420/4iquo6cVxxSQ.jpg?imageslim" alt="mark"></p>
<h3 id="Promise-介绍"><a href="#Promise-介绍" class="headerlink" title="Promise 介绍"></a>Promise 介绍</h3><p>Promise 就是实现异步编程的一种解决方案，核心就是 Promise 对象。Promise 对象就像一个容器，里面保存着某个未来才会结束的事件（通常是一个异步操作）的结果。它可以将异步操作以同步操作的流程表达出来，避免层层嵌套(callback)的毁掉函数。此外，Promise 对象提供统一的接口，使得控制异步操作更加容易。</p>
<p><strong>Promise 对象的两个特点</strong>：</p>
<ol>
<li><p>对象的状态不受外界影响。有三种状态：pending(进行中)、resolved(已成功)、rejected(已失败);</p>
</li>
<li><p>一旦状态改变，就不会再变，任何时候都可以得到这个结果。Promise 对象的状态改变，只有两种可能：从 pending 变为 resolved 和从 pending 变为 rejected。</p>
</li>
</ol>
<p><strong>Promise 缺点：</strong></p>
<ol>
<li>无法取消 Promise，一旦新建它就会立即执行，无法中途取消;</li>
<li>如果不设置回调函数，Promise 内部抛出的错误，不会反应到外部;</li>
<li>当处于 pending 状态时，无法得知目前进展到哪一个阶段（刚刚开始还是即将完成）</li>
</ol>
<hr>
<h4 id="基本概念："><a href="#基本概念：" class="headerlink" title="基本概念："></a><strong>基本概念：</strong></h4><ol>
<li><p>Promise 是一个构造函数，既然是构造函数，那么，我们就可以 new Promise() 得到一个 Promise 的实例</p>
</li>
<li><p>在 Promise 上，有两个函数，分别叫做 <strong>resolve</strong>（成功之后的回调函数） 和 <strong>reject</strong>（失败之后的回调函数）</p>
</li>
<li><p>在 Promise 构造函数的 Prototype 属性上，有一个 <strong>.then()</strong> 方法，也就说，只要是 Promise 构造函数创建的实例，都可以访问到 .then() 方法。</p>
</li>
<li><p>Promise 表示一个 异步操作，每当我们 new 一个 Promise 的实例，这个实例，就表示一个具体的异步操作</p>
</li>
<li><p>既然 Promise 创建的实例，是一个异步操作，那么，这个 异步操作的结果，只能有两种状态：</p>
</li>
</ol>
<p>​ 5.1 <strong>状态 1</strong>： 异步执行成功了，需要在内部调用成功的回调函数（<strong>resolve</strong>），把结果返回给调用者。</p>
<p>​ 5.2 <strong>状态 2</strong>： 异步执行失败了，需要在内部调用失败的回调函数（<strong>reject</strong>），把结果返回给调用者。</p>
<p>​ 5.3 由于 Promise 的实例，是一个异步操作，所以，内部拿到 操作结果后，无法使用 return 把操作的结果返回给调用者；这时候，只能使用回调函数的形式，来把 成功 或 失败的结果，返回给调用者。</p>
<ol start="6">
<li>我们可以在 new 出来的 Promise 实例上，调用 <strong>.then() 方法</strong>，【预先】为这个 Promise 异步操作指定 成功（<strong>resolve</strong>）和 失败（<strong>reject</strong>）回调函数</li>
</ol>
<h2 id="关于-Promise-要解决回调地狱问题的说明"><a href="#关于-Promise-要解决回调地狱问题的说明" class="headerlink" title="关于 Promise 要解决回调地狱问题的说明"></a>关于 Promise 要解决回调地狱问题的说明</h2><p><strong>实验需求</strong>：你要封装一个方法，我给你一个要读取文件的路径，你这个方法帮我读取文件，并把内容返回给我。</p>
<p><em>代码实际演示：</em></p>
<p>目录结构：</p>
<p><img src="http://static.zxinc520.com/blog/20190420/djU0REH3KKbb.png?imageslim" alt="mark"></p>
<h3 id="第一步：初步实现一个读取文件的功能："><a href="#第一步：初步实现一个读取文件的功能：" class="headerlink" title="第一步：初步实现一个读取文件的功能："></a>第一步：初步实现一个读取文件的功能：</h3><p><strong>封装读取文件的方法.js</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 需求：你要封装一个方法，我给你一个要读取文件的路径，你这个方法帮我读取文件，并把内容返回给我</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line">fs.readFile(path.join(__dirname, <span class="string">&quot;./files/1.txt&quot;</span>), <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">throw</span> err;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(dataStr);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="http://static.zxinc520.com/blog/20190420/TR4X4SXC6m2m.png?imageslim" alt="mark"></p>
<h3 id="第二步：封装一个读取文件的方法"><a href="#第二步：封装一个读取文件的方法" class="headerlink" title="第二步：封装一个读取文件的方法"></a>第二步：封装一个读取文件的方法</h3><p><strong>封装读取文件的方法.js</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//初衷 ：给定文件路径 ，返回读取到的内容</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileByPath</span>(<span class="params">fpath</span>) </span>&#123;</span><br><span class="line">  fs.readFile(fpath, <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dataStr;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = getFileByPath(path.join(__dirname, <span class="string">&quot;./files/1.txt&quot;</span>));</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="http://static.zxinc520.com/blog/20190420/4LrSd5ascJjT.png?imageslim" alt="mark"></p>
<h2 id="解决方案：使用回调函数"><a href="#解决方案：使用回调函数" class="headerlink" title="解决方案：使用回调函数"></a>解决方案：使用回调函数</h2><p><strong>封装读取文件的方法.js</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileByPath</span>(<span class="params">fpath, callback</span>) </span>&#123;</span><br><span class="line">  fs.readFile(fpath, <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(err);</span><br><span class="line">    &#125;</span><br><span class="line">    callback(dataStr);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getFileByPath(path.join(__dirname, <span class="string">&quot;./files/1.txt&quot;</span>), <span class="function">(<span class="params">dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(dataStr);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="http://static.zxinc520.com/blog/20190420/U5MDnc8QChTb.png?imageslim" alt="mark"></p>
<h2 id="封装读取文件的方法–改进："><a href="#封装读取文件的方法–改进：" class="headerlink" title="封装读取文件的方法–改进："></a>封装读取文件的方法–改进：</h2><h4 id="callback-中，设置两个参数（err-dataStr）"><a href="#callback-中，设置两个参数（err-dataStr）" class="headerlink" title="callback 中，设置两个参数（err, dataStr）"></a>callback 中，设置两个参数（err, dataStr）</h4><p><strong>封装读取文件的方法.js</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用回调函数</span></span><br><span class="line"><span class="comment">//我们可以规定一下，callback中，有两个参数，第一个参数是失败的结果，第二个参数是成功的结果</span></span><br><span class="line"><span class="comment">//同时，我们规定了：如果成功后，返回的结果，应该位于callback 参数的第二个位置，此时，第一个位置由于没有出错，所以放一个null，如果失败了则第一个位置放置 Error对象，第二个位置放置一个 undefined</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileByPath</span>(<span class="params">fpath, callback</span>) </span>&#123;</span><br><span class="line">  fs.readFile(fpath, <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(err);</span><br><span class="line">    &#125;</span><br><span class="line">    callback(<span class="literal">null</span>, dataStr);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getFileByPath(path.join(__dirname, <span class="string">&quot;./files/1.txt&quot;</span>), <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(err.message);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(dataStr);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190420/Gi6Iffxxw1Jk.png?imageslim" alt="mark"></p>
<h2 id="封装读取文件的方法-提高版"><a href="#封装读取文件的方法-提高版" class="headerlink" title="封装读取文件的方法-提高版"></a>封装读取文件的方法-提高版</h2><h4 id="拆分成-两个-回调（getFileByPath-fpath-succCb-errCb-）"><a href="#拆分成-两个-回调（getFileByPath-fpath-succCb-errCb-）" class="headerlink" title="拆分成 两个 回调（getFileByPath (fpath, succCb, errCb)）"></a>拆分成 两个 回调（getFileByPath (fpath, succCb, errCb)）</h4><p><strong>封装读取文件的方法-提高版.js：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用两个回调---便于理解</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileByPath</span>(<span class="params">fpath, succCb, errCb</span>) </span>&#123;</span><br><span class="line">  fs.readFile(fpath, <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> errCb(err);</span><br><span class="line">    &#125;</span><br><span class="line">    succCb(dataStr);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getFileByPath(</span><br><span class="line">  path.join(__dirname, <span class="string">&quot;./files/1.txt&quot;</span>),</span><br><span class="line">  (dataStr) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;成功的结果，使用成功的回调succCb: &quot;</span> + dataStr);</span><br><span class="line">  &#125;,</span><br><span class="line">  (err) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;失败的结果，使用失败的回调errCb: &quot;</span> + err.message);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>成功的结果：</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190420/OfeQfiHdiJVC.png?imageslim" alt="mark"></p>
<p><strong>失败的结果：</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190420/uVvrqObQxNtc.png?imageslim" alt="mark"></p>
<h2 id="回调嵌套"><a href="#回调嵌套" class="headerlink" title="回调嵌套"></a>回调嵌套</h2><h3 id="需求：先读取文件-1，在读取文件-2，最后读取文件-3"><a href="#需求：先读取文件-1，在读取文件-2，最后读取文件-3" class="headerlink" title="需求：先读取文件 1，在读取文件 2，最后读取文件 3"></a>需求：先读取文件 1，在读取文件 2，最后读取文件 3</h3><h6 id="初步实现："><a href="#初步实现：" class="headerlink" title="初步实现："></a><strong><em>初步实现：</em></strong></h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileByPath</span>(<span class="params">fpath, callback</span>) </span>&#123;</span><br><span class="line">  fs.readFile(fpath, <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(err.message);</span><br><span class="line">    &#125;</span><br><span class="line">    callback(dataStr);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//回调地狱</span></span><br><span class="line">getFileByPath(path.join(__dirname, <span class="string">&quot;./files/1.txt&quot;</span>), <span class="function">(<span class="params">dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(dataStr);</span><br><span class="line">  getFileByPath(path.join(__dirname, <span class="string">&quot;./files/2.txt&quot;</span>), <span class="function">(<span class="params">dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(dataStr);</span><br><span class="line">    getFileByPath(path.join(__dirname, <span class="string">&quot;./files/3.txt&quot;</span>), <span class="function">(<span class="params">dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(dataStr);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>运行结果：</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190420/lQlQH83IcW3B.png?imageslim" alt="mark"></p>
<h3 id="使用-Promise"><a href="#使用-Promise" class="headerlink" title="使用 **Promise **:"></a>使用 **Promise **:</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileByPath</span>(<span class="params">fpath</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(path.join(__dirname, fpath), <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> reject(err);</span><br><span class="line">      &#125;</span><br><span class="line">      resolve(dataStr);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getFileByPath(<span class="string">&quot;./files/1.txt&quot;</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    <span class="comment">//读取文件2</span></span><br><span class="line">    <span class="keyword">return</span> getFileByPath(<span class="string">&quot;./files/2.txt&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    <span class="comment">//读取文件3</span></span><br><span class="line">    <span class="keyword">return</span> getFileByPath(<span class="string">&quot;./files/3.txt&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err.message);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190420/G1arCfeFpYYK.png?imageslim" alt="mark"></p>
<h2 id="Ajax-使用-then-方法高逼格请求数据"><a href="#Ajax-使用-then-方法高逼格请求数据" class="headerlink" title="Ajax 使用 then 方法高逼格请求数据"></a>Ajax 使用 then 方法高逼格请求数据</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./node_modules/jquery/dist/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&quot;#btn&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">            url: <span class="string">&quot;./data.json&quot;</span>,</span></span><br><span class="line"><span class="javascript">            type: <span class="string">&quot;get&quot;</span>,</span></span><br><span class="line"><span class="javascript">            dataType: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="javascript">          &#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(data);</span></span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="http://static.zxinc520.com/blog/20190420/Raly4WtVEqEx.gif" alt="mark"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/promise/" rel="tag">promise</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9B%9E%E8%B0%83%E5%9C%B0%E7%8B%B1/" rel="tag">回调地狱</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BC%82%E6%AD%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" rel="tag">异步解决方案</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-ProcessScheduling"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/13/ProcessScheduling/"
    >操作系统进程调度作业</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/05/13/ProcessScheduling/" class="article-date">
  <time datetime="2019-05-13T04:52:54.000Z" itemprop="datePublished">2019-05-13</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/">课程设计</a> / <a class="article-category-link" href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6%E4%BD%9C%E4%B8%9A/">操作系统进程调度作业</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="操作系统进程调度作业"><a href="#操作系统进程调度作业" class="headerlink" title="操作系统进程调度作业"></a>操作系统进程调度作业</h1><blockquote>
<p>操作系统进程调度作业</p>
<p>锻炼下思维！</p>
</blockquote>
<h2 id="进程调度-1"><a href="#进程调度-1" class="headerlink" title="进程调度 1"></a>进程调度 1</h2><p><strong>问题描述</strong>：</p>
<p>​ 要求输入 3 个进程，找出最先执行的那个进程的进程名。（如果遇到优先级一样，按照输入顺序执行。），本题中，优先数数值大的表示优先级比较高。</p>
<p><strong>输入格式</strong>：</p>
<p>​ 程序要求输入 3 行，以回车符号作为分隔，每行有 3 个数据，以空格作为分隔。首先输入一个字符串（长度小于等于 10），为进程名，第 2 个数据类型为整型，表示进程的优先数，第 3 个数据类型为整型，表示进程的运行时间。</p>
<p><strong>输出格式</strong>：</p>
<p>​ 输出一个字符串，为最先执行进程的进程名。</p>
<p><em>样例输入 1：</em></p>
<p>P1 1 1</p>
<p>P2 2 2</p>
<p>P3 3 3</p>
<p>样例输出 1：</p>
<p>P3</p>
<p><em>样例输入 2：</em></p>
<p>P1 130 10</p>
<p>P2 100 100</p>
<p>P3 100 100</p>
<p>样例输出 2：</p>
<p>P2</p>
<p><strong>链表实现：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt; //strcpy()</span><br><span class="line">#include &lt;stdlib.h&gt;//malloc()</span><br><span class="line"><span class="keyword">void</span> insertQuestion();</span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line"><span class="keyword">void</span> view();</span><br><span class="line"><span class="keyword">void</span> arithmetic();</span><br><span class="line">typedef struct process</span><br><span class="line">&#123;</span><br><span class="line">	char ProcessName[<span class="number">5</span>];</span><br><span class="line">	int Priority;</span><br><span class="line">	int Time;</span><br><span class="line">	struct process *next;</span><br><span class="line">&#125;nodelist;</span><br><span class="line"></span><br><span class="line">nodelist *pHead=NULL;<span class="comment">//存放调度的首节点地址</span></span><br><span class="line"></span><br><span class="line">int main(<span class="keyword">void</span>)&#123;</span><br><span class="line">    insertQuestion();</span><br><span class="line">    arithmetic();</span><br><span class="line">	system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加问题</span></span><br><span class="line"><span class="keyword">void</span> insertQuestion()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">	int Priority;</span><br><span class="line">	int Time;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">	  scanf(<span class="string">&quot;%s&quot;</span>,ProcessName);</span><br><span class="line">	  scanf(<span class="string">&quot;%d&quot;</span>,&amp;Priority);</span><br><span class="line">	  scanf(<span class="string">&quot;%d&quot;</span>,&amp;Time);</span><br><span class="line">	  insertNode(ProcessName,Priority,Time);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将数据插入链表</span></span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//申请存储空间</span></span><br><span class="line">	nodelist *pNew=(nodelist *)malloc(sizeof(nodelist));</span><br><span class="line">	nodelist *p,*q;</span><br><span class="line">	strcpy(pNew-&gt;ProcessName,ProcessName);</span><br><span class="line">	pNew-&gt;Priority = Priority;</span><br><span class="line">	pNew-&gt;Time = Time;</span><br><span class="line">	pNew-&gt;next=NULL;</span><br><span class="line">	<span class="comment">// printf(&quot;5\n&quot;);</span></span><br><span class="line">		<span class="keyword">if</span>(pHead==NULL) <span class="comment">//插入前链表为空，新插入的节点为头节点</span></span><br><span class="line">		&#123;</span><br><span class="line">			pHead=pNew;</span><br><span class="line">			<span class="comment">//p1=pHead;</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			p=pHead;</span><br><span class="line">			<span class="keyword">if</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">while</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">				q=p-&gt;next;</span><br><span class="line">			    p=q;</span><br><span class="line">				&#125;</span><br><span class="line">				p-&gt;next=pNew;</span><br><span class="line">				pNew-&gt;next=NULL;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (p-&gt;next==<span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				p-&gt;next=pNew;</span><br><span class="line">			    p=pNew;</span><br><span class="line">				pNew-&gt;next=NULL;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示链表中的数据</span></span><br><span class="line"><span class="keyword">void</span> view()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">/* 显示所有的结果 */</span></span><br><span class="line">	nodelist *p=pHead;</span><br><span class="line">	<span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">	&#123;</span><br><span class="line">			<span class="keyword">while</span>(p!=NULL)</span><br><span class="line">			&#123;</span><br><span class="line">				printf(<span class="string">&quot;%s &quot;</span>,p-&gt;ProcessName);</span><br><span class="line">				printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Priority);</span><br><span class="line">				printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Time);</span><br><span class="line">				p=p-&gt;next;</span><br><span class="line">				printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">	  printf(<span class="string">&quot;链表中啥都没有！\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> arithmetic()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//相关算法实现</span></span><br><span class="line">	nodelist *p=pHead;</span><br><span class="line">	int max=p-&gt;Priority;</span><br><span class="line">	int flag=<span class="number">0</span>;</span><br><span class="line">	char firstName[<span class="number">5</span>];</span><br><span class="line">	char ReturnProcessName[<span class="number">5</span>];</span><br><span class="line">	strcpy(firstName,p-&gt;ProcessName);</span><br><span class="line">	<span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">	&#123;</span><br><span class="line">			<span class="keyword">while</span>(p!=NULL)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>( max &lt; (p-&gt;Priority))&#123;</span><br><span class="line">                    max= p-&gt;Priority;</span><br><span class="line">                    strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line">					flag=<span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				p=p-&gt;next;</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(flag==<span class="number">1</span>)&#123;</span><br><span class="line">		printf(<span class="string">&quot;%s\n&quot;</span>,ReturnProcessName);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		printf(<span class="string">&quot;%s\n&quot;</span>,firstName);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190513/liF2w98LPKem.gif" alt="mark"></p>
<p>​ <img src="http://static.zxinc520.com/blog/20190513/XXOxTOQJ8P0H.gif" alt="mark"></p>
<h2 id="进程调度-2"><a href="#进程调度-2" class="headerlink" title="进程调度 2"></a>进程调度 2</h2><p><strong>问题描述</strong>：</p>
<p>​ 要求输入 N 个进程（0&lt;N&lt;=100），找出最后执行的那个进程的进程名。（如果遇到优先级一样，按照输入顺序执行。），本题中，优先数数值较高的优先级也较高。</p>
<p><strong>输入格式</strong>：</p>
<p>​ 程序首先要求输入一个整型值 N，接下来输入为 N 行，以回车符号作为分隔，每行有 3 个数据，以空格作为分隔。首先输入一个字符串（长度小于等于 10），该字符串为进程名。第 2 个数据类型为整型，表示进程的优先数。第 3 个数据类型为整型，表示进程的运行时间。</p>
<p><strong>输出格式：</strong></p>
<p>​ 输出一个字符串，为最后执行进程的进程名。</p>
<p><em>样例输入 1：</em></p>
<p>3</p>
<p>P1 1 1</p>
<p>P2 2 2</p>
<p>P3 3 3</p>
<p>样例输出 1：</p>
<p>P3</p>
<p><em>样例输入 2：</em></p>
<p>2</p>
<p>P1 10 10</p>
<p>P2 100 100</p>
<p>样例输出 2：</p>
<p>P2</p>
<p><strong>源代码：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt; //strcpy()</span><br><span class="line">#include &lt;stdlib.h&gt;//malloc()</span><br><span class="line"><span class="keyword">void</span> insertQuestion();</span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line"><span class="keyword">void</span> view();</span><br><span class="line"><span class="keyword">void</span> arithmetic();</span><br><span class="line">typedef struct process</span><br><span class="line">&#123;</span><br><span class="line">	char ProcessName[<span class="number">5</span>];</span><br><span class="line">	int Priority;</span><br><span class="line">	int Time;</span><br><span class="line">	struct process *next;</span><br><span class="line">&#125;nodelist;</span><br><span class="line"></span><br><span class="line">nodelist *pHead=NULL;<span class="comment">//存放调度的首节点地址</span></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    insertQuestion();</span><br><span class="line">    arithmetic();</span><br><span class="line">    <span class="comment">// view();</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加问题</span></span><br><span class="line"><span class="keyword">void</span> insertQuestion()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">	int Priority;</span><br><span class="line">	int Time;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int n;</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">	  scanf(<span class="string">&quot;%s %d %d&quot;</span>,ProcessName,&amp;Priority,&amp;Time);</span><br><span class="line">	  insertNode(ProcessName,Priority,Time);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将数据插入链表</span></span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//申请存储空间</span></span><br><span class="line">	nodelist *pNew=(nodelist *)malloc(sizeof(nodelist));</span><br><span class="line">	nodelist *p,*q;</span><br><span class="line">	strcpy(pNew-&gt;ProcessName,ProcessName);</span><br><span class="line">	pNew-&gt;Priority = Priority;</span><br><span class="line">	pNew-&gt;Time = Time;</span><br><span class="line">	pNew-&gt;next=NULL;</span><br><span class="line">	<span class="comment">// printf(&quot;5\n&quot;);</span></span><br><span class="line">		<span class="keyword">if</span>(pHead==NULL) <span class="comment">//插入前链表为空，新插入的节点为头节点</span></span><br><span class="line">		&#123;</span><br><span class="line">			pHead=pNew;</span><br><span class="line">			<span class="comment">//p1=pHead;</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//将地址为pNew的节点插入到首地址为pHead的链表的尾部</span></span><br><span class="line">			<span class="comment">/*p1-&gt;next=pNew;</span></span><br><span class="line"><span class="comment">			p1=pNew;</span></span><br><span class="line"><span class="comment">			pNew-&gt;next=NULL;*/</span></span><br><span class="line">			p=pHead;</span><br><span class="line">			<span class="comment">//q=(nodelist *)malloc(sizeof(nodelist));</span></span><br><span class="line">			<span class="keyword">if</span>(p-&gt;next!=<span class="number">0</span>)     <span class="comment">//文件不为空，即pHead后面有数据</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">while</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">				q=p-&gt;next;</span><br><span class="line">			    p=q;</span><br><span class="line">				&#125;</span><br><span class="line">				p-&gt;next=pNew;</span><br><span class="line">				pNew-&gt;next=NULL;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (p-&gt;next==<span class="number">0</span>) <span class="comment">//只有头结点，即pHead后面无数据</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//将地址为pNew的节点插入到首地址为pHead的链表的尾部</span></span><br><span class="line">				p-&gt;next=pNew;</span><br><span class="line">			    p=pNew;</span><br><span class="line">				pNew-&gt;next=NULL;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示链表中的数据</span></span><br><span class="line"><span class="keyword">void</span> view()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">/* 显示所有的结果 */</span></span><br><span class="line">	nodelist *p=pHead;</span><br><span class="line">	<span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">	&#123;</span><br><span class="line">			<span class="keyword">while</span>(p!=NULL)</span><br><span class="line">			&#123;</span><br><span class="line">				printf(<span class="string">&quot;%s &quot;</span>,p-&gt;ProcessName);</span><br><span class="line">				printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Priority);</span><br><span class="line">				printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Time);</span><br><span class="line">				p=p-&gt;next;</span><br><span class="line">				printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">	  printf(<span class="string">&quot;链表中啥都没有！\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> arithmetic()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//相关算法实现</span></span><br><span class="line">	nodelist *p=pHead;</span><br><span class="line">	nodelist *q=pHead;</span><br><span class="line">	nodelist *m=pHead;</span><br><span class="line">	int max=p-&gt;Priority;</span><br><span class="line">	int flag=<span class="number">0</span>;</span><br><span class="line">	int i;</span><br><span class="line">	int sum=<span class="number">0</span>;</span><br><span class="line">	char firstName[<span class="number">5</span>];</span><br><span class="line">	char ReturnProcessName[<span class="number">5</span>];</span><br><span class="line">	char FinallProcessName[<span class="number">5</span>];</span><br><span class="line">	strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(m!=<span class="number">0</span>)&#123;</span><br><span class="line">		sum+=m-&gt;Time;</span><br><span class="line">	    m=m-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sum; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">while</span>(p!=NULL)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>( max &lt; (p-&gt;Priority) &amp;&amp; (p-&gt;Time&gt;<span class="number">0</span>))&#123;</span><br><span class="line">                    max= p-&gt;Priority;</span><br><span class="line">                    strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line">					flag=<span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				p=p-&gt;next;</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">				  	<span class="keyword">while</span>(q!=NULL)</span><br><span class="line">						&#123;</span><br><span class="line">							<span class="keyword">if</span>(strcmp(q-&gt;ProcessName,ReturnProcessName) == <span class="number">0</span>)&#123;</span><br><span class="line">                                strcpy(FinallProcessName,q-&gt;ProcessName);</span><br><span class="line">								q-&gt;Priority--;</span><br><span class="line">								q-&gt;Time--;</span><br><span class="line">							&#125;</span><br><span class="line">							q=q-&gt;next;</span><br><span class="line">						&#125;</span><br><span class="line">					p=pHead;</span><br><span class="line">					q=pHead;</span><br><span class="line">					max=p-&gt;Priority;</span><br><span class="line">					strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">			printf(<span class="string">&quot;%s\n&quot;</span>,FinallProcessName);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190513/HbsJqnfhPfHR.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190513/Ge7alyBXmauM.gif" alt="mark"></p>
<h2 id="进程调度-3"><a href="#进程调度-3" class="headerlink" title="进程调度 3"></a>进程调度 3</h2><p><strong>问题描述</strong>：</p>
<p>​ 要求输入 N 个进程（N 为正整型数，0&lt;N&lt;=25535），输出按照优先级从高到低执行的进程名字符串序列,直至结束。（如果遇到优先级一样，按照输入顺序先后执行。），本题中，优先数数值较高的进程，优先级也较高。</p>
<p><strong>输入格式</strong>：</p>
<p>​ 程序首先要求输入一个整型变量 N，接下来输入为 N 行，以回车符号作为分隔，每行有 3 个数据，以空格作为分隔。首先输入一个字符串（长度小于等于 10），该字符串为进程名。第 2 个数据类型为整型，表示进程的优先数。第 3 个数据类型为整型，表示进程的运行时间。</p>
<p><strong>输出格式</strong>：</p>
<p>​ 输出 1 行，M 个字符串，字符串之间用空格作为分隔。</p>
<p>样例输入 1：</p>
<p>3</p>
<p>P1 1 1</p>
<p>P2 2 2</p>
<p>P3 3 3</p>
<p>样例输出 1：</p>
<p>P3 P2 P3 P1 P2 P3</p>
<p>样例输入 2：</p>
<p>2</p>
<p>P1 3 3</p>
<p>P2 1 1</p>
<p>样例输出 2：</p>
<p>P1 P1 P1 P2</p>
<p>样例输入 3：</p>
<p>100</p>
<p>P0 0 1 P1 1 1 P2 2 1 P3 3 1 P4 4 1 P5 5 1 P6 6 1 P7 7 1 P8 8 1 P9 9 1 P10 10 1 P11 11 1 P12 12 1 P13 13 1 P14 14 1 P15 15 1 P16 16 1 P17 17 1 P18 18 1 P19 19 1 P20 20 1 P21 21 1 P22 22 1 P23 23 1 P24 24 1 P25 25 1 P26 26 1 P27 27 1 P28 28 1 P29 29 1 P30 30 1 P31 31 1 P32 32 1 P33 33 1 P34 34 1 P35 35 1 P36 36 1 P37 37 1 P38 38 1 P39 39 1 P40 40 1 P41 41 1 P42 42 1 P43 43 1 P44 44 1 P45 45 1 P46 46 1 P47 47 1 P48 48 1 P49 49 1 P50 50 1 P51 51 1 P52 52 1 P53 53 1 P54 54 1 P55 55 1 P56 56 1 P57 57 1 P58 58 1 P59 59 1 P60 60 1 P61 61 1 P62 62 1 P63 63 1 P64 64 1 P65 65 1 P66 66 1 P67 67 1 P68 68 1 P69 69 1 P70 70 1 P71 71 1 P72 72 1 P73 73 1 P74 74 1 P75 75 1 P76 76 1 P77 77 1 P78 78 1 P79 79 1 P80 80 1 P81 81 1 P82 82 1 P83 83 1 P84 84 1 P85 85 1 P86 86 1 P87 87 1 P88 88 1 P89 89 1 P90 90 1 P91 91 1 P92 92 1 P93 93 1 P94 94 1 P95 95 1 P96 96 1 P97 97 1 P98 98 1 P99 99 1</p>
<p>样例输出 3：</p>
<p>P100 P99 P98 P97 P96 P95 P94 P93 P92 P91 P90 P89 P88 P87 P86 P85 P84 P83 P82 P81 P80 P79 P78 P77 P76 P75 P74 P73 P72 P71 P70 P69 P68 P67 P66 P65 P64 P63 P62 P61 P60 P59 P58 P57 P56 P55 P54 P53 P52 P51 P50 P49 P48 P47 P46 P45 P44 P43 P42 P41 P40 P39 P38 P37 P36 P35 P34 P33 P32 P31 P30 P29 P28 P27 P26 P25 P24 P23 P22 P21 P20 P19 P18 P17 P16 P15 P14 P13 P12 P11 P10 P9 P8 P7 P6 P5 P4 P3 P2 P1</p>
<p><strong>源代码：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt; //strcpy()</span><br><span class="line">#include&lt;stdlib.h&gt;//malloc()</span><br><span class="line"><span class="keyword">void</span> insertQuestion();</span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line"><span class="keyword">void</span> view();</span><br><span class="line"><span class="keyword">void</span> arithmetic();</span><br><span class="line">typedef struct process</span><br><span class="line">&#123;</span><br><span class="line">	char ProcessName[<span class="number">5</span>];</span><br><span class="line">	int Priority;</span><br><span class="line">	int Time;</span><br><span class="line">	struct process *next;</span><br><span class="line">&#125;nodelist;</span><br><span class="line"></span><br><span class="line">nodelist *pHead=NULL;<span class="comment">//存放调度的首节点地址</span></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    insertQuestion();</span><br><span class="line">    arithmetic();</span><br><span class="line">    <span class="comment">// view();</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加问题</span></span><br><span class="line"><span class="keyword">void</span> insertQuestion()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">	int Priority;</span><br><span class="line">	int Time;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int n;</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">	  scanf(<span class="string">&quot;%s %d %d&quot;</span>,ProcessName,&amp;Priority,&amp;Time);</span><br><span class="line">	  insertNode(ProcessName,Priority,Time);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将数据插入链表</span></span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//申请存储空间</span></span><br><span class="line">	nodelist *pNew=(nodelist *)malloc(sizeof(nodelist));</span><br><span class="line">	nodelist *p,*q;</span><br><span class="line">	strcpy(pNew-&gt;ProcessName,ProcessName);</span><br><span class="line">	pNew-&gt;Priority = Priority;</span><br><span class="line">	pNew-&gt;Time = Time;</span><br><span class="line">	pNew-&gt;next=NULL;</span><br><span class="line">	<span class="comment">// printf(&quot;5\n&quot;);</span></span><br><span class="line">		<span class="keyword">if</span>(pHead==NULL) <span class="comment">//插入前链表为空，新插入的节点为头节点</span></span><br><span class="line">		&#123;</span><br><span class="line">			pHead=pNew;</span><br><span class="line">			<span class="comment">//p1=pHead;</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//将地址为pNew的节点插入到首地址为pHead的链表的尾部</span></span><br><span class="line">			<span class="comment">/*p1-&gt;next=pNew;</span></span><br><span class="line"><span class="comment">			p1=pNew;</span></span><br><span class="line"><span class="comment">			pNew-&gt;next=NULL;*/</span></span><br><span class="line">			p=pHead;</span><br><span class="line">			<span class="comment">//q=(nodelist *)malloc(sizeof(nodelist));</span></span><br><span class="line">			<span class="keyword">if</span>(p-&gt;next!=<span class="number">0</span>)     <span class="comment">//文件不为空，即pHead后面有数据</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">while</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">				q=p-&gt;next;</span><br><span class="line">			    p=q;</span><br><span class="line">				&#125;</span><br><span class="line">				p-&gt;next=pNew;</span><br><span class="line">				pNew-&gt;next=NULL;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (p-&gt;next==<span class="number">0</span>) <span class="comment">//只有头结点，即pHead后面无数据</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//将地址为pNew的节点插入到首地址为pHead的链表的尾部</span></span><br><span class="line">				p-&gt;next=pNew;</span><br><span class="line">			    p=pNew;</span><br><span class="line">				pNew-&gt;next=NULL;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示链表中的数据</span></span><br><span class="line"><span class="keyword">void</span> view()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">/* 显示所有的结果 */</span></span><br><span class="line">	nodelist *p=pHead;</span><br><span class="line">	<span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">	&#123;</span><br><span class="line">			<span class="keyword">while</span>(p!=NULL)</span><br><span class="line">			&#123;</span><br><span class="line">				printf(<span class="string">&quot;%s &quot;</span>,p-&gt;ProcessName);</span><br><span class="line">				printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Priority);</span><br><span class="line">				printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Time);</span><br><span class="line">				p=p-&gt;next;</span><br><span class="line">				printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">	  printf(<span class="string">&quot;链表中啥都没有！\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> arithmetic()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//相关算法实现</span></span><br><span class="line">	nodelist *p=pHead;</span><br><span class="line">	nodelist *q=pHead;</span><br><span class="line">	nodelist *m=pHead;</span><br><span class="line">	int max=p-&gt;Priority;</span><br><span class="line">	int flag=<span class="number">0</span>;</span><br><span class="line">	int i;</span><br><span class="line">	int sum=<span class="number">0</span>;</span><br><span class="line">	char firstName[<span class="number">5</span>];</span><br><span class="line">	char ReturnProcessName[<span class="number">5</span>];</span><br><span class="line">	strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(m!=<span class="number">0</span>)&#123;</span><br><span class="line">		sum+=m-&gt;Time;</span><br><span class="line">	    m=m-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">// printf(&quot;1\n&quot;);</span></span><br><span class="line">    <span class="comment">// printf(&quot;%d\n&quot;,sum);</span></span><br><span class="line">    <span class="comment">// printf(&quot;2\n&quot;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sum; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">while</span>(p!=NULL)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>( max &lt; (p-&gt;Priority) &amp;&amp; (p-&gt;Time&gt;<span class="number">0</span>))&#123;</span><br><span class="line">                    max= p-&gt;Priority;</span><br><span class="line">                    strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line">					flag=<span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				p=p-&gt;next;</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">					<span class="comment">// printf(&quot;ReturnProcessName:%s\n&quot;, ReturnProcessName);</span></span><br><span class="line">                    <span class="comment">//printf(&quot;q-&gt;ProcessName:%s\n&quot;,q-&gt;ProcessName);</span></span><br><span class="line">                    <span class="comment">//printf(&quot;\n&quot;);</span></span><br><span class="line">				  	<span class="keyword">while</span>(q!=NULL)</span><br><span class="line">						&#123;</span><br><span class="line">							 <span class="comment">// printf(&quot;ReturnProcessName:%s\n&quot;, ReturnProcessName);</span></span><br><span class="line">      						 <span class="comment">// printf(&quot;q-&gt;ProcessName:%s\n&quot;,q-&gt;ProcessName);</span></span><br><span class="line">							<span class="keyword">if</span>(strcmp(q-&gt;ProcessName,ReturnProcessName) == <span class="number">0</span>)&#123;</span><br><span class="line">								printf(<span class="string">&quot;%s &quot;</span>,q-&gt;ProcessName);</span><br><span class="line">								q-&gt;Priority--;</span><br><span class="line">								q-&gt;Time--;</span><br><span class="line">							&#125;</span><br><span class="line">							q=q-&gt;next;</span><br><span class="line">						&#125;</span><br><span class="line">					p=pHead;</span><br><span class="line">					q=pHead;</span><br><span class="line">					max=p-&gt;Priority;</span><br><span class="line">					<span class="comment">// printf(&quot;\n&quot;);</span></span><br><span class="line">					<span class="comment">// view();</span></span><br><span class="line">					<span class="comment">// printf(&quot;\n&quot;);</span></span><br><span class="line"></span><br><span class="line">					strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190513/fWvr6o5WnCac.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190513/UBx2BDfscUbD.gif" alt="mark"></p>
<h2 id="进程调度-4：时间片轮转"><a href="#进程调度-4：时间片轮转" class="headerlink" title="进程调度 4：时间片轮转"></a>进程调度 4：时间片轮转</h2><p><strong>问题描述</strong>：</p>
<p>​ 要求输入 N 个进程（0&lt;N&lt;=100），输入时间片 M（0&lt;M〈=5），按照进程输入的顺序以时间片轮转的方法输出指定的第 K 轮（K&gt;0）执行的那个进程的进程名。</p>
<p><strong>输入格式</strong>：</p>
<p>​ 程序首先输入一个正整数 M（0&lt;M〈=5）作为时间片，下一行输入一个正整数 N（0&lt;N&lt;=100），接下来输入为 N 行，以回车符号作为分隔，每行有 2 个数据，以空格作为分隔。第一个数据是字符串（长度小于等于 10），该字符串为进程名，第 2 个数据类型为整型，表示该进程需要的运行时间。最后输入一个正整数 K，作为时间片轮转的次数（次数从 1 开始计数）。</p>
<p><strong>输出格式</strong>：</p>
<p>​ 输出一个字符串，为最后执行进程的进程名；若无进程运行，则输出“over”（不含双引号，所有字母皆为小写）。</p>
<p>样例输入 1：</p>
<p>1</p>
<p>3</p>
<p>P1 1</p>
<p>P2 2</p>
<p>P3 3</p>
<p>3</p>
<p>样例输出 1：P3</p>
<p>样例输入 2：</p>
<p>1</p>
<p>3</p>
<p>P1 1</p>
<p>P2 2</p>
<p>P3 3</p>
<p>10</p>
<p>样例输出 2：over</p>
<p>样例输入 3：</p>
<p>2</p>
<p>3</p>
<p>P1 1</p>
<p>P2 2</p>
<p>P3 3</p>
<p>4</p>
<p>样例输出 3：P3</p>
<p><em>代码展示：</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt; //strcpy()</span><br><span class="line">#include&lt;stdlib.h&gt;//malloc()</span><br><span class="line"><span class="keyword">void</span> insertQuestion();</span><br><span class="line"> <span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Time);</span><br><span class="line"><span class="keyword">void</span> view();</span><br><span class="line"><span class="keyword">void</span> arithmetic(int M,int n,int count);</span><br><span class="line">typedef struct process</span><br><span class="line">&#123;</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">    int Priority;</span><br><span class="line">    int Time;</span><br><span class="line">    struct process *next;</span><br><span class="line">&#125;nodelist;</span><br><span class="line"></span><br><span class="line">nodelist *pHead=NULL;<span class="comment">//存放调度的首节点地址</span></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    insertQuestion();</span><br><span class="line">    <span class="comment">// view();</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加问题</span></span><br><span class="line"><span class="keyword">void</span> insertQuestion()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Time);</span><br><span class="line">	<span class="keyword">void</span> arithmetic(int M,int n,int count);</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">    int Priority;</span><br><span class="line">    int Time;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int n;</span><br><span class="line">	int M;</span><br><span class="line">	int count;</span><br><span class="line">	scanf(<span class="string">&quot;%d&quot;</span>,&amp;M);</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      scanf(<span class="string">&quot;%s %d&quot;</span>,ProcessName,&amp;Time);</span><br><span class="line">      insertNode(ProcessName,Time);</span><br><span class="line">    &#125;</span><br><span class="line">	scanf(<span class="string">&quot;%d&quot;</span>,&amp;count);</span><br><span class="line">	arithmetic(M,n,count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将数据插入链表</span></span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Time)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//申请存储空间</span></span><br><span class="line">    nodelist *pNew=(nodelist *)malloc(sizeof(nodelist));</span><br><span class="line">    nodelist *p,*q;</span><br><span class="line">    strcpy(pNew-&gt;ProcessName,ProcessName);</span><br><span class="line">    pNew-&gt;Time = Time;</span><br><span class="line">    pNew-&gt;next=NULL;</span><br><span class="line">    <span class="comment">// printf(&quot;5\n&quot;);</span></span><br><span class="line">        <span class="keyword">if</span>(pHead==NULL) <span class="comment">//插入前链表为空，新插入的节点为头节点</span></span><br><span class="line">        &#123;</span><br><span class="line">            pHead=pNew;</span><br><span class="line">            <span class="comment">//p1=pHead;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//将地址为pNew的节点插入到首地址为pHead的链表的尾部</span></span><br><span class="line">            <span class="comment">/*p1-&gt;next=pNew;</span></span><br><span class="line"><span class="comment">            p1=pNew;</span></span><br><span class="line"><span class="comment">            pNew-&gt;next=NULL;*/</span></span><br><span class="line">            p=pHead;</span><br><span class="line">            <span class="comment">//q=(nodelist *)malloc(sizeof(nodelist));</span></span><br><span class="line">            <span class="keyword">if</span>(p-&gt;next!=<span class="number">0</span>)     <span class="comment">//文件不为空，即pHead后面有数据</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                q=p-&gt;next;</span><br><span class="line">                p=q;</span><br><span class="line">                &#125;</span><br><span class="line">                p-&gt;next=pNew;</span><br><span class="line">                pNew-&gt;next=NULL;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p-&gt;next==<span class="number">0</span>) <span class="comment">//只有头结点，即pHead后面无数据</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//将地址为pNew的节点插入到首地址为pHead的链表的尾部</span></span><br><span class="line">                p-&gt;next=pNew;</span><br><span class="line">                p=pNew;</span><br><span class="line">                pNew-&gt;next=NULL;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示链表中的数据</span></span><br><span class="line"><span class="keyword">void</span> view()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* 显示所有的结果 */</span></span><br><span class="line">    nodelist *p=pHead;</span><br><span class="line">    <span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">    &#123;</span><br><span class="line">            <span class="keyword">while</span>(p!=NULL)</span><br><span class="line">            &#123;</span><br><span class="line">                printf(<span class="string">&quot;%s &quot;</span>,p-&gt;ProcessName);</span><br><span class="line">                printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Time);</span><br><span class="line">                p=p-&gt;next;</span><br><span class="line">                printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      printf(<span class="string">&quot;链表中啥都没有！\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> arithmetic(int M,int n,int count)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//相关算法实现</span></span><br><span class="line">    nodelist *p=pHead;</span><br><span class="line">    int index=<span class="number">0</span>;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int forcount=<span class="number">0</span>;</span><br><span class="line">    int Numcount=<span class="number">0</span>;</span><br><span class="line">    int sum=<span class="number">0</span>;</span><br><span class="line">    int flag=<span class="number">0</span>;</span><br><span class="line">    int finallyNum=<span class="number">0</span>;</span><br><span class="line">	 <span class="comment">// printf(&quot;%d %d %d\n&quot;,M,n,count);</span></span><br><span class="line">     <span class="comment">// printf(&quot;%d\n&quot;,count/n);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(count%n==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        forcount=count/n;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        forcount=count/n+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">// printf(&quot;forcount:%d\n&quot;, forcount);</span></span><br><span class="line">     <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; forcount; i++)</span><br><span class="line">         &#123;</span><br><span class="line">                    <span class="keyword">while</span>(p!=NULL)</span><br><span class="line">                    &#123;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">if</span>(p-&gt;Time&gt;<span class="number">0</span>)&#123;</span><br><span class="line"></span><br><span class="line">                            p-&gt;Time=p-&gt;Time - M;</span><br><span class="line">                            <span class="comment">// printf(&quot;%s\n&quot;,p-&gt;ProcessName);</span></span><br><span class="line">                            <span class="comment">// view();</span></span><br><span class="line">                            <span class="comment">// printf(&quot;\n&quot;);</span></span><br><span class="line">                            Numcount++;</span><br><span class="line">                            <span class="comment">// printf(&quot;%d\n&quot;,Numcount);</span></span><br><span class="line">                            finallyNum=Numcount;</span><br><span class="line">                            <span class="keyword">if</span> (Numcount==count)</span><br><span class="line">                            &#123;</span><br><span class="line">                              printf(<span class="string">&quot;%s\n&quot;</span>,p-&gt;ProcessName);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                         p=p-&gt;next;</span><br><span class="line">                    &#125;</span><br><span class="line">                    p=pHead;</span><br><span class="line">         &#125;</span><br><span class="line"><span class="keyword">if</span>(finallyNum &lt; count)&#123;</span><br><span class="line">   printf(<span class="string">&quot;over\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190522/EE00fbgzk6Ho.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190522/FAQDVGbxoawJ.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190522/ddwSvMe4TwsW.gif" alt="mark"></p>
<hr>
<h2 id="存储管理-1"><a href="#存储管理-1" class="headerlink" title="存储管理 1"></a>存储管理 1</h2><p><strong>问题描述</strong>：</p>
<p>​ 现有一个 8*8 的存储器，要对其空间进行分配。（下标从 0 开始，最后一个内存块下标为 63）。现已有块号为 1、7、13、23、47、59 的几个内存块被占用。现操作系统要求申请 N 块内存空间（0&lt;N&lt;=64），当输入的块数 N 超出其剩余空闲块数的时候，输出为“false”，当输入为合理范围的时候，就输出其以行主序分配的最后一个内存空间的下标。</p>
<p><strong>输入格式：</strong></p>
<p>​ 程序要求输入一个整型数 N，表示要申请分配空间的大小。</p>
<p><strong>输出格式</strong>：</p>
<p>​ 输出为一个整型数，表示最后一个被分配空间的下标。</p>
<p>样例输入 1：</p>
<p>3</p>
<p>样例输出 1：</p>
<p>3</p>
<p>样例输入 2：</p>
<p>100</p>
<p>样例输出 2：</p>
<p>false</p>
<p>样例输入 3：</p>
<p>50</p>
<p>样例输出 3：</p>
<p>54</p>
<p>_源代码_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int arr[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int n;</span><br><span class="line">    int count=<span class="number">0</span>;</span><br><span class="line">    arr[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">7</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">13</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">23</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">47</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">59</span>]=<span class="number">1</span>;</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">if</span> (n&gt;<span class="number">58</span>)</span><br><span class="line">    &#123;</span><br><span class="line">    	printf(<span class="string">&quot;false\n&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    	 <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n+<span class="number">1</span>; i++)</span><br><span class="line">		    &#123;</span><br><span class="line">		    	<span class="keyword">if</span> (arr[i]==<span class="number">1</span>)</span><br><span class="line">		    	&#123;</span><br><span class="line">		    		count++;</span><br><span class="line">		   		&#125;</span><br><span class="line">		 	&#125;</span><br><span class="line"> 	printf(<span class="string">&quot;%d\n&quot;</span>, count+n<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190522/fhJf38dsniWT.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190522/G8b9fg3D0LVM.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190522/cy8XL8vNxJrJ.gif" alt="mark"></p>
<h2 id="存储管理-2"><a href="#存储管理-2" class="headerlink" title="存储管理 2"></a>存储管理 2</h2><p><strong>问题描述</strong>：</p>
<p>​ 现有一个 8*8 的存储器，要对其空间进行分配。（下标从 0 开始，最后一个内存块下标为 63）。现已有块号为 2、7、13、23、37、47、59、61 的几个内存块被占用。要求输入需分配的进程数 M（0&lt;M&lt;=56），接下来输入为 M 个整型数，每个数为各个进程需占用的内存块数。当分配到某进程时，其剩余空闲块数可以分配，就输出当前进程分配的最后一个内存空间的下标。当分配到某进程时，其进程块数超出剩余空闲块数无法分配，输出为“false”（不含双引号，且为全小写）。输出的多个下标（或”false”）之间用空格隔开。</p>
<p><strong>输入格式</strong>：</p>
<p>​ 程序输入分为两行，第一行要求输入一个整型数 M，表示要所需分配空间的进程数，接下来的第二行输入 M 个整型数，每个数之间用空格隔开，表示 M 个进程每个进程占用的内存空间大小。</p>
<p><strong>输出格式：</strong></p>
<p>​ 输出为 M 组整型数（或”false”），每个整型数表示该进程最后一个被分配的内存空间的下标（或”false”），下标（或”false”）之间用空格隔开。</p>
<p>样例输入 1：</p>
<p>3</p>
<p>3 3 3</p>
<p>样例输出 1：</p>
<p>3 6 10</p>
<p>样例输入 2：</p>
<p>4</p>
<p>3 3 64 3</p>
<p>样例输出 2：</p>
<p>3 6 false 10</p>
<p><em>源代码：</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">void</span> funsave(int n,int arr[<span class="number">64</span>],int residue);</span><br><span class="line">    int arr[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int num[<span class="number">200</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int inputnum;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int x[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int sumsheng=<span class="number">56</span>;</span><br><span class="line">    char thirdName[<span class="number">10</span>];</span><br><span class="line">    char str[<span class="number">10</span>];</span><br><span class="line">    int getInTStr;</span><br><span class="line">    arr[<span class="number">2</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">7</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">13</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">23</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">37</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">41</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">47</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">59</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">61</span>]=<span class="number">1</span>;</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;inputnum);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; inputnum; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        scanf(<span class="string">&quot;%d&quot;</span>,&amp;num[i]);</span><br><span class="line">        <span class="keyword">if</span> (sumsheng&gt;num[i])</span><br><span class="line">        &#123;</span><br><span class="line">           sumsheng=sumsheng-num[i];</span><br><span class="line">        &#125;</span><br><span class="line">      x[i]=sumsheng;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; inputnum; i++)</span><br><span class="line">     &#123;</span><br><span class="line">      funsave(num[i],arr,x[i]);</span><br><span class="line">     &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> funsave(int n,int arr[<span class="number">64</span>],int residue)&#123;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int count=<span class="number">0</span>;</span><br><span class="line">    int indexI=<span class="number">0</span>;</span><br><span class="line">    int flag=<span class="number">0</span>;</span><br><span class="line">    int arr1[<span class="number">20</span>];</span><br><span class="line">    int arr2[<span class="number">20</span>];</span><br><span class="line">    int finallyIndex=<span class="number">0</span>;</span><br><span class="line">    int arrindex=<span class="number">0</span>;</span><br><span class="line">    int arrindex2=<span class="number">0</span>;</span><br><span class="line">   <span class="comment">// printf(&quot;start n:%d\n&quot;,n);</span></span><br><span class="line">    <span class="comment">// printf(&quot;getInTStr:%d\n&quot;,getInTStr);</span></span><br><span class="line">  <span class="keyword">if</span> (n&gt;residue)</span><br><span class="line">    &#123;</span><br><span class="line">      printf(<span class="string">&quot;false &quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (arr[<span class="number">0</span>]==<span class="number">0</span>)</span><br><span class="line">       &#123;</span><br><span class="line">         <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="keyword">if</span> (arr[i]==<span class="number">1</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            count++;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; count+n; i++)</span><br><span class="line">         &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                arr2[arrindex2]=i;</span><br><span class="line">                arrindex2++;</span><br><span class="line">            &#125;</span><br><span class="line">            arr[i]=<span class="number">1</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         printf(<span class="string">&quot;%d &quot;</span>, n+count<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            indexI=i;</span><br><span class="line">            goto LOOP;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">       LOOP:<span class="keyword">for</span>(i=indexI;i&lt;indexI+n;i++)&#123;</span><br><span class="line">          <span class="keyword">if</span> (arr[i]==<span class="number">1</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            count++;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (i = indexI; i &lt; indexI+count+n; i++)</span><br><span class="line">         &#123;</span><br><span class="line">          <span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            finallyIndex=i;</span><br><span class="line">            arr1[arrindex]=i;</span><br><span class="line">          arrindex=arrindex+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line">            arr[i]=<span class="number">1</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         printf(<span class="string">&quot;%d &quot;</span>, finallyIndex);</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190523/iyJhP4Rqt9KS.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190523/ri4eCOgCqxI1.gif" alt="mark"></p>
<h2 id="储存管理-3"><a href="#储存管理-3" class="headerlink" title="储存管理 3"></a>储存管理 3</h2><p><strong>问题描述：</strong></p>
<p>​ 现有一个 8*8 的存储器，要对其已分配的空间进行分配及回收。（下标从 0 开始，最后一个内存块下标为 63）。现已有块号为 2、7、13、23、37、41、47、59、61 的几个内存块被占用。要求输入需分配的进程数 M（0&lt;M&lt;=55），接下来输入为 M 个整型数，每个数为各个进程需占用的内存块数。当分配到某进程时，其剩余空闲块数可以分配，就输出当前进程分配的最后一个内存空间的下标。当分配到某进程时，其进程块数超出剩余空闲块数无法分配，输出为“false”（不含双引号，且为全小写）。输出的多个下标（或”false”）之间用空格隔开。以上进程不管是否分配成功，按照输入顺序依次命名为 p1、p2、p3………pM。回收的时候输入进程名 pN，则返回进程名为 pN 的所有占用内存块号下标，如果该进程名不存在或输入的数值为不合理范围，则返回“false”。</p>
<p><strong>输入格式：</strong></p>
<p>​ 程序输入分为三行，第一行是一个整型数 M，表示要所需分配空间的进程数，第二行为 M 个整型数，每个数之间用空格隔开，表示 M 个进程每个进程占用的内存空间大小。第三行为需要回收的进程名 pN，p 为小写字母，N 为正整型数。</p>
<p><strong>输出格式：</strong></p>
<p>​ 输出为两行，第一行为一组整型数，每个整型数表示该进程最后一个被分配的内存空间的下标，下标之间用空格隔开。第二行为一组整型数，表示被回收的进程的内存块下标，多个下标之间用空格隔开。</p>
<p>样例输入 1：</p>
<p>3</p>
<p>3 3 3</p>
<p>p3</p>
<p>样例输出 1：</p>
<p>3 6 10</p>
<p>8 9 10</p>
<p>样例输入 2：</p>
<p>4</p>
<p>3 3 64 3</p>
<p>p3</p>
<p>样例输出 2：</p>
<p>3 6 false 10</p>
<p>false</p>
<p><em>源代码：</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int *funsave(int n,int arr[<span class="number">64</span>],int residue,int getInTStr,int indexflag,int num[<span class="number">64</span>]);</span><br><span class="line">    int arr[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int num[<span class="number">200</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int inputnum;</span><br><span class="line">    int i=<span class="number">0</span>,j=<span class="number">0</span>;</span><br><span class="line">    int x[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int sumsheng=<span class="number">56</span>;</span><br><span class="line">    char thirdName[<span class="number">10</span>];</span><br><span class="line">    char str[<span class="number">10</span>];</span><br><span class="line">    int getInTStr;</span><br><span class="line">     int *p;</span><br><span class="line">     int indexflag=<span class="number">0</span>;</span><br><span class="line">    arr[<span class="number">2</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">7</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">13</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">23</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">37</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">41</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">47</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">59</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">61</span>]=<span class="number">1</span>;</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;inputnum);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; inputnum; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        scanf(<span class="string">&quot;%d&quot;</span>,&amp;num[i]);</span><br><span class="line">        <span class="keyword">if</span> (sumsheng&gt;num[i])</span><br><span class="line">        &#123;</span><br><span class="line">        	 sumsheng=sumsheng-num[i];</span><br><span class="line">        &#125;</span><br><span class="line"> 			x[i]=sumsheng;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    scanf(<span class="string">&quot;%s&quot;</span>,thirdName);</span><br><span class="line"></span><br><span class="line">    strncpy(str, thirdName+<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	getInTStr=atoi(str);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; inputnum; i++)</span><br><span class="line">     &#123;</span><br><span class="line">     	p=funsave(num[i],arr,x[i],getInTStr,indexflag,num);</span><br><span class="line"></span><br><span class="line">     		indexflag=indexflag+<span class="number">1</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="comment">// printf(&quot;sumsheng:%d\n&quot;, sumsheng);</span></span><br><span class="line">     <span class="comment">// for(i=0;i&lt;inputnum;i++)&#123;</span></span><br><span class="line">     <span class="comment">//       printf(&quot;%d &quot;,num[i]);</span></span><br><span class="line">     <span class="comment">//   &#125;</span></span><br><span class="line">       <span class="comment">// printf(&quot;\n&quot;);</span></span><br><span class="line">       <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;inputnum;i++)&#123;</span><br><span class="line">           <span class="keyword">if</span>(num[i]&gt;sumsheng&amp;&amp;getInTStr==i+<span class="number">1</span>)&#123;</span><br><span class="line">           		printf(<span class="string">&quot;false\n&quot;</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">       <span class="keyword">if</span> (getInTStr==<span class="number">1</span>)</span><br><span class="line">       &#123;</span><br><span class="line">	       <span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; num[<span class="number">0</span>]; i++ )</span><br><span class="line">		   &#123;</span><br><span class="line">		       printf(<span class="string">&quot;%d &quot;</span>, *(p + i));</span><br><span class="line">		   &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int *funsave(int n,int arr[<span class="number">64</span>],int residue,int getInTStr,int indexflag,int num[<span class="number">64</span>])&#123;</span><br><span class="line">    int i=<span class="number">0</span>,j=<span class="number">0</span>;</span><br><span class="line">    int count=<span class="number">0</span>;</span><br><span class="line">    int indexI=<span class="number">0</span>;</span><br><span class="line">    int flag=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">static</span>  int arr1[<span class="number">64</span>][<span class="number">64</span>];</span><br><span class="line">    <span class="keyword">static</span>  int arr2[<span class="number">20</span>];</span><br><span class="line">    int finallyIndex=<span class="number">0</span>;</span><br><span class="line">    int arrindex=<span class="number">0</span>;</span><br><span class="line">    int arrindex2=<span class="number">0</span>;</span><br><span class="line">   <span class="comment">// printf(&quot;start n:%d\n&quot;,n);</span></span><br><span class="line">    <span class="comment">// printf(&quot;getInTStr:%d\n&quot;,getInTStr);</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// for(i=0;i&lt;10;i++)&#123;</span></span><br><span class="line">    <span class="comment">// 	printf(&quot;%d &quot;, num[i]);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// printf(&quot;\n&quot;);</span></span><br><span class="line">	<span class="keyword">if</span> (n&gt;residue)</span><br><span class="line">    &#123;</span><br><span class="line">    	printf(<span class="string">&quot;false &quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    	 <span class="keyword">if</span> (arr[<span class="number">0</span>]==<span class="number">0</span>)</span><br><span class="line">    	 &#123;</span><br><span class="line">    	 	 <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">		    &#123;</span><br><span class="line">		    	<span class="keyword">if</span> (arr[i]==<span class="number">1</span>)</span><br><span class="line">		    	&#123;</span><br><span class="line">		    		count++;</span><br><span class="line">		   		&#125;</span><br><span class="line">		 	&#125;</span><br><span class="line">		 	 <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; count+n; i++)</span><br><span class="line">			   &#123;</span><br><span class="line">			   	  <span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">			   	  &#123;</span><br><span class="line">			   	      arr2[arrindex2]=i;</span><br><span class="line">			   	      arrindex2++;</span><br><span class="line">			   	  &#125;</span><br><span class="line">			   	  arr[i]=<span class="number">1</span>;</span><br><span class="line">			   &#125;</span><br><span class="line">			   printf(<span class="string">&quot;%d &quot;</span>, n+count<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    	 &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    	 	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">    	 	&#123;</span><br><span class="line">    	 		<span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">    	 		&#123;</span><br><span class="line">    	 			indexI=i;</span><br><span class="line">    	 			goto LOOP;</span><br><span class="line">    	 		&#125;</span><br><span class="line">    	 	&#125;</span><br><span class="line"></span><br><span class="line">    	 LOOP:<span class="keyword">for</span>(i=indexI;i&lt;indexI+n;i++)&#123;</span><br><span class="line">    	 		<span class="keyword">if</span> (arr[i]==<span class="number">1</span>)</span><br><span class="line">		    	&#123;</span><br><span class="line">		    		count++;</span><br><span class="line">		   		&#125;</span><br><span class="line">    	 	&#125;</span><br><span class="line">    	 	<span class="comment">// printf(&quot;indexflag:%d\n&quot;, indexflag);</span></span><br><span class="line">    	 	<span class="keyword">for</span> (i = indexI; i &lt; indexI+count+n; i++)</span><br><span class="line">			   &#123;</span><br><span class="line">			   	<span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">			   	&#123;</span><br><span class="line">			   		finallyIndex=i;</span><br><span class="line">			   		arr1[indexflag<span class="number">-1</span>][arrindex]=i;</span><br><span class="line">					arrindex=arrindex+<span class="number">1</span>;</span><br><span class="line">			   	&#125;</span><br><span class="line">			   	  arr[i]=<span class="number">1</span>;</span><br><span class="line">			   &#125;</span><br><span class="line">			    printf(<span class="string">&quot;%d &quot;</span>, finallyIndex);</span><br><span class="line">    			&#125;</span><br><span class="line">    	 &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    	 <span class="keyword">if</span> (getInTStr==<span class="number">1</span>)</span><br><span class="line">    	 &#123;</span><br><span class="line">    	 	<span class="keyword">return</span> arr2;</span><br><span class="line">    	 &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">    	 	<span class="comment">// printf(&quot;getInTStr:%d\n&quot;, getInTStr);</span></span><br><span class="line">       <span class="comment">//       printf(&quot;n:%d\n&quot;,n );</span></span><br><span class="line">       <span class="comment">//       printf(&quot;indexflag:%d\n&quot;,indexflag );</span></span><br><span class="line">    	 	<span class="comment">// for(i=0;i&lt;10;i++)</span></span><br><span class="line">			    <span class="comment">// &#123;</span></span><br><span class="line">			    <span class="comment">//     for(j=0;j&lt; 10;j++)</span></span><br><span class="line">			    <span class="comment">//     &#123;</span></span><br><span class="line">			    <span class="comment">//         printf(&quot;%d\t&quot;,arr1[i][j]);//访问i行j列的二维数组元素</span></span><br><span class="line">			    <span class="comment">//     &#125;</span></span><br><span class="line">			    <span class="comment">//     printf(&quot;\n&quot;);</span></span><br><span class="line">			    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">             <span class="keyword">if</span> (n&lt;=residue)&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">             	 <span class="keyword">if</span> (indexflag+<span class="number">1</span>&gt;=n)</span><br><span class="line">				 &#123;</span><br><span class="line">				 		printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">				        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;num[getInTStr<span class="number">-1</span>];j++)</span><br><span class="line">				        &#123;</span><br><span class="line">				        	<span class="keyword">if</span>(arr1[getInTStr<span class="number">-2</span>][j]!=<span class="number">0</span>)&#123;</span><br><span class="line"> 									printf(<span class="string">&quot;%d &quot;</span>,arr1[getInTStr<span class="number">-2</span>][j]);<span class="comment">//访问i行j列的二维数组元素</span></span><br><span class="line">				        	&#125;</span><br><span class="line"></span><br><span class="line">				        &#125;</span><br><span class="line">				 &#125;</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    	 &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190602/famTkQ0URtAP.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190602/u7GSImrnET42.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190602/upFLuGwWxBsR.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190602/KXkISHw5iD2s.gif" alt="mark"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%AE%AD/" rel="tag">学习实训</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6/" rel="tag">进程调度</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-ReactLearn03"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/12/ReactLearn03/"
    >React 学习第三天</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/05/12/ReactLearn03/" class="article-date">
  <time datetime="2019-05-12T05:10:24.000Z" itemprop="datePublished">2019-05-12</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a> / <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/React/">React</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="React-第三天学习"><a href="#React-第三天学习" class="headerlink" title="React 第三天学习"></a>React 第三天学习</h2><blockquote>
<p>在 react 项目中 添加样式</p>
<p>加载外部 css 样式文件</p>
<p>css 样式作用域的问题（modules，localIdentName， local 和 global）</p>
<p>在 React 项目中 使用 bootsrtap（ 使用 sass ）</p>
<p>React 中 绑定事件</p>
<p>React 中双向绑定事件（e.target.value 和 this.refs.txt.value）</p>
<p>React 组件的生命周期</p>
<p>Dream what you want to dream; go where you want to go; be what you want to be, because you have only one life and one chance to do all the things you want to do！</p>
<p>做你想做的梦吧，去你想去的地方吧，成为你想成为的人吧，因为你只有一次生命，一个机会去做所有那些你想做的事。</p>
</blockquote>
<h2 id="在-react-项目中-添加样式"><a href="#在-react-项目中-添加样式" class="headerlink" title="在 react 项目中 添加样式"></a>在 react 项目中 添加样式</h2><h3 id="第一种方式："><a href="#第一种方式：" class="headerlink" title="第一种方式："></a>第一种方式：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 style=&#123;&#123; <span class="attr">color</span>: <span class="string">&quot;red&quot;</span>, <span class="attr">fontSize</span>: <span class="string">&quot;50px&quot;</span> &#125;&#125;&gt;这是评论列表组件&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<h4 id="第一层封装："><a href="#第一层封装：" class="headerlink" title="第一层封装："></a>第一层封装：</h4><p><strong>将样式对象抽离出来</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cmtStyle=&#123;<span class="attr">color</span>:<span class="string">&#x27;red&#x27;</span>,<span class="attr">fontSize</span>:<span class="string">&#x27;30px&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">&lt;h1 style=&#123;cmtStyle&#125;&gt;这是评论列表组件&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<h4 id="第二层封装："><a href="#第二层封装：" class="headerlink" title="第二层封装："></a>第二层封装：</h4><p><strong>合并成一个大的样式对象</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = &#123;</span><br><span class="line">  Item: &#123; <span class="attr">border</span>: <span class="string">&quot;1px dashed #ccc&quot;</span>, <span class="attr">margin</span>: <span class="string">&quot;10px 10px&quot;</span> &#125;,</span><br><span class="line">  user: &#123; <span class="attr">color</span>: <span class="string">&quot;#333&quot;</span> &#125;,</span><br><span class="line">  content: &#123; <span class="attr">color</span>: <span class="string">&quot;green&quot;</span>, <span class="attr">fontSize</span>: <span class="string">&quot;22px&quot;</span> &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">CmtItem</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div style=&#123;styles.Item&#125;&gt;</span><br><span class="line">      &lt;h3 style=&#123;styles.user&#125;&gt;评论人：&#123;props.user&#125;&lt;/h3&gt;</span><br><span class="line">      &lt;p style=&#123;styles.content&#125;&gt;评论内容：&#123;props.content&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190508/ivSmbt2swrg3.png?imageslim" alt="mark"></p>
<h4 id="第三层封装"><a href="#第三层封装" class="headerlink" title="第三层封装"></a>第三层封装</h4><p><strong>抽离为单独的 样式表模块</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190508/Gg6ricXHCgO0.png?imageslim" alt="mark"></p>
<p>_CmtItem.jsx_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react</span></span><br><span class="line"><span class="string">import styles from &#x27;</span>@/components/styles<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default function CmtItem(props) &#123;</span></span><br><span class="line"><span class="string">    return &lt;div style=&#123;styles.Item&#125;&gt;</span></span><br><span class="line"><span class="string">        &lt;h3 style=&#123;styles.user&#125;&gt;评论人：&#123;props.user&#125;&lt;/h3&gt;</span></span><br><span class="line"><span class="string">        &lt;p style=&#123;styles.content&#125;&gt;评论内容：&#123;props.content&#125;&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p><em>styles.js</em>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  Item: &#123; <span class="attr">border</span>: <span class="string">&quot;1px dashed #ccc&quot;</span>, <span class="attr">margin</span>: <span class="string">&quot;10px 10px&quot;</span> &#125;,</span><br><span class="line">  user: &#123; <span class="attr">color</span>: <span class="string">&quot;#333&quot;</span> &#125;,</span><br><span class="line">  content: &#123; <span class="attr">color</span>: <span class="string">&quot;green&quot;</span>, <span class="attr">fontSize</span>: <span class="string">&quot;22px&quot;</span> &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="加载外部-css-样式文件"><a href="#加载外部-css-样式文件" class="headerlink" title="加载外部 css 样式文件"></a>加载外部 css 样式文件</h2><p><em>index.js</em>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; <span class="comment">//创建组件，虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>; <span class="comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> CmtList <span class="keyword">from</span> <span class="string">&quot;@/components/CmtList&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;CmtList&gt;&lt;/CmtList&gt;</span><br><span class="line">  &lt;/div&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>_CmtList.jsx_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> CmtItem <span class="keyword">from</span> <span class="string">&#x27;@/components/CmtItem&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cmtStyle = &#123;<span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>, <span class="attr">fontSize</span>: <span class="string">&#x27;30px&#x27;</span>, <span class="attr">textAlign</span>: <span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">import</span> cssobj <span class="keyword">from</span> cmtList.scss</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CmtList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">super</span>()</span><br><span class="line">        <span class="built_in">this</span>.state = &#123;</span><br><span class="line">            CommentList: [</span><br><span class="line">                &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">user</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;哈哈哈哈哈&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">user</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;打游戏&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">user</span>: <span class="string">&#x27;王五&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;唱歌，喝酒&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">id</span>: <span class="number">4</span>, <span class="attr">user</span>: <span class="string">&#x27;王麦子&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;到处happy&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">id</span>: <span class="number">5</span>, <span class="attr">user</span>: <span class="string">&#x27;周琛&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;帅的不要不要了！&#x27;</span>&#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是评论列表组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;this.state.CommentList.map(item =&gt;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">CmtItem</span> &#123;<span class="attr">...item</span>&#125; <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">CmtItem</span>&gt;</span></span></span><br><span class="line"><span class="xml">            )&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>_CmtItem.jsx_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;@/components/styles&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">CmtItem</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div style=&#123;styles.Item&#125;&gt;</span><br><span class="line">      &lt;h1 style=&#123;styles.user&#125;&gt;评论人：&#123;props.user&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;p&gt;评论内容：&#123;props.content&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>webpack.config.js</em>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> htmlplugin = <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">  template: path.join(__dirname, <span class="string">&quot;src/index.html&quot;</span>),</span><br><span class="line">  filename: <span class="string">&quot;index.html&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    port: <span class="number">3000</span>,</span><br><span class="line">    contentBase: path.join(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [htmlplugin],</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.m?js|jsx$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            presets: [</span><br><span class="line">              <span class="string">&quot;@babel/preset-env&quot;</span>,</span><br><span class="line">              [</span><br><span class="line">                <span class="string">&quot;@babel/preset-react&quot;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                  pragmaFrag: <span class="string">&quot;DomFrag&quot;</span>, <span class="comment">// default is React.Fragment</span></span><br><span class="line">                  throwIfNamespace: <span class="literal">false</span>, <span class="comment">// defaults to true</span></span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">            ],</span><br><span class="line">            plugins: [<span class="string">&quot;@babel/plugin-proposal-class-properties&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, use: [<span class="string">&quot;style-loader,css-loader&quot;</span>] &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [<span class="string">&quot;.js&quot;</span>, <span class="string">&quot;.jsx&quot;</span>, <span class="string">&quot;.json&quot;</span>],</span><br><span class="line">    alias: &#123;</span><br><span class="line">      <span class="string">&quot;@&quot;</span>: path.join(__dirname, <span class="string">&quot;./src&quot;</span>), <span class="comment">//这样，@ 就表示 项目根目录中 的src 这一层路径</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="配置好相应的文件后，但是却意外的发生了错误！"><a href="#配置好相应的文件后，但是却意外的发生了错误！" class="headerlink" title="配置好相应的文件后，但是却意外的发生了错误！"></a>配置好相应的文件后，但是却意外的发生了错误！</h4><p><img src="http://static.zxinc520.com/blog/20190511/GMbDLo9GrxeD.png?imageslim" alt="mark"></p>
<p>查阅资料：参考 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/35171288/error-cannot-resolve-module-style-loader"><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/35171288/error-cannot-resolve-module-style-loader">Error: Cannot resolve module ‘style-loader’</a></a></p>
<p>但是不知咋地，我瞎弄了一下，突然就好了！~</p>
<p>_结果_：</p>
<p><img src="http://static.zxinc520.com/blog/20190509/o8CRGPxVP3S2.png?imageslim" alt="mark"></p>
<h1 id="引出-css-样式作用域的问题"><a href="#引出-css-样式作用域的问题" class="headerlink" title="引出 css 样式作用域的问题"></a>引出 css 样式作用域的问题</h1><h4 id="给普通样式表加模块化"><a href="#给普通样式表加模块化" class="headerlink" title="给普通样式表加模块化"></a>给普通样式表加模块化</h4><blockquote>
<p>CSS MODULE 是一种 css in javascript 的方式，当我们把一个 css 文件 import 到一个 js 模块时，这个 css 文件会暴露一个对象，这个对象映射所有的本地和全局 css 类名</p>
</blockquote>
<p>​ <a target="_blank" rel="noopener" href="https://juejin.im/entry/5826e755c4c9710054313d6e">你真的知道 css-loader 怎么用吗？</a></p>
<h2 id="modules"><a href="#modules" class="headerlink" title="modules"></a>modules</h2><p><strong>操作</strong>：</p>
<ul>
<li>配置 <strong><em>webpack.config.js</em></strong>: 追加参数 _modules_：表示为 普通的 css 样式表，启用模块化。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.css$/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader?modules&#x27;</span>]&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：</p>
<ul>
<li>css 模块化，只针对 <strong>类选择器</strong> 和 <strong>Id 选择器</strong>生效。</li>
<li>css 模块化，不会将 <strong>标签选择器</strong> 模块化。</li>
</ul>
<p><strong>使用</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cssobj <span class="keyword">from</span> cmtList.scss</span><br><span class="line"></span><br><span class="line">&lt;h1 className=&#123;cssobj.title&#125;&gt;这是评论列表组件&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190509/uBEiMLCl4Po1.png?imageslim" alt="mark"></p>
<h2 id="localIdentName"><a href="#localIdentName" class="headerlink" title="localIdentName"></a>localIdentName</h2><blockquote>
<p>通常 modules 参数还要通过 localIdentName 的配合来设置 css 的类名。在上文中我们看到没有设置 localIdentName 的 css 编译后是一串随机字符串，可读性很差，因此我们还需要对它的类名进行处理，这就用到了 localIdentName。</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190509/LmY7Up6tjWsL.png?imageslim" alt="mark"></p>
<p>使用 localIdentName 设置 css-modules 模式下 local 类名的命名。</p>
<p>_例如_：</p>
<p>【path】：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.css$/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader?modules&amp;localIdentName=[path]&#x27;</span>]&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/6kzRvdhhMCya.png?imageslim" alt="mark"></p>
<p>【path】【name】：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.css$/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader?modules&amp;localIdentName=[path][name]&#x27;</span>]&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/1fSFPLQWlGcr.png?imageslim" alt="mark"></p>
<p>【path】【name】【local】：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.css$/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader?modules&amp;localIdentName=[path][name]-[local]&#x27;</span>]&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190509/mnElXq2M49y5.png?imageslim" alt="mark"></p>
<p>【path】【name】【local】【hash】：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.css$/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader?modules&amp;localIdentName=[path][name]-[local]-[hash]&#x27;</span>]&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/f0mCgGRosdOV.png?imageslim" alt="mark"></p>
<h2 id="通过-local-和-global-设置类名是否被模块化"><a href="#通过-local-和-global-设置类名是否被模块化" class="headerlink" title="通过 local 和 global 设置类名是否被模块化"></a>通过 local 和 global 设置类名是否被模块化</h2><blockquote>
<p>被 <strong>:local()</strong> 包裹起来的类名，会被模块化，默认情况下，所有的类名和 ID 都被模块化了。</p>
<p>被 :global() 包裹起来的类名，不会被模块化，而会全局生效。</p>
</blockquote>
<p><strong>需求</strong>：</p>
<p><img src="http://static.zxinc520.com/blog/20190511/1nDtTim2qWpX.png?imageslim" alt="mark"></p>
<p>解决方案： <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/23843710">可以参考</a></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:global(.test)</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>结果</strong> ：</p>
<ul>
<li>test 类名 <em>未被模块化</em> ，而是 _全局生效_：</li>
</ul>
<p><img src="http://static.zxinc520.com/blog/20190509/mxSgHjcOQL7t.png?imageslim" alt="mark"></p>
<h2 id="在-React-项目中-使用-bootsrtap"><a href="#在-React-项目中-使用-bootsrtap" class="headerlink" title="在 React 项目中 使用 bootsrtap"></a>在 React 项目中 使用 bootsrtap</h2><ol>
<li>安装 bootstrap 我一般使用 3.3.7 版本</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i bootstrap@3.3.7 -S</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>安装 相关 路径 图标 加载依赖</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i url-loader file-loader -D</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>配置 webpack-config-js 文件</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.ttf|woff|woff2|eot|svg$/</span>,use:<span class="string">&#x27;url-loader&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>导入 <strong>bootstrap 包</strong> 并且 使用 <em>bootstrap 类</em></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bootcss <span class="keyword">from</span> <span class="string">&quot;bootstrap/dist/css/bootstrap.min.css&quot;</span>;</span><br><span class="line"></span><br><span class="line">&lt;button className=&#123;[bootcss.btn, bootcss[<span class="string">&quot;btn-primary&quot;</span>]].join(<span class="string">&quot; &quot;</span>)&#125;&gt;</span><br><span class="line">  点我</span><br><span class="line">&lt;/button&gt;;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190509/AIA3b6TmGWOP.png?imageslim" alt="mark"></p>
<h3 id="升级："><a href="#升级：" class="headerlink" title="升级："></a>升级：</h3><p>问题：className={[bootcss.btn,bootcss[‘btn-primary’]].join(‘ ‘)} <strong>这样调用太麻烦了</strong></p>
<blockquote>
<p>_自己规定_：</p>
<p><strong>第三方的 样式表</strong>：(例如: bootsrtap 等 )都是以 .css 结尾，这样，我们不要为普通的 .css 启用模块化。</p>
<p><strong>自己定义样式表</strong>：都要以 .scss 或 .less 结尾，只为 .scss 或 .less 结尾的启用模块化。</p>
</blockquote>
<h3 id="使用-sass"><a href="#使用-sass" class="headerlink" title="使用 sass"></a>使用 sass</h3><blockquote>
<p>​ <a target="_blank" rel="noopener" href="https://www.cnblogs.com/wangpenghui522/p/5467560.html">Sass/Scss、Less 是什么?</a></p>
</blockquote>
<ol>
<li>安装：</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i sass-loader node-sass -D</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>配置 <em>webpack.comfig.js</em> :</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.css$/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>]&#125;,</span><br><span class="line"></span><br><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.scss/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader?modules&amp;localIdentName=[path][name]-[local]-[hash:5]&#x27;</span>,<span class="string">&#x27;sass-loader&#x27;</span>]&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>导入 <strong>bootstrap 包</strong> 并且 使用 <em>bootstrap 类</em> （ <em>只用导入第三方路径即可</em> ）</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;bootstrap/dist/css/bootstrap.min.css&quot;</span>;</span><br><span class="line"></span><br><span class="line">&lt;button className=<span class="string">&quot;btn btn-danger&quot;</span>&gt;点我&lt;/button&gt;;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/nsjoVX1si22z.png?imageslim" alt="mark"></p>
<h2 id="React-中-绑定事件"><a href="#React-中-绑定事件" class="headerlink" title="React 中 绑定事件"></a>React 中 绑定事件</h2><h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><p><em>BindEvent.jsx</em>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        BindEvent组件</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          按钮</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/QvadnFjsB97L.gif" alt="mark"></p>
<p>_分离_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;BindEvent组件！&lt;/h1&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.myClickHandler();</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          你敢点我吗？</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  myClickHandler = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    alert(<span class="string">&quot;这是myClickHandler方法！&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/9kb9Av4PcP9d.gif" alt="mark"></p>
<p>_传递参数_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;BindEvent组件！&lt;/h1&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.myClickHandler(<span class="string">&quot;哈哈哈哈哈哈！&quot;</span>);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          你敢点我吗？</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  myClickHandler = <span class="function">(<span class="params">arg1</span>) =&gt;</span> &#123;</span><br><span class="line">    alert(<span class="string">&quot;这是myClickHandler方法！&quot;</span> + arg1);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/x9zF0YsaynFo.gif" alt="mark"></p>
<h3 id="需求：点击按钮，改变-this-state-里面的值"><a href="#需求：点击按钮，改变-this-state-里面的值" class="headerlink" title="需求：点击按钮，改变 this.state 里面的值"></a>需求：点击按钮，改变 <strong>this.state</strong> 里面的值</h3><blockquote>
<p>this.setState 方法的使用</p>
<p><strong>注意</strong>：this.setState 方法的执行是 <strong>异步</strong> 的</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190511/1TfoRzRHPm3H.png?imageslim" alt="mark"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      msg: <span class="string">&quot;周琛！&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;BindEvent组件！&lt;/h1&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.myClickHandler(<span class="string">&quot;哈哈哈哈哈哈！&quot;</span>, <span class="string">&quot;大傻瓜！&quot;</span>);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          你敢点我吗？</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">        &lt;h3&gt;&#123;<span class="built_in">this</span>.state.msg&#125;&lt;/h3&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  myClickHandler = <span class="function">(<span class="params">arg1, arg2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// alert(&#x27;这是myClickHandler方法！&#x27;+arg1+arg2)</span></span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      msg: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/AVQprOBiH0De.gif" alt="mark"></p>
<p><strong>注意</strong>：在执行 this.setState 后，又想立即拿到最新的 state 值，需要使用 this.setState({},callback)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">myClickHandler = <span class="function">(<span class="params">arg1, arg2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// alert(&#x27;这是myClickHandler方法！&#x27;+arg1+arg2)</span></span><br><span class="line">  <span class="built_in">this</span>.setState(</span><br><span class="line">    &#123;</span><br><span class="line">      msg: <span class="string">&quot;张三&quot;</span> + arg1 + arg2,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.state.msg);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="React-中绑定文本框与-State-中的值"><a href="#React-中绑定文本框与-State-中的值" class="headerlink" title="React 中绑定文本框与 State 中的值"></a>React 中绑定文本框与 State 中的值</h2><blockquote>
<p>类似于 Vue 的双向绑定</p>
</blockquote>
<h4 id="第一种双向绑定实现方式"><a href="#第一种双向绑定实现方式" class="headerlink" title="第一种双向绑定实现方式"></a>第一种双向绑定实现方式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  type=<span class="string">&quot;text&quot;</span></span><br><span class="line">  style=&#123;&#123; <span class="attr">width</span>: <span class="string">&quot;100%&quot;</span> &#125;&#125;</span><br><span class="line">  value=&#123;<span class="built_in">this</span>.state.msg&#125;</span><br><span class="line">  onChange=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="built_in">this</span>.txtChanged(e)&#125;</span><br><span class="line">/&gt;;</span><br><span class="line"></span><br><span class="line">txtChanged = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">    msg: e.target.value,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/k4Pz5wOdvDMe.gif" alt="mark"></p>
<h3 id="使用-ref-获取-DOM-元素引用"><a href="#使用-ref-获取-DOM-元素引用" class="headerlink" title="使用 ref 获取 DOM 元素引用"></a>使用 ref 获取 DOM 元素引用</h3><blockquote>
<p>Vue 中，Vue 为页面上的元素提供了 ref 的属性，获取元素引用，则需要使用 <strong>this.$refs</strong> 引用名称</p>
<p>React 中 获取元素的引用 ：<strong>this.refs</strong></p>
</blockquote>
<p>第二种双向绑定实现方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  type=<span class="string">&quot;text&quot;</span></span><br><span class="line">  style=&#123;&#123; <span class="attr">width</span>: <span class="string">&quot;100%&quot;</span> &#125;&#125;</span><br><span class="line">  value=&#123;<span class="built_in">this</span>.state.msg&#125;</span><br><span class="line">  onChange=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="built_in">this</span>.txtChanged(e)&#125;</span><br><span class="line">  ref=<span class="string">&quot;txt&quot;</span></span><br><span class="line">/&gt;;</span><br><span class="line"></span><br><span class="line">txtChanged = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">    msg: <span class="built_in">this</span>.refs.txt.value,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="React-组件的生命周期"><a href="#React-组件的生命周期" class="headerlink" title="React 组件的生命周期"></a>React 组件的生命周期</h2><p><a target="_blank" rel="noopener" href="https://juejin.im/post/5a062fb551882535cd4a4ce3">可以参考</a></p>
<p><img src="http://static.zxinc520.com/blog/20190512/WR2qsCelssvf.webp" alt="mark"></p>
<blockquote>
<p>如图，React 生命周期主要包括三个阶段：初始化阶段、运行中阶段和销毁阶段，在 React 不同的生命周期里，会依次触发不同的钩子函数，下面我们就来详细介绍一下 React 的生命周期函数</p>
</blockquote>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-ReactLearn02"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/06/ReactLearn02/"
    >React 学习第二天</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/05/06/ReactLearn02/" class="article-date">
  <time datetime="2019-05-06T13:37:26.000Z" itemprop="datePublished">2019-05-06</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a> / <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/React/">React</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="React-学习第二天"><a href="#React-学习第二天" class="headerlink" title="React 学习第二天"></a>React 学习第二天</h1><blockquote>
<p>React 学习第二天</p>
<p>创建组件的方式（ function 和 class）</p>
<p>ES6 扩展运算符使用</p>
<p>抽离 jsx 组件</p>
<p>如何省略 <strong><u>jsx</u></strong> 后缀名？</p>
<p>使用@别名表示路径</p>
<p>两种创建组件方式的对比</p>
<p>评论列表案例</p>
<p>没有收拾残局的能力，就别放纵善变的情绪！！！</p>
</blockquote>
<h2 id="创建组件"><a href="#创建组件" class="headerlink" title="创建组件"></a>创建组件</h2><h3 id="第一种创建组件的方式"><a href="#第一种创建组件的方式" class="headerlink" title="第一种创建组件的方式"></a>第一种创建组件的方式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一步：导入包</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; <span class="comment">//创建组件，虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>; <span class="comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>这是一个组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Hello&gt;&lt;/Hello&gt;</span><br><span class="line">  &lt;/div&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190506/tppNOX2JwhMa.png?imageslim" alt="mark"></p>
<h4 id="接受外部传值"><a href="#接受外部传值" class="headerlink" title="接受外部传值"></a>接受外部传值</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(props);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      这是一个组件---&#123;props.name&#125;---&#123;props.age&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = &#123;</span><br><span class="line">  name: <span class="string">&quot;大黄&quot;</span>,</span><br><span class="line">  age: <span class="string">&quot;18&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Hello name=&#123;dog.name&#125; age=&#123;dog.age&#125;&gt;&lt;/Hello&gt;</span><br><span class="line">  &lt;/div&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190506/Ebp8WSqvYzTi.png?imageslim" alt="mark"></p>
<!--注意：不论是 Vue 还是 React，组件中的props永远都是只读的，不能被赋值！-->

<!--组件 首字母 必须为大写！-->

<h4 id="改进：使用-ES6-扩展运算符"><a href="#改进：使用-ES6-扩展运算符" class="headerlink" title="改进：使用 ES6 扩展运算符"></a>改进：使用 ES6 扩展运算符</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(props);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      这是一个组件---&#123;props.name&#125;---&#123;props.age&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = &#123;</span><br><span class="line">  name: <span class="string">&quot;大黄&quot;</span>,</span><br><span class="line">  age: <span class="string">&quot;18&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Hello &#123;...dog&#125;&gt;&lt;/Hello&gt;</span><br><span class="line">  &lt;/div&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="抽离-jsx-组件"><a href="#抽离-jsx-组件" class="headerlink" title="抽离 jsx 组件"></a>抽离 jsx 组件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一步：导入包</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; <span class="comment">//创建组件，虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>; <span class="comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Hello <span class="keyword">from</span> <span class="string">&quot;./components/Hello.jsx&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = &#123;</span><br><span class="line">  name: <span class="string">&quot;大黄&quot;</span>,</span><br><span class="line">  age: <span class="string">&quot;18&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Hello &#123;...dog&#125;&gt;&lt;/Hello&gt;</span><br><span class="line">  &lt;/div&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190506/oiuJeOYjfvf4.png?imageslim" alt="mark"></p>
<p><strong>Hello.jsx:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并导出</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(props);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      这是一个组件---&#123;props.name&#125;---&#123;props.age&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="如何省略-jsx-后缀名？"><a href="#如何省略-jsx-后缀名？" class="headerlink" title="如何省略 jsx 后缀名？"></a>如何省略 <strong><u>jsx</u></strong> 后缀名？</h4><p><img src="http://static.zxinc520.com/blog/20190506/Vt3JwXFKXg8w.png?imageslim" alt="mark"></p>
<p><strong>配置 webpack.config.js 文件：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  extensions: [<span class="string">&quot;.js&quot;</span>, <span class="string">&quot;.jsx&quot;</span>, <span class="string">&quot;.json&quot;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用-别名表示路径"><a href="#使用-别名表示路径" class="headerlink" title="使用@别名表示路径"></a>使用@别名表示路径</h4><p><img src="http://static.zxinc520.com/blog/20190506/1o1dm0J9gRPc.png?imageslim" alt="mark"></p>
<p><strong>配置 webpack.config.js 文件：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">resolve:&#123;</span><br><span class="line">    extensions:[<span class="string">&#x27;.js&#x27;</span>,<span class="string">&#x27;.jsx&#x27;</span>,<span class="string">&#x27;.json&#x27;</span>],</span><br><span class="line">        alias:&#123;</span><br><span class="line">            <span class="string">&#x27;@&#x27;</span>:path.join(__dirname,<span class="string">&#x27;./src&#x27;</span>) <span class="comment">//这样，@ 就表示 项目根目录中的src 这一层路径</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="第二种创建组件的方式"><a href="#第二种创建组件的方式" class="headerlink" title="第二种创建组件的方式"></a>第二种创建组件的方式</h3><blockquote>
<p>使用 class 关键字来创建自建</p>
<p>ES6 中 class 关键字，是实现面向对象编程的新形式（语法糖）</p>
</blockquote>
<h4 id="了解-class"><a href="#了解-class" class="headerlink" title="了解 class"></a>了解 class</h4><ol>
<li>创建一个类并提供参数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animate</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> Animate(<span class="string">&quot;大黄&quot;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(p1);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190506/S8PirbufxcXt.png?imageslim" alt="mark"></p>
<h4 id="挂载原型对象的实例方法（-function-和-class-方法对比）"><a href="#挂载原型对象的实例方法（-function-和-class-方法对比）" class="headerlink" title="挂载原型对象的实例方法（ function 和 class 方法对比）"></a>挂载原型对象的实例方法（ function 和 class 方法对比）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f.prototype.show = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;这是实例方法！&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> f(<span class="string">&quot;大黄&quot;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(p);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;--------------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animate</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  show() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;这是实例方法！&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> Animate(<span class="string">&quot;大黄&quot;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(p1);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190506/CfW0S1Lz9HP8.png?imageslim" alt="mark"></p>
<h4 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用 function创建对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//静态方法</span></span><br><span class="line">f.show = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;这是function创建的 f 的静态 show 方法&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">f.show();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;--------------分割线------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用class 创建对象</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animate</span> </span>&#123;</span><br><span class="line">  <span class="comment">//静态方法</span></span><br><span class="line">  <span class="keyword">static</span> info = <span class="string">&quot;这是class方法创建的静态方法！&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(Animate.info);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190506/JdrMb039jWqx.png?imageslim" alt="mark"></p>
<h4 id="extends-继承"><a href="#extends-继承" class="headerlink" title="extends 继承"></a>extends 继承</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这是父类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">American</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a1 = <span class="keyword">new</span> American(<span class="string">&quot;Jack&quot;</span>, <span class="number">22</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a1);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chinese</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c1 = <span class="keyword">new</span> Chinese(<span class="string">&quot;张三&quot;</span>, <span class="number">22</span>);</span><br><span class="line"><span class="built_in">console</span>.log(c1);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190506/9iKF2u3HOaF1.png?imageslim" alt="mark"></p>
<h4 id="super-调用父类-constructor-可以参考"><a href="#super-调用父类-constructor-可以参考" class="headerlink" title="super 调用父类 constructor 可以参考"></a>super 调用父类 constructor <a target="_blank" rel="noopener" href="https://juejin.im/post/5b3f23066fb9a04fe820cdbe">可以参考</a></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这是父类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sayHello() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;大家好！&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">American</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">    <span class="built_in">super</span>(name, age);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a1 = <span class="keyword">new</span> American(<span class="string">&quot;Jack&quot;</span>, <span class="number">22</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a1);</span><br><span class="line"><span class="built_in">console</span>.log(a1.sayHello());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chinese</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age, IDNumber) &#123;</span><br><span class="line">    <span class="built_in">super</span>(name, age);</span><br><span class="line">    <span class="built_in">this</span>.IDNumber = IDNumber;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c1 = <span class="keyword">new</span> Chinese(<span class="string">&quot;张三&quot;</span>, <span class="number">22</span>, <span class="string">&quot;1213123&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(c1);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190506/dokRjyuJrlg5.png?imageslim" alt="mark"></p>
<h4 id="子类没有定义-constructor，会默认添加"><a href="#子类没有定义-constructor，会默认添加" class="headerlink" title="子类没有定义 constructor，会默认添加"></a>子类没有定义 constructor，会默认添加</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chinese</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chinese</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(...args) &#123;</span><br><span class="line">    <span class="built_in">super</span>(...args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用-class-关键字创建组件"><a href="#使用-class-关键字创建组件" class="headerlink" title="使用 class 关键字创建组件"></a>使用 class 关键字创建组件</h3><h4 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; <span class="comment">//创建组件，虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>; <span class="comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//如果使用class 定义组件，必须让自己的组件，继承自 React.Component</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Movie</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">//在组件内部，必须有 render 函数，作用：渲染当前组件对应的 虚拟DOM 结构</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">//render 函数中，必须 返回合法的 JSX 虚拟DOM 结构</span></span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>这是class创建组件的方式<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Movie&gt;&lt;/Movie&gt;</span><br><span class="line">  &lt;/div&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190506/pUNFRBHpnlsL.png?imageslim" alt="mark"></p>
<h4 id="传递参数"><a href="#传递参数" class="headerlink" title="传递参数"></a>传递参数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; <span class="comment">//创建组件，虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>; <span class="comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Movie</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">//使用class关键字创建的组件中，如果想使用外界传递过来的 props 参数，不需接受，直接通过 this.props.*** 来访问！</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        这是<span class="class"><span class="keyword">class</span>创建组件的方式--</span>&#123;<span class="built_in">this</span>.props.name&#125;--&#123;<span class="built_in">this</span>.props.age&#125;---</span><br><span class="line">        &#123;<span class="built_in">this</span>.props.hobby&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = &#123;</span><br><span class="line">  name: <span class="string">&quot;小黄&quot;</span>,</span><br><span class="line">  age: <span class="string">&quot;18&quot;</span>,</span><br><span class="line">  hobby: <span class="string">&quot;play games&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Movie &#123;...dog&#125;&gt;&lt;/Movie&gt;</span><br><span class="line">  &lt;/div&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190506/3McvjLR2OU4B.png?imageslim" alt="mark"></p>
<h2 id="这两种创建组件方式的对比"><a href="#这两种创建组件方式的对比" class="headerlink" title="这两种创建组件方式的对比"></a>这两种创建组件方式的对比</h2><blockquote>
<p>注意：使用 <strong>function</strong> 创建的组件只有 props，没有自己的私有数据 和生命周期 函数</p>
<p>注意：使用 **class 关键字 **创建的组件，有自己的私有数据；</p>
</blockquote>
<ol>
<li>用 <strong>构造函数</strong> 创建出来的组件：叫做 “ <u>无状态组件</u> ”</li>
<li>用 <strong>class 关键字</strong> 创建出来的组件：叫做 “ <u>有状态组件</u> ”</li>
</ol>
<blockquote>
<p><strong>有状态组件</strong>和 <strong>无状态组件</strong> 之间的本质区别就是：有无 <strong>state 属性</strong></p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wonyun/p/5930333.html">可以参考</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; <span class="comment">//创建组件，虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>; <span class="comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Movie</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      msg: <span class="string">&quot;大家好啊！我是class私有数据！&quot;</span>,</span><br><span class="line">    &#125;; <span class="comment">//相当于 Vue 里面的 data()&#123; return &#123;&#125;&#125;函数</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//使用class关键字创建的组件中，如果想使用外界传递过来的 props 参数，不需接受，直接通过 this.props.*** 来访问！</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        这是<span class="class"><span class="keyword">class</span>创建组件的方式--</span>&#123;<span class="built_in">this</span>.props.name&#125;</span><br><span class="line">        &lt;p&gt;&#123;<span class="built_in">this</span>.state.msg&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = &#123;</span><br><span class="line">  name: <span class="string">&quot;小黄&quot;</span>,</span><br><span class="line">  age: <span class="string">&quot;18&quot;</span>,</span><br><span class="line">  hobby: <span class="string">&quot;play games&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Movie &#123;...dog&#125;&gt;&lt;/Movie&gt;</span><br><span class="line">  &lt;/div&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>​ <img src="http://static.zxinc520.com/blog/20190506/6hl8wJm5c3p4.png?imageslim" alt="mark"></p>
<h2 id="评论列表案例"><a href="#评论列表案例" class="headerlink" title="评论列表案例"></a>评论列表案例</h2><h5 id="初步实现："><a href="#初步实现：" class="headerlink" title="初步实现："></a>初步实现：</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; <span class="comment">//创建组件，虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>; <span class="comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 function 定义 普通的无状态组件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CmtItem</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h3&gt;评论人：&#123;props.user&#125;&lt;/h3&gt;</span><br><span class="line">      &lt;p&gt;评论内容：&#123;props.content&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CmtList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      CommentList: [</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">user</span>: <span class="string">&quot;张三&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;哈哈哈哈哈&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">user</span>: <span class="string">&quot;李四&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;打游戏&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">user</span>: <span class="string">&quot;王五&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;唱歌，喝酒&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">user</span>: <span class="string">&quot;王麦子&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;到处happy&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">user</span>: <span class="string">&quot;周琛&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;帅的不要不要了！&quot;</span> &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;这是评论列表组件&lt;/h1&gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.state.CommentList.map(<span class="function">(<span class="params">item</span>) =&gt;</span> (</span><br><span class="line">          &lt;CmtItem &#123;...item&#125; key=&#123;item.id&#125;&gt;&lt;/CmtItem&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;CmtList&gt;&lt;/CmtList&gt;</span><br><span class="line">  &lt;/div&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190506/1Ql2PHx2l6B3.png?imageslim" alt="mark"></p>
<h4 id="抽离各模块"><a href="#抽离各模块" class="headerlink" title="抽离各模块"></a>抽离各模块</h4><blockquote>
<p>便于减少一个文件的代码量，并且符合一种模块化思想</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190506/57OxaxsjtBwa.png?imageslim" alt="mark"></p>
<p>index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span> <span class="comment">//创建组件，虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span> <span class="comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line">·</span><br><span class="line"><span class="keyword">import</span> CmtList <span class="keyword">from</span> <span class="string">&#x27;@/components/CmtList&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">CmtList</span>&gt;</span><span class="tag">&lt;/<span class="name">CmtList</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;app&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>CmtList.jsx:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> CmtItem <span class="keyword">from</span> <span class="string">&quot;@/components/CmtItem&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CmtList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      CommentList: [</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">user</span>: <span class="string">&quot;张三&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;哈哈哈哈哈&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">user</span>: <span class="string">&quot;李四&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;打游戏&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">user</span>: <span class="string">&quot;王五&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;唱歌，喝酒&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">user</span>: <span class="string">&quot;王麦子&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;到处happy&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">user</span>: <span class="string">&quot;周琛&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;帅的不要不要了！&quot;</span> &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;这是评论列表组件&lt;/h1&gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.state.CommentList.map(<span class="function">(<span class="params">item</span>) =&gt;</span> (</span><br><span class="line">          &lt;CmtItem &#123;...item&#125; key=&#123;item.id&#125;&gt;&lt;/CmtItem&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>CmtItem.jsx：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">//使用 function 定义 普通的无状态组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">CmtItem</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h3&gt;评论人：&#123;props.user&#125;&lt;/h3&gt;</span><br><span class="line">      &lt;p&gt;评论内容：&#123;props.content&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190506/pSXgFJCzlL44.png?imageslim" alt="mark"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-ReactLearn01"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/04/27/ReactLearn01/"
    >React 学习第一天</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/04/27/ReactLearn01/" class="article-date">
  <time datetime="2019-04-27T14:15:41.000Z" itemprop="datePublished">2019-04-27</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a> / <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/React/">React</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="React-学习第一天"><a href="#React-学习第一天" class="headerlink" title="React 学习第一天"></a>React 学习第一天</h1><blockquote>
<p>ReactJS 简介</p>
<p>ReactJS 的背景和原理</p>
<p>三大主流前端框架 React、Vue、Angular</p>
<p>Vue 与 React 两个框架的区别和优势对比</p>
<p>React（虚拟 DOM，DIff 算法）</p>
<p>创建基本的 webpack4.x 项目（ 并且解决了之前的一个 bug ）</p>
<p>在项目中使用 react</p>
<p>把圈子变小 把语言变干净 把成绩往上提 把故事往心里收 现在想要的三年后都会有 ！o(<em>￣ ▽ ￣</em>)ブ</p>
</blockquote>
<h2 id="1、ReactJS-简介"><a href="#1、ReactJS-简介" class="headerlink" title="1、ReactJS 简介"></a>1、ReactJS 简介</h2><p>React 起源于 Facebook 的内部项目，因为该公司对市场上所有 JavaScript MVC 框架，都不满意，就决定自己写一套，用来架设 Instagram 的网站。做出来以后，发现这套东西很好用，就在 2013 年 5 月开源了。由于 React 的设计思想极其独特，属于革命性创新，性能出众，代码逻辑却非常简单。所以，越来越多的人开始关注和使用，认为它可能是将来 Web 开发的主流工具。</p>
<h2 id="2、ReactJS-的背景和原理"><a href="#2、ReactJS-的背景和原理" class="headerlink" title="2、ReactJS 的背景和原理"></a>2、ReactJS 的背景和原理</h2><p>在 Web 开发中，我们总需要将变化的数据实时反应到 UI 上，这时就需要对 DOM 进行操作。而复杂或频繁的 DOM 操作通常是性能瓶颈产生的原因（如何进行高性能的复杂 DOM 操作通常是衡量一个前端开发人员技能的重要指标）。</p>
<p>React 为此引入了虚拟 DOM（Virtual DOM）的机制：在浏览器端用 Javascript 实现了一套 DOM API。基于 React 进行开发时所有的 DOM 构造都是通过虚拟 DOM 进行，每当数据变化时，React 都会重新构建整个 DOM 树，然后 React 将当前整个 DOM 树和上一次的 DOM 树进行对比，得到 DOM 结构的区别，然后仅仅将需要变化的部分进行实际的浏览器 DOM 更新。而且 React 能够批处理虚拟 DOM 的刷新，在一个事件循环（Event Loop）内的两次数据变化会被合并，例如你连续的先将节点内容从 A 变成 B，然后又从 B 变成 A，React 会认为 UI 不发生任何变化，而如果通过手动控制，这种逻辑通常是极其复杂的。尽管每一次都需要构造完整的虚拟 DOM 树，但是因为虚拟 DOM 是内存数据，性能是极高的，而对实际 DOM 进行操作的仅仅是 Diff 部分，因而能达到提高性能的目的。这样，在保证性能的同时，开发者将不再需要关注某个数据的变化如何更新到一个或多个具体的 DOM 元素，而只需要关心在任意一个数据状态下，整个界面是如何 Render 的。</p>
<p>如果你像在 90 年代那样写过服务器端 Render 的纯 Web 页面那么应该知道，服务器端所要做的就是根据数据 Render 出 HTML 送到浏览器端。如果这时因为用户的一个点击需要改变某个状态文字，那么也是通过刷新整个页面来完成的。服务器端并不需要知道是哪一小段 HTML 发生了变化，而只需要根据数据刷新整个页面。换句话说，任何 UI 的变化都是通过整体刷新来完成的。而 React 将这种开发模式以高性能的方式带到了前端，每做一点界面的更新，你都可以认为刷新了整个页面。至于如何进行局部更新以保证性能，则是 React 框架要完成的事情。</p>
<p>借用 Facebook 介绍 React 的视频中聊天应用的例子，当一条新的消息过来时，你的开发过程需要知道哪条数据过来了，如何将新的 DOM 结点添加到当前 DOM 树上；而基于 React 的开发思路，你永远只需要关心数据整体，两次数据之间的 UI 如何变化，则完全交给框架去做。可以看到，使用 React 大大降低了逻辑复杂性，意味着开发难度降低，可能产生 Bug 的机会也更少。</p>
<hr>
<h4 id="清楚理解两个概念："><a href="#清楚理解两个概念：" class="headerlink" title="清楚理解两个概念："></a>清楚理解两个概念：</h4><ol>
<li><p>**ibrary(库)**：小而巧的库，只提供特定的 API；优点就是 船小好调头。可以很方便的从一个库切换到另外的库；但是代码几乎不会改变。</p>
</li>
<li><p>**Framework(框架)**：大而全的是框架；框架提供了一整套的解决方案；所以，如果在项目中间，想切换到另外的框架，是比较困难的。</p>
</li>
</ol>
<h1 id="三大主流前端框架-React、Vue、Angular"><a href="#三大主流前端框架-React、Vue、Angular" class="headerlink" title="三大主流前端框架 React、Vue、Angular"></a>三大主流前端框架 React、Vue、Angular</h1><p><img src="http://static.zxinc520.com/blog/20190423/Q4Mrbn6pFhYJ.jpg?imageslim" alt="mark"></p>
<p>React（ <strong>最流行</strong> ）起源于 Facebook 的内部项目，用来架设 Instagram 的网站， 并于 2013 年 5 月开源。React 拥有较高的性能，代码逻辑非常简单，越来越多的人已开始关注和使用它。它有以下的<strong>特性</strong>：</p>
<ol>
<li><p>声明式设计：React 采用声明范式，可以轻松描述应用。</p>
</li>
<li><p>高效：React 通过对 DOM 的模拟，最大限度地减少与 DOM 的交互。</p>
</li>
<li><p>灵活：React 可以与已知的库或框架很好地配合。</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. 速度快：在UI渲染过程中，React通过在虚拟DOM中的微操作来实现对实际DOM的局部更新。</span><br><span class="line">2. 跨浏览器兼容：虚拟DOM帮助我们解决了跨浏览器问题，它为我们提供了标准化的API，甚至在IE8中都是没问题的。</span><br><span class="line">3. 模块化：为你程序编写独立的模块化UI组件，这样当某个或某些组件出现问题是，可以方便地进行隔离。</span><br><span class="line">4. 单向数据流：Flux是一个用于在JavaScript应用中创建单向数据层的架构，它随着React视图库的开发而被Facebook概念化。</span><br><span class="line">5. 同构、纯粹的javascript：因为搜索引擎的爬虫程序依赖的是服务端响应而不是JavaScript的执行，预渲染你的应用有助于搜索引擎优化。</span><br><span class="line">6.兼容性好：比如使用RequireJS来加载和打包，而Browserify和Webpack适用于构建大型应用。它们使得那些艰难的任务不再让人望而生畏。</span><br><span class="line">缺点：</span><br><span class="line">React本身只是一个V而已，并不是一个完整的框架，所以如果是大型项目想要一套完整的框架的话，基本都需要加上ReactRouter和Flux才能写大型应用。</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190423/7hBjb1epQFoH.webp" alt="mark"></p>
<p>Vue ( <strong>目前市场上的主流</strong> ) 是尤雨溪编写的一个构建数据驱动的 Web 界面的库，准确来说不是一个框架，它聚焦在 V（view）视图层。</p>
<p>_它有以下的特性_：</p>
<ol>
<li><p>轻量级的框架</p>
</li>
<li><p>双向数据绑定</p>
</li>
<li><p>指令</p>
</li>
<li><p>插件化</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">优点：</span><br><span class="line">1. 简单：官方文档很清晰，比 Angular 简单易学。</span><br><span class="line">2. 快速：异步批处理方式更新 DOM。</span><br><span class="line">3. 组合：用解耦的、可复用的组件组合你的应用程序。</span><br><span class="line">4. 紧凑：~18kb min+gzip，且无依赖。</span><br><span class="line">5. 强大：表达式 无需声明依赖的可推导属性 (computed properties)。</span><br><span class="line">6. 对模块友好：可以通过 NPM、Bower 或 Duo 安装，不强迫你所有的代码都遵循 Angular 的各种规定，使用场景更加灵活。</span><br><span class="line">缺点：</span><br><span class="line">1. 新生儿：Vue.js是一个新的项目，没有angular那么成熟。</span><br><span class="line">2. 影响度不是很大：google了一下，有关于Vue.js多样性或者说丰富性少于其他一些有名的库。</span><br><span class="line">3. 不支持IE8</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190423/bu0preO1hhfc.webp" alt="mark"></p>
<p>Angular（ <strong>最早</strong> ）是一款优秀的前端 JS 框架，已经被用于 Google 的多款产品当中。</p>
<p>_它有以下的特性_：</p>
<ol>
<li><p>良好的应用程序结构</p>
</li>
<li><p>双向数据绑定</p>
</li>
<li><p>指令</p>
</li>
<li><p>HTML 模板</p>
</li>
<li><p>可嵌入、注入和测试</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">优点：</span><br><span class="line">1. 模板功能强大丰富，自带了极其丰富的angular指令。</span><br><span class="line">2. 是一个比较完善的前端框架，包含服务，模板，数据双向绑定，模块化，路由，过滤器，依赖注入等所有功能；</span><br><span class="line">3. 自定义指令，自定义指令后可以在项目中多次使用。</span><br><span class="line">4. ng模块化比较大胆的引入了Java的一些东西（依赖注入），能够很容易的写出可复用的代码，对于敏捷开发的团队来说非常有帮助。</span><br><span class="line">5. angularjs是互联网巨人谷歌开发，这也意味着他有一个坚实的基础和社区支持。</span><br><span class="line">缺点：</span><br><span class="line">1. angular 入门很容易 但深入后概念很多, 学习中较难理解.</span><br><span class="line">2. 文档例子非常少, 官方的文档基本只写了api, 一个例子都没有, 很多时候具体怎么用都是google来的, 或直接问misko,angular的作者.</span><br><span class="line">3. 对IE6/7 兼容不算特别好, 就是可以用jQuery自己手写代码解决一些.</span><br><span class="line">4. 指令的应用的最佳实践教程少, angular其实很灵活, 如果不看一些作者的使用原则,很容易写出 四不像的代码, 例如js中还是像jQuery的思想有很多dom操作.</span><br><span class="line">5. DI 依赖注入 如果代码压缩需要显示声明.</span><br></pre></td></tr></table></figure>

<h1 id="Vue-与-React-两个框架的区别和优势对比"><a href="#Vue-与-React-两个框架的区别和优势对比" class="headerlink" title="Vue 与 React 两个框架的区别和优势对比"></a><a target="_blank" rel="noopener" href="http://caibaojian.com/vue-vs-react.html">Vue 与 React 两个框架的区别和优势对比</a></h1><blockquote>
<p>Vue 与 React 的区别： <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/174e8028eabd">可以参考</a></p>
</blockquote>
<p><a href="">如果你喜欢用模板搭建应用（或者有这个想法），请选择 Vue</a></p>
<p>Vue 应用的默认选项是把 markup 放在 HTML 文件中。数据绑定表达式采用的是和 Angular 相似的 mustache 语法，而指令（特殊的 HTML 属性）用来向模板添加功能。</p>
<p>相比之下，React 应用不使用模板，它要求开发者借助 JSX 在 JavaScript 中创建 DOM。</p>
<p>对于来自标准 Web 开发方式的新开发者，模板更容易理解。但是一些资深开发者也喜欢模板，因为模板可以更好的把布局和功能分割开来，还可以使用 Pug 之类的模板引擎。</p>
<p>但是使用模板的代价是不得不学习所有的 HTML 扩展语法，而渲染函数只需要会标准的 HTML 和 JavaScript。而且比起模板，渲染函数更加容易调试和<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://lib.csdn.net/base/softwaretest">测试</a>。当然你不应该因为这方面的原因错过 Vue，因为在 Vue2.0 中提供了使用模板或者渲染函数的选项。</p>
<p><a href="">如果你喜欢简单和“能用就行”的东西，请选择 Vue</a></p>
<p>一个简单的 Vue 项目可以不需要转译直接运行在浏览器中，所以使用 Vue 可以像使用<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://lib.csdn.net/base/jquery">jQuery</a>一样简单。当然这对于 React 来说在技术上也是可行的，但是典型的 React 代码是重度依赖于 JSX 和诸如 class 之类的 ES6 特性的。</p>
<p>Vue 的简单在程序设计的时候体现更深，让我们来比较一下两个框架是怎样处理应用数据的（也就是 state）。</p>
<p>React 中是通过比较当前 state 和前一个 state 来决定何时在 DOM 中进行重渲染以及渲染的内容，因此需要不可变（immutable）的 state。</p>
<p>Vue 中的数据是可变（mutated）的，所以同样的操作看起来更加简洁。</p>
<p>让我们来看看 Vue 中是如何进行状态管理的。当向 state 添加一个新对象的时候，Vue 将遍历其中的所有属性并且转换为 getter，setter 方法，现在 Vue 的响应系统开始保持对 state 的跟踪了，当 state 中的内容发生变化的时候就会自动重新渲染 DOM。令人称道的是，Vue 中改变 state 的状态的操作不仅更加简洁，而且它的重新渲染系统也比 React 的更快更有效率。</p>
<p>Vue 的响应系统还有有些坑的，例如：它不能检测属性的添加和删除和某些数组更改。这时候就要用到 Vue API 中的类似于 React 的 set 方法来解决。</p>
<p><a href="">如果你想要你的应用尽可能的小和快，请选择 Vue</a></p>
<p>当应用程序的状态改变时，React 和 Vue 都将构建一个虚拟 DOM 并同步到真实 DOM 中。 两者都有各自的方法优化这个过程。</p>
<p>Vue 核心开发者提供了一个 benchmark 测试，可以看出 Vue 的渲染系统比 React 的更快。测试方法是 10000 个项目的列表渲染 100 次，结果如下图。从实用的观点来看，这种 benchmark 只和边缘情况有关，大部分应用程序中不会经常进行这种操作，所以这不应该被视为一个重要的比较点。但是，页面大小是与所有项目有关的，这方面 Vue 再次领先，它目前的版本压缩后只有 25.6KB。React 要实现同样的功能，你需要 React DOM（37.4KB）和 React with Addon 库（11.4KB），共计 44.8KB，几乎是 Vue 的两倍大。双倍的体积并不能带来双倍的功能。</p>
<p><a href="">如果你打算构建一个大型应用程序，请选择 React</a></p>
<p>像文章开头那种同时用 Vue 和 React 实现的简单应用程序，可能会让一个开发者潜意识中更加倾向于 Vue。这是因为基于模板的应用程序第一眼看上去更加好理解，而且能很快跑起来。但是这些好处引入的技术债会阻碍应用扩展到更大的规模。模板容易出现很难注意到的运行时错误，同时也很难去测试，重构和分解。</p>
<p>相比之下，Javascript 模板可以组织成具有很好的分解性和干（DRY）代码的组件，干代码的可重用性和可测试性更好。Vue 也有组件系统和渲染函数，但是 React 的渲染系统可配置性更强，还有诸如浅（shallow）渲染的特性，和 React 的测试工具结合起来使用，使代码的可测试性和可维护性更好。</p>
<p>与此同时，React 的 immutable 应用状态可能写起来不够简洁，但它在大型应用中意义非凡，因为透明度和可测试性在大型项目中变得至关重要。</p>
<p><a href="">如果你想要一个同时适用于 Web 端和原生 APP 的框架，请选择 React</a></p>
<p><a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://lib.csdn.net/base/reactnative">React Native</a>是一个使用 Javascript 构建移动端原生应用程序（<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://lib.csdn.net/base/ios">iOS</a>，<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://lib.csdn.net/base/android">Android</a>）的库。 它与 React.js 相同，只是不使用 Web 组件，而是使用原生组件。 如果你学过 React.js，很快就能上手 React Native，反之亦然。</p>
<p>它的意义在于，开发者只需要一套知识和工具就能开发 Web 应用和移动端原生应用。如果你想同时做 Web 端开发和移动端开发，React 为你准备了一份大礼。</p>
<p>阿里的 Weex 也是一个跨平台 UI 项目，目前它以 Vue 为灵感，使用了许多相同的语法，同时计划在未来完全集成 Vue，然而集成的时间和细节还不清楚。因为 Vue 将 HTML 模板作为它设计的核心部分，并且现有特性不支持自定义渲染，因此很难看出目前的 Vue.js 的跨平台能力能像 React 和 React Native 一样强大。</p>
<p><a href="">如果你想要最大的生态系统，请选择 React</a></p>
<p>毫无疑问，React 是目前最受欢迎的前端框架。它在 NPM 上每个月的下载量超过了 250 万次，相比之下，Vue 是 22.5 万次。人气不仅仅是一个肤浅的数字，这意味着更多的文章，教程和更多 Stack Overflow 的解答，还意味有着更多的工具和插件可以在项目中使用，让开发者不再孤立无援。</p>
<p>这两个框架都是开源的，但是 React 诞生于 Facebook，有 Facebook 背书，它的开发者和 Facebook 都承诺会持续维护 React。相比之下，Vue 是独立开发者尤雨溪的作品。尤雨溪目前在全职维护 Vue，也有一些公司资助 Vue，但是规模和 Facebook 和 Google 没得比。不过请对 Vue 的团队放心，它的小规模和独立性并没有成为劣势，Vue 有着固定的发布周期，甚至更令人称道的是，Github 上 Vue 只有 54 个 open issue，3456 个 closed issue，作为对比，React 有多达 530 个 open issue，3447 个 closed issue。</p>
<h4 id="总结一下，我们发现的，Vue-的优势是："><a href="#总结一下，我们发现的，Vue-的优势是：" class="headerlink" title="总结一下，我们发现的，Vue 的优势是："></a>总结一下，我们发现的，Vue 的优势是：</h4><p>模板和渲染函数的弹性选择</p>
<p>简单的语法和项目配置</p>
<p>更快的渲染速度和更小的体积</p>
<h4 id="React-的优势是："><a href="#React-的优势是：" class="headerlink" title="React 的优势是："></a>React 的优势是：</h4><p>更适合大型应用和更好的可测试性</p>
<p>Web 端和移动端原生 APP 通吃</p>
<p>更大的生态系统，更多的支持和好用的工具</p>
<p>然而，React 和 Vue 都是很优秀的框架，它们之间的相似之处多过不同之处，并且大部分的优秀功能是相通的：</p>
<p>用虚拟 DOM 实现快速渲染</p>
<p>轻量级</p>
<p>响应式组件</p>
<p>服务端渲染</p>
<p>集成路由工具，打包工具，状态管理工具的难度低</p>
<p>优秀的支持和社区</p>
<h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h3 id="1-虚拟-DOM（Virtual-Document-Object-Model）"><a href="#1-虚拟-DOM（Virtual-Document-Object-Model）" class="headerlink" title="1. 虚拟 DOM（Virtual Document Object Model）"></a>1. 虚拟 DOM（Virtual Document Object Model）</h3><ul>
<li>DOM 的本质什么：浏览器中的概念，用 JS 对象来表示 页面上的 元素，并提供了操作 DOM 对象的 API。</li>
<li>什么是 React 中的虚拟 DOM：是框架中的概念，是 程序员 用 JS 对象来模拟 页面上的 DOM 和 DOM 嵌套。</li>
</ul>
<h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><p>先直接说一下，DOM 意思是<strong>文档对象模型（Dcoument Object Model）</strong>，它是一个结构化文本的抽象。对于 Web 开发者，这个文本是一段 HTML 代码，DOM 也就被叫做 HTML DOM。HTML 的元素在 DOM 中变成了节点。</p>
<p>所以，HTML 是一段文本，DOM 就是这段文本在内存中的表示。</p>
<blockquote>
<p>可以对比一个程序的一个进程实例。对于一个程序，可以存在多个进程，就像一段同样的 HTML 可以有多个 DOM 一样。（例：同一个页面被多个 tab 加载）。</p>
</blockquote>
<p>在 HTML DOM 中提供了遍历和修改节点的接口（API）。像<em>getElementById</em>或者<em>removeChild</em>这样的方法。我们一般使用 JavaScript 来操作 DOM，这是因为……好吧，天知道为什么。:)</p>
<p>所以，只要我们想要动态修改网页的内容的时候，我们就修改 DOM。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> item = <span class="built_in">document</span>.getElementById(<span class="string">&quot;myLI&quot;</span>);</span><br><span class="line">item.parentNode.removeChild(item);</span><br></pre></td></tr></table></figure>

<p>所谓<em>document</em>就是根节点的抽象，而<em>getElementById</em>，<em>parentNode</em>和<em>emoveChild</em>则是 HTML DOM API 中的方法。</p>
<h2 id="虚拟-DOM"><a href="#虚拟-DOM" class="headerlink" title="虚拟 DOM"></a>虚拟 DOM</h2><p>首先 - 虚拟 DOM 不是 React 发明的，但是 React 用了它且免费提供。</p>
<p>虚拟 DOM 是 HTML DOM 的抽象。它是轻量的，是从浏览器特定（Browser-specific，这里意指特定的浏览器需要特定的实现）实现细节中提取出来的。由于 DOM 本身就已经是一个抽象了，所以虚拟 DOM，实际上，是一个抽象的抽象。</p>
<p>也许把虚拟 DOM 当做 React 的本地和简化版的 HTML DOM 更好。它允许 React 跳过既慢又限于特定浏览器的真实 DOM 操作，以在这个抽象世界中做自己的计算。</p>
<p>常规 DOM 和虚拟 DOM 二者并没有什么大的不同。这也是为什么 React 代码的 JSX 部分可以看起来几乎跟纯 HTML 很像的原因。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CommentBox = React.createClass(&#123;</span><br><span class="line">  render: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;commentBox&quot;</span>&gt;</span><br><span class="line">        &lt;div&gt;Hello, world! I am a CommentBox.&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在大多数情况下，当你有一段 HTML 代码且想要将其写成一个 React 组件时，你只需要做这个。</p>
<ol>
<li>在 render 方法中返回 HTML 代码；</li>
<li>将 class 属性替换成 className 属性，因为 class 在 JavaScript 中是一个保留关键字。</li>
</ol>
<p>二者之间还有一些，相当细微的区别。</p>
<ul>
<li>虚拟 DOM 的这些属性不在真实的 DOM 中出现——key，ref 和 dangerouslySetInnerHTML。<a target="_blank" rel="noopener" href="https://facebook.github.io/react/docs/special-non-dom-attributes.html">查看更多</a></li>
<li>React 范的 DOM 引入了<a target="_blank" rel="noopener" href="https://facebook.github.io/react/docs/dom-differences.html">一些限制</a></li>
</ul>
<h2 id="为什么需要虚拟-DOM？"><a href="#为什么需要虚拟-DOM？" class="headerlink" title="为什么需要虚拟 DOM？"></a>为什么需要虚拟 DOM？</h2><p>先介绍浏览器加载一个 HTML 文件需要做哪些事，帮助我们理解为什么我们需要虚拟 DOM。webkit 引擎的处理流程，一图胜千言：</p>
<p><img src="http://static.zxinc520.com/blog/20190425/tKU23C1t4RLN.webp" alt="mark"></p>
<p>所有浏览器的引擎工作流程都差不多，如上图大致分 5 步：创建 DOM tree –&gt; 创建 Style Rules -&gt; 构建 Render tree -&gt; 布局 Layout –&gt; 绘制 Painting</p>
<ul>
<li><p>第一步，用 HTML 分析器，分析 HTML 元素，构建一颗 DOM 树。</p>
</li>
<li><p>第二步：用 CSS 分析器，分析 CSS 文件和元素上的 inline 样式，生成页面的样式表。</p>
</li>
<li><p>第三步：将上面的 DOM 树和样式表，关联起来，构建一颗 Render 树。这一过程又称为 Attachment。每个 DOM 节点都有 attach 方法，接受样式信息，返回一个 render 对象（又名 renderer）。这些 render 对象最终会被构建成一颗 Render 树。</p>
</li>
<li><p>第四步：有了 Render 树后，浏览器开始布局，会为每个 Render 树上的节点确定一个在显示屏上出现的精确坐标值。</p>
</li>
<li><p>第五步：Render 数有了，节点显示的位置坐标也有了，最后就是调用每个节点的 paint 方法，让它们显示出来。</p>
</li>
</ul>
<p>当你用传统的源生 api 或 jQuery 去操作 DOM 时，浏览器会从构建 DOM 树开始从头到尾执行一遍流程。比如当你在一次操作时，需要更新 10 个 DOM 节点，理想状态是一次性构建完 DOM 树，再执行后续操作。但浏览器没这么智能，收到第一个更新 DOM 请求后，并不知道后续还有 9 次更新操作，因此会马上执行流程，最终执行 10 次流程。显然例如计算 DOM 节点的坐标值等都是白白浪费性能，可能这次计算完，紧接着的下一个 DOM 更新请求，这个节点的坐标值就变了，前面的一次计算是无用功。</p>
<p>即使计算机硬件一直在更新迭代，操作 DOM 的代价仍旧是昂贵的，频繁操作还是会出现页面卡顿，影响用户的体验。真实的 DOM 节点，哪怕一个最简单的 div 也包含着很多属性，可以打印出来直观感受一下：</p>
<p>虚拟 DOM 就是为了解决这个浏览器性能问题而被设计出来的。例如前面的例子，假如一次操作中有 10 次更新 DOM 的动作，虚拟 DOM 不会立即操作 DOM，而是将这 10 次更新的 diff 内容保存到本地的一个 js 对象中，最终将这个 js 对象一次性 attach 到 DOM 树上，通知浏览器去执行绘制工作，这样可以避免大量的无谓的计算量。</p>
<h2 id="Virtual-DOM-算法"><a href="#Virtual-DOM-算法" class="headerlink" title="Virtual DOM 算法"></a>Virtual DOM 算法</h2><p>可以用新渲染的对象树去和旧的树进行对比，记录这两棵树差异。记录下来的不同就是我们需要对页面真正的 DOM 操作，然后把它们应用在真正的 DOM 树上，页面就变更了。这样就可以做到：视图的结构确实是整个全新渲染了，但是最后操作 DOM 的时候确实只变更有不同的地方。</p>
<p>这就是所谓的 Virtual DOM 算法。包括几个步骤：</p>
<ol>
<li>用 JavaScript 对象结构表示 DOM 树的结构；然后用这个树构建一个真正的 DOM 树，插到文档当中</li>
<li>当状态变更的时候，重新构造一棵新的对象树。然后用新的树和旧的树进行比较，记录两棵树差异</li>
<li>把 2 所记录的差异应用到步骤 1 所构建的真正的 DOM 树上，视图就更新了</li>
</ol>
<p>Virtual DOM 本质上就是在 JS 和 DOM 之间做了一个缓存。可以类比 CPU 和硬盘，既然硬盘这么慢，我们就在它们之间加个缓存：既然 DOM 这么慢，我们就在它们 JS 和 DOM 之间加个缓存。CPU（JS）只操作内存（Virtual DOM），最后的时候再把变更写入硬盘（DOM）。</p>
<h2 id="DIff-算法"><a href="#DIff-算法" class="headerlink" title="DIff 算法"></a>DIff 算法</h2><p>比较两棵 DOM 树的差异是 Virtual DOM 算法最核心的部分.简单的说就是新旧虚拟 dom 的比较，如果有差异就以新的为准，然后再插入的真实的 dom 中，重新渲染。、 借网络一张图片说明:</p>
<p><img src="http://static.zxinc520.com/blog/20190427/TBHlLkPiRjat.webp" alt="mark"></p>
<p><strong>比较只会在同层级进行, 不会跨层级比较。</strong><br>比较后会出现四种情况：<br>1、此节点是否被移除 -&gt; 添加新的节点<br>2、属性是否被改变 -&gt; 旧属性改为新属性<br>3、文本内容被改变-&gt; 旧内容改为新内容<br>4、节点要被整个替换 -&gt; 结构完全不相同 移除整个替换</p>
<h2 id="创建基本的-webpack4-x-项目"><a href="#创建基本的-webpack4-x-项目" class="headerlink" title="创建基本的 webpack4.x 项目"></a>创建基本的 webpack4.x 项目</h2><ol>
<li>运行 <code>npm init -y</code>快速初始化下项目</li>
<li>在项目根目录创建 <strong>src</strong> 源代码目录 和 <strong>dist</strong> 产品目录</li>
<li>在 src 目录下创建 index.html</li>
<li>使用 npm 安装 webpack，运行 <code>npm i webpack webpack-cli -D</code></li>
<li>注意：webpack4.x 提供了 约定大于配置的概念；目的是为了尽量减少 配置文件的体积。<ul>
<li>默认约定了<ul>
<li>打包的入口是 <code>src</code> -&gt;<code> index.js</code></li>
<li>打包的输出文件是 <code>dist</code> -&gt; <code>main.js</code></li>
<li>4.x 中新增的 mode 项：<u>development</u> 和 <u>production</u></li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190427/N7Qiefkt9Fwn.png?imageslim" alt="mark"></p>
<p><a target="_blank" rel="noopener" href="https://www.webpackjs.com/concepts/mode/">mode 介绍</a></p>
<p>​ <strong>mode</strong> 参数：（<u>development</u> 和 <u>production</u> ）：决定了 配置代码 （压缩代码体积）是否被压缩。</p>
<p><img src="http://static.zxinc520.com/blog/20190427/3EKcIY3d4kos.png?imageslim" alt="mark"></p>
<h3 id="配置-webpack-dev-server-自动打包"><a href="#配置-webpack-dev-server-自动打包" class="headerlink" title="配置 webpack-dev-server (自动打包)"></a>配置 webpack-dev-server (自动打包)</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 能够用于快速开发应用程序</p>
</blockquote>
<ol>
<li>安装：运行：<code>npm i webpack-dev-server -D</code></li>
<li>配置 <u>package.json</u></li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;webpack-dev-server&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>可以在<u><em>webpack.config.js</em></u> 配置相应的 devServer（自动打开窗口，配置端口号，首页路径展示情况）</li>
</ul>
<p><img src="http://static.zxinc520.com/blog/20190427/oznoq3LcPA3S.png?imageslim" alt="mark"></p>
<h3 id="配置-html-webpack-plugin"><a href="#配置-html-webpack-plugin" class="headerlink" title="配置 html-webpack-plugin"></a>配置 html-webpack-plugin</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/jantimon/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a>简化了 HTML 文件的创建，以便为你的 webpack 包提供服务。这对于在文件名中包含每次会随着编译而发生变化哈希的 webpack bundle 尤其有用。 你可以让插件为你生成一个 HTML 文件，使用<a target="_blank" rel="noopener" href="https://lodash.com/docs#template">lodash 模板</a>提供你自己的模板，或使用你自己的<a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders">loader</a>。</p>
</blockquote>
<ol>
<li>安装：运行：<code>npm i html-webpack-plugin -D</code></li>
<li>配置 <u>package.json</u></li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190427/uzkbRIjYKMqF.png?imageslim" alt="mark"></p>
<h3 id="配置-Babel"><a href="#配置-Babel" class="headerlink" title="配置 Babel"></a>配置 Babel</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://babeljs.io/">Babel</a>是一个广泛使用的转码器，可以将 ES6 代码转为 ES5 代码</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/babel-loader/#%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3"> webpack 中使用 Babel 官方文档 </a></p>
<ol>
<li><p>安装 <code>npm install -D babel-loader @babel/core @babel/preset-env webpack</code></p>
</li>
<li><p><u>在 webpack 配置对象中，需要将 babel-loader 添加到 module 列表中，就像下面这样</u></p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.m?js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [<span class="string">&quot;@babel/preset-env&quot;</span>],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="解决之前遇到的一个-BUG"><a href="#解决之前遇到的一个-BUG" class="headerlink" title="解决之前遇到的一个 BUG"></a>解决之前遇到的一个 BUG</h3><p><img src="http://static.zxinc520.com/blog/20190427/FnivOIm1VIRg.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190416/vh340CYSUk0d.png?imageslim" alt="1556355771552"></p>
<p><strong>解决方案</strong>：</p>
<ol>
<li>安装：<code>npm i @babel/plugin-proposal-class-properties -D</code></li>
<li>配置 <code>webpack.config.js</code></li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190427/OWlsS3uCQONs.png?imageslim" alt="mark"></p>
<p><strong>运行结果</strong>：</p>
<p><img src="http://static.zxinc520.com/blog/20190427/gHK6mpqXfQca.png?imageslim" alt="mark"></p>
<h2 id="在项目中使用-react"><a href="#在项目中使用-react" class="headerlink" title="在项目中使用 react"></a>在项目中使用 react</h2><ol>
<li>运行 <code>npm i react react-dom -s</code> 安装包<ul>
<li>react：专门用于创建组件和虚拟 DOM 的，同时组件的生命周期都在这个包中</li>
<li>react-dom：专门进行 DOM 操作的，最主要的应用场景，就是 ReactDOM.render()</li>
</ul>
</li>
</ol>
<p><u>尝试写一个 react 项目</u>：</p>
<p><strong>index.js</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一步：导入包</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; <span class="comment">//创建组件，虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>; <span class="comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第二步：创建虚拟DOM元素</span></span><br><span class="line"><span class="comment">//参数1：创建的元素的类型，字符串，表示元素的名称</span></span><br><span class="line"><span class="comment">//参数2：是一个对象或 null，表示 当前这个DOM 元素的属性</span></span><br><span class="line"><span class="comment">//参数3：子节点（包括 其它 虚拟DOM 获取 文本子节点）</span></span><br><span class="line"><span class="comment">//参数n：其它子节点</span></span><br><span class="line"><span class="keyword">const</span> myh1 = React.createElement(</span><br><span class="line">  <span class="string">&quot;h1&quot;</span>,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;myh1&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;this id h1&quot;</span> &#125;,</span><br><span class="line">  <span class="string">&quot;这是一个大大H1！&quot;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line"><span class="comment">//参数一：要渲染的那个虚拟DOM元素</span></span><br><span class="line"><span class="comment">//参数二：指定页面上的DOM元素，当作容器</span></span><br><span class="line">ReactDOM.render(myh1, <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>));</span><br></pre></td></tr></table></figure>

<p><strong>index.html</strong>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190427/AHtHc973OThy.png?imageslim" alt="mark"></p>
<h2 id="创建-DOM-结构"><a href="#创建-DOM-结构" class="headerlink" title="创建 DOM 结构"></a>创建 DOM 结构</h2><h3 id="方式一：（-基本不用）"><a href="#方式一：（-基本不用）" class="headerlink" title="方式一：（~基本不用）"></a>方式一：（~基本不用）</h3><p><strong>index.js</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一步：导入包</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; <span class="comment">//创建组件，虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>; <span class="comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第二步：创建虚拟DOM元素</span></span><br><span class="line"><span class="keyword">const</span> myh1 = React.createElement(</span><br><span class="line">  <span class="string">&quot;h1&quot;</span>,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;myh1&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;this id h1&quot;</span> &#125;,</span><br><span class="line">  <span class="string">&quot;这是一个大大H1！&quot;</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">const</span> mydiv = React.createElement(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;这是一个div元素&quot;</span>, myh1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(mydiv, <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="方式二：JSX-语法-（-important）"><a href="#方式二：JSX-语法-（-important）" class="headerlink" title="方式二：JSX 语法 （~ important）"></a>方式二：JSX 语法 （~ important）</h3><blockquote>
<p>JSX 语法：看起来可能有些奇怪的标签语法既不是字符串也不是 HTML。</p>
<p>JSX 语法的本质，还是在运行的时候，被转换成了 <u><strong>React.createElement 形式</strong></u>来执行的</p>
</blockquote>
<p>使用 <strong>babel</strong> 将 JSX 语法转换为 <u>React.createElement 形式</u> <a target="_blank" rel="noopener" href="https://react.docschina.org/docs/introducing-jsx.html">JSX 官方详细介绍</a></p>
<p>关键包：运行 <code>npm install --save-dev @babel/preset-react</code> <a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-preset-react">可以参考 babel 官方文档</a></p>
<p><img src="http://static.zxinc520.com/blog/20190427/NHy4KwgF4SNN.png?imageslim" alt="mark"></p>
<p>原因：<u>少写了中括号。（粗心大意了）</u>不该！！<del>~</del></p>
<p><strong>配置 <u>webpack.config.js</u></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置 @babel/preset-react</span></span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.m?js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [</span><br><span class="line">            <span class="string">&quot;@babel/preset-env&quot;</span>,</span><br><span class="line">            [</span><br><span class="line">              <span class="string">&quot;@babel/preset-react&quot;</span>,</span><br><span class="line">              &#123;</span><br><span class="line">                pragmaFrag: <span class="string">&quot;DomFrag&quot;</span>, <span class="comment">// default is React.Fragment</span></span><br><span class="line">                throwIfNamespace: <span class="literal">false</span>, <span class="comment">// defaults to true</span></span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          ],</span><br><span class="line">          plugins: [<span class="string">&quot;@babel/plugin-proposal-class-properties&quot;</span>],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h5 id="在-JSX-中使用表达式：-JSX-中使用表达式"><a href="#在-JSX-中使用表达式：-JSX-中使用表达式" class="headerlink" title="在 JSX 中使用表达式： JSX 中使用表达式"></a><strong>在 JSX 中使用表达式</strong>：<a target="_blank" rel="noopener" href="https://react.docschina.org/docs/introducing-jsx.html"> JSX 中使用表达式</a></h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一步：导入包</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; <span class="comment">//创建组件，虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>; <span class="comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;zc&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> arr = [<span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是h1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>, <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>这是h2<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>];</span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="string">&quot;周琛&quot;</span>, <span class="string">&quot;张三&quot;</span>, <span class="string">&quot;李四&quot;</span>, <span class="string">&quot;王五&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div title=&#123;str&#125;&gt;</span><br><span class="line">    &#123;a + <span class="number">11</span>&#125;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &#123;arr&#125;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &#123;arr1.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span>;</span><br><span class="line">    &#125;)&#125;</span><br><span class="line">  &lt;/div&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190427/EfbH8hDEnVn0.png?imageslim" alt="mark"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/4/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2020
        <i class="ri-heart-fill heart_icon"></i> zhou chen
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <span class="division">|</span>
        Theme - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="琛"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://zxinc520.com">个人博客</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友情链接</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="http://static.zxinc520.com/blog/20190512/p4IWzLUrorWK.jpg?imageslim">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="http://static.zxinc520.com/blog/20190512/pGHOMdDF79sb.jpg?imageslim">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script>

<script src="/js/clickBoom1.js"></script>


<!-- ClickBoom2 -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>