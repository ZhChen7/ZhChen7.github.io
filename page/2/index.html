<!DOCTYPE html>


<html lang="en">


<head>
  <meta charset="utf-8" />
   
  <meta name="keywords" content="博客，学习网站，hexo，周琛，周琛的个人博客" />
   
  <meta name="description" content="周琛的博客" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     周琛的博客
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.png" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

  

<link rel="alternate" href="/atom.xml" title="琛" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    
      <canvas class="fireworks"></canvas>
      <style>
        .fireworks {
          position: fixed;
          left: 0;
          top: 0;
          z-index: 99999;
          pointer-events: none;
        }
      </style>
      
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/ZhChen7"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">琛</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['学习', '学习使我快乐', '快乐，开心～'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-getOfferHandcode"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/23/getOfferHandcode/"
    >手撕代码</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/03/23/getOfferHandcode/" class="article-date">
  <time datetime="2020-03-23T09:46:34.000Z" itemprop="datePublished">2020-03-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Offer/">Offer</a> / <a class="article-category-link" href="/categories/Offer/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/">字节跳动</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="面试专题总结：手撕代码"><a href="#面试专题总结：手撕代码" class="headerlink" title="面试专题总结：手撕代码"></a>面试专题总结：手撕代码</h2><blockquote>
<p>希望读者依此构建自己的知识树（思维导图）</p>
<p>偷懒一下：可参考我自己总结思维导图 : <a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Interview-mind-map">点这里</a></p>
<p>手撕代码地址：<a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Technical-interview">地址</a></p>
<p>附带：高频面试题积累文档。 来自于（学长、牛客网等平台）</p>
<p>自己开发的博客地址：<a target="_blank" rel="noopener" href="http://zxinc520.com/">zxinc520.com</a></p>
<p>github 地址: <a target="_blank" rel="noopener" href="https://github.com/ZhChen7">点击</a></p>
</blockquote>
<blockquote>
<p>此篇 js - 【手撕代码】 知识点： 全部弄懂了，面试很容易。</p>
</blockquote>
<h3 id="1、Promise（A-规范）、then、all-方法"><a href="#1、Promise（A-规范）、then、all-方法" class="headerlink" title="1、Promise（A+规范）、then、all 方法"></a>1、Promise（A+规范）、then、all 方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     Promise：构造 Promise 函数对象</span></span><br><span class="line"><span class="comment">     excutor: 执行构造器 （同步执行）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">excutor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> _that = <span class="built_in">this</span>;</span><br><span class="line">  _that.status = <span class="string">&quot;pending&quot;</span>; <span class="comment">// 给 promise对象指定 status属性,初始值为 pending</span></span><br><span class="line">  _that.data = <span class="literal">undefined</span>; <span class="comment">//给 promise 对象指定一个用于储存结果数据的属性</span></span><br><span class="line">  _that.callbacks = []; <span class="comment">// 每个元素的结构：&#123; onFulfilled()&#123;&#125;, onRejected()&#123;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 如果当前状态不是 pending，直接结束</span></span><br><span class="line">    <span class="keyword">if</span> (_that.status !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将 状态改为 resolved</span></span><br><span class="line">    _that.status = <span class="string">&quot;resolved&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 保存 value 数据</span></span><br><span class="line">    _that.data = value;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果有待执行callback 函数，立刻异步执行回调函数</span></span><br><span class="line">    <span class="keyword">if</span> (_that.callbacks.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        _that.callbacks.forEach(<span class="function">(<span class="params">callbacksObj</span>) =&gt;</span> &#123;</span><br><span class="line">          callbacksObj.onFulfilled(value);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 如果当前状态不是 pending，直接结束</span></span><br><span class="line">    <span class="keyword">if</span> (_that.status !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将 状态改为 rejected</span></span><br><span class="line">    _that.status = <span class="string">&quot;rejected&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 保存 value 数据</span></span><br><span class="line">    _that.data = reason;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果有待执行callback 函数，立刻异步执行回调函数</span></span><br><span class="line">    <span class="keyword">if</span> (_that.callbacks.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        _that.callbacks.forEach(<span class="function">(<span class="params">callbacksObj</span>) =&gt;</span> &#123;</span><br><span class="line">          callbacksObj.onRejected(reason);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//立刻同步执行 excutor</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    excutor(resolve, reject);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">//如果执行器抛出异常，promise对象变为 rejected 状态</span></span><br><span class="line">    reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">          Promise原型对象的 then() --- *思路*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            1、指定成功和失败的回调函数</span></span><br><span class="line"><span class="comment">            2、返回一个新的 promise 对象</span></span><br><span class="line"><span class="comment">            3、返回promise的结果由 onFulfilled/onRejected执行结果决定</span></span><br><span class="line"><span class="comment">            4、指定 onFulfilled/onRejected的默认值</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="built_in">Promise</span>.prototype.then = <span class="function"><span class="keyword">function</span> (<span class="params">onFulfilled, onRejected</span>) </span>&#123;</span><br><span class="line">  onFulfilled =</span><br><span class="line">    <span class="keyword">typeof</span> onFulfilled === <span class="string">&quot;function&quot;</span> ? onFulfilled : <span class="function">(<span class="params">reason</span>) =&gt;</span> reason; <span class="comment">//向后传递成功的value</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//指定默认的失败的回调（实现错误/异常穿透的关键点）</span></span><br><span class="line">  onRejected =</span><br><span class="line">    <span class="keyword">typeof</span> onRejected === <span class="string">&quot;function&quot;</span></span><br><span class="line">      ? onRejected</span><br><span class="line">      : <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">//向后传递失败的reason</span></span><br><span class="line">          <span class="keyword">throw</span> reason;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> _that = <span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//返回一个新的promise 对象</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">                    调用指定的回调函数处理，根据执行结果，改变return的promise的状态</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">                           1. 如果抛出异常，return 的promise就会失败，reason 就是 error</span></span><br><span class="line"><span class="comment">                           2. 如果回调函数返回的不是promise，return的promise就会成功，value就是返回的值</span></span><br><span class="line"><span class="comment">                           3.如果回调函数返回的是promise，return的promise的结果就是这个promise的结果</span></span><br><span class="line"><span class="comment">                        */</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> result = callback(_that.data);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.如果回调函数返回的是promise，return的promise的结果就是这个promise的结果</span></span><br><span class="line">        <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">          <span class="comment">// result.then(</span></span><br><span class="line">          <span class="comment">//     value =&gt; resolve(value), //当result成功时，让return的promise也成功</span></span><br><span class="line">          <span class="comment">//     reason =&gt; reject(reason)  //当result失败时，让return的promise也失败</span></span><br><span class="line">          <span class="comment">// )</span></span><br><span class="line"></span><br><span class="line">          result.then(resolve, reject);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">//  2. 如果回调函数返回的不是promise，return的promise就会成功，value就是返回的值</span></span><br><span class="line">          resolve(result);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="comment">//1. 如果抛出异常，return 的promise就会失败，reason 就是 error</span></span><br><span class="line"></span><br><span class="line">        reject(error);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (_that.status === <span class="string">&quot;pending&quot;</span>) &#123;</span><br><span class="line">      <span class="comment">//假设当前状态还是 pending 状态，将回调函数 保存起来</span></span><br><span class="line">      _that.callbacks.push(&#123;</span><br><span class="line">        onFulfilled(value) &#123;</span><br><span class="line">          handle(onFulfilled); <span class="comment">//改promise的状态为 onFulfilled状态</span></span><br><span class="line">        &#125;,</span><br><span class="line">        onRejected(reason) &#123;</span><br><span class="line">          handle(onRejected); <span class="comment">//改promise的状态为 onRejected状态</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (_that.status === <span class="string">&quot;resolved&quot;</span>) &#123;</span><br><span class="line">      <span class="comment">//如果当前是resolved状态，异步执行onresolved并改变return的promise状态</span></span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        handle(onFulfilled);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//onRejected</span></span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//如果当前是rejected状态，异步执行onRejected并改变return的promise状态</span></span><br><span class="line">        handle(onRejected);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">            Promise原型对象的 catch()</span></span><br><span class="line"><span class="comment">            指定失败的回调函数</span></span><br><span class="line"><span class="comment">            返回一个新的 promise 对象</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="built_in">Promise</span>.prototype.catch = <span class="function"><span class="keyword">function</span> (<span class="params">onRejected</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.then(<span class="literal">undefined</span>, onRejected);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.prototype.finally = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.then(</span><br><span class="line">    (value) =&gt; &#123;</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(callback(value));</span><br><span class="line">    &#125;,</span><br><span class="line">    (reason) =&gt; &#123;</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(callback(reason));</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">            Promise函数对象的 resolve()</span></span><br><span class="line"><span class="comment">            返回 指定结果的 &quot;成功&quot; 的 promise 对象</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="built_in">Promise</span>.resolve = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//返回 一个 成功/失败 的promise</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">      <span class="comment">//使用value的结果作为 promise 的结果</span></span><br><span class="line">      value.then(resolve, reject);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//value不是promise =&gt; promise变为成功，数据是 value</span></span><br><span class="line">      resolve(value);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">            Promise函数对象的 reject()</span></span><br><span class="line"><span class="comment">            返回 指定结果的 &quot;失败&quot; 的 promise 对象</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="built_in">Promise</span>.reject = <span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//返回 一个失败的 promise</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject(reason);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">            Promise函数对象的 all()</span></span><br><span class="line"><span class="comment">            返回 一个promise，只有当所有promise都成功时才成功，否则只要有一个失败就 失败</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="built_in">Promise</span>.all = <span class="function"><span class="keyword">function</span> (<span class="params">promises</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> values = <span class="built_in">Array</span>.apply(<span class="literal">null</span>, &#123; <span class="attr">length</span>: promises.length &#125;); <span class="comment">//用来保存所有成功 value的数组</span></span><br><span class="line">  <span class="keyword">let</span> resolvedCount = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//遍历获取每一个 promise的结果</span></span><br><span class="line">    promises.forEach(<span class="function">(<span class="params">p, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(p).then(</span><br><span class="line">        <span class="comment">//p成功，将成功的 value 保存 values</span></span><br><span class="line">        <span class="comment">// values.push(value)  =&gt; 不能这样</span></span><br><span class="line">        (value) =&gt; &#123;</span><br><span class="line">          resolvedCount++; <span class="comment">//成功的次数</span></span><br><span class="line"></span><br><span class="line">          values[index] = value;</span><br><span class="line"></span><br><span class="line">          <span class="comment">//如果全部成功了，将return的 promise 改为成功</span></span><br><span class="line">          <span class="keyword">if</span> (resolvedCount === promises.length) &#123;</span><br><span class="line">            resolve(values);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        (reason) =&gt; &#123;</span><br><span class="line">          <span class="comment">//只要一个失败了，return 的promise就失败</span></span><br><span class="line">          reject(reason);</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">            Promise函数对象的 race()</span></span><br><span class="line"><span class="comment">            返回 一个promise，其结果由第一个完成的promise来决定</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="built_in">Promise</span>.race = <span class="function"><span class="keyword">function</span> (<span class="params">promises</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//遍历获取每一个 promise的结果</span></span><br><span class="line">    promises.forEach(<span class="function">(<span class="params">p, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(p).then(</span><br><span class="line">        (value) =&gt; &#123;</span><br><span class="line">          <span class="comment">// 一旦由成功了，将return 变为失败</span></span><br><span class="line">          resolve(value);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        (reason) =&gt; &#123;</span><br><span class="line">          <span class="comment">//只要一个失败了，return 的promise就失败</span></span><br><span class="line">          reject(reason);</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2、手写-call-apply-bind"><a href="#2、手写-call-apply-bind" class="headerlink" title="2、手写 call apply bind"></a>2、手写 call apply bind</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义apply函数</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.apply1 = <span class="function"><span class="keyword">function</span> (<span class="params">obj, arg</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//context为null或者是undefined时,设置默认值</span></span><br><span class="line">  <span class="keyword">if</span> (!obj) &#123;</span><br><span class="line">    obj = <span class="keyword">typeof</span> <span class="built_in">window</span> === <span class="string">&quot;undefined&quot;</span> ? <span class="built_in">global</span> : <span class="built_in">window</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  obj.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="literal">null</span>;</span><br><span class="line">  <span class="comment">//undefined 或者 是 null 不是 Iterator 对象，不能被 ...</span></span><br><span class="line">  <span class="keyword">if</span> (arg === <span class="literal">undefined</span> || arg === <span class="literal">null</span>) &#123;</span><br><span class="line">    result = obj.fn(arg);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result = obj.fn(...arg);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span> obj.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义 call 函数</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.call1 = <span class="function"><span class="keyword">function</span> (<span class="params">obj, ...arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj) &#123;</span><br><span class="line">    obj = <span class="keyword">typeof</span> <span class="built_in">window</span> === <span class="string">&quot;undefined&quot;</span> ? <span class="built_in">global</span> : <span class="built_in">window</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  obj.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="literal">null</span>;</span><br><span class="line">  result = obj.fn(...arg);</span><br><span class="line">  <span class="keyword">delete</span> obj.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义 bind 函数</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">obj, ...arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj) &#123;</span><br><span class="line">    obj = <span class="keyword">typeof</span> <span class="built_in">window</span> === <span class="string">&quot;undefined&quot;</span> ? <span class="built_in">global</span> : <span class="built_in">window</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">let</span> args = arg;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">  f.prototype = <span class="built_in">this</span>.prototype;</span><br><span class="line">  <span class="keyword">let</span> bound = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = [...args, ...arguments];</span><br><span class="line">    <span class="keyword">let</span> obj = <span class="built_in">this</span> <span class="keyword">instanceof</span> f ? <span class="built_in">this</span> : obj;</span><br><span class="line">    <span class="keyword">return</span> self.apply(obj, res);</span><br><span class="line">  &#125;;</span><br><span class="line">  bound.prototype = <span class="keyword">new</span> f();</span><br><span class="line">  <span class="keyword">return</span> bound;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3、Promise-封装-Ajax-方法"><a href="#3、Promise-封装-Ajax-方法" class="headerlink" title="3、Promise 封装 Ajax 方法"></a>3、Promise 封装 Ajax 方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">url, methods, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(methods, url, <span class="literal">true</span>);</span><br><span class="line">    xhr.send(data);</span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">        resolve(xhr.responseText);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        reject(xhr.status);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、异步加载图片"><a href="#4、异步加载图片" class="headerlink" title="4、异步加载图片"></a>4、异步加载图片</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadImageAsync</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">    image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(image);</span><br><span class="line">    &#125;;</span><br><span class="line">    image.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;Could not load image at &quot;</span> + url));</span><br><span class="line">    &#125;;</span><br><span class="line">    image.src = url;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5、防抖，节流"><a href="#5、防抖，节流" class="headerlink" title="5、防抖，节流"></a>5、防抖，节流</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//防抖</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timeout = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">    timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//节流</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> canRun = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!canRun) <span class="keyword">return</span>;</span><br><span class="line">    canRun = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">      canRun = <span class="literal">true</span>;</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6、圣杯、双飞翼"><a href="#6、圣杯、双飞翼" class="headerlink" title="6、圣杯、双飞翼"></a>6、圣杯、双飞翼</h3><h4 id="圣杯"><a href="#圣杯" class="headerlink" title="圣杯"></a>圣杯</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        *&#123;</span><br><span class="line">            padding: 0;</span><br><span class="line">            margin: 0;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.container</span>&#123;</span></span><br><span class="line">            overflow: hidden;</span><br><span class="line">            padding: 0 100px 0 100px;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.middle</span>,<span class="selector-class">.left</span>,<span class="selector-class">.right</span>&#123;</span></span><br><span class="line">            position: relative;</span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.left</span>&#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background: red;</span><br><span class="line">            margin-left: -100%;</span><br><span class="line">            left: -100px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.right</span>&#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background: green;</span><br><span class="line">            margin-left: -100px;</span><br><span class="line">            right: -100px;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.middle</span>&#123;</span></span><br><span class="line">            background: blue;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 300px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;middle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="双飞翼"><a href="#双飞翼" class="headerlink" title="双飞翼"></a>双飞翼</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">            overflow: hidden;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.middle</span>, <span class="selector-class">.left</span>, <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">            height: 100px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            background: red;</span><br><span class="line">            margin-left: -100%;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            background: blue;</span><br><span class="line">            margin-left: -100px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.middle</span> &#123;</span></span><br><span class="line">            width: 100%;</span><br><span class="line">            background: aqua;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.inner</span> &#123;</span></span><br><span class="line">            margin: 0 100px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;middle&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span>middle<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7、继承相关"><a href="#7、继承相关" class="headerlink" title="7、继承相关"></a>7、继承相关</h3><h4 id="7-1、原型链继承"><a href="#7-1、原型链继承" class="headerlink" title="7.1、原型链继承"></a>7.1、原型链继承</h4><ul>
<li><p>原型链继承的基本思想：是利用原型让一个引用类型继承另一个引用类型的属性和方法。</p>
<p>如 SubType.prototype = new SuperType();</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&quot;Yvette&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.age = <span class="number">22</span>;</span><br><span class="line">&#125;</span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br></pre></td></tr></table></figure>
</li>
<li><p>缺点</p>
<ol>
<li>通过原型来实现继承时，原型会变成另一个类型的实例，原先的实例属性变成了现在的原型属性，该原型的引用类型属性会被所有的实例共享</li>
<li>在创建子类型的实例时，不能向超类型的构造函数中传递参数</li>
</ol>
</li>
</ul>
<h4 id="7-2、借用构造函数"><a href="#7-2、借用构造函数" class="headerlink" title="7.2、借用构造函数"></a>7.2、借用构造函数</h4><ul>
<li><p>其基本思想为:在子类型的构造函数中调用超类型构造函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  SuperType.call(<span class="built_in">this</span>, name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>优点</p>
<ol>
<li>可以向超类传递参数</li>
<li>解决了原型中包含引用类型值被所有实例共享的问题</li>
</ol>
</li>
<li><p>缺点</p>
<ol>
<li>方法都在构造函数中定义，函数复用无从谈起</li>
<li>另外超类型原型中定义的方法对于子类型而言都是不可见的</li>
</ol>
</li>
</ul>
<h4 id="7-3、组合继承"><a href="#7-3、组合继承" class="headerlink" title="7.3、组合继承"></a>7.3、组合继承</h4><ul>
<li><p>组合继承指的是将原型链和借用构造函数技术组合到一块，从而发挥二者之长的一种继承模式。基本思路：使用原型链实现对原型属性和方法的继承，通过借用构造函数来实现对实例属性的继承，既通过在原型上定义方法来实现了函数复用，又保证了每个实例都有自己的属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&quot;zc&quot;</span>;</span><br><span class="line">  <span class="built_in">this</span>.colors = [<span class="string">&quot;pink&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  SuperType.call(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line">SubType.prototype.constructor = SubType;</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> SubType();</span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> SubType();</span><br><span class="line"></span><br><span class="line">a.colors.push(<span class="string">&quot;red&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.colors); <span class="comment">//[ &#x27;pink&#x27;, &#x27;blue&#x27;, &#x27;green&#x27;, &#x27;red&#x27; ]</span></span><br><span class="line"><span class="built_in">console</span>.log(b.colors); <span class="comment">//[ &#x27;pink&#x27;, &#x27;blue&#x27;, &#x27;green&#x27; ]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>优点</p>
<ol>
<li>可以向超类传递参数</li>
<li>每个实例都有自己的属性</li>
<li>实现了函数复用</li>
</ol>
</li>
<li><p>缺点</p>
<ol>
<li>无论什么情况下，都会调用两次超类型构造函数：一次是在创建子类型原型的时候，另一次是在子类型构造函数内部。</li>
</ol>
</li>
</ul>
<h4 id="7-4、原型式继承"><a href="#7-4、原型式继承" class="headerlink" title="7.4、原型式继承"></a>7.4、原型式继承</h4><ul>
<li><p>原型式继承继承的基本思想：在 object() 函数内部，先创建一个临时性的构造函数，然后将传入的对象作为这个构造函数的原型，最后返回了这个临时类型的一个新实例，从本质上讲，object() 对传入的对象执行了一次浅拷贝。</p>
<p>ECMAScript5 通过新增 Object.create()方法规范了原型式继承。这个方法接收两个参数：一个用作新对象原型的对象和（可选的）一个为新对象定义额外属性的对象(可以覆盖原型对象上的同名属性)，在传入一个参数的情况下，Object.create() 和 object() 方法的行为相同。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype = o;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>缺点</p>
<ol>
<li>同原型链实现继承一样，包含引用类型值的属性会被所有实例共享</li>
</ol>
</li>
</ul>
<h4 id="7-5、寄生式继承"><a href="#7-5、寄生式继承" class="headerlink" title="7.5、寄生式继承"></a>7.5、寄生式继承</h4><ul>
<li><p>寄生式继承是与原型式继承紧密相关的一种思路。寄生式继承的思路与寄生构造函数和工厂模式类似，即创建一个仅用于封装继承过程的函数，该函数在内部已某种方式来增强对象，最后再像真地是它做了所有工作一样返回对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype = o;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createAnother</span>(<span class="params">original</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> clone = object(original); <span class="comment">//通过调用函数创建一个新对象</span></span><br><span class="line">  clone.sayHi = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//以某种方式增强这个对象</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;hi&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> clone; <span class="comment">//返回这个对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>优点</p>
<ol>
<li>基于 person 返回了一个新对象 -—— person2，新对象不仅具有 person 的所有属性和方法，而且还有自己的 sayHi() 方法。在考虑对象而不是自定义类型和构造函数的情况下，寄生式继承也是一种有用的模式。</li>
</ol>
</li>
<li><p>缺点</p>
<ol>
<li>使用寄生式继承来为对象添加函数，会由于不能做到函数复用而效率低下。</li>
<li>同原型链实现继承一样，包含引用类型值的属性会被所有实例共享。</li>
</ol>
</li>
</ul>
<h4 id="7-6、寄生组合式继承"><a href="#7-6、寄生组合式继承" class="headerlink" title="7.6、寄生组合式继承"></a>7.6、寄生组合式继承</h4><ul>
<li><p>所谓寄生组合式继承，即通过借用构造函数来继承属性，通过原型链的混成形式来继承方法，基本思路：</p>
<p>不必为了指定子类型的原型而调用超类型的构造函数，我们需要的仅是超类型原型的一个副本，本质上就是使用寄生式继承来继承超类型的原型，然后再将结果指定给子类型的原型。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">subType, superType</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> prototype = object(superType.prototype); <span class="comment">//创建对象</span></span><br><span class="line">  prototype.constructor = subType; <span class="comment">//增强对象</span></span><br><span class="line">  subType.prototype = prototype; <span class="comment">//指定对象</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.colors = [<span class="string">&quot;pink&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuberType</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  SuperType.call(<span class="built_in">this</span>, name);</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">inheritPrototype(SuberType, SuperType);</span><br></pre></td></tr></table></figure>
</li>
<li><p>步骤</p>
<p>第一步：创建超类型原型的一个副本</p>
<p>第二步：为创建的副本添加 constructor 属性</p>
<p>第三步：将新创建的对象赋值给子类型的原型</p>
</li>
<li><p>优点</p>
<ol>
<li>只调用了一次超类构造函数，效率更高。避免在 SuberType.prototype 上面创建不必要的、多余的属性，与其同时，原型链还能保持不变。因此寄生组合继承是引用类型最理性的继承范式。</li>
</ol>
</li>
</ul>
<h4 id="7-7、ES6-继承"><a href="#7-7、ES6-继承" class="headerlink" title="7.7、ES6 继承"></a>7.7、ES6 继承</h4><ul>
<li><p>Class 可以通过 extends 关键字实现继承</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperType</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(age) &#123;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line">  getAge() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.age);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubType</span> <span class="keyword">extends</span> <span class="title">SuperType</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(age, name) &#123;</span><br><span class="line">    <span class="built_in">super</span>(age); <span class="comment">// 调用父类的constructor(x, y)</span></span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">  getName() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>对于 ES6 的 class 需要做以下几点说明</p>
<ol>
<li>class 声明会提升，但不会初始化赋值。Foo 进入暂时性死区，类似于 let、const 声明变量。</li>
<li>class 声明内部会启用严格模式。</li>
<li>class 的所有方法（包括静态方法和实例方法）都是不可枚举的。</li>
<li>class 的所有方法（包括静态方法和实例方法）都没有原型对象 prototype，所以也没有[[construct]]，不能使用 new 来调用。</li>
<li>必须使用 new 调用 class</li>
<li>class 内部无法重写类名</li>
</ol>
</li>
</ul>
<h4 id="使用-extends-关键字实现继承，有几点需要特别说明"><a href="#使用-extends-关键字实现继承，有几点需要特别说明" class="headerlink" title="使用 extends 关键字实现继承，有几点需要特别说明"></a>使用 extends 关键字实现继承，有几点需要特别说明</h4><ul>
<li>子类必须在 constructor 中调用 super 方法，否则新建实例时会报错。如果没有子类没有定义 constructor 方法，那么这个方法会被默认添加。在子类的构造函数中，只有调用 super 之后，才能使用 this 关键字，否则报错。这是因为子类实例的构建，基于父类实例，只有 super 方法才能调用父类实例。</li>
<li>ES5 的继承，实质是先创造子类的实例对象 this，然后再将父类的方法添加到 this 上面（Parent.apply(this)）。ES6 的继承机制完全不同，实质是先将父类实例对象的属性和方法，加到 this 上面（所以必须先调用 super 方法），然后再用子类的构造函数修改 this</li>
</ul>
<h3 id="8、自定义-new-过程"><a href="#8、自定义-new-过程" class="headerlink" title="8、自定义 new 过程"></a>8、自定义 new 过程</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_new</span>(<span class="params">fn, ...arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line">  obj.__proto__ = fn.prototype;</span><br><span class="line">  <span class="keyword">let</span> ret = fn.apply(obj, arg);</span><br><span class="line">  <span class="keyword">return</span> ret <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? ret : obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9、手写递归方法实现深拷贝"><a href="#9、手写递归方法实现深拷贝" class="headerlink" title="9、手写递归方法实现深拷贝"></a>9、手写递归方法实现深拷贝</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 手写实现深拷贝</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkedType</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(target).slice(<span class="number">8</span>, <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> targrtType = checkedType(target);</span><br><span class="line">  <span class="keyword">let</span> result = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">if</span> (targrtType === <span class="string">&quot;Object&quot;</span>) &#123;</span><br><span class="line">    result = &#123;&#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (targrtType === <span class="string">&quot;Array&quot;</span>) &#123;</span><br><span class="line">    result = [];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">in</span> target) &#123;</span><br><span class="line">    <span class="keyword">let</span> value = target[item];</span><br><span class="line">    <span class="keyword">if</span> (checkedType(value) === <span class="string">&quot;Object&quot;</span> || checkedType(value) === <span class="string">&quot;Array&quot;</span>) &#123;</span><br><span class="line">      result[item] = clone(value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      result[item] = value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10、实现一个柯里化函数"><a href="#10、实现一个柯里化函数" class="headerlink" title="10、实现一个柯里化函数"></a>10、实现一个柯里化函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ES5写法</span></span><br><span class="line"><span class="keyword">const</span> currying = <span class="function"><span class="keyword">function</span> (<span class="params">fn, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (args.length &lt; fn.length) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> currying(fn, ...args, ...arguments);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fn(...args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ES6写法</span></span><br><span class="line"><span class="keyword">const</span> currying = <span class="function">(<span class="params">fn, ...args</span>) =&gt;</span></span><br><span class="line">  args.length &lt; fn.length</span><br><span class="line">    ? <span class="function">(<span class="params">...argments</span>) =&gt;</span> currying(fn, ...args, ...argments)</span><br><span class="line">    : fn(...args);</span><br></pre></td></tr></table></figure>

<h3 id="11、双向绑定（手写）"><a href="#11、双向绑定（手写）" class="headerlink" title="11、双向绑定（手写）"></a>11、双向绑定（手写）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Object.defineProperty 写法</span></span><br><span class="line"><span class="keyword">let</span> vm = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  name: <span class="string">&quot;zc&quot;</span>,</span><br><span class="line">  age: <span class="string">&quot;123&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(vm, key, &#123;</span><br><span class="line">      get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj[key];</span><br><span class="line">      &#125;,</span><br><span class="line">      set: <span class="function"><span class="keyword">function</span> (<span class="params">newvalue</span>) </span>&#123;</span><br><span class="line">        obj[key] = newvalue;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj.age = <span class="string">&quot;111&quot;</span>;</span><br><span class="line">vm.age = <span class="string">&quot;112221&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(vm.age);</span><br><span class="line"><span class="built_in">console</span>.log(obj.age);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Proxy 写法</span></span><br><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, &#123;</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span> (<span class="params">target, propKey, receiver</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`getting <span class="subst">$&#123;propKey&#125;</span>!`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, propKey, receiver);</span><br><span class="line">  &#125;,</span><br><span class="line">  set: <span class="function"><span class="keyword">function</span> (<span class="params">target, propKey, value, receiver</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`setting <span class="subst">$&#123;propKey&#125;</span>!`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, propKey, value, receiver);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="10、JS-发布订阅模式"><a href="#10、JS-发布订阅模式" class="headerlink" title="10、JS 发布订阅模式"></a>10、JS 发布订阅模式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pubSub = &#123;</span><br><span class="line">  list: &#123;&#125;,</span><br><span class="line">  subscribe: <span class="function"><span class="keyword">function</span> (<span class="params">key, fn</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//订阅</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.list[key]) &#123;</span><br><span class="line">      <span class="built_in">this</span>.list[key] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.list[key].push(fn);</span><br><span class="line">  &#125;,</span><br><span class="line">  publish: <span class="function"><span class="keyword">function</span> (<span class="params">key, ...args</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//发布</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> fn <span class="keyword">of</span> <span class="built_in">this</span>.list[key]) &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  unSubscribe: <span class="function"><span class="keyword">function</span> (<span class="params">key, fn</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//取消订阅</span></span><br><span class="line">    <span class="keyword">let</span> fnlist = <span class="built_in">this</span>.list[key];</span><br><span class="line">    <span class="keyword">if</span> (!fnlist) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (!fn) &#123;</span><br><span class="line">      fnlist.length = <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fnlist.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item === index) &#123;</span><br><span class="line">          fnlist.splice(index, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">pubSub.subscribe(<span class="string">&quot;onwork&quot;</span>, <span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`上班了：<span class="subst">$&#123;time&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line">pubSub.subscribe(<span class="string">&quot;offwork&quot;</span>, <span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`下班了：<span class="subst">$&#123;time&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line">pubSub.subscribe(<span class="string">&quot;launch&quot;</span>, <span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`吃饭了：<span class="subst">$&#123;time&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// // 发布</span></span><br><span class="line">pubSub.publish(<span class="string">&quot;offwork&quot;</span>, <span class="string">&quot;18:00:00&quot;</span>);</span><br><span class="line">pubSub.publish(<span class="string">&quot;launch&quot;</span>, <span class="string">&quot;12:00:00&quot;</span>);</span><br><span class="line"></span><br><span class="line">pubSub.unSubscribe(<span class="string">&quot;onwork&quot;</span>);</span><br><span class="line">pubSub.publish(<span class="string">&quot;onwork&quot;</span>, <span class="string">&quot;1222:00:00&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="11、JS-获取-url-参数"><a href="#11、JS-获取-url-参数" class="headerlink" title="11、JS 获取 url 参数"></a>11、JS 获取 url 参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test =</span><br><span class="line">  <span class="string">&quot;?ie=utf-8&amp;f=8&amp;rsv_bp=1&amp;rsv_idx=1&amp;tn=baidu&amp;wd=21331&amp;rsv_pq=b8627e62001efbb9&amp;rsv_t=eef5sqIQ98s66yOwueYH5BWlFUARj0PkHBdCA4ahbSVYQA5qO9MBoZPC0mU&amp;rqlang=cn&amp;rsv_enter=1&amp;rsv_dl=tb&amp;rsv_sug3=5&amp;rsv_sug1=1&amp;rsv_sug7=100&amp;rsv_sug2=0&amp;inputT=509&amp;rsv_sug4=509&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> str1 = str.slice(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">let</span> arr = str1.split(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(arr);</span><br><span class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">  arr.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> [key, value] = item.split(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">    map.set(key, <span class="built_in">decodeURIComponent</span>(value));</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> f(test)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12、二叉树"><a href="#12、二叉树" class="headerlink" title="12、二叉树"></a>12、二叉树</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、求二叉树中的节点个数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNodenum</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> getNodenum(root.left) + getNodenum(root.right) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、求二叉树的最大深度</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maxDepth</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(maxDepth(root.left), maxDepth(root.right)) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.二叉树的最小深度</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">minDepth</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">let</span> left = minDepth(root.left);</span><br><span class="line">  <span class="keyword">let</span> right = minDepth(root.right);</span><br><span class="line">  <span class="keyword">return</span> left == <span class="number">0</span> || right == <span class="number">0</span> ? left + right + <span class="number">1</span> : <span class="built_in">Math</span>.min(left, right) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.先序遍历（递归）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">preroot</span>(<span class="params">root, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">    callback(root.key);</span><br><span class="line">    preroot(root.left, callback);</span><br><span class="line">    preroot(root.right, callback);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//先序遍历（非递归）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">preroot</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> stack = [],</span><br><span class="line">    result = [];</span><br><span class="line">  <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">    stack.push(root);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (stack.length != <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> temp = stack.pop();</span><br><span class="line">    result.push(temp.key);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (temp.left != <span class="literal">null</span>) &#123;</span><br><span class="line">      stack.push(temp.left);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (temp.right != <span class="literal">null</span>) &#123;</span><br><span class="line">      stack.push(temp.right);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//5 中序遍历（递归）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">middleroot</span>(<span class="params">root, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">    preroot(root.left, callback);</span><br><span class="line">    callback(root.key);</span><br><span class="line">    preroot(root.right, callback);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//5.1 中序遍历（非递归）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">middleroot</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> stack = [],</span><br><span class="line">    result = [];</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">while</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">      stack.push(root);</span><br><span class="line">      root = root.left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (stack.length == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> temp = stack.pop();</span><br><span class="line">    result.push(temp.key);</span><br><span class="line">    stack.push(temp.right);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//分层遍历（递归）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bfs</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> queue = [],</span><br><span class="line">    result = [];</span><br><span class="line">  <span class="keyword">let</span> pointer = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">    queue.push(root);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> bfsFun = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> temp = queue[pointer];</span><br><span class="line">    <span class="keyword">if</span> (temp) &#123;</span><br><span class="line">      result.push(temp.key);</span><br><span class="line">      <span class="keyword">if</span> (temp.left) &#123;</span><br><span class="line">        queue.push(temp.left);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (temp.right) &#123;</span><br><span class="line">        queue.push(temp.right);</span><br><span class="line">      &#125;</span><br><span class="line">      pointer++;</span><br><span class="line">      bfsFun();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  bfsFun();</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//分层遍历（非递归）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bfs</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> queue = [],</span><br><span class="line">    result = [];</span><br><span class="line">  <span class="keyword">if</span> (root !== <span class="literal">null</span>) &#123;</span><br><span class="line">    queue.push(root);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> pointer = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (pointer &lt; queue.length) &#123;</span><br><span class="line">    <span class="keyword">let</span> temp = queue[pointer++];</span><br><span class="line">    result.push(temp.key);</span><br><span class="line">    temp.left &amp;&amp; queue.push(temp.left);</span><br><span class="line">    temp.right &amp;&amp; queue.push(temp.right);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按之字形顺序打印二叉树</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">zhiRoot</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> stack1 = [],</span><br><span class="line">    stack2 = [],</span><br><span class="line">    result = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">    stack1.push(root);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (stack1.length != <span class="number">0</span> || stack2.length != <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> list = [];</span><br><span class="line">    <span class="keyword">if</span> (flag % <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">while</span> (stack1.length != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp = stack2.pop();</span><br><span class="line">        list.push(temp.key);</span><br><span class="line">        temp.left &amp;&amp; stack2.push(temp.left);</span><br><span class="line">        temp.right &amp;&amp; stack2.push(temp.right);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">while</span> (stack2.length != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp = stack1.pop();</span><br><span class="line">        list.push(temp.key);</span><br><span class="line">        temp.left &amp;&amp; stack1.push(temp.left);</span><br><span class="line">        temp.right &amp;&amp; stack1.push(temp.right);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    i++;</span><br><span class="line">    result.push(list);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Print</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> stack1 = [];</span><br><span class="line">  <span class="keyword">const</span> stack2 = [];</span><br><span class="line"></span><br><span class="line">  stack1.push(root);</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (stack1.length !== <span class="number">0</span> || stack2.length !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> list = [];</span><br><span class="line">    <span class="keyword">if</span> (flag % <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">while</span> (stack1.length !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> temp = stack2.pop();</span><br><span class="line">        list.push(temp.val);</span><br><span class="line">        temp.left &amp;&amp; stack2.push(temp.left);</span><br><span class="line">        temp.right &amp;&amp; stack2.push(temp.right);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">while</span> (stack2.length !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> temp = stack1.pop();</span><br><span class="line">        list.push(tmp.val);</span><br><span class="line">        temp.left &amp;&amp; stack1.push(temp.left);</span><br><span class="line">        temp.right &amp;&amp; stack1.push(temp.right);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    i++;</span><br><span class="line">    result.push(list);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//7、求二叉树第K层的节点个数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getknum</span>(<span class="params">root, k</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span> || k &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (root !== <span class="literal">null</span> &amp;&amp; k == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> getknum(root.left, k - <span class="number">1</span>) + getknum(root.right, k - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//8.求二叉树第K层的叶子节点个数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getksonnum</span>(<span class="params">root, k</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span> || k &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (root != <span class="literal">null</span> &amp;&amp; k == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (root.left == <span class="literal">null</span> &amp;&amp; root.right == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> getksonnum(root, k - <span class="number">1</span>) + getksonnum(root, k - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//反转二叉树</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverseRoot</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> temp = root.left;</span><br><span class="line">  root.left = reverseRoot(root.right);</span><br><span class="line">  root.right = reverseRoot(temp);</span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 求二叉树的直径</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">longerlength</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> path = <span class="number">0</span>;</span><br><span class="line">  getlongerlength(root);</span><br><span class="line">  <span class="keyword">return</span> path;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getlongerlength</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> left = longerlength(root.left);</span><br><span class="line">    <span class="keyword">let</span> right = longerlength(root.right);</span><br><span class="line">    path = <span class="built_in">Math</span>.max(path, left + right);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.max(left, right) + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 二叉树中和为某一值的路径</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPath</span>(<span class="params">root, target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">if</span> (root) &#123;</span><br><span class="line">    findPath(root, target, [], <span class="number">0</span>, result);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">findPath</span>(<span class="params">root, target, stack, sum, result</span>) </span>&#123;</span><br><span class="line">    stack.push(root.key);</span><br><span class="line">    sum += root.key;</span><br><span class="line">    <span class="keyword">if</span> (!root.left &amp;&amp; !root.right &amp;&amp; sum === target) &#123;</span><br><span class="line">      result.push(stack.slice(<span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root.left) &#123;</span><br><span class="line">      findPath(root.left, target, stack, sum, result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root.right) &#123;</span><br><span class="line">      findPath(root.right, target, stack, sum, result);</span><br><span class="line">    &#125;</span><br><span class="line">    stack.pop();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//给定一棵二叉搜索树，请找出其中的第k小的结点。(中序遍历+ k小)</span></span><br></pre></td></tr></table></figure>

<h3 id="13、实现一个链表"><a href="#13、实现一个链表" class="headerlink" title="13、实现一个链表"></a>13、实现一个链表</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">linkedList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">node</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.data = data;</span><br><span class="line">    <span class="built_in">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">this</span>.head = <span class="literal">null</span>;</span><br><span class="line">  <span class="built_in">this</span>.length = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  linkedList.prototype.append = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> newnode = <span class="keyword">new</span> node(data);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.head == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="built_in">this</span>.head = newnode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> current = <span class="built_in">this</span>.head;</span><br><span class="line">      <span class="keyword">while</span> (current.next) &#123;</span><br><span class="line">        current = current.next;</span><br><span class="line">      &#125;</span><br><span class="line">      current.next = newnode;</span><br><span class="line">      <span class="built_in">this</span>.length++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  linkedList.prototype.find = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="built_in">this</span>.head;</span><br><span class="line">    <span class="keyword">while</span> (current.next) &#123;</span><br><span class="line">      <span class="keyword">if</span> (current.data === data) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      current = current.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> current;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  linkedList.prototype.fixed = <span class="function"><span class="keyword">function</span> (<span class="params">data, newdata</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="built_in">this</span>.find(data);</span><br><span class="line">    current.data = newdata;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  linkedList.prototype.prefind = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="built_in">this</span>.head;</span><br><span class="line">    <span class="keyword">while</span> (current.next) &#123;</span><br><span class="line">      <span class="keyword">if</span> (current.next.data === data) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      current = current.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> current;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  linkedList.prototype.delete = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.head.data === data) &#123;</span><br><span class="line">      <span class="built_in">this</span>.head = <span class="built_in">this</span>.head.next;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> prenode = <span class="built_in">this</span>.prefind(data);</span><br><span class="line">    <span class="keyword">let</span> current = <span class="built_in">this</span>.find(data);</span><br><span class="line">    prenode = current.next;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  linkedList.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="built_in">this</span>.head;</span><br><span class="line">    <span class="keyword">while</span> (current) &#123;</span><br><span class="line">      result += current.data + <span class="string">&quot;-&gt;&quot;</span>;</span><br><span class="line">      current = current.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> linkedList();</span><br><span class="line">a.append(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">a.append(<span class="string">&quot;abcd&quot;</span>);</span><br><span class="line">a.append(<span class="string">&quot;abcde&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.toString());</span><br><span class="line"></span><br><span class="line">a.fixed(<span class="string">&quot;abc&quot;</span>, <span class="number">11111</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.toString());</span><br></pre></td></tr></table></figure>

<h3 id="14、哈希表"><a href="#14、哈希表" class="headerlink" title="14、哈希表"></a>14、哈希表</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//链地址法</span></span><br><span class="line"><span class="comment">//装载因子（0.25，0.75）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HashTable</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//属性</span></span><br><span class="line">  <span class="built_in">this</span>.storage = []; <span class="comment">//存储的位置</span></span><br><span class="line">  <span class="built_in">this</span>.count = <span class="number">0</span>; <span class="comment">// 数目</span></span><br><span class="line">  <span class="built_in">this</span>.limit = <span class="number">7</span>; <span class="comment">//最终限制数组的大小</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//方法</span></span><br><span class="line">  <span class="comment">// 哈希函数</span></span><br><span class="line">  HashTable.prototype.hashFunc = <span class="function"><span class="keyword">function</span> (<span class="params">str, size</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1、定义 hashCode变量</span></span><br><span class="line">    <span class="keyword">let</span> hashCode = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; str.length; i++) &#123;</span><br><span class="line">      <span class="comment">//2、霍纳算法，来计算hashCode的值</span></span><br><span class="line">      hashCode = <span class="number">37</span> * hashCode + str.charCodeAt(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3、取余操作</span></span><br><span class="line">    <span class="keyword">let</span> index = hashCode % size;</span><br><span class="line">    <span class="keyword">return</span> index;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//插入&amp;修改操作</span></span><br><span class="line">  HashTable.prototype.put = <span class="function"><span class="keyword">function</span> (<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.根据key获取对应的 index</span></span><br><span class="line">    <span class="keyword">let</span> index = <span class="built_in">this</span>.hashFunc(key, <span class="built_in">this</span>.limit);</span><br><span class="line">    <span class="comment">// 2、根据 index 取出对应的 bucket</span></span><br><span class="line">    <span class="keyword">let</span> bucket = <span class="built_in">this</span>.storage[index];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3、判断 bucket是否为空</span></span><br><span class="line">    <span class="keyword">if</span> (bucket == <span class="literal">null</span>) &#123;</span><br><span class="line">      bucket = [];</span><br><span class="line">      <span class="built_in">this</span>.storage[index] = bucket;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//4、判断是否是修改数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bucket.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> tuple = bucket[i];</span><br><span class="line">      <span class="keyword">if</span> (tuple[<span class="number">0</span>] == key) &#123;</span><br><span class="line">        tuple[<span class="number">1</span>] = value;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//5.添加操作</span></span><br><span class="line">    bucket.push([key, value]);</span><br><span class="line">    <span class="built_in">this</span>.count++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断是否需要扩容</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.count &gt; <span class="built_in">this</span>.limit * <span class="number">0.75</span>) &#123;</span><br><span class="line">      <span class="built_in">this</span>.resize(<span class="built_in">this</span>.limit * <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//获取操作</span></span><br><span class="line">  HashTable.prototype.get = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="built_in">this</span>.hashFunc(key, <span class="built_in">this</span>.limit);</span><br><span class="line">    <span class="keyword">let</span> bucket = <span class="built_in">this</span>.storage[index];</span><br><span class="line">    <span class="keyword">if</span> (bucket == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bucket.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> tuple = bucket[i];</span><br><span class="line">      <span class="keyword">if</span> (tuple[<span class="number">0</span>] === key) &#123;</span><br><span class="line">        <span class="keyword">return</span> tuple[<span class="number">1</span>];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  HashTable.prototype.remove = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="built_in">this</span>.hashFunc(key, <span class="built_in">this</span>.limit);</span><br><span class="line">    <span class="keyword">let</span> bucket = <span class="built_in">this</span>.storage[index];</span><br><span class="line">    <span class="keyword">if</span> (bucket == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bucket.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> tuple = bucket[i];</span><br><span class="line">      <span class="keyword">if</span> (tuple[<span class="number">0</span>] == key) &#123;</span><br><span class="line">        bucket.splice(i, <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">this</span>.count--;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//缩小容量</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.limit &gt; <span class="number">7</span> &amp;&amp; <span class="built_in">this</span>.count &lt; <span class="built_in">this</span>.limit * <span class="number">0.75</span>) &#123;</span><br><span class="line">          <span class="built_in">this</span>.resize(<span class="built_in">Math</span>.floor(<span class="built_in">this</span>.limit / <span class="number">2</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> tuple[<span class="number">1</span>];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//哈希表的扩容、</span></span><br><span class="line">  HashTable.prototype.resize = <span class="function"><span class="keyword">function</span> (<span class="params">newLimit</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.保存旧的数据内容</span></span><br><span class="line">    <span class="keyword">let</span> oldStorage = <span class="built_in">this</span>.storage;</span><br><span class="line">    <span class="comment">//2. 重置所有的属性</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.storage = [];</span><br><span class="line">    <span class="built_in">this</span>.count = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">this</span>.limit = newLimit;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.遍历 oldStorage 所有的 bucket</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; oldStorage.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> bucket = oldStorage[i];</span><br><span class="line">      <span class="keyword">if</span> (bucket == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; bucket.length; j++) &#123;</span><br><span class="line">        <span class="keyword">let</span> tuple = bucket[i];</span><br><span class="line">        <span class="built_in">this</span>.put(tuple[<span class="number">0</span>], tuple[<span class="number">1</span>]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> HashTable();</span><br><span class="line">a.put(<span class="string">&quot;zc&quot;</span>, <span class="string">&quot;15&quot;</span>);</span><br><span class="line">a.put(<span class="string">&quot;zc1&quot;</span>, <span class="string">&quot;115&quot;</span>);</span><br><span class="line">a.put(<span class="string">&quot;z1&quot;</span>, <span class="string">&quot;115&quot;</span>);</span><br><span class="line">a.put(<span class="string">&quot;asd&quot;</span>, <span class="string">&quot;115&quot;</span>);</span><br><span class="line">a.put(<span class="string">&quot;wew&quot;</span>, <span class="string">&quot;115&quot;</span>);</span><br><span class="line">a.remove(<span class="string">&quot;wew&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.get(<span class="string">&quot;wew&quot;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="15、图"><a href="#15、图" class="headerlink" title="15、图"></a>15、图</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//栈中的属性</span></span><br><span class="line">  <span class="built_in">this</span>.items = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//1.压入栈push()</span></span><br><span class="line">  Queue.prototype.enqueue = <span class="function"><span class="keyword">function</span> (<span class="params">...element</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.items.push(...element);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//2.从队列中删除前端元素</span></span><br><span class="line">  Queue.prototype.dequeue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.items.shift();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//3.查看一下前端元素</span></span><br><span class="line">  Queue.prototype.front = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.items[<span class="number">0</span>];</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//4.判断栈是否为空</span></span><br><span class="line">  Queue.prototype.isEmpty = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.items.length === <span class="number">0</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//5.获取栈中元素的个数</span></span><br><span class="line">  Queue.prototype.size = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.items.length;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//6.toString方法</span></span><br><span class="line">  Queue.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.items.toString().split(<span class="string">&quot;,&quot;</span>).join(<span class="string">&quot; &quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Graph</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//属性： 顶点（数组）/边（字典）</span></span><br><span class="line">  <span class="built_in">this</span>.vertexes = []; <span class="comment">//顶点</span></span><br><span class="line">  <span class="built_in">this</span>.edges = <span class="keyword">new</span> <span class="built_in">Map</span>(); <span class="comment">//边</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//方法</span></span><br><span class="line">  <span class="comment">//增加对应顶点的方法</span></span><br><span class="line">  Graph.prototype.addVertex = <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.vertexes.push(v);</span><br><span class="line">    <span class="built_in">this</span>.edges.set(v, []);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  Graph.prototype.addEdge = <span class="function"><span class="keyword">function</span> (<span class="params">v1, v2</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.edges.get(v1).push(v2);</span><br><span class="line">    <span class="built_in">this</span>.edges.get(v2).push(v1);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//实现toString 方法</span></span><br><span class="line">  Graph.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//定义字符转，保存最终的结构</span></span><br><span class="line">    <span class="keyword">let</span> resultString = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.vertexes.length; i++) &#123;</span><br><span class="line">      resultString += <span class="built_in">this</span>.vertexes[i] + <span class="string">&quot;-&gt;&quot;</span>;</span><br><span class="line">      <span class="keyword">let</span> vEdges = <span class="built_in">this</span>.edges.get(<span class="built_in">this</span>.vertexes[i]);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; vEdges.length; j++) &#123;</span><br><span class="line">        resultString += vEdges[j] + <span class="string">&quot; &quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      resultString += <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> resultString;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//图的遍历</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//初始化状态颜色</span></span><br><span class="line">  Graph.prototype.initializeColor = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> colors = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.vertexes.length; i++) &#123;</span><br><span class="line">      colors[<span class="built_in">this</span>.vertexes[i]] = <span class="string">&quot;white&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> colors;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//广度优先搜索算法(BFS)  基于队列完成</span></span><br><span class="line">  Graph.prototype.bfs = <span class="function"><span class="keyword">function</span> (<span class="params">initV, handler</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.初始化颜色</span></span><br><span class="line">    <span class="keyword">let</span> colors = <span class="built_in">this</span>.initializeColor();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.创建队列</span></span><br><span class="line">    <span class="keyword">let</span> queue = <span class="keyword">new</span> Queue();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.将顶点加入队列中</span></span><br><span class="line">    queue.enqueue(initV);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.循环从队列中取出元素</span></span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">      <span class="comment">// 4.1从队列取出一个顶点</span></span><br><span class="line">      <span class="keyword">let</span> v = queue.dequeue();</span><br><span class="line"></span><br><span class="line">      <span class="comment">//4.2 获取和顶点相连的另外顶点</span></span><br><span class="line">      <span class="keyword">let</span> vList = <span class="built_in">this</span>.edges.get(v);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//4.3 将v的颜色设置为灰色</span></span><br><span class="line">      colors[v] = <span class="string">&quot;gray&quot;</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//4.4  遍历所有的顶点，并且加入到队列中</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; vList.length; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> e = vList[i];</span><br><span class="line">        <span class="keyword">if</span> (colors[e] == <span class="string">&quot;white&quot;</span>) &#123;</span><br><span class="line">          colors[e] = <span class="string">&quot;gray&quot;</span>;</span><br><span class="line">          queue.enqueue(e);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//4.5 访问顶点</span></span><br><span class="line">      handler(v);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//4.6 将顶点设置为黑色</span></span><br><span class="line">      colors[v] = <span class="string">&quot;black&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//广度优先搜索算法（DFS）</span></span><br><span class="line">  Graph.prototype.dfs = <span class="function"><span class="keyword">function</span> (<span class="params">initV, handler</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> colors = <span class="built_in">this</span>.initializeColor();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//递归访问</span></span><br><span class="line">    <span class="built_in">this</span>.dfsVisit(initV, colors, handler);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  Graph.prototype.dfsVisit = <span class="function"><span class="keyword">function</span> (<span class="params">v, colors, handler</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.将颜色设置为灰色</span></span><br><span class="line">    colors[v] = <span class="string">&quot;gray&quot;</span>;</span><br><span class="line">    <span class="comment">//2.处理V节点</span></span><br><span class="line">    handler(v);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.访问v相连的顶点</span></span><br><span class="line">    <span class="keyword">let</span> vList = <span class="built_in">this</span>.edges.get(v);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; vList.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> e = vList[i];</span><br><span class="line">      <span class="keyword">if</span> (colors[e] === <span class="string">&quot;white&quot;</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.dfsVisit(e, colors, handler);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.将v设置为黑色</span></span><br><span class="line">    colors[v] = <span class="string">&quot;black&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16、几种排序算法的实现"><a href="#16、几种排序算法的实现" class="headerlink" title="16、几种排序算法的实现"></a>16、几种排序算法的实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ArrayList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.array = [];</span><br><span class="line"></span><br><span class="line">  ArrayList.prototype.insert = <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.array.push(item);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  ArrayList.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.array.join(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  ArrayList.prototype.swap = <span class="function"><span class="keyword">function</span> (<span class="params">m, n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> temp = <span class="built_in">this</span>.array[m];</span><br><span class="line">    <span class="built_in">this</span>.array[m] = <span class="built_in">this</span>.array[n];</span><br><span class="line">    <span class="built_in">this</span>.array[n] = temp;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//实现排序算法</span></span><br><span class="line">  <span class="comment">//冒泡排序</span></span><br><span class="line">  ArrayList.prototype.bubbles = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.array === <span class="literal">null</span> || <span class="built_in">this</span>.array.length &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="built_in">this</span>.array;</span><br><span class="line">    <span class="keyword">let</span> length = <span class="built_in">this</span>.array.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.array[j] &gt; <span class="built_in">this</span>.array[j + <span class="number">1</span>]) &#123;</span><br><span class="line">          <span class="built_in">this</span>.swap(j, j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//选择排序</span></span><br><span class="line">  ArrayList.prototype.selectSort = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.array === <span class="literal">null</span> || <span class="built_in">this</span>.array.length &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="built_in">this</span>.array;</span><br><span class="line">    <span class="keyword">let</span> length = <span class="built_in">this</span>.array.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> min = i;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; length; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.array[min] &gt; <span class="built_in">this</span>.array[j]) &#123;</span><br><span class="line">          min = j;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.swap(min, i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//插入排序</span></span><br><span class="line">  ArrayList.prototype.insertSort = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.array === <span class="literal">null</span> || <span class="built_in">this</span>.array.length &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="built_in">this</span>.array;</span><br><span class="line">    <span class="keyword">let</span> length = <span class="built_in">this</span>.array.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; length; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> temp = <span class="built_in">this</span>.array[i];</span><br><span class="line">      <span class="keyword">let</span> j = i;</span><br><span class="line">      <span class="keyword">while</span> (<span class="built_in">this</span>.array[j - <span class="number">1</span>] &gt; temp &amp;&amp; j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.array[j] = <span class="built_in">this</span>.array[j - <span class="number">1</span>];</span><br><span class="line">        j--;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.array[j] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//高级排序</span></span><br><span class="line">  <span class="comment">//希尔排序 (对插入排序的升级)</span></span><br><span class="line">  ArrayList.prototype.shellSort = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.array === <span class="literal">null</span> || <span class="built_in">this</span>.array.length &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="built_in">this</span>.array;</span><br><span class="line">    <span class="keyword">let</span> length = <span class="built_in">this</span>.array.length;</span><br><span class="line">    <span class="comment">//初始化增量</span></span><br><span class="line">    <span class="keyword">var</span> gap = <span class="built_in">Math</span>.floor(length / <span class="number">2</span>);</span><br><span class="line">    <span class="comment">// whlie循环</span></span><br><span class="line">    <span class="keyword">while</span> (gap &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = gap; i &lt; length; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp = <span class="built_in">this</span>.array[i];</span><br><span class="line">        <span class="keyword">let</span> j = i;</span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">this</span>.array[j - gap] &gt; temp &amp;&amp; j &gt; gap - <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="built_in">this</span>.array[j] = <span class="built_in">this</span>.array[j - gap];</span><br><span class="line">          j -= gap;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.array[j] = temp;</span><br><span class="line">      &#125;</span><br><span class="line">      gap = <span class="built_in">Math</span>.floor(gap / <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 快排</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">median</span>(<span class="params">arr, left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> center = <span class="built_in">Math</span>.floor(left + (right - left) / <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">if</span> (arr[left] &gt; arr[center]) &#123;</span><br><span class="line">    swap(arr, left, right);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (arr[center] &gt; arr[right]) &#123;</span><br><span class="line">    swap(arr, center, right);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (arr[left] &gt; arr[right]) &#123;</span><br><span class="line">    swap(arr, left, right);</span><br><span class="line">  &#125;</span><br><span class="line">  swap(center, right - <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> arr[right - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, m, n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> temp = arr[m];</span><br><span class="line">  arr[m] = arr[n];</span><br><span class="line">  arr[n] = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (arr.length &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> quickSortFun(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSortFun</span>(<span class="params">arr, left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">    <span class="keyword">let</span> pivot = median(arr, left, right);</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> j = right - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">while</span> (arr[++i] &lt; pivot) &#123;&#125;</span><br><span class="line">      <span class="keyword">while</span> (arr[--j] &gt; pivot &amp;&amp; j &gt; left) &#123;&#125;</span><br><span class="line">      <span class="keyword">if</span> (i &lt; j) &#123;</span><br><span class="line">        swap(arr, i, j);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; right) &#123;</span><br><span class="line">      swap(arr, i, right - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    quickSortFun(arr, left, i - <span class="number">1</span>);</span><br><span class="line">    quickSortFun(arr, i + <span class="number">1</span>, right);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(quickSort([<span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>]));</span><br></pre></td></tr></table></figure>

<h3 id="17、手写迭代器"><a href="#17、手写迭代器" class="headerlink" title="17、手写迭代器"></a>17、手写迭代器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> it = makeIterator([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(it.next());</span><br><span class="line"><span class="built_in">console</span>.log(it.next());</span><br><span class="line"><span class="built_in">console</span>.log(it.next());</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeIterator</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> nextindex = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    next: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (nextindex &lt; array.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">value</span>: array[nextindex++], <span class="attr">done</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="18、最大连续子序列"><a href="#18、最大连续子序列" class="headerlink" title="18、最大连续子序列"></a>18、最大连续子序列</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">-5</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">-4</span>, <span class="number">15</span>, <span class="number">-8</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// function getNum(arr) &#123;</span></span><br><span class="line"><span class="comment">//     let length = arr.length</span></span><br><span class="line"><span class="comment">//     let maxmun=0</span></span><br><span class="line"><span class="comment">//     for (let i = 0; i &lt;length ; i++) &#123;</span></span><br><span class="line"><span class="comment">//         let sum=arr[i]</span></span><br><span class="line"><span class="comment">//         for (let j = i+1; j &lt; length; j++) &#123;</span></span><br><span class="line"><span class="comment">//             sum+=arr[j]</span></span><br><span class="line"><span class="comment">//             if(sum&gt;maxmun)&#123;</span></span><br><span class="line"><span class="comment">//                 maxmun = sum</span></span><br><span class="line"><span class="comment">//             &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//         &#125;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//     return maxmun</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNum</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> max = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="keyword">if</span> (sum &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      sum = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    sum += num;</span><br><span class="line">    max = <span class="built_in">Math</span>.max(max, sum);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getNum(arr));</span><br></pre></td></tr></table></figure>

<h3 id="19、实现一个-EventListener-类，包含-on，off，emit-方法"><a href="#19、实现一个-EventListener-类，包含-on，off，emit-方法" class="headerlink" title="19、实现一个 EventListener 类，包含 on，off，emit 方法"></a>19、实现一个 EventListener 类，包含 on，off，emit 方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实现一个EventListener类，包含on，off，emit方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventListener</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">this</span>.list = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  on(key, fn) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.list[key]) &#123;</span><br><span class="line">      <span class="built_in">this</span>.list[key] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.list[key].push(fn);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  emit(key, ...args) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> fn <span class="keyword">of</span> <span class="built_in">this</span>.list[key]) &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  off(key, fn) &#123;</span><br><span class="line">    <span class="keyword">let</span> fnlist = <span class="built_in">this</span>.list[key];</span><br><span class="line">    <span class="keyword">if</span> (!fnlist) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (!fn) &#123;</span><br><span class="line">      fnlist.length = <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fnlist.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item === fn) &#123;</span><br><span class="line">          fnlist.splice(index, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj1 = <span class="keyword">new</span> EventListener();</span><br><span class="line"></span><br><span class="line">obj1.on(<span class="string">&quot;work&quot;</span>, <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`我是<span class="subst">$&#123;value&#125;</span>啊`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">obj1.on(<span class="string">&quot;eat&quot;</span>, <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`我在<span class="subst">$&#123;value&#125;</span>啊`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">obj1.emit(<span class="string">&quot;work&quot;</span>, <span class="string">&quot;zc&quot;</span>);</span><br><span class="line"></span><br><span class="line">obj1.off(<span class="string">&quot;eat&quot;</span>);</span><br><span class="line"></span><br><span class="line">obj1.emit(<span class="string">&quot;eat&quot;</span>, <span class="string">&quot;吃西瓜&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="20、sleep-函数"><a href="#20、sleep-函数" class="headerlink" title="20、sleep 函数"></a>20、sleep 函数</h3><blockquote>
<p>用 promise 写一个 delay 函数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(resolve, time);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sleep(<span class="number">1000</span>).then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;11111&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="21、手写斐波那契"><a href="#21、手写斐波那契" class="headerlink" title="21、手写斐波那契"></a>21、手写斐波那契</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 递归</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getnum</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (num &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> getnum(num - <span class="number">1</span>) + getnum(num - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getnum(<span class="number">2</span>));</span><br><span class="line"><span class="comment">// ----------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//动态规划</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getnum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> temp = [];</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">1</span> || n == <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    temp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    temp[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">3</span>; i &lt; n; i++) &#123;</span><br><span class="line">      temp[i] = temp[i - <span class="number">1</span>] + temp[i - <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> temp[i - <span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="22、只包含’-‘-‘-’-‘-‘-‘-’-‘-‘-‘-’-的字符串，判断是否有效。"><a href="#22、只包含’-‘-‘-’-‘-‘-‘-’-‘-‘-‘-’-的字符串，判断是否有效。" class="headerlink" title="22、只包含’(‘, ‘)’, ‘[‘, ‘]’, ‘{‘, ‘}’ 的字符串，判断是否有效。"></a>22、只包含’(‘, ‘)’, ‘[‘, ‘]’, ‘{‘, ‘}’ 的字符串，判断是否有效。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isValid = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> rightSymbols = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; s.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (s[i] == <span class="string">&quot;(&quot;</span>) &#123;</span><br><span class="line">      rightSymbols.push(<span class="string">&quot;)&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">&quot;&#123;&quot;</span>) &#123;</span><br><span class="line">      rightSymbols.push(<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">&quot;[&quot;</span>) &#123;</span><br><span class="line">      rightSymbols.push(<span class="string">&quot;]&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (rightSymbols.pop() != s[i]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> !rightSymbols.length;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="23、数组中只出现一次的数字"><a href="#23、数组中只出现一次的数字" class="headerlink" title="23、数组中只出现一次的数字"></a>23、数组中只出现一次的数字</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"><span class="keyword">const</span> p = arr.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a ^ b;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(p);</span><br></pre></td></tr></table></figure>

<h3 id="24、数组最大深度"><a href="#24、数组最大深度" class="headerlink" title="24、数组最大深度"></a>24、数组最大深度</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, [<span class="number">1</span>, [<span class="number">3</span>], <span class="number">2</span>], <span class="number">2</span>, [<span class="number">1</span>], <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDep</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> p = <span class="literal">false</span>;</span><br><span class="line">  p = arr.some(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item.length &gt; <span class="number">0</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (p) &#123;</span><br><span class="line">    count++;</span><br><span class="line">    getDep(arr.flat());</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getDep(arr));</span><br></pre></td></tr></table></figure>

<h3 id="25、递归数组扁平化"><a href="#25、递归数组扁平化" class="headerlink" title="25、递归数组扁平化"></a>25、递归数组扁平化</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">2</span>, [<span class="number">1</span>], <span class="number">2</span>]];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wrap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ret = [];</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">      <span class="keyword">if</span> (item.constructor === <span class="built_in">Array</span>) &#123;</span><br><span class="line">        ret.concat(flatten(item));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        ret.push(item);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(wrap()(arr));</span><br></pre></td></tr></table></figure>

<h3 id="26、模拟-js-精度丢失问题"><a href="#26、模拟-js-精度丢失问题" class="headerlink" title="26、模拟 js 精度丢失问题"></a>26、模拟 js 精度丢失问题</h3><blockquote>
<p>IEEE 754 标准</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> num1Digits = (num1.toString().split(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>] || <span class="string">&quot;&quot;</span>).length;</span><br><span class="line">  <span class="keyword">const</span> num2Digits = (num2.toString().split(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>] || <span class="string">&quot;&quot;</span>).length;</span><br><span class="line">  <span class="keyword">const</span> baseNum = <span class="built_in">Math</span>.pow(<span class="number">10</span>, <span class="built_in">Math</span>.max(num1Digits, num2Digits));</span><br><span class="line">  <span class="keyword">return</span> (num1 * baseNum + num2 * baseNum) / baseNum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">0.1</span>, <span class="number">0.2</span>));</span><br></pre></td></tr></table></figure>

<h3 id="27、单例模式"><a href="#27、单例模式" class="headerlink" title="27、单例模式"></a>27、单例模式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单例模式不透明</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">singleTon</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.instance = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">singleTon.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">singleTon.getInstance = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">this</span>.instance) &#123;</span><br><span class="line">    <span class="built_in">this</span>.instance = <span class="keyword">new</span> singleTon(name);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.instance;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = singleTon.getInstance(<span class="string">&quot;bbbbb&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> a = singleTon.getInstance(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ----------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 单例模式不透明（闭包）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">singleTon</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">singleTon.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">singleTon.getInstance = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> instance = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> instance || (instance = <span class="keyword">new</span> singleTon(name));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = singleTon.getInstance(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> b = singleTon.getInstance(<span class="string">&quot;bbbbb&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> c = singleTon.getInstance(<span class="string">&quot;cccccc&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line"><span class="built_in">console</span>.log(c);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//	单例模式透明</span></span><br><span class="line"><span class="keyword">let</span> getInstance = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> instance = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!instance) &#123;</span><br><span class="line">      <span class="built_in">this</span>.name = name;</span><br><span class="line">      <span class="keyword">return</span> (instance = <span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> getInstance(<span class="string">&quot;aa&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> getInstance(<span class="string">&quot;bbbb&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// let getSingle = function (fn) &#123;</span></span><br><span class="line"><span class="comment">//     let result= null</span></span><br><span class="line"><span class="comment">//     return function () &#123;</span></span><br><span class="line"><span class="comment">//        return result || (result = fn.call(this,...arguments))</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通用的单例验证方法</span></span><br><span class="line"><span class="keyword">const</span> getSingle = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> result || (result = fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = getSingle(a);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d = b(<span class="string">&quot;bbb&quot;</span>, <span class="string">&quot;xxx&quot;</span>, <span class="string">&quot;yyyyy&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> c = b(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(d);</span><br><span class="line"><span class="built_in">console</span>.log(c);</span><br></pre></td></tr></table></figure>

<h3 id="28、策略模式"><a href="#28、策略模式" class="headerlink" title="28、策略模式"></a>28、策略模式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 策略类（开发人员）</span></span><br><span class="line"><span class="keyword">var</span> Strategies = &#123;</span><br><span class="line">  backend: <span class="function"><span class="keyword">function</span> (<span class="params">task</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;进行后端任务：&quot;</span>, task);</span><br><span class="line">  &#125;,</span><br><span class="line">  frontend: <span class="function"><span class="keyword">function</span> (<span class="params">task</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;进行前端任务：&quot;</span>, task);</span><br><span class="line">  &#125;,</span><br><span class="line">  testend: <span class="function"><span class="keyword">function</span> (<span class="params">task</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;进行测试任务：&quot;</span>, task);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//  环境类（开发组长）</span></span><br><span class="line"><span class="keyword">var</span> Context = <span class="function"><span class="keyword">function</span> (<span class="params">type, task</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">typeof</span> Strategies[type] === <span class="string">&quot;function&quot;</span> &amp;&amp; Strategies[type](task);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="29、代理模式"><a href="#29、代理模式" class="headerlink" title="29、代理模式"></a>29、代理模式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//【图片预加载 -- 代理模式】</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//定义本体</span></span><br><span class="line"><span class="keyword">let</span> myImg = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">  <span class="built_in">document</span>.body.append(img);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    setsrc(src) &#123;</span><br><span class="line">      <span class="built_in">this</span>.src = src;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">//代理函数</span></span><br><span class="line"><span class="keyword">let</span> Proxysetimg = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">  img.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    myImg.setsrc(<span class="built_in">this</span>.src);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    setsrc(src) &#123;</span><br><span class="line">      myImg.setsrc(<span class="string">&quot;./loading.gif&quot;</span>);</span><br><span class="line">      img.src = src;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line">Proxysetimg(<span class="string">&quot;./111.png&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="30、观察者模式"><a href="#30、观察者模式" class="headerlink" title="30、观察者模式"></a>30、观察者模式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 目标者类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">this</span>.observers = []; <span class="comment">// 观察者列表</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 添加</span></span><br><span class="line">  add(observer) &#123;</span><br><span class="line">    <span class="built_in">this</span>.observers.push(observer);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 删除</span></span><br><span class="line">  remove(observer) &#123;</span><br><span class="line">    <span class="keyword">let</span> idx = <span class="built_in">this</span>.observers.findIndex(<span class="function">(<span class="params">item</span>) =&gt;</span> item === observer);</span><br><span class="line">    idx &gt; <span class="number">-1</span> &amp;&amp; <span class="built_in">this</span>.observers.splice(idx, <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 通知</span></span><br><span class="line">  notify() &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> observer <span class="keyword">of</span> <span class="built_in">this</span>.observers) &#123;</span><br><span class="line">      observer.update();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 观察者类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 目标对象更新时触发的回调</span></span><br><span class="line">  update() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`目标者通知我更新了，我是：<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实例化目标者</span></span><br><span class="line"><span class="keyword">let</span> subject = <span class="keyword">new</span> Subject();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实例化两个观察者</span></span><br><span class="line"><span class="keyword">let</span> obs1 = <span class="keyword">new</span> Observer(<span class="string">&quot;前端开发者&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> obs2 = <span class="keyword">new</span> Observer(<span class="string">&quot;后端开发者&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 向目标者添加观察者</span></span><br><span class="line">subject.add(obs1);</span><br><span class="line">subject.add(obs2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标者通知更新</span></span><br><span class="line">subject.notify();</span><br><span class="line"><span class="comment">// 输出：</span></span><br><span class="line"><span class="comment">// 目标者通知我更新了，我是前端开发者</span></span><br><span class="line"><span class="comment">// 目标者通知我更新了，我是后端开发者</span></span><br></pre></td></tr></table></figure>

<h3 id="31、命令模式"><a href="#31、命令模式" class="headerlink" title="31、命令模式"></a>31、命令模式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Receiver</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 接收者类</span></span><br><span class="line">  execute() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;接收者执行请求&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 命令对象类</span></span><br><span class="line">  <span class="keyword">constructor</span>(receiver) &#123;</span><br><span class="line">    <span class="built_in">this</span>.receiver = receiver;</span><br><span class="line">  &#125;</span><br><span class="line">  execute() &#123;</span><br><span class="line">    <span class="comment">// 调用接收者对应接口执行</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;命令对象-&gt;接收者-&gt;对应接口执行&quot;</span>);</span><br><span class="line">    <span class="built_in">this</span>.receiver.execute();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Invoker</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 发布者类</span></span><br><span class="line">  <span class="keyword">constructor</span>(command) &#123;</span><br><span class="line">    <span class="built_in">this</span>.command = command;</span><br><span class="line">  &#125;</span><br><span class="line">  invoke() &#123;</span><br><span class="line">    <span class="comment">// 发布请求，调用命令对象</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;发布者发布请求&quot;</span>);</span><br><span class="line">    <span class="built_in">this</span>.command.execute();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> warehouse = <span class="keyword">new</span> Receiver(); <span class="comment">// 仓库</span></span><br><span class="line"><span class="keyword">const</span> order = <span class="keyword">new</span> Command(warehouse); <span class="comment">// 订单</span></span><br><span class="line"><span class="keyword">const</span> client = <span class="keyword">new</span> Invoker(order); <span class="comment">// 客户</span></span><br><span class="line">client.invoke();</span><br></pre></td></tr></table></figure>

<h3 id="32、Promise-处理文件读取"><a href="#32、Promise-处理文件读取" class="headerlink" title="32、Promise 处理文件读取"></a>32、Promise 处理文件读取</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> readfile = <span class="function"><span class="keyword">function</span> (<span class="params">filename</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(path.join(__dirname, filename), <span class="string">&quot;utf-8&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">      error,</span></span></span><br><span class="line"><span class="function"><span class="params">      data</span></span></span><br><span class="line"><span class="function"><span class="params">    </span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (error) <span class="keyword">return</span> reject(error);</span><br><span class="line">      resolve(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">readfile(<span class="string">&quot;./01.txt&quot;</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">return</span> readfile(<span class="string">&quot;./02.txt&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">return</span> readfile(<span class="string">&quot;./03.txt&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(reason);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="33、-Generator-函数文件读取"><a href="#33、-Generator-函数文件读取" class="headerlink" title="33、 Generator 函数文件读取"></a>33、 Generator 函数文件读取</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> readfile = <span class="function"><span class="keyword">function</span> (<span class="params">filename</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(path.join(__dirname, filename), <span class="string">&quot;utf8&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (error) <span class="keyword">return</span> reject(error);</span><br><span class="line">      resolve(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> readfile(<span class="string">&quot;./01.txt&quot;</span>);</span><br><span class="line">  <span class="keyword">yield</span> readfile(<span class="string">&quot;./02.txt&quot;</span>);</span><br><span class="line">  <span class="keyword">yield</span> readfile(<span class="string">&quot;./03.txt&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> result = gen();</span><br><span class="line"></span><br><span class="line">result</span><br><span class="line">  .next()</span><br><span class="line">  .value.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">return</span> result.next().value;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">return</span> result.next().value;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(reason);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="34、async-函数文件读取"><a href="#34、async-函数文件读取" class="headerlink" title="34、async 函数文件读取"></a>34、async 函数文件读取</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> readfile = <span class="function"><span class="keyword">function</span> (<span class="params">filename</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(path.join(__dirname, filename), <span class="string">&quot;utf8&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (error) <span class="keyword">return</span> reject(error);</span><br><span class="line">      resolve(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> f1 = <span class="keyword">await</span> readfile(<span class="string">&quot;./01.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> f2 = <span class="keyword">await</span> readfile(<span class="string">&quot;./02.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> f3 = <span class="keyword">await</span> readfile(<span class="string">&quot;./03.txt&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(f1);</span><br><span class="line">    <span class="built_in">console</span>.log(f2);</span><br><span class="line">    <span class="built_in">console</span>.log(f3);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">gen();</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/promise/" rel="tag">promise</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/" rel="tag">手撕代码</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E5%85%A8%E9%9D%A2%E6%80%BB%E7%BB%93/" rel="tag">面试全面总结</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-getOfferAPI"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/23/getOfferAPI/"
    >API、数组、跨域、动画、事件</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/03/23/getOfferAPI/" class="article-date">
  <time datetime="2020-03-23T09:40:43.000Z" itemprop="datePublished">2020-03-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Offer/">Offer</a> / <a class="article-category-link" href="/categories/Offer/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/">字节跳动</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="面试专题总结：-API、数组、跨域、动画、事件"><a href="#面试专题总结：-API、数组、跨域、动画、事件" class="headerlink" title="面试专题总结： API、数组、跨域、动画、事件"></a>面试专题总结： API、数组、跨域、动画、事件</h4><blockquote>
<p>希望读者依此构建自己的知识树（思维导图）</p>
<p>偷懒一下：可参考我自己总结思维导图 : <a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Interview-mind-map">点这里</a></p>
<p>附带：高频面试题积累文档。 来自于（学长、牛客网等平台）</p>
<p>自己开发的博客地址：<a target="_blank" rel="noopener" href="http://zxinc520.com/">zxinc520.com</a></p>
<p>github 地址: <a target="_blank" rel="noopener" href="https://github.com/ZhChen7">点击</a></p>
</blockquote>
<blockquote>
<p>此篇 js - 【API、数组、跨域、动画、事件】 知识点： 全部弄懂了，面试很容易。</p>
</blockquote>
<h3 id="1、数组"><a href="#1、数组" class="headerlink" title="1、数组"></a>1、数组</h3><ul>
<li>改变原数组的 API<ol>
<li>push()</li>
<li>unshift()</li>
<li>pop()</li>
<li>shift()</li>
<li>reverse()</li>
<li>splice(index, count, value1, value2….)<ul>
<li>从索引位 index 处删除 count 个元素，插入 value1, value2 等元素，返回被删除的元素组成的新数组(改变原数组)</li>
</ul>
</li>
<li>sort()</li>
</ol>
</li>
<li>不改变原数组的 API<ol>
<li>join(value)<ul>
<li>将数组用 value 连接为字符串，返回被连接后的字符串(不改变原数组)</li>
<li>将数组用 value 连接为字符串，返回被连接后的字符串(不改变原数组)</li>
</ul>
</li>
<li>获取子数组，包含原数组索引 start 的值到索引 end 的值，不包含 end，返回获取的子数组(不改变原数组)</li>
<li>toString()<ul>
<li>将数组中的元素用逗号拼接成字符串，返回拼接后的字符串(不改变原数组)</li>
</ul>
</li>
<li>indexOf(value)<ul>
<li>从索引为 0 开始，检查数组中是否包含有 value，有则返回匹配到的第一个索引，没有则返回-1(不改变原数组)</li>
</ul>
</li>
<li>lastIndexOf(value)<ul>
<li>从最后的索引开始，检查数组找那个是否包含 value，有则返回匹配到的第一个索引，没有返回-1(不改变原数组)</li>
</ul>
</li>
<li>concat(value)<ul>
<li>将数组和(或)值连接成新数组，返回新数组(不改变原数组)</li>
</ul>
</li>
<li>forEach()<ul>
<li>对数组进行遍历循环，对数组中每一项运行给定函数，参数都是 function 类型，默认有传参，参数分别为：遍历数组内容、对应的数组索引、数组本身。没有返回值</li>
</ul>
</li>
<li>map()<ul>
<li>指“映射”，对数组中的每一项运行给定函数，返回每次函数调用的结果组成的新数组</li>
</ul>
</li>
<li>filter()<ul>
<li>“过滤”功能，数组中的每一项运行给定函数，返回满足过滤条件组成的数组</li>
</ul>
</li>
<li>every()<ul>
<li>判断数组中每一项都是否满足条件，只有所有项都满足条件，才会返回 true</li>
</ul>
</li>
<li>some()<ul>
<li>判断数组中是否存在满足条件的项，只要有一项满足条件，就会返回 true</li>
</ul>
</li>
<li>reduce()<ul>
<li>接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="2、类数组转变为数组的方法"><a href="#2、类数组转变为数组的方法" class="headerlink" title="2、类数组转变为数组的方法"></a>2、类数组转变为数组的方法</h3><ul>
<li>类数组的定义<ul>
<li>可以通过索引访问元素，并且拥有 length 属性</li>
<li>没有数组的其他方法，例如 push ， forEach ， indexOf 等。</li>
</ul>
</li>
<li>ES5<ul>
<li>Array.prototype.slice.call() 等同于 [].slice.call(arguments)</li>
</ul>
</li>
<li>ES6<ul>
<li>Array.from()</li>
<li>…扩展运算符</li>
<li>for of 直接遍历类数组（iterator 接口）</li>
</ul>
</li>
</ul>
<h3 id="3、稀疏数组和密集数组"><a href="#3、稀疏数组和密集数组" class="headerlink" title="3、稀疏数组和密集数组"></a>3、稀疏数组和密集数组</h3><ul>
<li>稀疏数组<ul>
<li>是什么<ul>
<li>具有不连续索引的数组，其 length 属性值大于元素的个数。</li>
</ul>
</li>
<li>造成稀疏数组的操作<ol>
<li>delete 操作符</li>
<li>构造函数</li>
<li>在数组字面量中省略值</li>
<li>指定数组索引大于数组长度</li>
<li>指定数组长度大于当前数组长度</li>
</ol>
</li>
<li>缺点<ul>
<li>操作的不统一</li>
</ul>
</li>
</ul>
</li>
<li>密集数组<ul>
<li>是什么<ul>
<li>具有连续索引的数组，其 length 属性值等于元素的个数。</li>
</ul>
</li>
<li>创建方式<ol>
<li>Array.apply(null, Array(3)) || Array.apply(null, {length: 3})</li>
<li>Array.from({length: 3})</li>
<li>[…Array(4)]</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="4、柯里化函数"><a href="#4、柯里化函数" class="headerlink" title="4、柯里化函数"></a>4、柯里化函数</h3><ul>
<li><p>定义</p>
<ul>
<li>柯里化, 即 Currying 的音译。 Currying 是编译原理层面实现多参函数的一个技术。</li>
</ul>
</li>
<li><p>手写柯里化函数</p>
<ul>
<li><p>ES5 写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> currying = <span class="function"><span class="keyword">function</span> (<span class="params">fn, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (args.length &lt; fn.length) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> currying(fn, ...args, ...arguments);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fn(...args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ES6 写法（箭头函数）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> currying = <span class="function">(<span class="params">fn, ...args</span>) =&gt;</span></span><br><span class="line">  args.length &lt; fn.length</span><br><span class="line">    ? <span class="function">(<span class="params">...argments</span>) =&gt;</span> currying(fn, ...args, ...argments)</span><br><span class="line">    : fn(...args);</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="5、window-全局对象（BOM）"><a href="#5、window-全局对象（BOM）" class="headerlink" title="5、window 全局对象（BOM）"></a>5、window 全局对象（BOM）</h3><ol>
<li>navigator 导航器对象<ul>
<li>Navigator 对象包含有关浏览器的信息</li>
<li>appCodeName 返回浏览器的代码名</li>
<li>appName 返回浏览器的名称</li>
<li>appVersion 返回浏览器的平台和版本信息</li>
<li>cookieEnabled 返回指明浏览器中是否启用 cookie 的布尔值</li>
<li>platform 返回运行浏览器的操作系统平台</li>
<li>userAgent 返回由客户机发送服务器的 user-agent 头部的值</li>
</ul>
</li>
<li>screen 显示器对象</li>
<li>history 历史对象<ul>
<li>back() 返回前一个 URL</li>
<li>forward() 返回下一个 URL</li>
<li>go() 返回某个具体页面</li>
</ul>
</li>
<li>location 位置对象<ul>
<li>属性<ul>
<li>hash 设置或返回从井号 (#) 开始的 URL（锚）。</li>
<li>host 设置或返回主机名和当前 URL 的端口号。</li>
<li>hostname 设置或返回当前 URL 的主机名</li>
<li>href 设置或返回完整的 URL</li>
<li>pathname 设置或返回当前 URL 的路径部分。</li>
<li>port 设置或返回当前 URL 的端口号。</li>
<li>protocol 设置或返回当前 URL 的协议。</li>
<li>search 设置或返回从问号 (?) 开始的 URL（查询部分）。</li>
</ul>
</li>
<li>方法<ul>
<li>assign(URL) 加载新的文档</li>
<li>reload() 重新加载当前页面</li>
<li>replace(newURL) 用新的文档替换当前文档</li>
</ul>
</li>
</ul>
</li>
<li>document 文档对象【DOM】</li>
</ol>
<h3 id="6、ajax-和-fetch"><a href="#6、ajax-和-fetch" class="headerlink" title="6、ajax 和 fetch"></a>6、ajax 和 fetch</h3><h4 id="6-1、Ajax"><a href="#6-1、Ajax" class="headerlink" title="6.1、Ajax"></a>6.1、Ajax</h4><ul>
<li><p>本质</p>
<ul>
<li>是在 HTTP 协议的基础上以异步的方式与服务器进行通信.</li>
</ul>
</li>
<li><p>封装原生 Ajax 请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajaxGet</span>(<span class="params">url, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">  xhr.open(<span class="string">&quot;GET&quot;</span>, url, <span class="literal">true</span>);</span><br><span class="line">  xhr.send();</span><br><span class="line"></span><br><span class="line">  xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">      callback(xhr.responseText);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="6-2、fetch"><a href="#6-2、fetch" class="headerlink" title="6.2、fetch"></a>6.2、fetch</h4><ul>
<li><p>fetch 是什么</p>
<ul>
<li>Fetch 是浏览器提供的原生 AJAX 接口。</li>
</ul>
</li>
<li><p>Fetch 为何出现？</p>
<ul>
<li>由于原来的 XMLHttpRequest 不符合关注分离原则，且基于事件的模型在处理异步上已经没有现代的 Promise 等那么有优势。因此 Fetch 出现来解决这种问题。</li>
</ul>
</li>
<li><p>Fetch API</p>
<ul>
<li><p>Fetch API 提供了能够用于操作一部分 HTTP 的 JavaScript 接口，比如 requests 和 responses。它同时也提供了一个全局的 fetch() 方法——能够简单的异步的获取资源。</p>
<p>使用 window.fetch 函数可以代替以前的 $. ajax、$.get 和 $.post。</p>
</li>
</ul>
</li>
<li><p>用法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&quot;http://example.com/movies.json&quot;</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> response.json();</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">myJson</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(myJson);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="6-3、readyState（状态值）"><a href="#6-3、readyState（状态值）" class="headerlink" title="6.3、readyState（状态值）"></a>6.3、readyState（状态值）</h4><ul>
<li>readyState 是什么<ul>
<li>readyState 是 XMLHttpRequest 对象的一个属性，用来标识当前 XMLHttpRequest 对象处于什么状态</li>
</ul>
</li>
<li>5 个状态值<ul>
<li>0: 请求未初始化</li>
<li>1: 载入，XMLHttpRequest 对象开始发送请求</li>
<li>2: 载入完成，XMLHttpRequest 对象的请求发送完成</li>
<li>3: 解析，XMLHttpRequest 对象开始读取服务器的响应</li>
<li>4: 完成，XMLHttpRequest 对象读取服务器响应结束</li>
</ul>
</li>
</ul>
<h4 id="6-4、status（状态码"><a href="#6-4、status（状态码" class="headerlink" title="6.4、status（状态码"></a>6.4、status（状态码</h4><ul>
<li><p>status 是什么</p>
<ul>
<li>status 是 XMLHttpRequest 对象的一个属性，表示响应的 http 状态码</li>
</ul>
</li>
<li><p>在 http1.1 协议下，http 状态码总共可分为 5 大类</p>
<ul>
<li><p>1xx：信息响应类，表示接收到请求并且继续处理</p>
</li>
<li><p>2xx：处理成功响应类，表示动作被成功接收、理解和接受</p>
</li>
<li><p>3xx：重定向响应类，为了完成指定的动作，必须接受进一步处理</p>
</li>
<li><p>4xx：客户端错误，客户请求包含语法错误或者是不能正确执行</p>
</li>
<li><p>5xx：服务端错误，服务器不能正确执行一个正确的请求</p>
</li>
<li><p>一些常见的状态码为</p>
<p>200 OK：成功，很棒。</p>
<p>301 永久移动：已永久移动到新位置。</p>
<p>302（临时移动）：暂时移到新位置。</p>
<p>304 未修改：东西跟之前长一样，可以从快取拿就好。</p>
<p>400 错误的请求：明显的用户端错误，伺服器无法处理这个请求。</p>
<p>401 未经授权：未认证，可能需要登录或 Token。</p>
<p>403 Forbidden：没有权限。</p>
<p>404 未找到：找不到资源。</p>
<p>500 内部服务器错误：伺服器端错误。</p>
<p>502 错误的网关：通常是伺服器的某个服务没有正确执行。</p>
<p>503 服务不可用：伺服器临时维护或快挂了，暂时无法处理请求。</p>
<p>504 网关超时：伺服器上的服务没有回应。</p>
</li>
</ul>
</li>
</ul>
<h3 id="7、Web-端即时通讯技术"><a href="#7、Web-端即时通讯技术" class="headerlink" title="7、Web 端即时通讯技术"></a>7、Web 端即时通讯技术</h3><ul>
<li><p>Web 端即时通讯技术是什么</p>
<p>即时通讯技术简单的说就是实现这样一种功能：服务器端可以即时地将数据的更新或变化反应到客户端，例如消息即时推送等功能都是通过这种技术实现的。但是在 Web 中，由于浏览器的限制，实现即时通讯需要借助一些方法。这种限制出现的主要原因是，一般的 Web 通信都是浏览器先发送请求到服务器，服务器再进行响应完成数据的现实更新。</p>
</li>
<li><p>大体可以分为两类</p>
<ol>
<li>一种是在 HTTP 基础上实现的<ul>
<li>短轮询、comet 和 SSE</li>
</ul>
</li>
<li>不是在 HTTP 基础上实现<ul>
<li>WebSocket</li>
</ul>
</li>
</ol>
</li>
<li><p>如何模拟双向通信（四种方式）</p>
<ul>
<li>短轮询<ul>
<li>客户端定时向服务器发送 Ajax 请求，服务器接到请求后马上返回响应信息并关闭连接。</li>
<li>优点 ： 后端编写容易</li>
<li>缺点 ： 请求中大半是无用，浪费宽带和服务器资源</li>
<li>适用 ： 小型应用</li>
</ul>
</li>
<li>长轮询<ul>
<li>客户端向服务器发送 Ajax 请求，服务器接到请求后 hold 住连接，直到有新消息才返回响应信息并关闭连接，客户端处理完响应信息后再向服务器发送新的请求。</li>
<li>优点 ：在无消息的情况下不会频繁的请求，耗费资源小</li>
<li>缺点<ul>
<li>服务器 hold 连接会消耗资源</li>
<li>返回数据顺序无保证，难于管理维护</li>
</ul>
</li>
</ul>
</li>
<li>长连接<ul>
<li>在页面嵌入一个隐藏 iframe，将这个隐藏 iframe 的 src 属性设为对一个长连接的请求或是采用 xhr 请求，服务器端就能源源不断的往客户端输入数据</li>
<li>优点<ul>
<li>消息及时到达，不发无用请求</li>
<li>管理起来也相对方便</li>
</ul>
</li>
<li>缺点：服务器维护一个长连接会增加开销</li>
</ul>
</li>
<li>WebSocket<ul>
<li>WebSocket 是 Html5 定义的一个新协议，与传统的 http 协议不同，该协议可以实现服务器与客户端之间全双工通信。简单来说，首先需要在客户端和服务器端建立起一个连接，这部分需要 http。连接一旦建立，客户端和服务器端就处于平等的地位，可以相互发送数据，不存在请求和响应的区别。</li>
<li>优点：实现了双向通信</li>
<li>缺点：服务器端的逻辑非常复杂</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="四种-Web-即时通信技术比较"><a href="#四种-Web-即时通信技术比较" class="headerlink" title="四种 Web 即时通信技术比较"></a>四种 Web 即时通信技术比较</h4><ul>
<li>从兼容性角度考虑，短轮询&gt;长轮询&gt;长连接 SSE&gt;WebSocket；</li>
<li>从性能方面考虑，WebSocket&gt;长连接 SSE&gt;长轮询&gt;短轮询。</li>
</ul>
<h3 id="8、跨域"><a href="#8、跨域" class="headerlink" title="8、跨域"></a>8、跨域</h3><ul>
<li>跨域是什么<ul>
<li>跨域是指从一个域名的网页去请求另一个域名的资源。</li>
<li>跨域的严格一点的定义是：只要 协议，域名，端口有任何一个的不同，就被当作是跨域</li>
</ul>
</li>
</ul>
<h4 id="6-种解决方案"><a href="#6-种解决方案" class="headerlink" title="6 种解决方案"></a>6 种解决方案</h4><ol>
<li><p>跨域资源共享（CORS）</p>
<ul>
<li><p>定义</p>
<ul>
<li>定义了必须在访问跨域资源时，浏览器与服务器应该如何沟通。</li>
</ul>
</li>
<li><p>基本思想</p>
<ul>
<li>CORS 背后的基本思想就是使用自定义的 HTTP 头部让浏览器与服务器进行沟通，从而决定请求或响应是应该成功还是失败</li>
</ul>
</li>
<li><p>两种请求</p>
<ul>
<li>简单请求<ul>
<li>就是在头信息之中，增加一个 Origin 字段。</li>
</ul>
</li>
<li>非简单请求<ul>
<li>会在正式通信之前，增加一次 HTTP 查询请求，称为”预检”请求（preflight）</li>
</ul>
</li>
</ul>
</li>
<li><p>服务端</p>
<ul>
<li><p>服务器端对于 CORS 的支持，主要就是通过设置 Access-Control-Allow-Origin 来进行的。如果浏览器检测到相应的设置，就可以允许 Ajax 进行跨域的访问</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指定允许其他域名访问</span></span><br><span class="line"><span class="string">&quot;Access-Control-Allow-Origin:*&quot;</span>; <span class="comment">//或指定域</span></span><br><span class="line"><span class="comment">//响应类型</span></span><br><span class="line"><span class="string">&quot;Access-Control-Allow-Methods:GET,POST&quot;</span>;</span><br><span class="line"><span class="comment">//响应头设置</span></span><br><span class="line"><span class="string">&quot;Access-Control-Allow-Headers:x-requested-with,content-type&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>jsonp</p>
<ul>
<li><p>jsonp 是什么</p>
<ul>
<li>JSONP(JSON with Padding 填充式 json)是 JSON 的一种“使用模式”，可用于解决主流浏览器的跨域数据访问的问题。</li>
</ul>
</li>
<li><p>两部分组成</p>
<ul>
<li>回调函数<ul>
<li>回调函数是当响应到来时应该在页面中调用的函数</li>
</ul>
</li>
<li>数据<ul>
<li>而数据就是传入回调函数中的 JSON 数据。</li>
</ul>
</li>
</ul>
</li>
<li><p>原理</p>
<p>通过 script 标签引入一个 js 文件，这个 js 文件载入成功后会执行我们在 url 参数中指定的函数，并且会把我们需要的 json 数据作为参数传入。所以 jsonp 是需要服务器端的页面进行相应的配合的。（即用 javascript 动态加载一个 script 文件，同时定义一个 callback 函数给 script 执行而已。）</p>
</li>
<li><p>模拟</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dosomething</span>(<span class="params">jsondata</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//处理获得的json数据</span></span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;http://example.com/data.php?callback=dosomething&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>缺点</p>
<ul>
<li>我们都知道 JSONP 可以实现解决 GET 请求的跨域问题,但是不能解决 POST 请求的跨域问题.</li>
</ul>
</li>
</ul>
</li>
<li><p>document.domain</p>
<ul>
<li><p>方法</p>
<ul>
<li>通过修改 document.domain 来跨子域</li>
</ul>
</li>
<li><p>注意</p>
<ul>
<li>域必须相我们只能把 document.domain 设置成自身或更高一级的父域，且主同。</li>
</ul>
</li>
<li><p>例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe id = <span class="string">&quot;iframe&quot;</span> src=<span class="string">&quot;http://example.com/b.html&quot;</span> onload = <span class="string">&quot;test()&quot;</span>&gt;&lt;/iframe&gt;</span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    <span class="built_in">document</span>.domain = <span class="string">&#x27;example.com&#x27;</span>;<span class="comment">//设置成主域</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>作用域</p>
<ul>
<li>修改 document.domain 的方法只适用于不同子域的框架间的交互。</li>
</ul>
</li>
</ul>
</li>
<li><p>window.name</p>
<ul>
<li>window.name 是什么<ul>
<li>是一个可读可写的属性，有个很有意思的跨页面特性</li>
</ul>
</li>
<li>方法<ul>
<li>页面如果设置了 window.name，即使进行了页面跳转到了其他页面，这个 window.name 还是会保留。</li>
</ul>
</li>
</ul>
</li>
<li><p>postMessage</p>
<ul>
<li><p>定义</p>
<p>postMessage 是 html5 引入的 API,postMessage()方法允许来自不同源的脚本采用异步方式进行有效的通信,可以实现跨文本文档,多窗口,跨域消息传递.多用于窗口间数据通信,这也使它成为跨域通信的一种有效的解决方案.</p>
</li>
<li><p>方法使用</p>
<ul>
<li><p>发送数据</p>
<ul>
<li>otherWindow.postMessage(message, targetOrigin, [transfer]);</li>
<li>otherWindow 【窗口的一个引用,比如 iframe 的 contentWindow 属性】</li>
</ul>
</li>
<li><p>接收数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;message&quot;</span>, receiveMessage, <span class="literal">false</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">receiveMessage</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> origin = event.origin;</span><br><span class="line">  <span class="built_in">console</span>.log(event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>postMessage 的使用场景</p>
<ol>
<li>跨域通信(包括 GET 请求和 POST 请求)</li>
<li>WebWorker<ul>
<li>Web Worker 的使用场景<ul>
<li>用于收集埋点数据,可以用于大量复杂的数据计算,复杂的图像处理,大数据的处理.因为它不会阻碍主线程的正常执行和页面 UI 的渲染.</li>
</ul>
</li>
</ul>
</li>
<li>Service Worker<ul>
<li>离线存储的一个最佳的解决方案</li>
</ul>
</li>
</ol>
</li>
</ul>
<h5 id="WebWorker-和-Service-Worker-的关系"><a href="#WebWorker-和-Service-Worker-的关系" class="headerlink" title="WebWorker 和 Service Worker 的关系"></a>WebWorker 和 Service Worker 的关系</h5><ul>
<li>相同点<ul>
<li>相同点是在常规的 js 引擎线程以外开辟了新的 js 线程去处理一些不适合在主线程上处理的业务</li>
</ul>
</li>
<li>不同点<ul>
<li>Web Worker 式服务于特定页面的,而 Service Worker 在被注册安装之后能够在多个页面使用</li>
<li>Service Worker 常驻在浏览器中,不会因为页面的关闭而被销毁.本质上,它是一个后台线程,只有你主动终结,或者浏览器回收,这个线程才会结束.</li>
<li>生命周期,可调用的 API 也不同</li>
</ul>
</li>
</ul>
<ol start="6">
<li><p>代理服务器</p>
<ul>
<li><p>定义</p>
<p>代理，也称正向代理，是指一个位于客户端和目标服务器(target server)之间的服务器，为了从目标服务器取得内容，客户端向代理发送一个请求并指定目标(目标服务器)，然后代理向目标服务器转交请求并将获得的内容返回给客户端。</p>
</li>
<li><p>代理服务器，需要做以下几个步骤</p>
<ol>
<li>接受客户端 请求 。</li>
<li>将 请求 转发给服务器</li>
<li>拿到服务器 响应 数据</li>
<li>将 响应 转发给客户端</li>
</ol>
</li>
</ul>
</li>
</ol>
<h5 id="CORS-和-JSONP-对比"><a href="#CORS-和-JSONP-对比" class="headerlink" title="CORS 和 JSONP 对比"></a>CORS 和 JSONP 对比</h5><ul>
<li>CORS 与 JSONP 相比，无疑更为先进、方便和可靠。</li>
<li>区别<ol>
<li>JSONP 只能实现 GET 请求，而 CORS 支持所有类型的 HTTP 请求。</li>
<li>使用 CORS，开发者可以使用普通的 XMLHttpRequest 发起请求和获得数据，比起 JSONP 有更好的错误处理。</li>
<li>JSONP 主要被老的浏览器支持，它们往往不支持 CORS，而绝大多数现代浏览器都已经支持了 CORS）。</li>
</ol>
</li>
</ul>
</li>
</ol>
<h3 id="9、动画"><a href="#9、动画" class="headerlink" title="9、动画"></a>9、动画</h3><blockquote>
<p>requestanimationframe 的出现替代 setTimeout 完成动画。</p>
</blockquote>
<ul>
<li>setTimeout<ul>
<li>setTimeout 其实就是通过设置一个间隔时间来不断的改变图像的位置，从而达到动画效果的。但利用 seTimeout 实现的动画在某些低端机上会出现卡顿、抖动的现象。导致 setTimeout 的执行步调和屏幕的刷新步调不一致，从而引起丢帧现象。</li>
<li>原因<ol>
<li>setTimeout 的执行时间并不是确定的。setTimeout 任务被放进了异步队列中，只有当主线程上的任务执行完以后，才会去检查该队列里的任务是否需要开始执行，因此 setTimeout 的实际执行时间一般要比其设定的时间晚一些。</li>
<li>刷新频率受屏幕分辨率和屏幕尺寸的影响，因此不同设备的屏幕刷新频率可能会不同，而 setTimeout 只能设置一个固定的时间间隔，这个时间不一定和屏幕的刷新时间相同。</li>
</ol>
</li>
</ul>
</li>
<li>requestanimationframe<ul>
<li>html5 为了满足高性能动画的需求而提供的 API，表意是请求动画帧。</li>
</ul>
</li>
</ul>
<h4 id="requestanimationframe-相比-setTimeout"><a href="#requestanimationframe-相比-setTimeout" class="headerlink" title="requestanimationframe 相比 setTimeout"></a>requestanimationframe 相比 setTimeout</h4><ul>
<li>优势<ol>
<li>与 setTimeout 相比，requestAnimationFrame 最大的优势是由系统来决定回调函数的执行时机。</li>
<li>它能保证回调函数在屏幕每一次的刷新间隔中只被执行一次，这样就不会引起丢帧现象，也不会导致动画出现卡顿的问题。</li>
</ol>
</li>
</ul>
<h3 id="10、事件"><a href="#10、事件" class="headerlink" title="10、事件"></a>10、事件</h3><ul>
<li><p>事件流</p>
<p>事件流描述的是从页面中接收事件的顺序，IE 和 Netscape 提出来差不多完全相反的事件流的概念，IE 事件流是事件冒泡流，Netscape 事件流是事件捕获流。</p>
</li>
<li><p>DOM 事件级别</p>
<ul>
<li><p>DOM0 事件</p>
<ul>
<li><p>定义</p>
<p>通过文档对象（document）获取元素引用，使用 DOM0 级方法指定的事件处理程序被认为是元素的方法，处理程序是在元素的作用域进行的，程序中 this 是引用的是当前元素。</p>
</li>
<li><p>3 个特点</p>
<ol>
<li><p>触发时机：DOM0 级的事件处理程式只能在事件冒泡阶段触发。</p>
</li>
<li><p>每个属性只能绑定一个事件</p>
</li>
<li><p>this 指针的指向</p>
<p>用 DOM0 级的方式绑定事件是在元素对象的作用域内运行，因此在事件函数内的 this 属性不是引用全局对象，而是引用当前元素对象</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p>DOM2 事件</p>
<ul>
<li><p>定义</p>
<p>’DOM2 级事件’定义了两个方法，用于处理指定和删除事件处理程序的操作：addEventListener()和 removeEventListener();所有的 DOM 节点都包含这两种方法。</p>
</li>
<li><p>DOM2 级事件规定的事件流包括三个阶段</p>
<ul>
<li>事件捕获阶段</li>
<li>处于目标阶段</li>
<li>事件冒泡阶段</li>
</ul>
</li>
<li><p>优点</p>
<p>可以添加多个事件处理程序</p>
</li>
</ul>
</li>
<li><p>DOM3 级</p>
<ul>
<li><p>DOM3 级事件就是在 DOM2 基础上增加了更多的事件类型</p>
</li>
<li><p>UI 事件，当用户与页面上的元素交互时触发，如：load、scroll</p>
<p>焦点事件，当元素获得或失去焦点时触发，如：blur、focus</p>
<p>鼠标事件，当用户通过鼠标在页面执行操作时触发如：dbclick、mouseup</p>
<p>滚轮事件，当使用鼠标滚轮或类似设备时触发，如：mousewheel</p>
<p>文本事件，当在文档中输入文本时触发，如：textInput</p>
<p>键盘事件，当用户通过键盘在页面上执行操作时触发，如：keydown、keypress</p>
<p>合成事件，当为 IME（输入法编辑器）输入字符时触发，如：compositionstart</p>
<p>变动事件，当底层 DOM 结构发生变化时触发，如：DOMsubtreeModified</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>机制</p>
<ol>
<li><p>冒泡机制</p>
<p>事件会从最内层的元素开始发生，一直向上传播，直到 document 对象。</p>
</li>
<li><p>捕获机制</p>
<p>网景提出另一种事件流名为事件捕获(event capturing)。与事件冒泡相反，事件会从最外层开始发生，直到最具体的元素。</p>
</li>
</ol>
</li>
<li><p>事件代理</p>
<ul>
<li><p>定义</p>
<p>JavaScript 高级程序设计上讲：事件委托就是利用事件冒泡，只指定一个事件处理程序，就可以管理某一类型的所有事件。</p>
</li>
<li><p>关键</p>
<p>Event 对象提供了一个属性叫 target，可以返回事件的目标节点，我们成为事件源</p>
</li>
<li><p>适合用事件委托的事件</p>
<p>click，mousedown，mouseup，keydown，keyup，keypress</p>
</li>
<li><p>不合适</p>
<p>mousemove，每次都要计算它的位置，非常不好把控，在不如说 focus，blur 之类的，本身就没用冒泡的特性，自然就不能用事件委托了</p>
</li>
</ul>
</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/API/" rel="tag">API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%8B%E4%BB%B6/" rel="tag">事件</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8A%A8%E7%94%BB/" rel="tag">动画</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E7%BB%84/" rel="tag">数组</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%B7%A8%E5%9F%9F/" rel="tag">跨域</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E5%85%A8%E9%9D%A2%E6%80%BB%E7%BB%93/" rel="tag">面试全面总结</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-getOfferES6"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/23/getOfferES6/"
    >ES6 知识点</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/03/23/getOfferES6/" class="article-date">
  <time datetime="2020-03-23T09:38:45.000Z" itemprop="datePublished">2020-03-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a> / <a class="article-category-link" href="/categories/JS/ES6-%E8%AF%AD%E6%B3%95/">ES6 语法</a> / <a class="article-category-link" href="/categories/Offer/">Offer</a> / <a class="article-category-link" href="/categories/Offer/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/">字节跳动</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="面试专题总结：ES6-知识点"><a href="#面试专题总结：ES6-知识点" class="headerlink" title="面试专题总结：ES6 知识点"></a>面试专题总结：ES6 知识点</h2><blockquote>
<p>希望读者依此构建自己的知识树（思维导图）</p>
<p>偷懒一下：可参考我自己总结思维导图 : <a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Interview-mind-map">点这里</a></p>
<p>附带：高频面试题积累文档。 来自于（学长、牛客网等平台）</p>
<p>自己开发的博客地址：<a target="_blank" rel="noopener" href="http://zxinc520.com/">zxinc520.com</a></p>
<p>github 地址: <a target="_blank" rel="noopener" href="https://github.com/ZhChen7">点击</a></p>
</blockquote>
<blockquote>
<p>此篇 js - 【ES6 知识总结】 知识点： 全部弄懂了，面试很容易。</p>
</blockquote>
<blockquote>
<p>详细可参考： <a target="_blank" rel="noopener" href="https://es6.ruanyifeng.com/">ECMAScript 6 入门</a></p>
</blockquote>
<h3 id="1、es6-是什么"><a href="#1、es6-是什么" class="headerlink" title="1、es6 是什么"></a>1、es6 是什么</h3><p>ECMAScript 6.0（以下简称 ES6）是 JavaScript 语言的下一代标准，已经在 2015 年 6 月正式发布了。 ECMA 是标准，Javascript 是 ECMA 的实现。因为 js 也是一种语言，但凡语言都有一套标准，而 ECMA 就是 javascript 的标准。在 2015 年正式发布了 ECMAscript6.0，简称 ES6，又称为 ECMAscript2015。</p>
<h3 id="2、var、let、const（声明方式）"><a href="#2、var、let、const（声明方式）" class="headerlink" title="2、var、let、const（声明方式）"></a>2、var、let、const（声明方式）</h3><ul>
<li>类别<ol>
<li>变量提升</li>
<li>暂时性死区</li>
<li>重复声明</li>
<li>块作用域有效</li>
<li>初始值</li>
<li>重新赋值</li>
</ol>
</li>
<li>区别<ol>
<li>let/const 定义的变量不会出现变量提升，而 var 定义的变量会提升。</li>
<li>相同作用域中，let 和 const 不允许重复声明，var 允许重复声明。</li>
<li>const 声明变量时必须设置初始值</li>
<li>const 声明一个只读的常量，这个常量不可改变</li>
<li>let/const 声明的变量仅在块级作用域中有效。而 var 声明的变量在块级作用域外仍能访问到。</li>
<li>顶层作用域中 var 声明的变量挂在 window 上(浏览器环境)</li>
<li>let/const 有暂时性死区的问题，即 let/const 声明的变量，在定义之前都是不可用的。如果使用会抛出错误。</li>
</ol>
</li>
</ul>
<h3 id="3、-变量的解构赋值"><a href="#3、-变量的解构赋值" class="headerlink" title="3、 变量的解构赋值"></a>3、 变量的解构赋值</h3><ul>
<li><p>数组解构赋值</p>
<p>let [aa, bb, cc] = [0, 1, 2];</p>
</li>
<li><p>对象解构赋值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; cnName, enName &#125; = &#123;</span><br><span class="line">  id: <span class="string">&quot;151521574&quot;</span>,</span><br><span class="line">  cnName: <span class="string">&quot;张生&quot;</span>,</span><br><span class="line">  enName: <span class="string">&quot;Ronnie&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(cnName, enName); <span class="comment">//&#x27;张生&#x27;，&#x27;Ronnie&#x27;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="4、箭头函数"><a href="#4、箭头函数" class="headerlink" title="4、箭头函数"></a>4、箭头函数</h3><blockquote>
<p>es6 之前的函数的 this 指向调用函数时所在的对象，而箭头函数的 this 指向函数定义时所在的对象</p>
</blockquote>
<h4 id="箭头函数及其-this-问题"><a href="#箭头函数及其-this-问题" class="headerlink" title="箭头函数及其 this 问题"></a>箭头函数及其 this 问题</h4><ol>
<li>this 对象的指向是可变的，但是在箭头函数中，它是固定的。</li>
<li>this 指向的固定化，并不是因为箭头函数内部有绑定 this 的机制，实际原因是箭头函数根本没有自己的 this，导致内部的 this 就是外层代码块的 this。正是因为它没有 this，所以也就不能用作构造函数。</li>
<li>箭头函数里面根本没有自己的 this，而是引用外层的 this。</li>
<li>由于箭头函数没有自己的 this，所以当然也就不能用 call()、apply()、bind()这些方法去改变 this 的指向</li>
</ol>
<h3 id="5、Symbol"><a href="#5、Symbol" class="headerlink" title="5、Symbol"></a>5、Symbol</h3><ul>
<li><p>是什么？</p>
<p>symbols 是一种无法被重建的基本类型。这时 symbols 有点类似与对象创建的实例互相不相等的情况，但同时 symbols 又是一种无法被改变的基本类型数据。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s1 = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> s2 = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="built_in">console</span>.log(s1 === s2); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>作用</p>
<ol>
<li>symbols 作为对象的属性</li>
<li>阻止对象属性名冲突 （扩展对象属性很有用）</li>
<li>模拟私有属性</li>
</ol>
</li>
</ul>
<h3 id="6、Module-模块"><a href="#6、Module-模块" class="headerlink" title="6、Module 模块"></a>6、Module 模块</h3><blockquote>
<p>可从 IIFE、AMD、CMD、CommonJS、UMD、webpack(require.ensure)、ES Module、&lt;_script type=”module”_ &gt; 这几个角度考虑。</p>
<p><strong>作用</strong> ：模块化主要是用来抽离公共代码，隔离作用域，避免变量冲突等。</p>
</blockquote>
<h4 id="模块化发展历程"><a href="#模块化发展历程" class="headerlink" title="模块化发展历程"></a>模块化发展历程</h4><ol>
<li><p>IIFE</p>
<ul>
<li><p>使用自执行函数来编写模块化</p>
</li>
<li><p>特点：</p>
<p>在一个单独的函数作用域中执行代码，避免变量冲突。</p>
</li>
</ul>
</li>
<li><p>AMD</p>
<ul>
<li><p>使用 requireJS 来编写模块化</p>
</li>
<li><p>特点：依赖必须提前声明好</p>
</li>
<li><p>简单实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">&quot;./index.js&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">code</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// code 就是index.js 返回的内容</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>CMD</p>
<ul>
<li><p>使用 seaJS 来编写模块化</p>
</li>
<li><p>特点：支持动态引入依赖文件</p>
</li>
<li><p>简单实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> indexCode = <span class="built_in">require</span>(<span class="string">&quot;./index.js&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>CommonJS</p>
<ul>
<li>nodejs 中自带的模块化</li>
<li>var fs = require(‘fs’);</li>
</ul>
</li>
<li><p>UMD</p>
<ul>
<li>兼容 AMD，CommonJS 模块化语法</li>
</ul>
</li>
<li><p>webpack(require.ensure)</p>
<ul>
<li>webpack 2.x 版本中的代码分割</li>
</ul>
</li>
<li><p>ES Modules</p>
<ul>
<li>ES6 引入的模块化，支持 import 来引入另一个 js</li>
<li>import a from ‘a’;</li>
</ul>
</li>
</ol>
<h4 id="6-1、AMD-与-CMD-的比较"><a href="#6-1、AMD-与-CMD-的比较" class="headerlink" title="6.1、AMD 与 CMD 的比较"></a>6.1、AMD 与 CMD 的比较</h4><ul>
<li><p>定义</p>
<p>AMD 和 CMD 都是用于浏览器端的模块规范</p>
</li>
<li><p>AMD</p>
<ul>
<li>AMD 是 RequireJS 在推广过程中对模块定义的规范化产出</li>
<li>其主要内容就是定义了 define 函数该如何书写，只要你按照这个规范书写模块和依赖，require.js 就能正确的进行解析。</li>
</ul>
</li>
<li><p>CMD</p>
<ul>
<li>CMD 其实就是 SeaJS 在推广过程中对模块定义的规范化产出</li>
<li>主要内容就是描述该如何定义模块，如何引入模块，如何导出模块，只要你按照这个规范书写代码，sea.js 就能正确的进行解析</li>
</ul>
</li>
<li><p>AMD 与 CMD 的区别</p>
<ol>
<li>AMD 推崇依赖前置，CMD 推崇依赖就近</li>
<li>AMD 是提前执行，CMD 是延迟执行。</li>
</ol>
</li>
</ul>
<h4 id="6-2、CommonJS-与-AMD-的比较"><a href="#6-2、CommonJS-与-AMD-的比较" class="headerlink" title="6.2、CommonJS 与 AMD 的比较"></a>6.2、CommonJS 与 AMD 的比较</h4><blockquote>
<p>在服务器端比如 node，采用的则是 CommonJS 规范。</p>
<p>AMD 和 CMD 都是用于浏览器端的模块规范</p>
</blockquote>
<ol>
<li><p>CommonJS 规范加载模块是同步的，也就是说，只有加载完成，才能执行后面的操作。</p>
</li>
<li><p>AMD 规范则是非同步加载模块，允许指定回调函数。</p>
<p>由于 Node.js 主要用于服务器编程，模块文件一般都已经存在于本地硬盘，所以加载起来比较快，不用考虑非同步加载的方式，所以 CommonJS 规范比较适用。</p>
</li>
<li><p>但是，如果是浏览器环境，要从服务器端加载模块，这时就必须采用非同步模式，因此浏览器端一般采用 AMD 规范。</p>
</li>
</ol>
<h4 id="6-3、ES6-与-CommonJS-的比较"><a href="#6-3、ES6-与-CommonJS-的比较" class="headerlink" title="6.3、ES6 与 CommonJS 的比较"></a>6.3、ES6 与 CommonJS 的比较</h4><blockquote>
<p>注意！浏览器加载 ES6 模块，也使用 &lt;_script_ &gt; 标签，但是要加入 type=”module” 属性。</p>
</blockquote>
<ol>
<li>CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。</li>
<li>CommonJS 模块是运行时加载，ES6 模块是编译时输出接口</li>
</ol>
<h3 id="7、异步编程-6-种解决方案"><a href="#7、异步编程-6-种解决方案" class="headerlink" title="7、异步编程 6 种解决方案"></a>7、异步编程 6 种解决方案</h3><ol>
<li><p>回调函数（Callback）</p>
<ul>
<li><p>回调函数是异步操作最基本的方法</p>
</li>
<li><p>ajax(url, () =&gt; {</p>
<p>​ // 处理逻辑</p>
<p>})</p>
</li>
<li><p>缺点</p>
<ul>
<li>容易写出回调地狱（Callback hell）</li>
<li>不能使用 try catch 捕获错误，不能直接 return</li>
</ul>
</li>
</ul>
</li>
<li><p>事件监听</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f1.on(<span class="string">&quot;done&quot;</span>, f2);</span><br></pre></td></tr></table></figure>
</li>
<li><p>发布订阅</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jQuery.subscribe(<span class="string">&quot;done&quot;</span>, f2);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Promise</p>
<ul>
<li><p>是什么？</p>
<ul>
<li>promise 是目前 JS 异步编程的主流解决方案，遵循 Promises/A+ 方案。Promise 用于异步操作，表示一个还未完成但是预期会完成的操作。</li>
<li>Promise 是 ES6 引入的一个新的对象，他的主要作用是用来解决 JS 异步机制里，回调机制产生的“回调地狱”。它并不是什么突破性的 API，只是封装了异步回调形式，使得异步回调可以写的更加优雅，可读性更高，而且可以链式调用。</li>
</ul>
</li>
<li><p>剖析</p>
<ul>
<li><p>promise 本身相当于一个状态机，拥有三种状态</p>
<ul>
<li>pending</li>
<li>fulfilled</li>
<li>rejected</li>
</ul>
<p>一个 promise 对象初始化时的状态是 pending，调用了 resolve 后会将 promise 的状态扭转为 fulfilled，调用 reject 后会将 promise 的状态扭转为 rejected，这两种扭转一旦发生便不能再扭转该 promise 到其他状态。</p>
</li>
</ul>
</li>
<li><p>Promise 如何使用</p>
<p>构造一个 promise 对象，并将要执行的异步函数传入到 promise 的参数中执行，并且在异步执行结束后调用 resolve( ) 函数，就可以在 promise 的 then 方法中获取到异步函数的执行结果</p>
</li>
<li><p>Promise 原型上的方法</p>
<ol>
<li>Promise.prototype.then(onFulfilled, onRejected)</li>
<li>Promise.prototype.catch(onRejected)</li>
<li>Promise.prototype.finally(onFinally)</li>
</ol>
</li>
<li><p>Promise 静态方法</p>
<ol>
<li><p>Promise.all()</p>
<p>Promise.all 接收一个 promise 对象数组作为参数，只有全部的 promise 都已经变为 fulfilled 状态后才会继续后面的处理</p>
</li>
<li><p>Promise.race()</p>
<p>这个函数会在 promises 中第一个 promise 的状态扭转后就开始后面的处理（fulfilled、rejected 均可）</p>
</li>
<li><p>Promise.resolve()</p>
</li>
<li><p>Promise.reject()</p>
</li>
</ol>
</li>
<li><p>优点</p>
<p>将异步操作以同步操作的流程表达出来，promise 链式调用，更好地解决了层层嵌套的回调地狱</p>
</li>
<li><p>缺点</p>
<ol>
<li>不能取消执行。</li>
<li>无法获取当前执行的进度信息（比如，要在用户界面展示进度条）。</li>
<li>外部无法捕捉 Promise 内部抛出的错误</li>
</ol>
</li>
</ul>
</li>
<li><p>generator 函数</p>
<ul>
<li><p>是什么</p>
<ul>
<li>Generator 函数是 ES6 提供的一种异步编程解决方案，语法行为与传统函数完全不同。</li>
<li>如果说 JavaScript 是 ECMAScript 标准的一种具体实现、Iterator 遍历器是 Iterator 的具体实现，那么 Generator 函数可以说是 Iterator 接口的具体实现方式。</li>
<li>Generator 函数可以通过配合 Thunk 函数更轻松更优雅的实现异步编程和控制流管理</li>
</ul>
</li>
<li><p>描述</p>
<ul>
<li>执行 Generator 函数会返回一个遍历器对象，每一次 Generator 函数里面的 yield 都相当一次遍历器对象的 next()方法，并且可以通过 next(value)方法传入自定义的 value,来改变 Generator 函数的行为。</li>
</ul>
</li>
<li><p>能封装异步任务的根本原因</p>
<ul>
<li>最大特点就是可以交出函数的执行权（即暂停执行）。Generator 函数可以暂停执行和恢复执行</li>
</ul>
</li>
<li><p>两个特征</p>
<ul>
<li>function 关键字与函数名之间有一个星号</li>
<li>函数体内部使用 yield 表达式，定义不同的内部状态（yield 在英语里的意思就是“产出”）。</li>
</ul>
</li>
<li><p>过程</p>
<p>Generator 函数的调用方法与普通函数一样，也是在函数名后面加上一对圆括号。不同的是，调用 Generator 函数后，该函数并不执行，返回的也不是函数运行结果，而是一个指向内部状态的指针对象，也就是上一章介绍的遍历器对象（Iterator Object）</p>
</li>
<li><p>Generator 及其异步方面的应用</p>
<ul>
<li>Generator 函数将 JavaScript 异步编程带入了一个全新的阶段</li>
</ul>
</li>
<li><p>总结</p>
<p>调用 Generator 函数，返回一个遍历器对象，代表 Generator 函数的内部指针。以后，每次调用遍历器对象的 next 方法，就会返回一个有着 value 和 done 两个属性的对象。value 属性表示当前的内部状态的值，是 yield 表达式后面那个表达式的值；done 属性是一个布尔值，表示是否遍历结束。</p>
</li>
<li><p>demo</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fetch = <span class="built_in">require</span>(<span class="string">&quot;node-fetch&quot;</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> url = <span class="string">&quot;https://api.github.com/users/github&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="keyword">yield</span> fetch(url);</span><br><span class="line">  <span class="built_in">console</span>.log(result.bio);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>async 和 await</p>
<ul>
<li><p>含义</p>
<p>ES2017 标准引入了 async 函数，使得异步操作变得更加方便。</p>
</li>
<li><p>是什么？</p>
<ul>
<li>一句话，它就是 Generator 函数的语法糖。</li>
<li>一比较就会发现，async 函数就是将 Generator 函数的星号（*）替换成 async，将 yield 替换成 await，仅此而已。</li>
<li>async 函数可以理解为内置自动执行器的 Generator 函数语法糖，它配合 ES6 的 Promise 近乎完美的实现了异步编程解决方案。</li>
</ul>
</li>
<li><p>相对于 Promise，优势体现在</p>
<ol>
<li>处理 then 的调用链，能够更清晰准确的写出代码</li>
<li>并且也能优雅地解决回调地狱问题</li>
</ol>
</li>
<li><p>相对 Generator 函数，体现在以下 4 点</p>
<ol>
<li>内置执行器。 Generator 函数的执行必须靠执行器，所以才有了 co 函数库，而 async 函数自带执行器。也就是说，async 函数的执行，与普通函数一模一样，只要一行</li>
<li>更好的语义。 async 和 await，比起星号和 yield，语义更清楚了。async 表示函数里有异步操作，await 表示紧跟在后面的表达式需要等待结果</li>
<li>更广的适用性。 co 函数库约定，yield 命令后面只能是 Thunk 函数或 Promise 对象，而 async 函数的 await 命令后面，可以跟 Promise 对象和原始类型的值（数值、字符串和布尔值，但这时等同于同步操作）</li>
<li>返回值是 Promise。async 函数的返回值是 Promise 对象，这比 Generator 函数的返回值是 Iterator 对象方便多了。你可以用 then 方法指定下一步的操作。</li>
</ol>
</li>
<li><p>缺点</p>
<p>当然 async/await 函数也存在一些缺点，因为 await 将异步代码改造成了同步代码，如果多个异步代码没有依赖性却使用了 await 会导致性能上的降低，代码没有依赖性的话，完全可以使用 Promise.all 的方式。</p>
</li>
</ul>
</li>
</ol>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ol>
<li>JS 异步编程进化史：callback -&gt; promise -&gt; generator -&gt; async + await</li>
<li>async/await 函数的实现，就是将 Generator 函数和自动执行器，包装在一个函数里</li>
<li>async/await 可以说是异步终极解决方案了</li>
</ol>
<h3 id="8、Class"><a href="#8、Class" class="headerlink" title="8、Class"></a>8、Class</h3><blockquote>
<p>ES6 的 class 可以看作只是一个 ES5 生成实例对象的构造函数的语法糖。它参考了 java 语言，定义了一个类的概念，让对象原型写法更加清晰，对象实例化更像是一种面向对象编程。Class 类可以通过 extends 实现继承。</p>
</blockquote>
<ul>
<li><p>语法</p>
<ul>
<li>super 关键字的使用</li>
<li>static 关键字</li>
</ul>
</li>
<li><p>ES5/ES6 的继承除了写法以外还有什么区别？</p>
<ol>
<li>class 声明会提升，但不会初始化赋值。Foo 进入暂时性死区，类似于 let、const 声明变量。</li>
<li>class 声明内部会启用严格模式</li>
<li>class 的所有方法（包括静态方法和实例方法）都是不可枚举的</li>
<li>class 的所有方法（包括静态方法和实例方法）都没有原型对象 prototype，所以也没有[[construct]]，不能使用 new 来调用</li>
<li>必须使用 new 调用 class</li>
<li>class 内部无法重写类名</li>
</ol>
<p>ES5 的继承，实质是先创造子类的实例对象 this，然后再将父类的方法添加到 this 上面。ES6 的继承机制完全不同，实质是先将父类实例对象的属性和方法，加到 this 上面（所以必须先调用 super 方法），然后再用子类的构造函数修改 this</p>
</li>
<li><p>优点</p>
<p>但是某些时候，我们使用 es6 的类可以让我们的代码的可读性更高</p>
</li>
</ul>
<h3 id="9、Set-和-Map"><a href="#9、Set-和-Map" class="headerlink" title="9、Set 和 Map"></a>9、Set 和 Map</h3><ul>
<li>Set<ul>
<li>是什么<ul>
<li>Set 是一种叫做集合的数据结构</li>
<li>Set 是 ES6 引入的一种类似 Array 的新的数据结构，Set 实例的成员类似于数组 item 成员，区别是 Set 实例的成员都是唯一，不重复的。这个特性可以轻松地实现数组去重。</li>
</ul>
</li>
<li>应用场景<ul>
<li>数组去重</li>
</ul>
</li>
<li>特点<ol>
<li>成员唯一、无序且不重复</li>
<li>[value, value]，键值与键名是一致的（或者说只有键值，没有键名）</li>
<li>可以遍历，方法有：add、delete、has</li>
</ol>
</li>
</ul>
</li>
<li>WeakSet<ul>
<li>特点<ol>
<li>成员都是对象</li>
<li>成员都是弱引用，可以被垃圾回收机制回收，可以用来保存 DOM 节点，不容易造成内存泄漏</li>
<li>不能遍历，方法有 add、delete、has</li>
</ol>
</li>
</ul>
</li>
<li>Map<ul>
<li>是什么<ul>
<li>Map 是一种叫做字典的数据结构</li>
<li>Map 是 ES6 引入的一种类似 Object 的新的数据结构，Map 可以理解为是 Object 的超集，打破了以传统键值对形式定义对象，对象的 key 不再局限于字符串，也可以是 Object。可以更加全面的描述对象的属性。</li>
</ul>
</li>
<li>应用场景<ul>
<li>数据存储</li>
</ul>
</li>
<li>特点<ul>
<li>本质上是键值对的集合，类似集合</li>
<li>可以遍历，方法很多可以跟各种数据格式转换</li>
</ul>
</li>
</ul>
</li>
<li>WeakMap<ul>
<li>特点<ul>
<li>只接受对象作为键名（null 除外），不接受其他类型的值作为键名</li>
<li>键名是弱引用，键值可以是任意的，键名所指向的对象可以被垃圾回收，此时键名是无效的</li>
<li>不能遍历，方法有 get、set、has、delete</li>
</ul>
</li>
</ul>
</li>
<li>Set 和 Map<ul>
<li>Set 和 Map 主要的应用场景在于数组去重和数据存储</li>
<li>原来 Set 是一种叫做集合的数据结构，Map 是一种叫做字典的数据结构</li>
</ul>
</li>
<li>Set 与 WeakSet 区别<ol>
<li>WeakSet 只能存放对象</li>
<li>WeakSet 不支持遍历, 没有 size 属性</li>
<li>WeakSet 存放的对象不会计入到对象的引用技术, 因此不会影响 GC 的回收</li>
<li>WeakSet 存在的对象如果在外界消失了, 那么在 WeakSet 里面也会不存在</li>
</ol>
</li>
<li>Map 与 WeakMap 区别<ol>
<li>WeakMap 只能接受对象作为键名字(null 除外)</li>
<li>WeakMap 键名指向对象不会计入对象的引用数</li>
</ol>
</li>
</ul>
<h3 id="10、ES6-对-String-字符串类型做的常用升级优化"><a href="#10、ES6-对-String-字符串类型做的常用升级优化" class="headerlink" title="10、ES6 对 String 字符串类型做的常用升级优化"></a>10、ES6 对 String 字符串类型做的常用升级优化</h3><ul>
<li>优化部分<ul>
<li>ES6 新增了字符串模板，在拼接大段字符串时，用反斜杠(`)取代以往的字符串相加的形式，能保留所有空格和换行，使得字符串拼接看起来更加直观，更加优雅。</li>
</ul>
</li>
<li>升级部分<ul>
<li>ES6 在 String 原型上新增了 includes()方法，用于取代传统的只能用 indexOf 查找包含字符的方法(indexOf 返回-1 表示没查到不如 includes 方法返回 false 更明确，语义更清晰), 此外还新增了 startsWith(), endsWith(), padStart(),padEnd(),repeat()等方法，可方便的用于查找，补全字符串。</li>
</ul>
</li>
</ul>
<h3 id="11、ES6-对-Number-数字类型做的常用升级优化"><a href="#11、ES6-对-Number-数字类型做的常用升级优化" class="headerlink" title="11、ES6 对 Number 数字类型做的常用升级优化?"></a>11、ES6 对 Number 数字类型做的常用升级优化?</h3><ul>
<li>优化部分<ul>
<li>ES6 在 Number 原型上新增了 isFinite(), isNaN()方法，用来取代传统的全局 isFinite(), isNaN()方法检测数值是否有限、是否是 NaN。ES5 的 isFinite(), isNaN()方法都会先将非数值类型的参数转化为 Number 类型再做判断，这其实是不合理的，最造成 isNaN(‘NaN’) === true 的奇怪行为–’NaN’是一个字符串，但是 isNaN 却说这就是 NaN。而 Number.isFinite()和 Number.isNaN()则不会有此类问题(Number.isNaN(‘NaN’) === false)。</li>
</ul>
</li>
<li>升级部分<ul>
<li>ES6 在 Math 对象上新增了 Math.cbrt()，trunc()，hypot()等等较多的科学计数法运算方法，可以更加全面的进行立方根、求和立方根等等科学计算。</li>
</ul>
</li>
</ul>
<h3 id="12、ES6-对-Array-数组类型做的常用升级优化"><a href="#12、ES6-对-Array-数组类型做的常用升级优化" class="headerlink" title="12、ES6 对 Array 数组类型做的常用升级优化"></a>12、ES6 对 Array 数组类型做的常用升级优化</h3><ul>
<li>优化部分<ul>
<li>数组解构赋值。ES6 可以直接以 let [a,b,c] = [1,2,3]形式进行变量赋值，在声明较多变量时，不用再写很多 let(var),且映射关系清晰，且支持赋默认值</li>
<li>扩展运算符。ES6 新增的扩展运算符(…)(重要),可以轻松的实现数组和松散序列的相互转化，可以取代 arguments 对象和 apply 方法，轻松获取未知参数个数情况下的参数集合。（尤其是在 ES5 中，arguments 并不是一个真正的数组，而是一个类数组的对象，但是扩展运算符的逆运算却可以返回一个真正的数组）。扩展运算符还可以轻松方便的实现数组的复制和解构赋值（let a = [2,3,4]; let b = […a]）</li>
</ul>
</li>
<li>升级部分<ul>
<li>ES6 在 Array 原型上新增了 find()方法，用于取代传统的只能用 indexOf 查找包含数组项目的方法,且修复了 indexOf 查找不到 NaN 的 bug([NaN].indexOf(NaN) === -1).此外还新增了 copyWithin(), includes(), fill(),flat()等方法，可方便的用于字符串的查找，补全,转换等</li>
</ul>
</li>
</ul>
<h3 id="13、ES6-对-Object-类型做的常用升级优化"><a href="#13、ES6-对-Object-类型做的常用升级优化" class="headerlink" title="13、ES6 对 Object 类型做的常用升级优化"></a>13、ES6 对 Object 类型做的常用升级优化</h3><ul>
<li><p>优化部分</p>
<ol>
<li>对象属性变量式声明。ES6 可以直接以变量形式声明对象属性或者方法，。比传统的键值对形式声明更加简洁，更加方便，语义更加清晰。</li>
<li>对象的解构赋值</li>
<li>对象的扩展运算符(…)</li>
<li>super 关键字。ES6 在 Class 类里新增了类似 this 的关键字 super。同 this 总是指向当前函数所在的对象不同，super 关键字总是指向当前函数所在对象的原型对象。</li>
</ol>
</li>
<li><p>升级部分</p>
<ol>
<li><p>ES6 在 Object 原型上新增了 is()方法，做两个目标对象的相等比较，用来完善’===’方法。’===’方法中 NaN === NaN //false 其实是不合理的，Object.is 修复了这个小 bug。(Object.is(NaN, NaN) // true)</p>
</li>
<li><p>ES6 在 Object 原型上新增了 assign()方法，用于对象新增属性或者多个对象合并。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> source1 = &#123; <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> source2 = &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(target, source1, source2);</span><br><span class="line">target; <span class="comment">// &#123;a:1, b:2, c:3&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ES6 在 Object 原型上新增了 getOwnPropertyDescriptors()方法，此方法增强了 ES5 中 getOwnPropertyDescriptor()方法，可以获取指定对象所有自身属性的描述对象。结合 defineProperties()方法，可以完美复制对象，包括复制 get 和 set 属性。</p>
</li>
<li><p>ES6 在 Object 原型上新增了 getPrototypeOf()和 setPrototypeOf()方法，用来获取或设置当前对象的 prototype 对象。获取或设置当前对象的 prototype 对象时，都应该采用 ES6 新增的标准用法。</p>
</li>
<li><p>ES6 在 Object 原型上还新增了 Object.keys()，Object.values()，Object.entries()方法，用来获取对象的所有键、所有值和所有键值对数组。</p>
</li>
</ol>
</li>
</ul>
<h3 id="14、ES6-对-Function-函数类型做的常用升级优化"><a href="#14、ES6-对-Function-函数类型做的常用升级优化" class="headerlink" title="14、ES6 对 Function 函数类型做的常用升级优化"></a>14、ES6 对 Function 函数类型做的常用升级优化</h3><ul>
<li><p>优化部分</p>
<ul>
<li>箭头函数(核心)。箭头函数里没有自己的 this,这改变了以往 JS 函数中最让人难以理解的 this 运行机制<ol>
<li>箭头函数内的 this 指向的是函数定义时所在的对象，而不是函数执行时所在的对象。</li>
<li>箭头函数不能用作构造函数，因为它没有自己的 this，无法实例化。</li>
<li>也是因为箭头函数没有自己的 this,所以箭头函数 内也不存在 arguments 对象。（可以用扩展运算符代替）</li>
</ol>
</li>
</ul>
</li>
<li><p>升级部分</p>
<ul>
<li><p>ES6 新增了双冒号运算符，用来取代以往的 bind，call,和 apply(浏览器暂不支持，Babel 已经支持转码)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">foo::bar;</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line">bar.bind(foo);</span><br><span class="line"></span><br><span class="line">foo::bar(...arguments);</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line">bar.apply(foo, <span class="built_in">arguments</span>);</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="15、Proxy"><a href="#15、Proxy" class="headerlink" title="15、Proxy"></a>15、Proxy</h3><p>Proxy 是 ES6 新增的一个构造函数，这个词的原意是代理，用在这里表示由它来“代理”某些操作，可以译为“代理器”。Proxy 可以理解成，在目标对象之前架设一层“拦截”，外界对该对象的访问，都必须先通过这层拦截，因此提供了一种机制，可以对外界的访问进行过滤和改写。</p>
<h3 id="16、Reflect"><a href="#16、Reflect" class="headerlink" title="16、Reflect"></a>16、Reflect</h3><ul>
<li>是什么<ul>
<li>Reflect 对象与 Proxy 对象一样，也是 ES6 为了操作对象而提供的新 API</li>
</ul>
</li>
<li>作用<ol>
<li>一是将原生的一些零散分布在 Object、Function 或者全局函数里的方法(如 apply、delete、get、set 等等)，统一整合到 Reflect 上，这样可以更加方便更加统一的管理一些原生 API。</li>
<li>其次就是因为 Proxy 可以改写默认的原生 API，如果一旦原生 API 别改写可能就找不到了，所以 Reflect 也可以起到备份原生 API 的作用，使得即使原生 API 被改写了之后，也可以在被改写之后的 API 用上默认的 API。</li>
</ol>
</li>
</ul>
<h3 id="17、Iterator"><a href="#17、Iterator" class="headerlink" title="17、Iterator"></a>17、Iterator</h3><ul>
<li>是什么<ul>
<li>一种设计标准，来统一所有可遍历类型的遍历方式。Iterator 正是这样一种标准。或者说是一种规范理念</li>
</ul>
</li>
<li>解决的问题<ul>
<li>Set、Map 都不能用 for 循环遍历，解决这个问题有两种方案，一种是为 Set、Map 单独新增一个用来遍历的 API，另一种是为 Set、Map、Array、Object 新增一个统一的遍历 API，显然，第二种更好，ES6 也就顺其自然的需要一种设计标准，来统一所有可遍历类型的遍历方式。</li>
</ul>
</li>
<li>Iterator 标准的具体实现<ul>
<li>Iterator 标准的具体实现是 Iterator 遍历器。Iterator 标准规定，所有部署了 key 值为[Symbol.iterator]，且[Symbol.iterator]的 value 是标准的 Iterator 接口函数(标准的 Iterator 接口函数: 该函数必须返回一个对象，且对象中包含 next 方法，且执行 next()能返回包含 value/done 属性的 Iterator 对象)的对象，都称之为可遍历对象，next()后返回的 Iterator 对象也就是 Iterator 遍历器。</li>
</ul>
</li>
</ul>
<h3 id="18、for…in-和-for…of-有什么区别"><a href="#18、for…in-和-for…of-有什么区别" class="headerlink" title="18、for…in 和 for…of 有什么区别"></a>18、for…in 和 for…of 有什么区别</h3><ul>
<li><p>ES6 规定，有所部署了载了 Iterator 接口的对象(可遍历对象)都可以通过 for…of 去遍历，而 for..in 仅仅可以遍历对象。</p>
</li>
<li><p>使用 for…of 的好处</p>
<ul>
<li><p>这也就意味着，数组也可以用 for…of 遍历，这极大地方便了数组的取值，且避免了很多程序用 for..in 去遍历数组的恶习。</p>
<p>上面提到的扩展运算符本质上也就是 for..of 循环的一种实现。</p>
</li>
</ul>
</li>
</ul>
<h3 id="19、module、export、import"><a href="#19、module、export、import" class="headerlink" title="19、module、export、import"></a>19、module、export、import</h3><ul>
<li>module、export、import 是 ES6 用来统一前端模块化方案的设计思路和实现方案</li>
<li>作用<ul>
<li>export、import 的出现统一了前端模块化的实现方案，整合规范了浏览器/服务端的模块化方法，用来取代传统的 AMD/CMD、requireJS、seaJS、commondJS 等等一系列前端模块不同的实现方案，使前端模块化更加统一规范，JS 也能更加能实现大型的应用程序开发。</li>
</ul>
</li>
<li>注意<ul>
<li>import 引入的模块是静态加载（编译阶段加载）而不是动态加载（运行时加载）</li>
<li>import 引入 export 导出的接口值是动态绑定关系，即通过该接口，可以取到模块内部实时的值</li>
</ul>
</li>
</ul>
<h3 id="20、-Iterator-和-for…of（Iterator-遍历器的实现）"><a href="#20、-Iterator-和-for…of（Iterator-遍历器的实现）" class="headerlink" title="20、 Iterator 和 for…of（Iterator 遍历器的实现）"></a>20、 Iterator 和 for…of（Iterator 遍历器的实现）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义迭代器</span></span><br><span class="line"><span class="keyword">let</span> a = makeiterator([<span class="number">1</span>, <span class="number">2</span>]);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeiterator</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> nextindex = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    next: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> nextindex &lt; arr.length</span><br><span class="line">        ? &#123; <span class="attr">value</span>: arr[nextindex++], <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">        : &#123; <span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Symbol.iterator遍历器接口</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> iter = arr[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line"></span><br><span class="line">iter.next(); <span class="comment">// &#123; value: &#x27;a&#x27;, done: false &#125;</span></span><br><span class="line">iter.next(); <span class="comment">// &#123; value: &#x27;b&#x27;, done: false &#125;</span></span><br><span class="line">iter.next(); <span class="comment">// &#123; value: &#x27;c&#x27;, done: false &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="21、循环语法比较及使用场景（for、forEach、for…in、for…of）"><a href="#21、循环语法比较及使用场景（for、forEach、for…in、for…of）" class="headerlink" title="21、循环语法比较及使用场景（for、forEach、for…in、for…of）"></a>21、循环语法比较及使用场景（for、forEach、for…in、for…of）</h3><p>for 循环的速度是最快的,是最老的循环,也是优化得最好的,其次是 for-of 这个是 es6 才新增的循环非常好用,最慢是 for-in 我们可以作一下速度排序</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &gt; <span class="keyword">for</span>-<span class="keyword">of</span> &gt; forEach &gt; filter &gt; map &gt; <span class="keyword">for</span>-<span class="keyword">in</span></span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6/" rel="tag">ES6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E5%85%A8%E9%9D%A2%E6%80%BB%E7%BB%93/" rel="tag">面试全面总结</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-getOfferVariabletypesandcalculations"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/23/getOfferVariabletypesandcalculations/"
    >变量类型和计算</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/03/23/getOfferVariabletypesandcalculations/" class="article-date">
  <time datetime="2020-03-23T09:35:29.000Z" itemprop="datePublished">2020-03-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a> / <a class="article-category-link" href="/categories/JS/%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E5%92%8C%E8%AE%A1%E7%AE%97/">变量类型和计算</a> / <a class="article-category-link" href="/categories/Offer/">Offer</a> / <a class="article-category-link" href="/categories/Offer/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/">字节跳动</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="JavaScript-变量类型和计算"><a href="#JavaScript-变量类型和计算" class="headerlink" title="JavaScript 变量类型和计算"></a>JavaScript 变量类型和计算</h2><blockquote>
<p>拿到 字节跳动实习生 offer 总结</p>
<p>回馈分享一波自己的知识点总结</p>
</blockquote>
<blockquote>
<p>希望读者依此构建自己的知识树（思维导图）</p>
<p>偷懒一下：可参考我自己总结思维导图 : <a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Interview-mind-map">点这里</a></p>
<p>附带：高频面试题积累文档。 来自于（学长、牛客网等平台）</p>
<p>自己开发的博客地址：<a target="_blank" rel="noopener" href="http://zxinc520.com/">zxinc520.com</a></p>
<p>github 地址: <a target="_blank" rel="noopener" href="https://github.com/ZhChen7">点击</a></p>
</blockquote>
<blockquote>
<p>此篇 js - 【变量类型和计算】 知识点： 全部弄懂了，面试很容易。</p>
</blockquote>
<h2 id="一、变量类型"><a href="#一、变量类型" class="headerlink" title="一、变量类型"></a>一、变量类型</h2><h3 id="1-1、类型"><a href="#1-1、类型" class="headerlink" title="1.1、类型"></a>1.1、类型</h3><ul>
<li>值类型（基本数据类型）<ul>
<li>string,number,boolean,undefined,null,symbol 6 种</li>
</ul>
</li>
<li>引用类型<ul>
<li>Object、Array、Funtion。细分的话：有 Object、Array、Funtion、Date、RegExp 等</li>
</ul>
</li>
</ul>
<h3 id="1-2、值类型（基本数据类型）和引用类型区别"><a href="#1-2、值类型（基本数据类型）和引用类型区别" class="headerlink" title="1.2、值类型（基本数据类型）和引用类型区别"></a>1.2、值类型（基本数据类型）和引用类型区别</h3><ol>
<li>内存的分配不同<ul>
<li>基本数据类型存储在栈中。</li>
<li>复杂数据类型存储在堆中，栈中存储的变量，是指向堆中的引用地址</li>
</ul>
</li>
</ol>
<blockquote>
<p>栈（操作系统）：由操作系统自动分配释放 ，存放函数的参数值和局部变量的值等。堆（操作系统）： 一般由程序员分配释放， 若程序员不释放，程序结束时可能由 OS 回收，分配方式倒是类似于链表。其实在堆中一般存放变量是一些对象类型</p>
</blockquote>
<ol start="2">
<li>访问机制不同：值类型按值访问，引用类型按引用访问</li>
<li>复变量时不同(a=b)<ul>
<li>基本数据类型：a=b;是将 b 中保存的原始值的副本赋值给新变量 a，a 和 b 完全独立，互不影响</li>
<li>复杂数据类型：a=b;将 b 保存的对象内存的引用地址赋值给了新变量 a;a 和 b 指向了同一个堆内存地址，其中一个值发生了改变，另一个也会改变。</li>
</ul>
</li>
<li>参数传递的不同(实参/形参)<ul>
<li>函数传参都是按值传递(栈中的存储的内容)：基本数据类型，拷贝的是值；复杂数据类型，拷贝的是引用地址</li>
</ul>
</li>
</ol>
<h3 id="1-3、JavaScript-判断数据类型"><a href="#1-3、JavaScript-判断数据类型" class="headerlink" title="1.3、JavaScript 判断数据类型"></a>1.3、JavaScript 判断数据类型</h3><ol>
<li><p>typeof</p>
<ul>
<li>typeof 运算符 只能 区分 值类型 的 类型，对于引用类型的 对象、数组 区分不出来</li>
<li>注意：typeof null===“object” typeof new Function(); // function 有效</li>
</ul>
</li>
<li><p>instanceof</p>
<ul>
<li>instanceof 运算符返回一个布尔值，表示对象是否为某个构造函数的实例</li>
<li>缺点：instanceof 运算符只能用于对象（纯对象和数组），不适用原始类型（Undefined、Null、Boolean、Number 和 String）的值。</li>
</ul>
</li>
<li><p>Object.prototype.toString.call()</p>
<ul>
<li>可以通过 Object.prototype.toString 方法准确判断某个对象值属于哪种内置类型。</li>
</ul>
</li>
<li><p>constructor</p>
<ul>
<li><p>constructor 属性的作用是，可以得知某个实例对象，到底是哪一个构造函数产生的。</p>
</li>
<li><pre><code class="js">var f = new F();
f.constructor === F; // true
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 二、变量计算（强制类型转换）</span><br><span class="line"></span><br><span class="line">### 2.1、显示强制类型转换</span><br><span class="line"></span><br><span class="line">1. 字符串和数字之间的显示转换</span><br><span class="line"></span><br><span class="line">   - String()</span><br><span class="line"></span><br><span class="line">   - Number()</span><br><span class="line"></span><br><span class="line">   - 日期显示转换为数字(+)</span><br><span class="line"></span><br><span class="line">     - 一元运算符 + 的另一个常见用途是将日期(Date)对象强制类型转换为数字，返回结果为 Unix 时间戳。</span><br><span class="line"></span><br><span class="line">     - &#96;&#96;&#96;js</span><br><span class="line">       var time &#x3D; new Date() + time;</span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><p>奇特的~运算符</p>
<ul>
<li>~x 大致等同于 -(x+1)</li>
<li><del>和 indexOf()一起可以将结果强制类型转换为真/假值，如果 indexOf()返回-1，</del>将其转换为假值 0，其他情况一律转换为真值。</li>
</ul>
</li>
<li><p>~~字位截除</p>
</li>
<li><p>显式解析数字字符串</p>
<ul>
<li>Number()</li>
<li>parseInt()</li>
<li>parseFloat()</li>
</ul>
</li>
</ul>
</li>
<li><p>显式转换为布尔值</p>
<ul>
<li>Boolean()</li>
<li>(!!)显式强制类型转换为布尔值最常用地方法是!!</li>
</ul>
</li>
<li><p>抽象值操作</p>
<ul>
<li>ToString</li>
<li>ToNumber</li>
<li>ToBoolean</li>
</ul>
</li>
</ol>
<h3 id="2-2、隐式强制类型转换"><a href="#2-2、隐式强制类型转换" class="headerlink" title="2.2、隐式强制类型转换"></a>2.2、隐式强制类型转换</h3><ol>
<li><p>转成字符串的</p>
<ul>
<li><p>字符串拼接</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">a + b; <span class="comment">//&quot;1,23,4&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>因为数组的 valueOf()操作无法得到简单基本类型值，于是调用 toString()，因此两个数组变成了”1,2”和”3,4”，+将它们拼接后返回。</p>
</li>
</ul>
</li>
<li><p>隐式强制类型转换为布尔值</p>
<ul>
<li>if()语句中的条件判断表达式</li>
<li>for(..; ..; ..)语句中的条件判断表达式</li>
<li>while()和 do .. while()</li>
<li>? : 中的条件判断表达式</li>
<li>逻辑运算符||和&amp;&amp;左边的操作数</li>
</ul>
</li>
<li><p>布尔值到数字</p>
</li>
<li><p>||和&amp;&amp;(选择器运算符)</p>
<ul>
<li>ES5 规范中说到：&amp;&amp;和||运算符的返回值并不一定是布尔类型，而是两个操作数其中一个的值。<ul>
<li>对于||来说，如果条件判断结果为 true 就返回第一个操作数的值，如果为 false 就返回第二个操作数的值。</li>
<li>对于&amp;&amp;来说，如果条件判断结果为 true 就返回第二个操作数的值，如果为 false 就返回第一个操作数的值。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="2-3、-和-宽松相等和严格相等"><a href="#2-3、-和-宽松相等和严格相等" class="headerlink" title="2.3、== 和 ===(宽松相等和严格相等)"></a>2.3、== 和 ===(宽松相等和严格相等)</h3><blockquote>
<p>区别：==允许在相等比较中进行强制类型转换，而===不允许。</p>
</blockquote>
<h4 id="2-3-1、经典问题【-if-a-1-amp-amp-a-2-amp-amp-a-3-】"><a href="#2-3-1、经典问题【-if-a-1-amp-amp-a-2-amp-amp-a-3-】" class="headerlink" title="2.3.1、经典问题【 if(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) 】"></a>2.3.1、经典问题【 if(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) 】</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>) &#123;</span><br><span class="line">  <span class="comment">//... 使之成立</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="思考方向-—-【利用隐式转换规则】"><a href="#思考方向-—-【利用隐式转换规则】" class="headerlink" title="思考方向 — 【利用隐式转换规则】"></a>思考方向 — 【<strong>利用隐式转换规则</strong>】</h4><p><code>==</code> 操作符在左右数据类型不一致时，会先进行隐式转换。</p>
<p><code>a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3</code> 的值意味着其不可能是基本数据类型。因为如果 a 是 null 或者是 undefined bool 类型，都不可能返回 true。</p>
<p>因此可以推测 a 是复杂数据类型，JS 中复杂数据类型只有 <code>object</code>，回忆一下，Object 转换为原始类型会调用什么方法？</p>
<ul>
<li>如果部署了 <code>[Symbol.toPrimitive]</code> 接口，那么调用此接口，若返回的不是基本数据类型，抛出错误。</li>
<li>如果没有部署[Symbol.toPrimitive]接口，那么根据要转换的类型，先调用 valueOf/toString<ol>
<li>非 Date 类型对象，<code>hint</code> 是 <code>default</code> 时，调用顺序为：<code>valueOf</code> &gt;&gt;&gt; <code>toString</code>，即<code>valueOf</code> 返回的不是基本数据类型，才会继续调用 <code>toString</code>，如果<code>toString</code> 返回的还不是基本数据类型，那么抛出错误。</li>
<li>如果 <code>hint</code> 是 <code>string</code>(Date 对象的 hint 默认是 string) ，调用顺序为：<code>toString</code> &gt;&gt;&gt; <code>valueOf</code>，即<code>toString</code> 返回的不是基本数据类型，才会继续调用 <code>valueOf</code>，如果<code>valueOf</code> 返回的还不是基本数据类型，那么抛出错误。</li>
<li>如果 <code>hint</code> 是 <code>number</code>，调用顺序为： <code>valueOf</code> &gt;&gt;&gt; <code>toString</code></li>
</ol>
</li>
</ul>
<h3 id="7-种解决方案"><a href="#7-种解决方案" class="headerlink" title="7 种解决方案"></a>7 种解决方案</h3><ol>
<li><p>利用 [Symbol.toPrimitive] 接口</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>.toPrimitive]: (<span class="function"><span class="keyword">function</span> (<span class="params">hint</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> i++;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)(),</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>调用 valueOf 接口</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  valueOf: (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> i++;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)(),</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>利用 正则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  reg: <span class="regexp">/\d/g</span>,</span><br><span class="line">  valueOf() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.reg.exec(<span class="number">123</span>)[<span class="number">0</span>];</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>利用数据劫持</p>
<ul>
<li><p>使用 Object.defineProperty 定义的属性，在获取属性时，会调用 get 方法。利用这个特性，我们在 window 对象上定义 a 属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(<span class="built_in">window</span>, <span class="string">&quot;a&quot;</span>, &#123;</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i++;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>利用 ES6 Proxy</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> <span class="built_in">Proxy</span>(</span><br><span class="line">  &#123;&#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    i: <span class="number">1</span>,</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">this</span>.i++;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="built_in">console</span>.log(a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重写数组的 join</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">a.join = a.shift;</span><br><span class="line"><span class="built_in">console</span>.log(a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>利用 with 关键字</p>
</li>
</ol>
<blockquote>
<p>注意：0 == ‘\n’ //true</p>
</blockquote>
<h2 id="三、相关典型问题"><a href="#三、相关典型问题" class="headerlink" title="三、相关典型问题"></a>三、相关典型问题</h2><ul>
<li>JS 中使用 typeof 能得到的哪些类型</li>
<li>何时使用 === 何时使用 ==<ul>
<li>除了判断 <strong>对象属性是否为空</strong> 和 <strong>看是否函数的参数为空</strong> 的情况 ，其余的都用 === 。</li>
</ul>
</li>
<li>JS 中有哪些 内置函数</li>
<li>JS 变量按照 存储方式 分为哪些类型，并描述其特点</li>
<li>如何理解 JSON</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E5%85%A8%E9%9D%A2%E6%80%BB%E7%BB%93/" rel="tag">面试全面总结</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-getOfferthis"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/23/getOfferthis/"
    >this 指向问题</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/03/23/getOfferthis/" class="article-date">
  <time datetime="2020-03-23T09:35:29.000Z" itemprop="datePublished">2020-03-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a> / <a class="article-category-link" href="/categories/JS/this-%E6%8C%87%E5%90%91%E9%97%AE%E9%A2%98/">this 指向问题</a> / <a class="article-category-link" href="/categories/Offer/">Offer</a> / <a class="article-category-link" href="/categories/Offer/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/">字节跳动</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="专题总结：this-指向问题"><a href="#专题总结：this-指向问题" class="headerlink" title="专题总结：this 指向问题"></a>专题总结：this 指向问题</h2><blockquote>
<p>拿到 字节跳动实习生 offer 总结</p>
<p>回馈分享一波自己的知识点总结</p>
</blockquote>
<blockquote>
<p>希望读者依此构建自己的知识树（思维导图）</p>
<p>偷懒一下：可参考我自己总结思维导图 : <a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Interview-mind-map">点这里</a></p>
<p>附带：高频面试题积累文档。 来自于（学长、牛客网等平台）</p>
<p>自己开发的博客地址：<a target="_blank" rel="noopener" href="http://zxinc520.com/">zxinc520.com</a></p>
<p>github 地址: <a target="_blank" rel="noopener" href="https://github.com/ZhChen7">点击</a></p>
</blockquote>
<blockquote>
<p>此篇 js - 【this 指向问题】 知识点： 全部弄懂了，面试很容易。</p>
</blockquote>
<h2 id="一、this-的四条绑定规则"><a href="#一、this-的四条绑定规则" class="headerlink" title="一、this 的四条绑定规则"></a>一、this 的四条绑定规则</h2><ol>
<li><p>默认绑定</p>
<ul>
<li>独立函数调用时，this 指向全局对象（window），如果使用严格模式，那么全局对象无法使用默认绑定， this 绑定至 undefined。</li>
</ul>
</li>
<li><p>隐式绑定</p>
<ul>
<li><p>函数 this 是指向调用者 （隐式指向）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">  foo: foo,</span><br><span class="line">&#125;;</span><br><span class="line">obj.foo(); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>obj1.obj2.foo(); // foo 中的 this 与 obj2 绑定</li>
</ul>
</li>
<li><p>问题：隐式丢失</p>
<ul>
<li>描述：隐式丢失指的是函数中的 this 丢失绑定对象，即它会应用第 1 条的默认绑定规则，从而将 this 绑定到全局对象或者 undefined 上，取决于是否在严格模式下运行。</li>
<li>以下情况会发生隐式丢失<ol>
<li>绑定至上下文对象的函数被赋值给一个新的函数，然后调用这个新的函数时</li>
<li>传入回调函数时</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><p>显式绑定</p>
<ul>
<li>显式绑定的核心是 JavaScript 内置的 call(..) 和 apply(..) 方法，call 和 apply bind 的 this 第一个参数 （显示指向）</li>
</ul>
</li>
<li><p>new 绑定</p>
<ul>
<li>构造函数的 this 是 new 之后的新对象 （构造器）</li>
</ul>
</li>
</ol>
<h2 id="二、call-bind-apply"><a href="#二、call-bind-apply" class="headerlink" title="二、call bind apply"></a>二、call bind apply</h2><blockquote>
<p>改变函数执行时的上下文（改变函数运行时的 this 指向）</p>
</blockquote>
<h3 id="2-1、apply"><a href="#2-1、apply" class="headerlink" title="2.1、apply"></a>2.1、apply</h3><ul>
<li><p>第二个参数为数组</p>
</li>
<li><p>自定义实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义apply函数</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.apply1 = <span class="function"><span class="keyword">function</span> (<span class="params">obj, arg</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//context为null或者是undefined时,设置默认值</span></span><br><span class="line">  <span class="keyword">if</span> (!obj) &#123;</span><br><span class="line">    obj = <span class="keyword">typeof</span> <span class="built_in">window</span> === <span class="string">&quot;undefined&quot;</span> ? <span class="built_in">global</span> : <span class="built_in">window</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  obj.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="literal">null</span>;</span><br><span class="line">  <span class="comment">//undefined 或者 是 null 不是 Iterator 对象，不能被 ...</span></span><br><span class="line">  <span class="keyword">if</span> (arg === <span class="literal">undefined</span> || arg === <span class="literal">null</span>) &#123;</span><br><span class="line">    result = obj.fn(arg);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result = obj.fn(...arg);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span> obj.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-2、call"><a href="#2-2、call" class="headerlink" title="2.2、call"></a>2.2、call</h3><ul>
<li><p>第二个参数为参数列表</p>
</li>
<li><p>自定义实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.call1 = <span class="function"><span class="keyword">function</span> (<span class="params">obj, ...arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj) &#123;</span><br><span class="line">    obj = <span class="keyword">typeof</span> <span class="built_in">window</span> === <span class="string">&quot;undefined&quot;</span> ? <span class="built_in">global</span> : <span class="built_in">window</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  obj.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="literal">null</span>;</span><br><span class="line">  result = obj.fn(...arg);</span><br><span class="line">  <span class="keyword">delete</span> obj.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-3、bind"><a href="#2-3、bind" class="headerlink" title="2.3、bind"></a>2.3、bind</h3><ul>
<li><p>特点</p>
<ul>
<li>返回一个函数</li>
<li>可以传入参数（使用 bind 时和 bind 新生成的函数都可以传参）</li>
<li>当 bind 返回的函数作为构造函数的时候，bind 时指定的 this 值会失效，但传入的参数依然生效</li>
</ul>
</li>
<li><p>注意：bind 这个方法在 IE6~8 下不兼容</p>
</li>
<li><p>自定义实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind1 = <span class="function"><span class="keyword">function</span> (<span class="params">obj, ...arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj) &#123;</span><br><span class="line">    obj = <span class="keyword">typeof</span> <span class="built_in">window</span> === <span class="string">&quot;undefined&quot;</span> ? <span class="built_in">global</span> : <span class="built_in">window</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">let</span> args = arg;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  f.prototype = <span class="built_in">this</span>.prototype;</span><br><span class="line">  <span class="keyword">let</span> bound = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = [...args, ...arguments];</span><br><span class="line">    <span class="keyword">let</span> _this = <span class="built_in">this</span> <span class="keyword">instanceof</span> f ? <span class="built_in">this</span> : obj;</span><br><span class="line">    <span class="keyword">return</span> self.apply(_this, res);</span><br><span class="line">  &#125;;</span><br><span class="line">  bound.prototype = <span class="keyword">new</span> f();</span><br><span class="line">  <span class="keyword">return</span> bound;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-4、区别"><a href="#2-4、区别" class="headerlink" title="2.4、区别"></a>2.4、区别</h3><blockquote>
<p>call 和 apply 改变了函数的 this 上下文后便执行该函数,而 bind 则是返回改变了上下文后的一个函数。</p>
</blockquote>
<h2 id="三、相关题目"><a href="#三、相关题目" class="headerlink" title="三、相关题目"></a>三、相关题目</h2><ol>
<li><p>怎么利用 call、apply 来求一个数组中最大或者最小值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">19</span>, <span class="number">6</span>];</span><br><span class="line"><span class="built_in">Math</span>.max.call(<span class="literal">null</span>, ...arr);</span><br><span class="line"><span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, arr);</span><br><span class="line"><span class="keyword">var</span> fn = <span class="built_in">Math</span>.max.bind(<span class="literal">null</span>, ...arr);</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>
</li>
<li><p>如何利用 call、apply 来做继承</p>
</li>
<li><p>apply、call、bind 的区别和主要应用场景</p>
<ol>
<li>将类数组/含有 length 属性的对象转化为数组</li>
<li>求数组中的最大和最小值</li>
<li>数组追加</li>
<li>利用 call 和 apply 做继承</li>
<li>判断变量类型</li>
</ol>
</li>
</ol>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E5%85%A8%E9%9D%A2%E6%80%BB%E7%BB%93/" rel="tag">面试全面总结</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-getOffercss"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/23/getOffercss/"
    >css 面试考点全面总结</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/03/23/getOffercss/" class="article-date">
  <time datetime="2020-03-23T09:22:32.000Z" itemprop="datePublished">2020-03-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Offer/">Offer</a> / <a class="article-category-link" href="/categories/Offer/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/">字节跳动</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="css-面试考点全面总结"><a href="#css-面试考点全面总结" class="headerlink" title="css 面试考点全面总结"></a>css 面试考点全面总结</h2><blockquote>
<p>拿到 字节跳动实习生 offer 总结</p>
<p>回馈分享一波自己的知识点总结</p>
</blockquote>
<blockquote>
<p>希望读者依此构建自己的知识树（思维导图）</p>
<p>偷懒一下：可参考我自己总结思维导图 : <a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Interview-mind-map">点这里</a></p>
<p>附带：高频面试题积累文档。 来自于（学长、牛客网等平台）</p>
<p>自己开发的博客地址：<a target="_blank" rel="noopener" href="http://zxinc520.com/">zxinc520.com</a></p>
<p>github 地址: <a target="_blank" rel="noopener" href="https://github.com/ZhChen7">点击</a></p>
</blockquote>
<blockquote>
<p>此篇 css 考点 共总结 17 大知识点： 全部弄懂了，面试很容易。</p>
</blockquote>
<h3 id="1、盒模型-box-model"><a href="#1、盒模型-box-model" class="headerlink" title="1、盒模型(box model)"></a>1、盒模型(box model)</h3><h4 id="1-1、是什么？"><a href="#1-1、是什么？" class="headerlink" title="1.1、是什么？"></a>1.1、是什么？</h4><blockquote>
<p>网页设计中 css 技术所使用的一种思维模型</p>
</blockquote>
<h4 id="1-2、为什么会出现不同模型"><a href="#1-2、为什么会出现不同模型" class="headerlink" title="1.2、为什么会出现不同模型"></a>1.2、为什么会出现不同模型</h4><p>当年微软的 IE 浏览器占据超过 80%市场份额的时候，想自己独立制定一套浏览器标准，其中就包括 IE 的盒模型，但是有很多公司不同意 IE 的做法，他们遵循的是 W3C 的标准来定制浏览器，也就造成了现在浏览器不同的 CSS 盒模型，但是仍有很多老网站采用的是老 IE 的标准(怪异模式)，因此很多浏览器保留了 IE 的怪异模式。</p>
<h4 id="1-3、盒模型的两种标准"><a href="#1-3、盒模型的两种标准" class="headerlink" title="1.3、盒模型的两种标准"></a>1.3、盒模型的两种标准</h4><ul>
<li>标准模型<ul>
<li>元素宽高＝内容（content）的宽高</li>
</ul>
</li>
<li>IE 模型<ul>
<li>元素宽高＝内容（content）＋填充（padding）＋边框 （border） 的总宽高</li>
</ul>
</li>
</ul>
<h4 id="1-4、组成"><a href="#1-4、组成" class="headerlink" title="1.4、组成"></a>1.4、组成</h4><ul>
<li>content</li>
<li>padding</li>
<li>border</li>
<li>margin</li>
</ul>
<h4 id="1-5、CSS3-中标准或者怪异模式之间的切换（box-sizing）"><a href="#1-5、CSS3-中标准或者怪异模式之间的切换（box-sizing）" class="headerlink" title="1.5、CSS3 中标准或者怪异模式之间的切换（box-sizing）"></a>1.5、CSS3 中标准或者怪异模式之间的切换（box-sizing）</h4><ul>
<li>box-sizing ： content-box 采用标准模式 也是默认样式</li>
<li>box-sizing： border-box 采用 ie 怪异模式</li>
</ul>
<h3 id="2、IFC-与-BFC"><a href="#2、IFC-与-BFC" class="headerlink" title="2、IFC 与 BFC"></a>2、IFC 与 BFC</h3><h4 id="2-1、BFC"><a href="#2-1、BFC" class="headerlink" title="2.1、BFC"></a>2.1、BFC</h4><blockquote>
<p>BFC | 块级格式化上下文（Block Formatting Context）</p>
</blockquote>
<h5 id="BFC-布局规则"><a href="#BFC-布局规则" class="headerlink" title="BFC 布局规则"></a>BFC 布局规则</h5><ol>
<li><p>内部的 Box 会在垂直方向，一个接一个地放置。</p>
</li>
<li><p>Box 垂直方向的距离由 margin 决定。属于同一个 BFC 的两个相邻 Box 的 margin 会发生重叠</p>
</li>
<li><p>每个元素的左外边缘（margin-left)， 与包含块的左边（contain box left）相接触(对于从左往右的格式化，否则相反)。即使存在浮动也是如此。除非这个元素自己形成了一个新的 BFC。</p>
</li>
<li><p>BFC 的区域不会与 float box 重叠。</p>
</li>
<li><p>BFC 就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。</p>
</li>
<li><p>计算 BFC 的高度时，浮动元素也参与计算</p>
</li>
</ol>
<h5 id="BFC-使用场景"><a href="#BFC-使用场景" class="headerlink" title="BFC 使用场景"></a>BFC 使用场景</h5><ul>
<li>外边距折叠问题</li>
<li>清除浮动</li>
</ul>
<h5 id="触发-BFC-的方法"><a href="#触发-BFC-的方法" class="headerlink" title="触发 BFC 的方法"></a>触发 BFC 的方法</h5><ul>
<li>float 属性不为 none</li>
<li>元素的 position 为 absolute 或 fixed</li>
<li>display 属性为下列之一:table-cell | table-caption| inline-block | flex | inline-flex</li>
<li>overflow 属性不为 visible</li>
</ul>
<h4 id="2-2、IFC"><a href="#2-2、IFC" class="headerlink" title="2.2、IFC"></a>2.2、IFC</h4><blockquote>
<p>IFC |行内格式化上下文（Inline Formatting Context）</p>
</blockquote>
<h5 id="IFC-布局规则"><a href="#IFC-布局规则" class="headerlink" title="IFC 布局规则"></a>IFC 布局规则</h5><p>在行内格式化上下文中，框(boxes)一个接一个地水平排列，起点是包含块的顶部。水平方向上的 margin，border 和 padding 在框之间得到保留。框在垂直方向上可以以不同的方式对齐：它们的顶部或底部对齐，或根据其中文字的基线对齐。包含那些框的长方形区域，会形成一行，叫做行框。</p>
<h3 id="3、margin-塌陷及合并问题"><a href="#3、margin-塌陷及合并问题" class="headerlink" title="3、margin 塌陷及合并问题"></a>3、margin 塌陷及合并问题</h3><blockquote>
<p>注意：margin 塌陷问题和合并问题都只对垂直方向有效</p>
</blockquote>
<h4 id="3-1、margin-塌陷问题"><a href="#3-1、margin-塌陷问题" class="headerlink" title="3.1、margin 塌陷问题"></a>3.1、margin 塌陷问题</h4><ul>
<li><p>描述</p>
<p>这个问题是一个经典的浏览器内核问题。具体表现是当两个元素嵌套到一起时，外层盒模型的 margin-top 取两个元素中 margin-top 较大的值。</p>
<p>因为在正常的情况下内层元素是相对于外层元素进行移动，但是这时内层元素却相对于整个文档进行移动，好像外层元素没有“棚顶”一样，因此叫 margin 塌陷问题。</p>
</li>
<li><p>解决方法</p>
<ol>
<li><p>给外层元素认为加一个“棚顶”:border。</p>
<p>这种方法虽然能够解决问题，但是在日常开发中我们不使用它，因为他在外观上对元素进行了改变。</p>
</li>
<li><p>触发 BFC</p>
<ul>
<li>float 属性不为 none</li>
<li>元素的 position 为 absolute 或 fixed</li>
<li>display 属性为下列之一:table-cell | table-caption| inline-block | flex | inline-flex</li>
<li>overflow 属性不为 visible</li>
</ul>
</li>
</ol>
</li>
</ul>
<h4 id="3-2、margin-合并问题"><a href="#3-2、margin-合并问题" class="headerlink" title="3.2、margin 合并问题"></a>3.2、margin 合并问题</h4><ul>
<li>描述：具体表现为两个元素并列时，两者相隔的外边距取的是两者所设置 margin 的最大值。</li>
<li>margin 合并问题解决办法<ul>
<li>我们仍然用 bfc 来解决。可以给其中一个元素包起来，在外层元素中设置 bfc 渲染规则。此时这个元素的渲染规则就改变了，就能够解决这个问题。</li>
</ul>
</li>
</ul>
<h3 id="4、float"><a href="#4、float" class="headerlink" title="4、float"></a>4、float</h3><h4 id="4-1、浮动模型"><a href="#4-1、浮动模型" class="headerlink" title="4.1、浮动模型"></a>4.1、浮动模型</h4><p>块状元素这么霸道都是独占一行，如果现在我们想让两个块状元素并排显示，怎么办呢？不要着急，设置元素浮动就可以实现这一愿望。</p>
<p>任何元素在默认情况下是不能浮动的，但可以通过 float 属性将元素定义为浮动，如 div、p、table、img 等元素都可以被定义为浮动。通过下面代码实现两个 div 元素在一行显示。</p>
<h4 id="4-2、清除浮动"><a href="#4-2、清除浮动" class="headerlink" title="4.2、清除浮动"></a>4.2、清除浮动</h4><ol>
<li><p>浮动元素后面的同级标签加 clear: both | left | right 属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">推荐使用：<span class="selector-tag">after</span>（伪类） 伪类原理：相当于在父元素里添加一个子元素（默认内联元素），用来清除容器内的浮动元素。                                       	<span class="selector-tag">display</span>: &quot;<span class="selector-tag">block</span>&quot;;</span><br><span class="line">    <span class="selector-tag">clear</span><span class="selector-pseudo">:both</span>;</span><br><span class="line">    <span class="selector-tag">height</span><span class="selector-pseudo">:0</span>;</span><br><span class="line">    <span class="selector-tag">content</span>: &quot;&quot;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>触发 BFC</p>
<ul>
<li>float 属性不为 none</li>
<li>元素的 position 为 absolute 或 fixed</li>
<li>display 属性为下列之一:table-cell | table-caption| inline-block | flex | inline-flex</li>
<li>overflow 属性不为 visible</li>
</ul>
</li>
</ol>
<h3 id="5、flex"><a href="#5、flex" class="headerlink" title="5、flex"></a>5、flex</h3><h4 id="5-1、描述"><a href="#5-1、描述" class="headerlink" title="5.1、描述"></a>5.1、描述</h4><p>2009 年，W3C 提出了一种新的方案—-Flex 布局，可以简便、完整、响应式地实现各种页面布局。目前，它已经得到了所有浏览器的支持，这意味着，现在就能很安全地使用这项功能。</p>
<p>Flex 布局将成为未来布局的首选方案。</p>
<p>Flex 是 Flexible Box 的缩写，意为”弹性布局”，用来为盒状模型提供最大的灵活。</p>
<p>任何一个容器都可以指定为 Flex 布局。</p>
<h4 id="5-2、容器的属性"><a href="#5-2、容器的属性" class="headerlink" title="5.2、容器的属性"></a>5.2、容器的属性</h4><ul>
<li>flex-direction<ul>
<li>row | row-reverse | column | column-reverse</li>
</ul>
</li>
<li>flex-wrap<ul>
<li>flex-wrap: nowrap | wrap | wrap-reverse;</li>
</ul>
</li>
<li>flex-flow<ul>
<li>属性是 flex-direction 和 flex-wrap 的简写</li>
</ul>
</li>
<li>justify-content<ul>
<li>justify-content: flex-start | flex-end | center | space-between | space-around;</li>
</ul>
</li>
<li>align-items<ul>
<li>align-items: flex-start | flex-end | center | baseline | stretch;</li>
</ul>
</li>
<li>align-content<ul>
<li>align-content: flex-start | flex-end | center | space-between | space-around | stretch;</li>
</ul>
</li>
</ul>
<h3 id="6、CSS-浏览器兼容性的-4-个解决方案"><a href="#6、CSS-浏览器兼容性的-4-个解决方案" class="headerlink" title="6、CSS 浏览器兼容性的 4 个解决方案"></a>6、CSS 浏览器兼容性的 4 个解决方案</h3><ul>
<li><p>浏览器 CSS 样式初始化</p>
</li>
<li><p>浏览器私有属性</p>
<ul>
<li><p>我们经常会在某个 CSS 的属性前添加一些前缀，比如-webkit- ，-moz- ，-ms-，这些就是浏览器的私有属性。 -webkit- (谷歌, Safari, 新版 Opera 浏览器, 以及几乎所有 iOS 系统中的浏览器(包括 iOS 系统中的火狐浏览器); 简单的说，所有基于 WebKit 内核的浏览器)</p>
<p>-moz- (火狐浏览器)</p>
<p>-o- (旧版 Opera 浏览器)</p>
<p>-ms- (IE 浏览器 和 Edge 浏览器)</p>
</li>
<li><p>对于私有属性的顺序要注意，把标准写法放到最后，兼容性写法放到前面</p>
</li>
</ul>
</li>
<li><p>CSS hack 语法</p>
<ul>
<li><p>有时我们需要针对不同的浏览器或不同版本写特定的 CSS 样式，这种针对不同的浏览器/不同版本写相应的 CSS code 的过程，叫做 CSS hack!</p>
</li>
<li><p>例如 IE：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> &lt;!--[<span class="keyword">if</span> &lt;keywords&gt;? IE &lt;version&gt;?]&gt;</span><br><span class="line">	 代码块，可以是html，css，js</span><br><span class="line">&lt;![endif]--&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>自动化插件</p>
<ul>
<li>Autoprefixer 是一款自动管理浏览器前缀的插件，它可以解析 CSS 文件并且添加浏览器前缀到 CSS 内容里，使用 Can I Use（caniuse 网站）的数据来决定哪些前缀是需要的。</li>
<li>目前 webpack、gulp、grunt 都有相应的插件，如果还没有使用，那就赶紧应用到我们的项目中吧，别再让 CSS 兼容性浪费你的时间！</li>
</ul>
</li>
</ul>
<h3 id="7、position（定位）"><a href="#7、position（定位）" class="headerlink" title="7、position（定位）"></a>7、position（定位）</h3><h4 id="7-1、文档流"><a href="#7-1、文档流" class="headerlink" title="7.1、文档流"></a>7.1、文档流</h4><p>简单说就是元素按照其在 HTML 中的位置顺序决定排布的过程。HTML 的布局机制就是用文档流模型的，即块元素（block）独占一行，内联元素（inline），不独占一行。</p>
<p>一般使用 margin 是用来隔开元素与元素的间距；padding 是用来隔开元素与内容的间隔。margin 用于布局分开元素使元素与元素互不相干；padding 用于元素与内容之间的间隔，让内容（文字）与（包裹）元素之间有一段“距离”。</p>
<p>只要不是 float 和绝对定位方式布局的，都在文档流里面。</p>
<h4 id="7-2、属性"><a href="#7-2、属性" class="headerlink" title="7.2、属性"></a>7.2、属性</h4><ul>
<li>static</li>
<li>relative(相对定位）</li>
<li>absolute</li>
<li>fixed</li>
<li>z-index<ul>
<li>z-index 指定了一个元素及其子元素的 z-order，元素之间有重叠的时候，z-index 可以决定让哪一个元素在上方。通常来说 z-index 较大的元素会覆盖较小的一个。仅对定位的元素有效。 元素之间重叠默认的顺序是后面的元素会盖住前面的元素。如果设置了 z-index 可以改变这个顺序。但只对同级的元素有效。父元素永远在子元素后面。</li>
</ul>
</li>
</ul>
<h3 id="8、行内元素-和-块级元素"><a href="#8、行内元素-和-块级元素" class="headerlink" title="8、行内元素 和 块级元素"></a>8、行内元素 和 块级元素</h3><h5 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h5><ul>
<li>块元素，总是在新行上开始；内联元素，和其他元素在一行</li>
<li>块元素，能容纳其他块元素或者内联元素；内联元素，只能容纳文本或其他内联元素</li>
<li>块元素中高度，行高以及顶和底边距都可以控制；内联元素中高，行高及顶和底边距不可改变。</li>
</ul>
<h3 id="9、Sass-Scss、Less、stylus"><a href="#9、Sass-Scss、Less、stylus" class="headerlink" title="9、Sass/Scss、Less、stylus"></a>9、Sass/Scss、Less、stylus</h3><h4 id="9-1、CSS-预处理器"><a href="#9-1、CSS-预处理器" class="headerlink" title="9.1、CSS 预处理器"></a>9.1、CSS 预处理器</h4><ul>
<li><p>概念</p>
<p>CSS 预处理器用一种专门的编程语言，进行 Web 页面样式设计，然后再编译成正常的 CSS 文件，以供项目使用。</p>
</li>
<li><p>优点</p>
<p>虽然各种预处理器功能强大，但使用最多的，还是以下特性：变量（variables），代码混合（ mixins），嵌套（nested rules）以及 代码模块化(Modules)。</p>
</li>
</ul>
<h4 id="9-2、区别"><a href="#9-2、区别" class="headerlink" title="9.2、区别"></a>9.2、区别</h4><ul>
<li><p>编译环境不一样</p>
<p>Sass 的安装需要 Ruby 环境，是在服务端处理的，而 Less 是需要引入 less.js 来处理 Less 代码输出 css 到浏览器，也可以在开发环节使用 Less，然后编译成 css 文件，直接放到项目中，也有 Less.app、SimpleLess、CodeKit.app 这样的工具，也有在线编译地址。Stylus 需要安装 node，然后安装最新的 stylus 包即可使用</p>
</li>
<li><p>变量符不一样</p>
<p>Less 是@，而 Scss 是$， Stylus样式中声明变量没有任何限定，你可以使用“$”符号开始。</p>
</li>
<li><p>输出设置</p>
</li>
<li><p>处理条件语句</p>
</li>
<li><p>引用外部 CSS 文件</p>
</li>
<li><p>Sass 和 Less 的工具库不同</p>
</li>
</ul>
<h3 id="10、css3-动画"><a href="#10、css3-动画" class="headerlink" title="10、css3 动画"></a>10、css3 动画</h3><h4 id="10-1、常用特效-变换（transform）"><a href="#10-1、常用特效-变换（transform）" class="headerlink" title="10.1、常用特效/变换（transform）"></a>10.1、常用特效/变换（transform）</h4><ul>
<li>scale（2D 缩放）</li>
<li>rotate（2D 旋转）</li>
<li>translate（2D 位移）</li>
<li>skew（2D 倾斜）</li>
</ul>
<h4 id="10-2、animation"><a href="#10-2、animation" class="headerlink" title="10.2、animation"></a>10.2、animation</h4><ul>
<li><p>属性</p>
<ul>
<li>animation-name ：规定需要绑定到选择器的 keyframe 名称。</li>
<li>animation-duration：规定完成动画所花费的时间，以秒或毫秒计。</li>
<li>animation-timing-function：规定动画的速度曲线。</li>
<li>animation-delay ：规定在动画开始之前的延迟。</li>
<li>animation-iteration-count：规定动画应该播放的次数。</li>
<li>animation-direction ：规定是否应该轮流反向播放动画。</li>
<li>animation-fill-mode ：规定动画在播放之前或之后，其动画效果是否可见</li>
</ul>
</li>
<li><p>简写：</p>
<p>animation: name duration timing-function delay iteration-count direction fill-mode;</p>
</li>
<li><p>举例：</p>
<p>animation: wang 3s linear 1s infinite alternate forwards ;</p>
</li>
</ul>
<h4 id="10-3、keyframes"><a href="#10-3、keyframes" class="headerlink" title="10.3、keyframes"></a>10.3、keyframes</h4><ul>
<li><p>这个属性用来定义一系列关键帧。也就是在动画运行的全过程中的一个个中间点。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> zoomIn &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  60% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="11、居中布局"><a href="#11、居中布局" class="headerlink" title="11、居中布局"></a>11、居中布局</h3><ol>
<li><p>使用 Flex</p>
</li>
<li><p>使用绝对定位</p>
</li>
<li><p>inline-block</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.parent2&#123; text-align: center; &#125; .parent2 span&#123; display: inline-block;</span><br><span class="line">height:50% &#125; .parent2 .child&#123; display: inline-block; color: #fff; &#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent2&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span>hello world-2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 table 和 table-cell</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent1</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parent1</span> <span class="selector-class">.child</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table-cell;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>子元素是单行文本</p>
<p>设置父元素的 text-align 和 line-height = height</p>
</li>
<li><p>利用 grid 布局</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">justify-self</span>: center;</span><br><span class="line">  <span class="attribute">align-self</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>利用绝对定位和 margin:auto</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 无需知道被居中元素的宽高 */</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="12、等高布局"><a href="#12、等高布局" class="headerlink" title="12、等高布局"></a>12、等高布局</h3><ol>
<li><p>flex 布局</p>
</li>
<li><p>使用负 margin-bottom 和正 padding-bottom 对冲实现</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.Article</span> &gt; <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span> -<span class="number">9999px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">9999px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>模仿 table 布局</p>
<p>父：display: table; 子： display: table-cell;</p>
</li>
<li><p>grid 布局</p>
</li>
</ol>
<h3 id="13、三栏布局"><a href="#13、三栏布局" class="headerlink" title="13、三栏布局"></a>13、三栏布局</h3><h4 id="13-1、特点"><a href="#13-1、特点" class="headerlink" title="13.1、特点"></a>13.1、特点</h4><ul>
<li>两侧宽度固定，中间宽度自适应</li>
<li>中间部分在 DOM 结构上优先，以便先行渲染</li>
<li>都需要一个格外的 Div.container</li>
<li>允许任意列的高度最高</li>
</ul>
<h4 id="13-2、圣杯布局"><a href="#13-2、圣杯布局" class="headerlink" title="13.2、圣杯布局"></a>13.2、圣杯布局</h4><ul>
<li>特点 ：使用了相对定位</li>
<li>优势：在 DOM 结构上显得更加值观和自然</li>
</ul>
<p><strong>实现</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        *&#123;</span><br><span class="line">            padding: 0;</span><br><span class="line">            margin: 0;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.container</span>&#123;</span></span><br><span class="line">            overflow: hidden;</span><br><span class="line">            padding: 0 100px 0 100px;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.middle</span>,<span class="selector-class">.left</span>,<span class="selector-class">.right</span>&#123;</span></span><br><span class="line">            position: relative;</span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.left</span>&#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background: red;</span><br><span class="line">            margin-left: -100%;</span><br><span class="line">            left: -100px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.right</span>&#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background: green;</span><br><span class="line">            margin-left: -100px;</span><br><span class="line">            right: -100px;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.middle</span>&#123;</span></span><br><span class="line">            background: blue;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 300px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;middle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="13-3、双飞翼布局"><a href="#13-3、双飞翼布局" class="headerlink" title="13.3、双飞翼布局"></a>13.3、双飞翼布局</h4><ul>
<li>特点：不需要定位，只用了浮动和负边距</li>
<li>优势<ul>
<li>不需要使用定位，所以更加简洁</li>
<li>允许的页面最小宽度通常比圣杯布局更小</li>
</ul>
</li>
</ul>
<p><strong>实现：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">       <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">           overflow: hidden;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="css">       <span class="selector-class">.middle</span>, <span class="selector-class">.left</span>, <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">           float: left;</span><br><span class="line">           height: 100px;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="css">       <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">           width: 100px;</span><br><span class="line">           background: red;</span><br><span class="line">           margin-left: -100%;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="css">       <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">           width: 100px;</span><br><span class="line">           background: blue;</span><br><span class="line">           margin-left: -100px;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="css">       <span class="selector-class">.middle</span> &#123;</span></span><br><span class="line">           width: 100%;</span><br><span class="line">           background: aqua;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="css">       <span class="selector-class">.inner</span> &#123;</span></span><br><span class="line">           margin: 0 100px;</span><br><span class="line">       &#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;middle&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span>middle<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="13-4、区别"><a href="#13-4、区别" class="headerlink" title="13.4、区别"></a>13.4、区别</h4><p>两者都是为了不让左右俩不遮住 middle，经典圣杯布局通过父亲 padding 给左右俩腾位置从而不会遮住 middle 内容，而双飞翼是 middle 设置 margin，限制内部内容区域，从而左右俩遮的地方不会影响到 middle 内容</p>
<p>对于三栏布局，modern solution 是 flex box/ grid 布局，这两者可以轻松实现 mobile-friendly 的方案，也可以控制顺序，middle 依然可以先渲染，2019 年兼容性不错了，如果 APP 无视 IE，这是优选</p>
<h3 id="14、多栏布局"><a href="#14、多栏布局" class="headerlink" title="14、多栏布局"></a>14、多栏布局</h3><h4 id="14-1、栅格系统（grid-systems）"><a href="#14-1、栅格系统（grid-systems）" class="headerlink" title="14.1、栅格系统（grid systems）"></a>14.1、栅格系统（grid systems）</h4><ul>
<li>特点 ：利用浮动实现的多栏布局</li>
<li>表现 ： Bootstrap</li>
</ul>
<h4 id="14-2、多列布局"><a href="#14-2、多列布局" class="headerlink" title="14.2、多列布局"></a>14.2、多列布局</h4><ul>
<li><p>特点：将内容按指定的列数排列</p>
</li>
<li><p>表现 ：报纸排版</p>
</li>
<li><p>使用方式： 通过 css3 的 column</p>
<ul>
<li>IE10 及以上和其它现代浏览器</li>
<li>但 -webkit- 以及 -moz- 前缀不能省略</li>
<li>比 flex 弹性布局更稳定、更兼容</li>
</ul>
</li>
<li><p>语法</p>
<ul>
<li><p>columns: &lt;’column-width’&gt; || &lt;’column-count’&gt;</p>
<p>设置对象的列数和每列的宽度。复合属性。</p>
</li>
<li><p>column-width ：设置对象的宽度</p>
</li>
<li><p>column-count ：用来定义对象中的列数，使用数字 1-10 表示</p>
</li>
<li><p>column-gap ：设置列与列之间的间距</p>
</li>
<li><p>column-rule：&lt;’ column-rule-width ‘&gt; || &lt;’ column-rule-style ‘&gt; || &lt;’ column-rule-color ‘&gt;</p>
<ul>
<li>设置对象的列与列之间的边框。复合属性</li>
<li>column-rule: 10px solid #090;</li>
</ul>
</li>
<li><p>column-fill：auto | balance</p>
<ul>
<li>设置对象所有列的高度是否统一</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="15、弹性布局（Flexbox）"><a href="#15、弹性布局（Flexbox）" class="headerlink" title="15、弹性布局（Flexbox）"></a>15、弹性布局（Flexbox）</h3><ul>
<li>CSS3 引入的新模式<ul>
<li>用来为盒装模型提供的最大的灵活性</li>
<li>目前已经得到了所有现代浏览器的支持</li>
</ul>
</li>
<li>优势<ul>
<li>轻松实现视图大小变化时对元素的相对位置的大小的保持</li>
<li>减少了对浮动布局的依赖以及重置元素的大小</li>
</ul>
</li>
<li>注意<ul>
<li>Webkit 内核的浏览器，必须加上 -webkit 前缀 display：-webkit-flex</li>
<li>子元素的 float、clear 和 vertical-align 属性失效</li>
</ul>
</li>
</ul>
<h3 id="16、流式布局"><a href="#16、流式布局" class="headerlink" title="16、流式布局"></a>16、流式布局</h3><ul>
<li>主要靠百分比进行排版</li>
<li>对应布局<ul>
<li>瀑布流布局<ul>
<li>表现 ：参差不齐的多栏布局</li>
<li>实现方式 ： 同样可以用 column 实现</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="17、响应式布局"><a href="#17、响应式布局" class="headerlink" title="17、响应式布局"></a>17、响应式布局</h3><ul>
<li>特点<ul>
<li>一个网站能够兼容多个终端</li>
<li>解决不用设备之间分辨率之间的兼容问题</li>
</ul>
</li>
<li>实现方式<ul>
<li>css3 的媒体查询</li>
<li>检测设备屏幕大小，通过 css 媒体查询来有针对性的更改页面的布局</li>
</ul>
</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E5%85%A8%E9%9D%A2%E6%80%BB%E7%BB%93/" rel="tag">面试全面总结</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-getOfferPrototypesandprototypechains"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/23/getOfferPrototypesandprototypechains/"
    >原型和原型链</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/03/23/getOfferPrototypesandprototypechains/" class="article-date">
  <time datetime="2020-03-23T09:18:21.000Z" itemprop="datePublished">2020-03-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a> / <a class="article-category-link" href="/categories/JS/JS-%E4%B8%89%E5%BA%A7%E5%A4%A7%E5%B1%B1/">JS 三座大山</a> / <a class="article-category-link" href="/categories/Offer/">Offer</a> / <a class="article-category-link" href="/categories/Offer/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/">字节跳动</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="JavaScript-原型和原型链"><a href="#JavaScript-原型和原型链" class="headerlink" title="JavaScript 原型和原型链"></a>JavaScript 原型和原型链</h2><blockquote>
<p>拿到 字节跳动实习生 offer 总结</p>
<p>回馈分享一波自己的知识点总结</p>
</blockquote>
<blockquote>
<p>希望读者依此构建自己的知识树（思维导图）</p>
<p>偷懒一下：可参考我自己总结思维导图 : <a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Interview-mind-map">点这里</a></p>
<p>附带：高频面试题积累文档。 来自于（学长、牛客网等平台）</p>
<p>自己开发的博客地址：<a target="_blank" rel="noopener" href="http://zxinc520.com/">zxinc520.com</a></p>
<p>github 地址: <a target="_blank" rel="noopener" href="https://github.com/ZhChen7">点击</a></p>
</blockquote>
<blockquote>
<p>此篇 js - 【原型和原型链】 知识点： 全部弄懂了，面试很容易。</p>
</blockquote>
<h2 id="一、原型和原型定义"><a href="#一、原型和原型定义" class="headerlink" title="一、原型和原型定义"></a>一、原型和原型定义</h2><h3 id="1-1、背景"><a href="#1-1、背景" class="headerlink" title="1.1、背景"></a>1.1、背景</h3><p>JavaScript 中除了基础类型外的数据类型，都是对象（引用类型）。但是由于其没有 类（class，ES6 引入了 class，但其只是语法糖）的概念，如何将所有对象联系起来就成立一个问题，于是就有了原型和原型链的概念。</p>
<h3 id="1-2、原型是什么？"><a href="#1-2、原型是什么？" class="headerlink" title="1.2、原型是什么？"></a>1.2、原型是什么？</h3><blockquote>
<p>原型是一个 prototype 对象，用于表示对象之间的关系。</p>
</blockquote>
<h3 id="1-3、原型链"><a href="#1-3、原型链" class="headerlink" title="1.3、原型链"></a>1.3、原型链</h3><p>每个实例对象（ object ）都有一个私有属性（称之为 <strong>proto</strong> ）指向它的构造函数的原型对象（prototype ）。该原型对象也有一个自己的原型对象( <strong>proto</strong> ) ，层层向上直到一个对象的原型对象为 null。根据定义，null 没有原型，并作为这个原型链中的最后一个环节。以上一整个原型与原型层层相链接的过程即为原型链</p>
<h3 id="1-4、公式"><a href="#1-4、公式" class="headerlink" title="1.4、公式"></a>1.4、公式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 对象 = <span class="keyword">new</span> 函数();</span><br><span class="line">对象.__proto__ === 对象的构造函数.prototype;</span><br></pre></td></tr></table></figure>

<h2 id="二、7-大继承写法"><a href="#二、7-大继承写法" class="headerlink" title="二、7 大继承写法"></a>二、7 大继承写法</h2><blockquote>
<p>常考点【熟练掌握】</p>
</blockquote>
<h3 id="2-1、原型链继承"><a href="#2-1、原型链继承" class="headerlink" title="2.1、原型链继承"></a>2.1、原型链继承</h3><ul>
<li><p>原型链继承的基本思想：是利用原型让一个引用类型继承另一个引用类型的属性和方法。</p>
<p>如 SubType.prototype = new SuperType();</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&quot;Yvette&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.age = <span class="number">22</span>;</span><br><span class="line">&#125;</span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br></pre></td></tr></table></figure>
</li>
<li><p>缺点</p>
<ol>
<li>通过原型来实现继承时，原型会变成另一个类型的实例，原先的实例属性变成了现在的原型属性，该原型的引用类型属性会被所有的实例共享</li>
<li>在创建子类型的实例时，不能向超类型的构造函数中传递参数</li>
</ol>
</li>
</ul>
<h3 id="2-2、借用构造函数"><a href="#2-2、借用构造函数" class="headerlink" title="2.2、借用构造函数"></a>2.2、借用构造函数</h3><ul>
<li><p>其基本思想为:在子类型的构造函数中调用超类型构造函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  SuperType.call(<span class="built_in">this</span>, name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>优点</p>
<ol>
<li>可以向超类传递参数</li>
<li>解决了原型中包含引用类型值被所有实例共享的问题</li>
</ol>
</li>
<li><p>缺点</p>
<ol>
<li>方法都在构造函数中定义，函数复用无从谈起</li>
<li>另外超类型原型中定义的方法对于子类型而言都是不可见的</li>
</ol>
</li>
</ul>
<h3 id="2-3、组合继承"><a href="#2-3、组合继承" class="headerlink" title="2.3、组合继承"></a>2.3、组合继承</h3><ul>
<li><p>组合继承指的是将原型链和借用构造函数技术组合到一块，从而发挥二者之长的一种继承模式。基本思路：使用原型链实现对原型属性和方法的继承，通过借用构造函数来实现对实例属性的继承，既通过在原型上定义方法来实现了函数复用，又保证了每个实例都有自己的属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&quot;zc&quot;</span>;</span><br><span class="line">  <span class="built_in">this</span>.colors = [<span class="string">&quot;pink&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  SuperType.call(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line">SubType.prototype.constructor = SubType;</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> SubType();</span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> SubType();</span><br><span class="line"></span><br><span class="line">a.colors.push(<span class="string">&quot;red&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.colors); <span class="comment">//[ &#x27;pink&#x27;, &#x27;blue&#x27;, &#x27;green&#x27;, &#x27;red&#x27; ]</span></span><br><span class="line"><span class="built_in">console</span>.log(b.colors); <span class="comment">//[ &#x27;pink&#x27;, &#x27;blue&#x27;, &#x27;green&#x27; ]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>优点</p>
<ol>
<li>可以向超类传递参数</li>
<li>每个实例都有自己的属性</li>
<li>实现了函数复用</li>
</ol>
</li>
<li><p>缺点</p>
<ol>
<li>无论什么情况下，都会调用两次超类型构造函数：一次是在创建子类型原型的时候，另一次是在子类型构造函数内部。</li>
</ol>
</li>
</ul>
<h3 id="2-4、原型式继承"><a href="#2-4、原型式继承" class="headerlink" title="2.4、原型式继承"></a>2.4、原型式继承</h3><ul>
<li><p>原型式继承继承的基本思想：在 object() 函数内部，先创建一个临时性的构造函数，然后将传入的对象作为这个构造函数的原型，最后返回了这个临时类型的一个新实例，从本质上讲，object() 对传入的对象执行了一次浅拷贝。</p>
<p>ECMAScript5 通过新增 Object.create()方法规范了原型式继承。这个方法接收两个参数：一个用作新对象原型的对象和（可选的）一个为新对象定义额外属性的对象(可以覆盖原型对象上的同名属性)，在传入一个参数的情况下，Object.create() 和 object() 方法的行为相同。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype = o;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>缺点</p>
<ol>
<li>同原型链实现继承一样，包含引用类型值的属性会被所有实例共享</li>
</ol>
</li>
</ul>
<h3 id="2-5、寄生式继承"><a href="#2-5、寄生式继承" class="headerlink" title="2.5、寄生式继承"></a>2.5、寄生式继承</h3><ul>
<li><p>寄生式继承是与原型式继承紧密相关的一种思路。寄生式继承的思路与寄生构造函数和工厂模式类似，即创建一个仅用于封装继承过程的函数，该函数在内部已某种方式来增强对象，最后再像真地是它做了所有工作一样返回对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype = o;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createAnother</span>(<span class="params">original</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> clone = object(original); <span class="comment">//通过调用函数创建一个新对象</span></span><br><span class="line">  clone.sayHi = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//以某种方式增强这个对象</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;hi&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> clone; <span class="comment">//返回这个对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>优点</p>
<ol>
<li>基于 person 返回了一个新对象 -—— person2，新对象不仅具有 person 的所有属性和方法，而且还有自己的 sayHi() 方法。在考虑对象而不是自定义类型和构造函数的情况下，寄生式继承也是一种有用的模式。</li>
</ol>
</li>
<li><p>缺点</p>
<ol>
<li>使用寄生式继承来为对象添加函数，会由于不能做到函数复用而效率低下。</li>
<li>同原型链实现继承一样，包含引用类型值的属性会被所有实例共享。</li>
</ol>
</li>
</ul>
<h3 id="2-6、寄生组合式继承"><a href="#2-6、寄生组合式继承" class="headerlink" title="2.6、寄生组合式继承"></a>2.6、寄生组合式继承</h3><ul>
<li><p>所谓寄生组合式继承，即通过借用构造函数来继承属性，通过原型链的混成形式来继承方法，基本思路：</p>
<p>不必为了指定子类型的原型而调用超类型的构造函数，我们需要的仅是超类型原型的一个副本，本质上就是使用寄生式继承来继承超类型的原型，然后再将结果指定给子类型的原型。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">subType, superType</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> prototype = object(superType.prototype); <span class="comment">//创建对象</span></span><br><span class="line">  prototype.constructor = subType; <span class="comment">//增强对象</span></span><br><span class="line">  subType.prototype = prototype; <span class="comment">//指定对象</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.colors = [<span class="string">&quot;pink&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuberType</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  SuperType.call(<span class="built_in">this</span>, name);</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">inheritPrototype(SuberType, SuperType);</span><br></pre></td></tr></table></figure>
</li>
<li><p>步骤</p>
<p>第一步：创建超类型原型的一个副本</p>
<p>第二步：为创建的副本添加 constructor 属性</p>
<p>第三步：将新创建的对象赋值给子类型的原型</p>
</li>
<li><p>优点</p>
<ol>
<li>只调用了一次超类构造函数，效率更高。避免在 SuberType.prototype 上面创建不必要的、多余的属性，与其同时，原型链还能保持不变。因此寄生组合继承是引用类型最理性的继承范式。</li>
</ol>
</li>
</ul>
<h3 id="2-7、ES6-继承"><a href="#2-7、ES6-继承" class="headerlink" title="2.7、ES6 继承"></a>2.7、ES6 继承</h3><ul>
<li><p>Class 可以通过 extends 关键字实现继承</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperType</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(age) &#123;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line">  getAge() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.age);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubType</span> <span class="keyword">extends</span> <span class="title">SuperType</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(age, name) &#123;</span><br><span class="line">    <span class="built_in">super</span>(age); <span class="comment">// 调用父类的constructor(x, y)</span></span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">  getName() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>对于 ES6 的 class 需要做以下几点说明</p>
<ol>
<li>class 声明会提升，但不会初始化赋值。Foo 进入暂时性死区，类似于 let、const 声明变量。</li>
<li>class 声明内部会启用严格模式。</li>
<li>class 的所有方法（包括静态方法和实例方法）都是不可枚举的。</li>
<li>class 的所有方法（包括静态方法和实例方法）都没有原型对象 prototype，所以也没有[[construct]]，不能使用 new 来调用。</li>
<li>必须使用 new 调用 class</li>
<li>class 内部无法重写类名</li>
</ol>
</li>
</ul>
<h4 id="使用-extends-关键字实现继承，有几点需要特别说明"><a href="#使用-extends-关键字实现继承，有几点需要特别说明" class="headerlink" title="使用 extends 关键字实现继承，有几点需要特别说明"></a>使用 extends 关键字实现继承，有几点需要特别说明</h4><ul>
<li>子类必须在 constructor 中调用 super 方法，否则新建实例时会报错。如果没有子类没有定义 constructor 方法，那么这个方法会被默认添加。在子类的构造函数中，只有调用 super 之后，才能使用 this 关键字，否则报错。这是因为子类实例的构建，基于父类实例，只有 super 方法才能调用父类实例。</li>
<li>ES5 的继承，实质是先创造子类的实例对象 this，然后再将父类的方法添加到 this 上面（Parent.apply(this)）。ES6 的继承机制完全不同，实质是先将父类实例对象的属性和方法，加到 this 上面（所以必须先调用 super 方法），然后再用子类的构造函数修改 this</li>
</ul>
<h2 id="三、相关题目"><a href="#三、相关题目" class="headerlink" title="三、相关题目"></a>三、相关题目</h2><h3 id="3-1、写一个原型链继承的例子"><a href="#3-1、写一个原型链继承的例子" class="headerlink" title="3.1、写一个原型链继承的例子"></a>3.1、写一个原型链继承的例子</h3><ul>
<li>详细请观看上文。</li>
</ul>
<h3 id="3-2、描述-new-一个对象的过程"><a href="#3-2、描述-new-一个对象的过程" class="headerlink" title="3.2、描述 new 一个对象的过程"></a>3.2、描述 new 一个对象的过程</h3><h4 id="3-2-1、思路分析"><a href="#3-2-1、思路分析" class="headerlink" title="3.2.1、思路分析"></a>3.2.1、思路分析</h4><ol>
<li>创建一个新对象 obj</li>
<li>把 obj 的<strong>proto</strong>指向 构造函数.prototype 实现继承</li>
<li>执行构造函数，传递参数，改变 this 指向</li>
<li>最后把 obj 返回</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">伪代码：<span class="keyword">new</span> Person(<span class="string">&quot;John&quot;</span>) = &#123;</span><br><span class="line">                <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">	obj.__proto__ = Person.prototype;</span><br><span class="line">	<span class="keyword">var</span> result = Person.call(obj,<span class="string">&quot;John&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">typeof</span> result === <span class="string">&#x27;object&#x27;</span> ? result : obj; <span class="comment">// 如果无返回值或者返回一个非对象值，则将obj返回作为新对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-2、优秀的写法"><a href="#3-2-2、优秀的写法" class="headerlink" title="3.2.2、优秀的写法"></a>3.2.2、优秀的写法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_new</span>(<span class="params">fn, ...arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> obj = <span class="built_in">Object</span>.create(fn.prototype);</span><br><span class="line">  <span class="keyword">const</span> ret = fn.apply(obj, arg);</span><br><span class="line">  <span class="keyword">return</span> ret <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? ret : obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>或</strong> 【个人倾向于后面一种】</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_new</span>(<span class="params">fn, ...arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line">  obj.__proto__ = fn.prototype;</span><br><span class="line">  <span class="keyword">let</span> ret = fn.apply(obj, arg);</span><br><span class="line">  <span class="keyword">return</span> ret <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? ret : obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-3、为什么-return-ret-instanceof-Object-ret-obj-需要存在这一步骤？"><a href="#3-2-3、为什么-return-ret-instanceof-Object-ret-obj-需要存在这一步骤？" class="headerlink" title="3.2.3、为什么 return ret instanceof Object ? ret : obj; 需要存在这一步骤？"></a>3.2.3、为什么 <code>return ret instanceof Object ? ret : obj;</code> 需要存在这一步骤？</h4><blockquote>
<p>这是因为 new 一个实例的时候，如果没有 return，</p>
<p>就会根据构造函数内部 this 绑定的值生成对象，如果有返回值，</p>
<p>就会根据返回值生成对象，为了模拟这一效果，就需要判断 apply 后是否有返回值。</p>
</blockquote>
<h4 id="3-2-4、总结-new-的过程中发生了什么"><a href="#3-2-4、总结-new-的过程中发生了什么" class="headerlink" title="3.2.4、总结 new 的过程中发生了什么"></a>3.2.4、总结 new 的过程中发生了什么</h4><ol>
<li><p>令 john 的<strong>proto</strong>属性指向 Person.prototype，确立了这条原型链， 导致 john 能通过原型链继承 Person.prototype 中的部分属性，可以简单地视 john 和 Person.prototype 是继承关系。</p>
</li>
<li><p>john 是 Person 构造函数 的实例 john instanceof Person; //true</p>
</li>
<li><p>我们再来了解一下 instanceof 的内部原理，以应证我们的图是正确的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> L = A.__proto__;</span><br><span class="line"><span class="keyword">var</span> R = B.prototype;</span><br><span class="line"><span class="keyword">if</span> (L === R) <span class="keyword">return</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
</li>
</ol>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS-%E4%B8%89%E5%BA%A7%E5%A4%A7%E5%B1%B1/" rel="tag">JS 三座大山</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E5%85%A8%E9%9D%A2%E6%80%BB%E7%BB%93/" rel="tag">面试全面总结</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-getOfferScopeandclosure"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/23/getOfferScopeandclosure/"
    >作用域和闭包</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/03/23/getOfferScopeandclosure/" class="article-date">
  <time datetime="2020-03-23T09:18:21.000Z" itemprop="datePublished">2020-03-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a> / <a class="article-category-link" href="/categories/JS/JS-%E4%B8%89%E5%BA%A7%E5%A4%A7%E5%B1%B1/">JS 三座大山</a> / <a class="article-category-link" href="/categories/Offer/">Offer</a> / <a class="article-category-link" href="/categories/Offer/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/">字节跳动</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="专题总结：作用域和闭包"><a href="#专题总结：作用域和闭包" class="headerlink" title="专题总结：作用域和闭包"></a>专题总结：作用域和闭包</h2><blockquote>
<p>拿到 字节跳动实习生 offer 总结</p>
<p>回馈分享一波自己的知识点总结</p>
</blockquote>
<blockquote>
<p>希望读者依此构建自己的知识树（思维导图）</p>
<p>偷懒一下：可参考我自己总结思维导图 : <a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Interview-mind-map">点这里</a></p>
<p>附带：高频面试题积累文档。 来自于（学长、牛客网等平台）</p>
<p>自己开发的博客地址：<a target="_blank" rel="noopener" href="http://zxinc520.com/">zxinc520.com</a></p>
<p>github 地址: <a target="_blank" rel="noopener" href="https://github.com/ZhChen7">点击</a></p>
</blockquote>
<blockquote>
<p>此篇 js - 【作用域和闭包】 知识点： 全部弄懂了，面试很容易。</p>
</blockquote>
<h2 id="一、作用域和作用域链概念"><a href="#一、作用域和作用域链概念" class="headerlink" title="一、作用域和作用域链概念"></a>一、作用域和作用域链概念</h2><h3 id="1-1、作用域"><a href="#1-1、作用域" class="headerlink" title="1.1、作用域"></a>1.1、作用域</h3><h4 id="1-1-1、作用域是什么"><a href="#1-1-1、作用域是什么" class="headerlink" title="1.1.1、作用域是什么"></a>1.1.1、作用域是什么</h4><p>作用域本质就是程序源代码中定义变量的区域，它可以解释为一套规则，是关于 JS 引擎如何寻找变量以及会在何处找到变量的规则。</p>
<h4 id="1-1-2、作用域分为哪些"><a href="#1-1-2、作用域分为哪些" class="headerlink" title="1.1.2、作用域分为哪些"></a>1.1.2、作用域分为哪些</h4><ul>
<li>词法作用域（静态作用域）<ul>
<li>词法作用域是在写代码时就确定了作用域（不使用 eval 和 with 的前提下，这两个现在基本不使用，因此不讲了），即静态作用域</li>
</ul>
</li>
<li>动态作用域<ul>
<li>而动态作用域是在代码运行时动态确定的</li>
</ul>
</li>
</ul>
<h3 id="1-2、作用域链"><a href="#1-2、作用域链" class="headerlink" title="1.2、作用域链"></a>1.2、作用域链</h3><h4 id="1-2-1、作用域链是什么"><a href="#1-2-1、作用域链是什么" class="headerlink" title="1.2.1、作用域链是什么"></a>1.2.1、作用域链是什么</h4><p>作用域链实际上是指向变量对象的指针列表，它只引用但不实际包含变量对象，它的用途是保证对执行环境有权访问的所有变量和函数的有序访问。</p>
<p>简单来说：作用域链就是从当前作用域开始一层一层向上寻找某个变量，直到找到全局作用域还是没找到，就宣布放弃。这种一层一层的关系，就是作用域链。</p>
<h5 id="两个重要概念："><a href="#两个重要概念：" class="headerlink" title="两个重要概念："></a>两个重要概念：</h5><ul>
<li><p>变量对象</p>
<p>每个执行环境都有一个与之关联的变量对象，环境中定义的所有变量和函数都保存在这个对象中（变量对象其实就是作用域这个抽象概念的具体值），比如一个函数中包含的局部变量，它的参数，它里面声明的函数都存在变量对象中。（一个当前执行函数的变量对象最开始时就包含一个 arguments 对象，这个对象用来装函数括号内的参数，所以全局环境的变量对象没有这个）</p>
</li>
<li><p>执行环境</p>
<p>也可以叫执行上下文，这里定义了变量或函数有权访问的其他数据，当一个函数被执行时，他的执行环境会被推入环境栈，执行之后才会被弹出，把控制权返回给之前的执行环境。</p>
</li>
</ul>
<h2 id="二、闭包"><a href="#二、闭包" class="headerlink" title="二、闭包"></a>二、闭包</h2><h3 id="2-1、闭包是什么"><a href="#2-1、闭包是什么" class="headerlink" title="2.1、闭包是什么"></a>2.1、闭包是什么</h3><p>闭包是指有权访问另一个函数作用域中的变量的函数，创建闭包最常用的方式就是在一个函数内部创建另一个函数。</p>
<h3 id="2-2、闭包的作用"><a href="#2-2、闭包的作用" class="headerlink" title="2.2、闭包的作用"></a>2.2、闭包的作用</h3><ol>
<li><p>能够访问函数定义时所在的词法作用域(阻止其被回收)。</p>
</li>
<li><p>私有化变量</p>
</li>
<li><p>模拟块级作用域</p>
</li>
<li><p>创建模块</p>
<ul>
<li>两个必备的条件(来自《你不知道的 JavaScript》)<ul>
<li>必须有外部的封闭函数，该函数必须至少被调用一次(每次调用都会创建一个新的模块实例)</li>
<li>封闭函数必须返回至少一个内部函数，这样内部函数才能在私有作用域中形成闭包，并且可以访问或者修改私有的状态。</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">coolModule</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> name = <span class="string">&quot;Yvette&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> age = <span class="number">20</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sayName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sayAge</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(age);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    sayName,</span><br><span class="line">    sayAge,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> info = coolModule();</span><br><span class="line">info.sayName(); <span class="comment">//&#x27;Yvette&#x27;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="2-3、闭包的缺点"><a href="#2-3、闭包的缺点" class="headerlink" title="2.3、闭包的缺点"></a>2.3、闭包的缺点</h3><p>闭包会导致函数的变量一直保存在内存中，过多的闭包可能会导致内存泄漏</p>
<p>2.4、经典题目（闭包）</p>
<blockquote>
<p>函数自增</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i++;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="built_in">console</span>.log(fn()); <span class="comment">//0</span></span><br><span class="line"><span class="built_in">console</span>.log(fn()); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(fn()); <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(fn()); <span class="comment">//3</span></span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS-%E4%B8%89%E5%BA%A7%E5%A4%A7%E5%B1%B1/" rel="tag">JS 三座大山</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E5%85%A8%E9%9D%A2%E6%80%BB%E7%BB%93/" rel="tag">面试全面总结</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-getOfferSinglethreadedandasynchronous"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/23/getOfferSinglethreadedandasynchronous/"
    >单线程和异步</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/03/23/getOfferSinglethreadedandasynchronous/" class="article-date">
  <time datetime="2020-03-23T09:18:21.000Z" itemprop="datePublished">2020-03-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a> / <a class="article-category-link" href="/categories/JS/JS-%E4%B8%89%E5%BA%A7%E5%A4%A7%E5%B1%B1/">JS 三座大山</a> / <a class="article-category-link" href="/categories/Offer/">Offer</a> / <a class="article-category-link" href="/categories/Offer/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/">字节跳动</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="专题总结：单线程和异步"><a href="#专题总结：单线程和异步" class="headerlink" title="专题总结：单线程和异步"></a>专题总结：单线程和异步</h2><blockquote>
<p>拿到 字节跳动实习生 offer 总结</p>
<p>回馈分享一波自己的知识点总结</p>
</blockquote>
<blockquote>
<p>希望读者依此构建自己的知识树（思维导图）</p>
<p>偷懒一下：可参考我自己总结思维导图 : <a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Interview-mind-map">点这里</a></p>
<p>附带：高频面试题积累文档。 来自于（学长、牛客网等平台）</p>
<p>自己开发的博客地址：<a target="_blank" rel="noopener" href="http://zxinc520.com/">zxinc520.com</a></p>
<p>github 地址: <a target="_blank" rel="noopener" href="https://github.com/ZhChen7">点击</a></p>
</blockquote>
<blockquote>
<p>此篇 js - 【单线程和异步】 知识点： 全部弄懂了，面试很容易。</p>
</blockquote>
<h2 id="一、单线程和异步"><a href="#一、单线程和异步" class="headerlink" title="一、单线程和异步"></a>一、单线程和异步</h2><h3 id="1-1、同步-vs-异步"><a href="#1-1、同步-vs-异步" class="headerlink" title="1.1、同步 vs 异步"></a>1.1、同步 vs 异步</h3><ul>
<li>同步是什么？<ul>
<li>简单来说：一定要等任务执行完了，得到结果，才执行下一个任务。</li>
<li>指某段程序执行时会阻塞其它程序执行，其表现形式为程序的执行顺序依赖程序本身的书写顺序</li>
</ul>
</li>
<li>异步是什么？<ul>
<li>指某段程序执行时不会阻塞其它程序执行，其表现形式为程序的执行顺序不依赖程序本身的书写顺序</li>
<li>实现方式：event loop【事件轮询】</li>
</ul>
</li>
</ul>
<h3 id="1-2、异步和单线程"><a href="#1-2、异步和单线程" class="headerlink" title="1.2、异步和单线程"></a>1.2、异步和单线程</h3><ul>
<li><p>单线程</p>
<ul>
<li>是什么？单线程就是同时只做一件事，两段 JS 不能同时 执行</li>
<li>为什么是单线程？<ul>
<li>避免 DOM 渲染的冲突<ol>
<li>浏览器需要渲染 DOM</li>
<li>JS 可以修改 DOM 结构</li>
<li>JS 执行的时候，浏览器 DOM 渲染会暂停</li>
<li>两段 JS 也不能同时执行（都修改 DOM 就冲突了）</li>
<li>webworker 支持多线程，但是不能访问 DOM</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><p>单线程的解决方案 ？</p>
<ul>
<li>异步<ul>
<li>异步暴露出的问题<ol>
<li>没按照书写方式执行，可读性差</li>
<li>callback 中不容易模块化</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><p>event loop</p>
<ul>
<li>是什么？</li>
<li>事件轮询， JS 实现异步 的具体解决方案</li>
<li>具体<ul>
<li>同步代码，直接执行</li>
<li>异步函数先放在 异步队列 中</li>
<li>待同步函数执行完毕，轮询执行 异步队列 的函数</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-3、宏队列和微队列"><a href="#1-3、宏队列和微队列" class="headerlink" title="1.3、宏队列和微队列"></a>1.3、宏队列和微队列</h3><blockquote>
<p><code>macrotask</code>（宏任务） 和 <code>microtask</code>（微任务）</p>
<p>面试常考题【promise 回调函数和定时器任务的顺序问题】</p>
</blockquote>
<ul>
<li><p>宏任务：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">script(整体代码)</span><br><span class="line"><span class="built_in">setTimeout</span></span><br><span class="line"><span class="built_in">setInterval</span></span><br><span class="line">I/O</span><br><span class="line">UI交互事件</span><br><span class="line">postMessage</span><br><span class="line">MessageChannel</span><br><span class="line">setImmediate(Node.js 环境)</span><br></pre></td></tr></table></figure>
</li>
<li><p>微任务</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.then</span><br><span class="line"><span class="built_in">Object</span>.observe</span><br><span class="line">MutaionObserver</span><br><span class="line">process.nextTick(Node.js 环境)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>执行机制：</p>
<ol>
<li>执行一个宏任务（栈中没有就从事件队列中获取）</li>
<li>执行过程中如果遇到微任务，就将它添加到微任务的任务队列中</li>
<li>宏任务执行完毕后，立即执行当前微任务队列中的所有微任务（依次执行）</li>
<li>当前宏任务执行完毕，开始检查渲染，然后 GUI 线程接管渲染</li>
<li>渲染完毕后，JS 引擎线程继续，开始下一个宏任务（从宏任务队列中获取）</li>
</ol>
<h4 id="经典面试题"><a href="#经典面试题" class="headerlink" title="经典面试题"></a>经典面试题</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  resolve();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise1 end&quot;</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;settimeout&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"><span class="comment">// 输出顺序: script start-&gt;promise1-&gt;promise1 end-&gt;script end-&gt;promise2-&gt;settimeout</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> async2();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line">async1();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出顺序：script start-&gt;async1 start-&gt;async2-&gt;script end-&gt;async1 end</span></span><br></pre></td></tr></table></figure>

<h3 id="1-4、前端异步的场景"><a href="#1-4、前端异步的场景" class="headerlink" title="1.4、前端异步的场景"></a>1.4、前端异步的场景</h3><ul>
<li>简单来说：所有的 “ 等待情况” 都需要异步</li>
<li>定时任务：setTimeout，setInterval</li>
<li>网络请求：ajax 请求，动态 &lt;_img_ &gt; 加载</li>
<li>事件绑定</li>
</ul>
<h3 id="1-5、Web-Worker"><a href="#1-5、Web-Worker" class="headerlink" title="1.5、Web Worker"></a>1.5、Web Worker</h3><blockquote>
<p>就是为 JavaScript 创造多线程环境，允许主线程创建 Worker 线程，将一些任务分配给后者运行。在主线程运行的同时，Worker 线程在后台运行，两者互不干扰。等到 Worker 线程完成计算任务，再把结果返回给主线程。这样的好处是，一些计算密集型或高延迟的任务，被 Worker 线程负担了，主线程（通常负责 UI 交互）就会很流畅，不会被阻塞或拖慢。</p>
</blockquote>
<h3 id="1-6、模块化发展历程"><a href="#1-6、模块化发展历程" class="headerlink" title="1.6、模块化发展历程"></a>1.6、模块化发展历程</h3><blockquote>
<p>可从 IIFE、AMD、CMD、CommonJS、UMD、webpack(require.ensure)、ES Module、&lt;_script type=”module”_ &gt; 这几个角度考虑。</p>
<p><strong>作用</strong> ：模块化主要是用来抽离公共代码，隔离作用域，避免变量冲突等。</p>
</blockquote>
<ol>
<li><p>IIFE</p>
<ul>
<li><p>使用自执行函数来编写模块化</p>
</li>
<li><p>特点：</p>
<p>在一个单独的函数作用域中执行代码，避免变量冲突。</p>
</li>
</ul>
</li>
<li><p>AMD</p>
<ul>
<li><p>使用 requireJS 来编写模块化</p>
</li>
<li><p>特点：依赖必须提前声明好</p>
</li>
<li><p>简单实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">&quot;./index.js&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">code</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// code 就是index.js 返回的内容</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>CMD</p>
<ul>
<li><p>使用 seaJS 来编写模块化</p>
</li>
<li><p>特点：支持动态引入依赖文件</p>
</li>
<li><p>简单实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> indexCode = <span class="built_in">require</span>(<span class="string">&quot;./index.js&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>CommonJS</p>
<ul>
<li>nodejs 中自带的模块化</li>
<li>var fs = require(‘fs’);</li>
</ul>
</li>
<li><p>UMD</p>
<ul>
<li>兼容 AMD，CommonJS 模块化语法</li>
</ul>
</li>
<li><p>webpack(require.ensure)</p>
<ul>
<li>webpack 2.x 版本中的代码分割</li>
</ul>
</li>
<li><p>ES Modules</p>
<ul>
<li>ES6 引入的模块化，支持 import 来引入另一个 js</li>
<li>import a from ‘a’;</li>
</ul>
</li>
</ol>
<h4 id="1-6-1、AMD-与-CMD-的比较"><a href="#1-6-1、AMD-与-CMD-的比较" class="headerlink" title="1.6.1、AMD 与 CMD 的比较"></a>1.6.1、AMD 与 CMD 的比较</h4><ul>
<li><p>定义</p>
<p>AMD 和 CMD 都是用于浏览器端的模块规范</p>
</li>
<li><p>AMD</p>
<ul>
<li>AMD 是 RequireJS 在推广过程中对模块定义的规范化产出</li>
<li>其主要内容就是定义了 define 函数该如何书写，只要你按照这个规范书写模块和依赖，require.js 就能正确的进行解析。</li>
</ul>
</li>
<li><p>CMD</p>
<ul>
<li>CMD 其实就是 SeaJS 在推广过程中对模块定义的规范化产出</li>
<li>主要内容就是描述该如何定义模块，如何引入模块，如何导出模块，只要你按照这个规范书写代码，sea.js 就能正确的进行解析</li>
</ul>
</li>
<li><p>AMD 与 CMD 的区别</p>
<ol>
<li>AMD 推崇依赖前置，CMD 推崇依赖就近</li>
<li>AMD 是提前执行，CMD 是延迟执行。</li>
</ol>
</li>
</ul>
<h4 id="1-6-2、CommonJS-与-AMD-的比较"><a href="#1-6-2、CommonJS-与-AMD-的比较" class="headerlink" title="1.6.2、CommonJS 与 AMD 的比较"></a>1.6.2、CommonJS 与 AMD 的比较</h4><blockquote>
<p>在服务器端比如 node，采用的则是 CommonJS 规范。</p>
<p>AMD 和 CMD 都是用于浏览器端的模块规范</p>
</blockquote>
<ol>
<li><p>CommonJS 规范加载模块是同步的，也就是说，只有加载完成，才能执行后面的操作。</p>
</li>
<li><p>AMD 规范则是非同步加载模块，允许指定回调函数。</p>
<p>由于 Node.js 主要用于服务器编程，模块文件一般都已经存在于本地硬盘，所以加载起来比较快，不用考虑非同步加载的方式，所以 CommonJS 规范比较适用。</p>
</li>
<li><p>但是，如果是浏览器环境，要从服务器端加载模块，这时就必须采用非同步模式，因此浏览器端一般采用 AMD 规范。</p>
</li>
</ol>
<h4 id="16-3、ES6-与-CommonJS-的比较"><a href="#16-3、ES6-与-CommonJS-的比较" class="headerlink" title="16.3、ES6 与 CommonJS 的比较"></a>16.3、ES6 与 CommonJS 的比较</h4><blockquote>
<p>注意！浏览器加载 ES6 模块，也使用 &lt;_script_ &gt; 标签，但是要加入 type=”module” 属性。</p>
</blockquote>
<ol>
<li>CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。</li>
<li>CommonJS 模块是运行时加载，ES6 模块是编译时输出接口</li>
</ol>
<h3 id="1-7、async-和-defer"><a href="#1-7、async-和-defer" class="headerlink" title="1.7、async 和 defer"></a>1.7、async 和 defer</h3><ul>
<li><p>共同点</p>
<p>两者都会并行下载，不会影响页面的解析。</p>
</li>
<li><p>defer：defer 会按照顺序在 DOMContentLoaded 前按照页面出现顺序依次执行。</p>
</li>
<li><p>async ：async 则是下载完立即执行</p>
</li>
<li><p>具体解析【剖析】</p>
<ul>
<li><p>先来看一个普通的 script 标签。&lt;_script src=”a.js”&gt;</script_ ></p>
<ul>
<li><p>浏览器会做如下处理：</p>
<p>1、停止解析 document.</p>
<p>2、请求 a.js</p>
<p>3、执行 a.js 中的脚本</p>
<p>4、继续解析 document</p>
</li>
</ul>
</li>
<li><pre><code class="js">&lt;script src=&quot;d.js&quot; defer&gt;&lt;/script&gt;
&lt;script src=&quot;e.js&quot; defer&gt;&lt;/script&gt;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  不阻止解析 document， 并行下载 d.js, e.js</span><br><span class="line"></span><br><span class="line">  即使下载完 d.js, e.js 仍继续解析 document</span><br><span class="line"></span><br><span class="line">  按照页面中出现的顺序，在其他同步脚本执行后，DOMContentLoaded 事件前 依次执行 d.js, e.js。</span><br><span class="line"></span><br><span class="line">- &#96;&#96;&#96;js</span><br><span class="line">  &lt;script src&#x3D;&quot;b.js&quot; async&gt;&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;script src&#x3D;&quot;c.js&quot; async&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

不阻止解析 document, 并行下载 b.js, c.js

当脚本下载完后立即执行。（两者执行顺序不确定，执行阶段不确定，可能在 DOMContentLoaded 事件前或者后 ）
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 id="async-和-defer-总结"><a href="#async-和-defer-总结" class="headerlink" title="async 和 defer 总结"></a>async 和 defer 总结</h4><ul>
<li><p>两者都不会阻止 document 的解析</p>
</li>
<li><p>defer 会在 DOMContentLoaded 前依次执行 （可以利用这两点哦！）</p>
</li>
<li><p>async 则是下载完立即执行，不一定是在 DOMContentLoaded 前</p>
</li>
<li><p>async 因为顺序无关，所以很适合像 Google Analytics 这样的无依赖脚本</p>
</li>
</ul>
<h3 id="1-8、异步编程-6-种解决方案"><a href="#1-8、异步编程-6-种解决方案" class="headerlink" title="1.8、异步编程 6 种解决方案"></a>1.8、异步编程 6 种解决方案</h3><ol>
<li><p>回调函数（Callback）</p>
<ul>
<li><p>回调函数是异步操作最基本的方法</p>
</li>
<li><p>ajax(url, () =&gt; {</p>
<p>​ // 处理逻辑</p>
<p>})</p>
</li>
<li><p>缺点</p>
<ul>
<li>容易写出回调地狱（Callback hell）</li>
<li>不能使用 try catch 捕获错误，不能直接 return</li>
</ul>
</li>
</ul>
</li>
<li><p>事件监听</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f1.on(<span class="string">&quot;done&quot;</span>, f2);</span><br></pre></td></tr></table></figure>
</li>
<li><p>发布订阅</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jQuery.subscribe(<span class="string">&quot;done&quot;</span>, f2);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Promise</p>
<ul>
<li><p>是什么？</p>
<ul>
<li>promise 是目前 JS 异步编程的主流解决方案，遵循 Promises/A+ 方案。Promise 用于异步操作，表示一个还未完成但是预期会完成的操作。</li>
<li>Promise 是 ES6 引入的一个新的对象，他的主要作用是用来解决 JS 异步机制里，回调机制产生的“回调地狱”。它并不是什么突破性的 API，只是封装了异步回调形式，使得异步回调可以写的更加优雅，可读性更高，而且可以链式调用。</li>
</ul>
</li>
<li><p>剖析</p>
<ul>
<li><p>promise 本身相当于一个状态机，拥有三种状态</p>
<ul>
<li>pending</li>
<li>fulfilled</li>
<li>rejected</li>
</ul>
<p>一个 promise 对象初始化时的状态是 pending，调用了 resolve 后会将 promise 的状态扭转为 fulfilled，调用 reject 后会将 promise 的状态扭转为 rejected，这两种扭转一旦发生便不能再扭转该 promise 到其他状态。</p>
</li>
</ul>
</li>
<li><p>Promise 如何使用</p>
<p>构造一个 promise 对象，并将要执行的异步函数传入到 promise 的参数中执行，并且在异步执行结束后调用 resolve( ) 函数，就可以在 promise 的 then 方法中获取到异步函数的执行结果</p>
</li>
<li><p>Promise 原型上的方法</p>
<ol>
<li>Promise.prototype.then(onFulfilled, onRejected)</li>
<li>Promise.prototype.catch(onRejected)</li>
<li>Promise.prototype.finally(onFinally)</li>
</ol>
</li>
<li><p>Promise 静态方法</p>
<ol>
<li><p>Promise.all()</p>
<p>Promise.all 接收一个 promise 对象数组作为参数，只有全部的 promise 都已经变为 fulfilled 状态后才会继续后面的处理</p>
</li>
<li><p>Promise.race()</p>
<p>这个函数会在 promises 中第一个 promise 的状态扭转后就开始后面的处理（fulfilled、rejected 均可）</p>
</li>
<li><p>Promise.resolve()</p>
</li>
<li><p>Promise.reject()</p>
</li>
</ol>
</li>
<li><p>优点</p>
<p>将异步操作以同步操作的流程表达出来，promise 链式调用，更好地解决了层层嵌套的回调地狱</p>
</li>
<li><p>缺点</p>
<ol>
<li>不能取消执行。</li>
<li>无法获取当前执行的进度信息（比如，要在用户界面展示进度条）。</li>
<li>外部无法捕捉 Promise 内部抛出的错误</li>
</ol>
</li>
</ul>
</li>
<li><p>generator 函数</p>
<ul>
<li><p>是什么</p>
<ul>
<li>Generator 函数是 ES6 提供的一种异步编程解决方案，语法行为与传统函数完全不同。</li>
<li>如果说 JavaScript 是 ECMAScript 标准的一种具体实现、Iterator 遍历器是 Iterator 的具体实现，那么 Generator 函数可以说是 Iterator 接口的具体实现方式。</li>
<li>Generator 函数可以通过配合 Thunk 函数更轻松更优雅的实现异步编程和控制流管理</li>
</ul>
</li>
<li><p>描述</p>
<ul>
<li>执行 Generator 函数会返回一个遍历器对象，每一次 Generator 函数里面的 yield 都相当一次遍历器对象的 next()方法，并且可以通过 next(value)方法传入自定义的 value,来改变 Generator 函数的行为。</li>
</ul>
</li>
<li><p>能封装异步任务的根本原因</p>
<ul>
<li>最大特点就是可以交出函数的执行权（即暂停执行）。Generator 函数可以暂停执行和恢复执行</li>
</ul>
</li>
<li><p>两个特征</p>
<ul>
<li>function 关键字与函数名之间有一个星号</li>
<li>函数体内部使用 yield 表达式，定义不同的内部状态（yield 在英语里的意思就是“产出”）。</li>
</ul>
</li>
<li><p>过程</p>
<p>Generator 函数的调用方法与普通函数一样，也是在函数名后面加上一对圆括号。不同的是，调用 Generator 函数后，该函数并不执行，返回的也不是函数运行结果，而是一个指向内部状态的指针对象，也就是上一章介绍的遍历器对象（Iterator Object）</p>
</li>
<li><p>Generator 及其异步方面的应用</p>
<ul>
<li>Generator 函数将 JavaScript 异步编程带入了一个全新的阶段</li>
</ul>
</li>
<li><p>总结</p>
<p>调用 Generator 函数，返回一个遍历器对象，代表 Generator 函数的内部指针。以后，每次调用遍历器对象的 next 方法，就会返回一个有着 value 和 done 两个属性的对象。value 属性表示当前的内部状态的值，是 yield 表达式后面那个表达式的值；done 属性是一个布尔值，表示是否遍历结束。</p>
</li>
<li><p>demo</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fetch = <span class="built_in">require</span>(<span class="string">&quot;node-fetch&quot;</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> url = <span class="string">&quot;https://api.github.com/users/github&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="keyword">yield</span> fetch(url);</span><br><span class="line">  <span class="built_in">console</span>.log(result.bio);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>async 和 await</p>
<ul>
<li><p>含义</p>
<p>ES2017 标准引入了 async 函数，使得异步操作变得更加方便。</p>
</li>
<li><p>是什么？</p>
<ul>
<li>一句话，它就是 Generator 函数的语法糖。</li>
<li>一比较就会发现，async 函数就是将 Generator 函数的星号（*）替换成 async，将 yield 替换成 await，仅此而已。</li>
<li>async 函数可以理解为内置自动执行器的 Generator 函数语法糖，它配合 ES6 的 Promise 近乎完美的实现了异步编程解决方案。</li>
</ul>
</li>
<li><p>相对于 Promise，优势体现在</p>
<ol>
<li>处理 then 的调用链，能够更清晰准确的写出代码</li>
<li>并且也能优雅地解决回调地狱问题</li>
</ol>
</li>
<li><p>相对 Generator 函数，体现在以下 4 点</p>
<ol>
<li>内置执行器。 Generator 函数的执行必须靠执行器，所以才有了 co 函数库，而 async 函数自带执行器。也就是说，async 函数的执行，与普通函数一模一样，只要一行</li>
<li>更好的语义。 async 和 await，比起星号和 yield，语义更清楚了。async 表示函数里有异步操作，await 表示紧跟在后面的表达式需要等待结果</li>
<li>更广的适用性。 co 函数库约定，yield 命令后面只能是 Thunk 函数或 Promise 对象，而 async 函数的 await 命令后面，可以跟 Promise 对象和原始类型的值（数值、字符串和布尔值，但这时等同于同步操作）</li>
<li>返回值是 Promise。async 函数的返回值是 Promise 对象，这比 Generator 函数的返回值是 Iterator 对象方便多了。你可以用 then 方法指定下一步的操作。</li>
</ol>
</li>
<li><p>缺点</p>
<p>当然 async/await 函数也存在一些缺点，因为 await 将异步代码改造成了同步代码，如果多个异步代码没有依赖性却使用了 await 会导致性能上的降低，代码没有依赖性的话，完全可以使用 Promise.all 的方式。</p>
</li>
</ul>
</li>
</ol>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ol>
<li>JS 异步编程进化史：callback -&gt; promise -&gt; generator -&gt; async + await</li>
<li>async/await 函数的实现，就是将 Generator 函数和自动执行器，包装在一个函数里</li>
<li>async/await 可以说是异步终极解决方案了</li>
</ol>
<h2 id="二、相关面试问题"><a href="#二、相关面试问题" class="headerlink" title="二、相关面试问题"></a>二、相关面试问题</h2><ol>
<li><p>什么是单线程，和异步有什么关系？</p>
<ul>
<li>单线程就是同时只做一件事，两段 JS 不能同时 执行</li>
<li>原因就是 为了避免 DOM 渲染的冲突</li>
<li>异步是一种 “无奈” 的解决方案，虽然有很多问题</li>
</ul>
</li>
<li><p>是否用过 jQuery 的 Deferred</p>
<ul>
<li><p>步骤</p>
<p>可以 jQuery 1.5 对 ajax 的改变举例</p>
<p>说明如何简单的封装，使用 Deferred</p>
<p>说明 ES6 promise 和 Deferred 的区别</p>
</li>
<li><p>jQuery 1.5 的变化</p>
<ul>
<li><p>无法改变 JS 异步和单线程的本质</p>
</li>
<li><p>只能从写法上杜绝 callback 这种形式</p>
</li>
<li><p>它是一种语法糖形式，但是解耦了代码</p>
</li>
<li><p>很好的体现：开放封闭原则</p>
</li>
<li><p>ajax 为例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ajax = $.ajax(<span class="string">&quot;data.json&quot;</span>);</span><br><span class="line">ajax</span><br><span class="line">  .done(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;success 1&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .fail(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .done(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;success 2&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ajax); <span class="comment">//返回一个 deferred 对象</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>使用 jQuery Deferred</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">waitHandle</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> dtd = $.Deferred(); <span class="comment">//创建一个 Deferred 对象</span></span><br><span class="line">  <span class="keyword">var</span> wait = <span class="function"><span class="keyword">function</span> (<span class="params">dtd</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//要求传入一个 Deferred 对象</span></span><br><span class="line">    <span class="keyword">var</span> task = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;执行完成&quot;</span>);</span><br><span class="line">      dtd.resolve(); <span class="comment">//表示异步任务已经完成</span></span><br><span class="line">      <span class="comment">// dtd.reject()  //表示异步任务失败或出错</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">setTimeout</span>(task, <span class="number">2000</span>);</span><br><span class="line">    <span class="keyword">return</span> dtd; <span class="comment">// 要求返回 Deferred 对象</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// 注意，这里一定要有返回值</span></span><br><span class="line">  <span class="keyword">return</span> wait(dtd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS-%E4%B8%89%E5%BA%A7%E5%A4%A7%E5%B1%B1/" rel="tag">JS 三座大山</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E5%85%A8%E9%9D%A2%E6%80%BB%E7%BB%93/" rel="tag">面试全面总结</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-getOfferhtml2"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/23/getOfferhtml2/"
    >html 面试考点全面总结下篇</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/03/23/getOfferhtml2/" class="article-date">
  <time datetime="2020-03-23T09:18:21.000Z" itemprop="datePublished">2020-03-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Offer/">Offer</a> / <a class="article-category-link" href="/categories/Offer/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/">字节跳动</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="html-面试考点全面总结下篇"><a href="#html-面试考点全面总结下篇" class="headerlink" title="html 面试考点全面总结下篇"></a>html 面试考点全面总结下篇</h2><blockquote>
<p>拿到 字节跳动实习生 offer 总结</p>
<p>回馈分享一波自己的知识点总结</p>
</blockquote>
<blockquote>
<p>希望读者依此构建自己的知识树（思维导图）</p>
<p>偷懒一下：可参考我自己总结思维导图 : <a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Interview-mind-map">点这里</a></p>
<p>附带：高频面试题积累文档。 来自于（学长、牛客网等平台）</p>
<p>自己开发的博客地址：<a target="_blank" rel="noopener" href="http://zxinc520.com/">zxinc520.com</a></p>
<p>github 地址: <a target="_blank" rel="noopener" href="https://github.com/ZhChen7">点击</a></p>
</blockquote>
<blockquote>
<p>此篇 html 共总结 22 大知识点： 全部弄懂了，面试很容易。</p>
</blockquote>
<h3 id="11、label-标签"><a href="#11、label-标签" class="headerlink" title="11、label 标签"></a>11、label 标签</h3><blockquote>
<p>作用：用于定义表单控件的关系，点击时自动将焦点移至相关联的控件。</p>
</blockquote>
<h4 id="两个有用属性"><a href="#两个有用属性" class="headerlink" title="两个有用属性"></a>两个有用属性</h4><ul>
<li>for<ul>
<li>关联相关控件</li>
<li>通过控件 id 关联</li>
</ul>
</li>
<li>accessKey ：设置访问快捷键 例如：accesskey=”h”</li>
</ul>
<blockquote>
<p><strong>注意</strong> ：该标签不能为 a 和 button 标签的后代</p>
</blockquote>
<h3 id="12、link-与-import"><a href="#12、link-与-import" class="headerlink" title="12、link 与 @import"></a>12、link 与 @import</h3><blockquote>
<p>link ：建议使用</p>
<p>@import ：慎用 【会造成 “无样式内容闪烁”】</p>
</blockquote>
<h4 id="link-与-import-区别"><a href="#link-与-import-区别" class="headerlink" title="link 与 @import 区别"></a>link 与 @import 区别</h4><ol>
<li>从属和作用<ul>
<li>link 是 HTML 提供的标签<ul>
<li>可以加载 css</li>
<li>可以定义 rel 等属性（rel 属性规定当前文档与被链接文档之间的关系。） 【技巧：这里引申到 预加载知识：可以关注 Resource Hint 标准 — <strong>页面加载性能利器</strong>】</li>
</ul>
</li>
<li>@import 是 css 提供的语法<ul>
<li>只有导入样式表的作用</li>
</ul>
</li>
</ul>
</li>
<li>加载顺序<ul>
<li>link 在页面加载时 css 同时被加载</li>
<li>@import 引入的 css 需要等页面加载后再加载</li>
</ul>
</li>
<li>兼容性问题<ul>
<li>link 是 HTML 提供的语法，没有兼容性问题</li>
<li>@import 是 css2.1 提供的语法，ie5 以上才兼容</li>
</ul>
</li>
<li>DOM 可控性<ul>
<li>js 可以通过插入 link 标签来改变样式</li>
<li>js 不可以通过 @import 去引入新的 css 文件来改变样式</li>
</ul>
</li>
</ol>
<h3 id="13、target"><a href="#13、target" class="headerlink" title="13、target"></a>13、target</h3><blockquote>
<p>属性作用：指定所连接的页面在浏览器窗口中的打开方式</p>
</blockquote>
<h5 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h5><ul>
<li>_self（默认值）：在当前窗口打开</li>
<li>_blank： 在新窗口中打开</li>
<li>_parent ： 在父级窗口打开</li>
<li>_top ： 在顶级窗口打开</li>
</ul>
<h3 id="14、部分标签-属性区别"><a href="#14、部分标签-属性区别" class="headerlink" title="14、部分标签/属性区别"></a>14、部分标签/属性区别</h3><h4 id="标签区别"><a href="#标签区别" class="headerlink" title="标签区别"></a>标签区别</h4><ul>
<li>title 和 h1<ul>
<li>title ：只表示是个标题</li>
<li>h1-h7<ul>
<li>表示层次明确的标题</li>
<li>对页面信息的抓取有帮助</li>
</ul>
</li>
</ul>
</li>
<li>b 与 strong<ul>
<li>b：展示为粗体</li>
<li>strong<ul>
<li>标明重点内容，有语气加强的含义 u</li>
<li>使用阅读设备时，会重读</li>
</ul>
</li>
</ul>
</li>
<li>i 与 em<ul>
<li>i：展示为斜体</li>
<li>em：表示强调的文本</li>
</ul>
</li>
</ul>
<h4 id="属性区别"><a href="#属性区别" class="headerlink" title="属性区别"></a>属性区别</h4><ul>
<li>src 与 href<ul>
<li>src：引入 ; 将指定资源应用到文档内.</li>
<li>href：引用 ; 建立与当前文档之间的链接.</li>
</ul>
</li>
<li>【img】title 和 alt<ul>
<li>title<ul>
<li>全局属性</li>
<li>提供关于元素的额外信息</li>
<li>鼠标移至显示</li>
</ul>
</li>
<li>alt<ul>
<li>用于图片无法加载时显示</li>
<li>web Quality（无障碍）易访问的</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="15、Shadow-DOM（影子-DOM）"><a href="#15、Shadow-DOM（影子-DOM）" class="headerlink" title="15、Shadow DOM（影子 DOM）"></a>15、Shadow DOM（影子 DOM）</h3><h4 id="是什么？"><a href="#是什么？" class="headerlink" title="是什么？"></a>是什么？</h4><blockquote>
<p>浏览器的一种能力 ：渲染时插入独立的 DOM 树</p>
</blockquote>
<h4 id="特点？"><a href="#特点？" class="headerlink" title="特点？"></a>特点？</h4><ul>
<li>与原始 DOM 完全隔离</li>
<li>具有自己的元素和样式</li>
</ul>
<h4 id="作用？"><a href="#作用？" class="headerlink" title="作用？"></a>作用？</h4><ul>
<li>封装需要隔离外部的文档细节/组件</li>
<li>防止开发人员随意修改样式</li>
</ul>
<h4 id="使用方式？"><a href="#使用方式？" class="headerlink" title="使用方式？"></a>使用方式？</h4><ul>
<li>Node1.attachShadow(Node2)</li>
<li>Node2.innerHTML = ….</li>
</ul>
<h3 id="16、浏览器的数据存储方式有哪些"><a href="#16、浏览器的数据存储方式有哪些" class="headerlink" title="16、浏览器的数据存储方式有哪些"></a>16、浏览器的数据存储方式有哪些</h3><blockquote>
<p>分为三类来讲：</p>
<p>cookie 、localStorage 和 sessionStorage 、userData。</p>
</blockquote>
<h4 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h4><blockquote>
<p>h5 之前，存储主要用 cookies，缺点是在请求头上带着数据，导致流量增加。大小限制 4k</p>
</blockquote>
<h5 id="创建目的"><a href="#创建目的" class="headerlink" title="创建目的"></a>创建目的</h5><ul>
<li>为了保持 HTTP 的状态</li>
<li>为了识别用户信息而储存在本地上的数据</li>
</ul>
<h5 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h5><ol>
<li>可储存大小为 4k</li>
<li>储存个数有限制（各浏览器不同）</li>
<li>有效时间在设置的 cookie 过期时间之前一直有效</li>
</ol>
<h4 id="localStorage-和-sessionStorage"><a href="#localStorage-和-sessionStorage" class="headerlink" title="localStorage 和 sessionStorage"></a>localStorage 和 sessionStorage</h4><blockquote>
<p>创建目的：便于客户端储存数据</p>
</blockquote>
<h5 id="相同点"><a href="#相同点" class="headerlink" title="相同点"></a>相同点</h5><ul>
<li>都由 HTML5 Web Storage API 提供</li>
<li>在本地保存</li>
<li>可储存大小 5M 以上</li>
</ul>
<h5 id="不同点"><a href="#不同点" class="headerlink" title="不同点"></a>不同点</h5><ul>
<li>有效时间不同<ul>
<li>localStorage（以键值对(Key-Value)的方式存储）<ul>
<li>储存持久数据</li>
<li>浏览器关闭后数据不丢失除非主动清除数据</li>
</ul>
</li>
<li>sessionStorage<ul>
<li>数据在当前浏览器关闭后自动删除</li>
</ul>
</li>
</ul>
</li>
<li>作用域不同<ul>
<li>localStorage 在所有同源窗口中都是共享的；cookie 也是在所有同源窗口中都是共享的。</li>
<li>sessionStorage 不在不同的浏览器页面中共享，即使是同一个页面</li>
</ul>
</li>
</ul>
<blockquote>
<p>安全性：需要注意的是，不是什么数据都适合放在 Cookie、localStorage 和 sessionStorage 中的，因为它们保存在本地容易被篡改，使用它们的时候，需要时刻注意是否有代码存在 XSS 注入的风险。所以千万不要用它们存储你系统中的敏感数据。</p>
</blockquote>
<h4 id="userData"><a href="#userData" class="headerlink" title="userData"></a>userData</h4><h5 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h5><ul>
<li>IE 专属 ：早期 IE 浏览器用来本地储存数据用的</li>
<li>以文件的形式保存在磁盘上 ：持久化储存方式</li>
<li>可以设置失效日期</li>
<li>可储存大小 1MB 左右</li>
</ul>
<blockquote>
<p>注意：使用 IE 条件注释来避免其它浏览器载入上述代码 &lt;_!–[if IE]&gt;&lt;[end If]–_ &gt;</p>
</blockquote>
<h3 id="17、如何实现标签页面的通信"><a href="#17、如何实现标签页面的通信" class="headerlink" title="17、如何实现标签页面的通信"></a>17、如何实现标签页面的通信</h3><ol>
<li><p>方法一 ：使用 localStorage</p>
<ul>
<li><p>使用 localStorage.setItem(key,value) 添加内容</p>
</li>
<li><p>使用 Storage 事件监听添加、修改、删除的动作</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onstorage = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;<span class="built_in">console</span>.log(e)&#125;</span><br><span class="line"><span class="comment">// 或者这样</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;storage&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> <span class="built_in">console</span>.log(e)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>方法二：使用 cookie+setInterval</p>
<ul>
<li>将要传递的信息储存在 cookie 中</li>
<li>每隔一定时间读取 cookie 信息，获取要传递的信息</li>
<li><strong>具体描述</strong> ：1、在页面 A 设置一个使用 setInterval 定时器不断刷新，检查 Cookies 的值是否发生变化，如果变化就进行刷新的操作。 2、由于 Cookies 是在同域可读的，所以在页面 B 审核的时候改变 Cookies 的值，页面 A 自然是可以拿到的。这样做确实可以实现我想要的功能，但是这样的方法相当浪费资源。虽然在这个性能过盛的时代，浪费不浪费也感觉不出来，但是这种实现方案，确实不够优雅。</li>
</ul>
</li>
<li><p>方法三 ：websocket 通讯（HTML5）</p>
<ul>
<li>定义：WebSocket 是 HTML5 新增的协议，它的目的是在浏览器和服务器之间建立一个不受限的双向通信的通道，比如说，服务器可以在任意时刻发送消息给浏览器。</li>
<li>WebSocket 连接必须由浏览器发起，特点<ul>
<li>建立在 TCP 协议之上，服务器端的实现比较容易。</li>
<li>与 HTTP 协议有着良好的兼容性。默认端口也是 80 和 443，并且握手阶段采用 HTTP 协议，因此握手时不容易屏蔽，能通过各种 HTTP 代理服务器。</li>
<li>数据格式比较轻量，性能开销小，通信高效。</li>
<li>可以发送文本，也可以发送二进制数据。</li>
<li>没有同源限制，客户端可以与任意服务器通信。</li>
<li>协议标识符是 ws（如果加密，则为 wss），服务器网址就是</li>
</ul>
</li>
</ul>
</li>
<li><p>SharedWorker（html5 浏览器的新特性 SharedWorker）</p>
<ul>
<li>本质还是单线程，只是利用了浏览器不同 JS 引擎</li>
<li>必须在服务器上才跑得动</li>
<li>IE 未兼容</li>
</ul>
</li>
</ol>
<h3 id="18、谈谈-cookie-和-session-的区别"><a href="#18、谈谈-cookie-和-session-的区别" class="headerlink" title="18、谈谈 cookie 和 session 的区别"></a>18、谈谈 cookie 和 session 的区别</h3><blockquote>
<p>共同点：记录用户状态</p>
</blockquote>
<h4 id="区别："><a href="#区别：" class="headerlink" title="区别："></a>区别：</h4><h5 id="cookie-1"><a href="#cookie-1" class="headerlink" title="cookie"></a>cookie</h5><ul>
<li><p>什么是 Cookie？</p>
<p>HTTP Cookie（也叫 Web Cookie 或浏览器 Cookie）是服务器发送到用户浏览器并保存在本地的一小块数据，它会在浏览器下次向同一服务器再发起请求时被携带并发送到服务器上。通常，它用于告知服务端两个请求是否来自同一浏览器，如保持用户的登录状态。Cookie 使基于无状态的 HTTP 协议记录稳定的状态信息成为了可能。</p>
</li>
<li><p>采用的是在客户端保持状态的方案 ： 即运行在客户端</p>
</li>
<li><p>有大小限制，存储个数有限</p>
</li>
<li><p>有安全隐患 ：通过某些手法可以篡改本地储存的信息来欺骗客户端</p>
</li>
<li><p>支持跨域名访问</p>
</li>
</ul>
<h5 id="session"><a href="#session" class="headerlink" title="session"></a>session</h5><ul>
<li><p>什么是 Session？</p>
<p>Session 代表着服务器和客户端一次会话的过程。Session 对象存储特定用户会话所需的属性及配置信息。这样，当用户在应用程序的 Web 页之间跳转时，存储在 Session 对象中的变量将不会丢失，而是在整个用户会话中一直存在下去。当客户端关闭会话，或者 Session 超时失效时会话结束。</p>
</li>
<li><p>采用的是在服务端保持状态的方案： 即运行在服务端</p>
</li>
<li><p>没有大小限制和服务器内存大小有关</p>
</li>
<li><p>过多会增加服务器压力</p>
</li>
<li><p>仅在他所在的域名内有效</p>
</li>
</ul>
<h4 id="cookie-和-session-流程介绍"><a href="#cookie-和-session-流程介绍" class="headerlink" title="cookie 和 session 流程介绍"></a>cookie 和 session 流程介绍</h4><blockquote>
<p>1、用户第一次请求服务器的时候，服务器根据用户提交的相关信息，创建创建对应的 Session ，请求返回时将此 Session 的唯一标识信息 SessionID 返回给浏览器，浏览器接收到服务器返回的 SessionID 信息后，会将此信息存入到 Cookie 中，同时 Cookie 记录此 SessionID 属于哪个域名。</p>
<p>2、当用户第二次访问服务器的时候，请求会自动判断此域名下是否存在 Cookie 信息，如果存在自动将 Cookie 信息也发送给服务端，服务端会从 Cookie 中获取 SessionID，再根据 SessionID 查找对应的 Session 信息，如果没有找到说明用户没有登录或者登录失效，如果找到 Session 证明用户已经登录可执行后面操作。</p>
<p>3、根据以上流程可知，SessionID 是连接 Cookie 和 Session 的一道桥梁，大部分系统也是根据此原理来验证用户登录状态。</p>
</blockquote>
<h4 id="18-1、既然服务端是根据-Cookie-中的信息判断用户是否登录，那么如果浏览器中禁止了-Cookie，如何保障整个机制的正常运转"><a href="#18-1、既然服务端是根据-Cookie-中的信息判断用户是否登录，那么如果浏览器中禁止了-Cookie，如何保障整个机制的正常运转" class="headerlink" title="18.1、既然服务端是根据 Cookie 中的信息判断用户是否登录，那么如果浏览器中禁止了 Cookie，如何保障整个机制的正常运转"></a>18.1、既然服务端是根据 Cookie 中的信息判断用户是否登录，那么如果浏览器中禁止了 Cookie，如何保障整个机制的正常运转</h4><ul>
<li><p>第一种方案，每次请求中都携带一个 SessionID 的参数，也可以 Post 的方式提交，也可以在请求的地址后面拼接 xxx?SessionID=123456…。</p>
</li>
<li><p>第二种方案，Token 机制。Token 机制多用于 App 客户端和服务器交互的模式，也可以用于 Web 端做用户状态管理。</p>
<p>Token 的意思是“令牌”，是服务端生成的一串字符串，作为客户端进行请求的一个标识。Token 机制和 Cookie 和 Session 的使用机制比较类似。</p>
<p>当用户第一次登录后，服务器根据提交的用户信息生成一个 Token，响应时将 Token 返回给客户端，以后客户端只需带上这个 Token 前来请求数据即可，无需再次登录验证。</p>
</li>
</ul>
<h4 id="18-2、如何考虑分布式-Session-问题？"><a href="#18-2、如何考虑分布式-Session-问题？" class="headerlink" title="18.2、如何考虑分布式 Session 问题？"></a>18.2、如何考虑分布式 Session 问题？</h4><ul>
<li>在互联网公司为了可以支撑更大的流量，后端往往需要多台服务器共同来支撑前端用户请求，那如果用户在 A 服务器登录了，第二次请求跑到服务 B 就会出现登录失效问题。</li>
<li>分布式 Session 一般会有以下几种解决方案<ul>
<li>Nginx ip_hash 策略，服务端使用 Nginx 代理，每个请求按访问 IP 的 hash 分配，这样来自同一 IP 固定访问一个后台服务器，避免了在服务器 A 创建 Session，第二次分发到服务器 B 的现象。</li>
<li>Session 复制，任何一个服务器上的 Session 发生改变（增删改），该节点会把这个 Session 的所有内容序列化，然后广播给所有其它节点。</li>
<li>共享 Session，服务端无状态话，将用户的 Session 等信息使用缓存中间件来统一管理，保障分发到每一个服务器的响应结果都一致。</li>
</ul>
</li>
</ul>
<h4 id="18-3、cookie-和-session-各自优势"><a href="#18-3、cookie-和-session-各自优势" class="headerlink" title="18.3、cookie 和 session 各自优势"></a>18.3、cookie 和 session 各自优势</h4><h5 id="cookie-2"><a href="#cookie-2" class="headerlink" title="cookie"></a>cookie</h5><ul>
<li>极高的扩展性和可用性</li>
<li>不需要使用大量服务器资源</li>
<li>简单性 Cookie 是一种基于文本的轻量结构，包含简单的键值对，结构简单。</li>
</ul>
<h5 id="session-1"><a href="#session-1" class="headerlink" title="session"></a>session</h5><ul>
<li>易于读写</li>
<li>易于站点的用户化</li>
</ul>
<h4 id="18-4：cookie-和-session-常见攻击方式及解决方案"><a href="#18-4：cookie-和-session-常见攻击方式及解决方案" class="headerlink" title="18.4：cookie 和 session 常见攻击方式及解决方案"></a>18.4：cookie 和 session 常见攻击方式及解决方案</h4><h5 id="cookie-3"><a href="#cookie-3" class="headerlink" title="cookie"></a>cookie</h5><ul>
<li>具体<ul>
<li>直接访问 Cookie 文件查找想要的机密文件</li>
<li>进行 Cookie 信息传递时被截取</li>
<li>攻击者伪造 Cookie 信息，客户端获取后进行操作</li>
</ul>
</li>
<li>解决方案<ul>
<li>不要早 Cookie 中保存敏感信息</li>
<li>不要早 Cookie 中保存没有经过加密的或者容易被解密的敏感信息</li>
<li>对从客户端获取得的 Cookie 信息进行严格校验</li>
</ul>
</li>
</ul>
<h5 id="session-2"><a href="#session-2" class="headerlink" title="session"></a>session</h5><ul>
<li>具体<ul>
<li>会话劫持（通过获取用户 Session ID 后，使用该 Session ID 登录目标账号）</li>
<li>会话固定（诱骗受害者使用攻击者指定的会话标识 Session ID 的攻击手段）</li>
</ul>
</li>
<li>解决方案<ul>
<li>使用 User-Agent 检测请求的一致性，设置 HttpOnly，可以防止客户端脚本访问这个 Cookie，从而有效的防止 XSS 攻击；关闭透明化 Session ID；更改 Session 名称</li>
<li>用户登录时生成新的 Session ID</li>
</ul>
</li>
</ul>
<h3 id="19、谈谈对-WebSocket-的认识"><a href="#19、谈谈对-WebSocket-的认识" class="headerlink" title="19、谈谈对 WebSocket 的认识"></a>19、谈谈对 WebSocket 的认识</h3><blockquote>
<p>创建原因：HTTP 协议只能由客户端发起 单向连接</p>
</blockquote>
<h4 id="19-1、是什么？"><a href="#19-1、是什么？" class="headerlink" title="19.1、是什么？"></a>19.1、是什么？</h4><ul>
<li>HTML5 中的协议，支持持久连接</li>
<li>WebSocket 是基于 HTTP 协议的 ： 借用了 Http 协议来完成一部分握手</li>
<li>是真正意义上的双向绑定</li>
</ul>
<h4 id="19-2、WebSocket-区别-http-协议"><a href="#19-2、WebSocket-区别-http-协议" class="headerlink" title="19.2、WebSocket 区别 http 协议"></a>19.2、WebSocket 区别 http 协议</h4><ul>
<li>http 协议 不支持持久性连接</li>
<li>HTTP1.1 中出现 keep-alive，合并多个 http 请求</li>
<li>HTTP 的生命周期通过 Request 来界定 ： 一个 Request 对应一个 Response</li>
<li>Response 是被动的，不能主动发起</li>
</ul>
<h4 id="19-3、如何模拟双向通信"><a href="#19-3、如何模拟双向通信" class="headerlink" title="19.3、如何模拟双向通信"></a>19.3、如何模拟双向通信</h4><ul>
<li>短轮询<ul>
<li>客户端定时向服务器发送 Ajax 请求，服务器接到请求后马上返回响应信息并关闭连接。</li>
<li>优点 ： 后端编写容易</li>
<li>缺点 ： 请求中大半是无用，浪费宽带和服务器资源</li>
<li>适用 ： 小型应用</li>
</ul>
</li>
<li>长轮询<ul>
<li>客户端向服务器发送 Ajax 请求，服务器接到请求后 hold 住连接，直到有新消息才返回响应信息并关闭连接，客户端处理完响应信息后再向服务器发送新的请求。</li>
<li>优点 ：在无消息的情况下不会频繁的请求，耗费资源小</li>
<li>缺点<ul>
<li>服务器 hold 连接会消耗资源</li>
<li>返回数据顺序无保证，难于管理维护</li>
</ul>
</li>
</ul>
</li>
<li>长连接<ul>
<li>在页面嵌入一个隐藏 iframe，将这个隐藏 iframe 的 src 属性设为对一个长连接的请求或是采用 xhr 请求，服务器端就能源源不断的往客户端输入数据</li>
<li>优点<ul>
<li>消息及时到达，不发无用请求</li>
<li>管理起来也相对方便</li>
</ul>
</li>
<li>缺点：服务器维护一个长连接会增加开销</li>
</ul>
</li>
</ul>
<h3 id="20、渲染-了解网页渲染流程与优化技巧"><a href="#20、渲染-了解网页渲染流程与优化技巧" class="headerlink" title="20、渲染 | 了解网页渲染流程与优化技巧"></a>20、渲染 | 了解网页渲染流程与优化技巧</h3><h4 id="20-1、生成网页步骤"><a href="#20-1、生成网页步骤" class="headerlink" title="20.1、生成网页步骤"></a>20.1、生成网页步骤</h4><ul>
<li>HTML 代码转成 DOM（Document Object Model）： 解析 HTML 生成</li>
<li>CSS 代码转化成 CSSOM（CSS Object Model）： 解析 CSS 生成</li>
<li>结合 DOM 和 CSSOM 生成一颗渲染树： 包含每个节点的视觉信息</li>
<li>生成布局（layout）： 将所有渲染树的所有节点进行平面合成</li>
<li>将布局绘制（paint）在屏幕上</li>
</ul>
<h4 id="20-2、重新渲染-（重排【回流】和重绘）"><a href="#20-2、重新渲染-（重排【回流】和重绘）" class="headerlink" title="20.2、重新渲染 （重排【回流】和重绘）"></a>20.2、重新渲染 （重排【回流】和重绘）</h4><h5 id="重排（回流）"><a href="#重排（回流）" class="headerlink" title="重排（回流）"></a>重排（回流）</h5><blockquote>
<p>重新生成布局</p>
</blockquote>
<h5 id="布局改了就一定会重排"><a href="#布局改了就一定会重排" class="headerlink" title="布局改了就一定会重排"></a>布局改了就一定会重排</h5><ol>
<li>添加或删除可见的 DOM 元素</li>
<li>元素位置改变</li>
<li>元素尺寸改变——边距、填充、边框、宽度和高度</li>
<li>内容改变——比如文本改变或者图片大小改变而引起的计算值宽度和高度改变；</li>
<li>页面渲染器初始化</li>
<li>浏览器窗口尺寸改变——resize 事件发生时；</li>
</ol>
<blockquote>
<p>重排一定需要重绘</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var s = document.body.style;</span><br><span class="line">s.padding = &quot;2px&quot;; // 回流+重绘</span><br><span class="line">s.border = &quot;1px solid red&quot;; // 再一次 回流+重绘</span><br><span class="line">s.color = &quot;blue&quot;; // 重绘</span><br><span class="line">s.backgroundColor = &quot;#ccc&quot;; // 重绘</span><br><span class="line">s.fontSize = &quot;14px&quot;; // 再一次 回流+重绘</span><br><span class="line">document.body.appendChild(document.createTextNode(&#x27;abc!&#x27;));// 添加node，再一次 回流+重绘</span><br></pre></td></tr></table></figure>

<h4 id="重绘"><a href="#重绘" class="headerlink" title="重绘"></a>重绘</h4><blockquote>
<p>只是影响元素的外观，风格，而不会影响布局的，比如 background-color。则就叫称为重绘。</p>
</blockquote>
<h4 id="重新渲染出现情况"><a href="#重新渲染出现情况" class="headerlink" title="重新渲染出现情况"></a>重新渲染出现情况</h4><ul>
<li>修改 DOM</li>
<li>修改样式表</li>
<li>用户事件<ul>
<li>鼠标悬停</li>
<li>页面滚动</li>
<li>输入框输入文字</li>
<li>改变窗口等</li>
</ul>
</li>
</ul>
<h3 id="21、性能优化技巧"><a href="#21、性能优化技巧" class="headerlink" title="21、性能优化技巧"></a>21、性能优化技巧</h3><blockquote>
<p>回答性能优化问题时：分两层阐述：</p>
<p>1、底层：重排【回流】和重绘层级 — 下面针对此层</p>
<p>2、应用层（雅虎军规 35 条）— 在性能优化专题会仔细分析。</p>
</blockquote>
<h4 id="21-1、减少重新渲染频率"><a href="#21-1、减少重新渲染频率" class="headerlink" title="21.1、减少重新渲染频率"></a>21.1、减少重新渲染频率</h4><ol>
<li><p>DOM 的多个读/写操作应该放在一起。</p>
<ul>
<li>不要两个读操作之间，加入一个写操作</li>
</ul>
</li>
<li><p>如果某个样式是通过重排得到的，那么最好缓存结果。避免下一次用到的时候又要重排</p>
</li>
<li><p>不要一条条地改变样式</p>
<ul>
<li>通过改变 class，csstext，一次改变样式</li>
</ul>
</li>
<li><p>尽量使用离线 DOM，而不是真实的网页 DOM，来改变元素样式</p>
<ul>
<li><p>例如</p>
<ul>
<li><p>操作 Document Fragment 对象</p>
</li>
<li><p>cloneNode 克隆节点操作后替换</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>使用虚拟 DOM 的脚本库，比如 React，vue 等</p>
</li>
<li><p>很新颖（嘻嘻）</p>
</li>
</ol>
<ul>
<li>设为 dispaly：none（需要一次重排和重绘）后进行 n 次操作，最后再恢复显示（需要一次重排和重绘）</li>
<li>用两次重新渲染，取代了可能 n（可能是个大树）次的重新渲染</li>
<li>只有在必要的时候，才将元素的 display 属性为可见</li>
<li>visibility:hidden 的元素只对重绘有影响，不影响重排</li>
<li>隐藏后不可见的元素读写不影响重排和重绘</li>
</ul>
<ol start="7">
<li><p>使用调整重新渲染的方法 ： 可以大幅度提高网页性能</p>
<ul>
<li>使用 window.requestAnimationFrame()方法<ul>
<li>作用：将某些代码放到下一次重新渲染时执行</li>
<li>适用<ul>
<li>页面滚动事件的监听函数</li>
<li>网页动画</li>
</ul>
</li>
</ul>
</li>
<li>使用 window.requestdleCallback()方法<ul>
<li>暂时就 Chrome 支持</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="21-2、减少渲染成本"><a href="#21-2、减少渲染成本" class="headerlink" title="21.2、减少渲染成本"></a>21.2、减少渲染成本</h4><ul>
<li><p>position 属性为 absolute 或 fixed 的元素，重排的开销会比较小</p>
<p>因为它们脱离文档，不用考虑他们对其他元素的影响，所以用 absolute，而少用 float</p>
</li>
</ul>
<h3 id="22、HTML5-概括"><a href="#22、HTML5-概括" class="headerlink" title="22、HTML5 概括"></a>22、HTML5 概括</h3><blockquote>
<p>HTML（超文本标记语言 HyperText Markup Language）的最新本版本</p>
</blockquote>
<h4 id="新增特性"><a href="#新增特性" class="headerlink" title="新增特性"></a>新增特性</h4><ol>
<li><p>语义化元素 推荐使用</p>
</li>
<li><p>新的通讯方式</p>
<ul>
<li>WebSockets</li>
<li>重新绘制界面 布局没改，样式改了，需要重绘，不一定重排</li>
</ul>
</li>
<li><p>缓存</p>
<ul>
<li>应用程序缓存<ul>
<li>使用方式<ul>
<li>&lt;_html manifest=”demo.appcache”_ &gt;</li>
<li>manifest 文件的建议的文件扩展名是：”.appcache”</li>
</ul>
</li>
<li>优点<ul>
<li>离线浏览 - 用户可在应用离线时使用它们</li>
<li>更快速度 - 已缓存资源加载得更快</li>
<li>减少服务器负载 - 浏览器将只从服务器下载更新过或更改过的资源。</li>
</ul>
</li>
</ul>
</li>
<li>浏览器缓存<ul>
<li>Web Storage<ul>
<li>localStorage</li>
<li>sessionStorage</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>多媒体</p>
<ul>
<li>audio</li>
<li>video</li>
</ul>
</li>
<li><p>3D &amp; 图像</p>
<ul>
<li>canvas</li>
<li>WebGL：用 canvas 元素中的 API 实现 3D 图像功能</li>
<li>svg ：基于 XML 直接嵌入到 HTML 中的矢量图形格式</li>
</ul>
</li>
<li><p>性能 &amp; 集成</p>
<ul>
<li><p>Web workers</p>
<p>Web Worker 是为了解决 JavaScript 在浏览器环境中没有多线程的问题。正常形况下，浏览器执行某段程序的时候会阻塞直到运行结束后在恢复到正常状态，而 HTML5 的 Web Worker 就是为了解决这个问题，提升程序的执行效率。 所以 Web Worker 的最佳使用场景是执行一些开销较大的数据处理或计算任务。</p>
</li>
<li><p>web worker 的创建</p>
<ul>
<li>worker 是一个对象，通过构造函数 Worker 创建，参数就是一个 js 文件的路径；文件中的 js 代码将运行在主线程之外的 worker 线程；</li>
<li>例如：var myWorker = new Worker(‘worker.js’);</li>
</ul>
</li>
<li><p>History API ：允许对浏览器历史记录进行操作</p>
</li>
<li><p>XMLHttpRequest Level 2(（XHR）对象可以与服务器交互。)</p>
<p>新版本功能：</p>
<ul>
<li>可以设置 HTTP 请求的时限</li>
<li>可以使用 FormData 对象管理表单数据。</li>
<li>可以上传文件。</li>
<li>可以请求不同域名下的数据（跨域请求）</li>
<li>可以获取服务器端的二进制数据</li>
<li>可以获得数据传输的进度信息</li>
</ul>
<p>老版本的缺点：</p>
<ul>
<li>只支持文本数据的传送，无法用来读取和上传二进制文件。</li>
<li>传送和接收数据时，没有进度信息，只能提示有没有完成。</li>
<li>受到”同域限制”（Same Origin Policy），只能向同一域名的服务器请求数据。</li>
</ul>
</li>
<li><p>contentEditable</p>
<ul>
<li>让元素的区域可编辑</li>
<li>已标准化</li>
</ul>
</li>
<li><p>requestAnimationFrame ： 允许控制动画渲染以获得更优性能</p>
</li>
<li><p>拖放 API draggable 属性、拖放事件(dragstart、drag、dragenter、dragleave、dragover、drap、dragend)、dataTransfer 对象</p>
</li>
<li><p>全屏 API</p>
</li>
<li><p>在线和离线事件</p>
</li>
</ul>
</li>
<li><p>设备访问</p>
<ul>
<li>carnera ：能够操作计算机的摄像头</li>
<li>地理位置定位 Geolocation</li>
<li>触控事件</li>
<li>检测设备方向 ：横向还是竖向</li>
</ul>
</li>
</ol>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html/" rel="tag">html</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E5%85%A8%E9%9D%A2%E6%80%BB%E7%BB%93/" rel="tag">面试全面总结</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/">上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/3/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2020
        <i class="ri-heart-fill heart_icon"></i> zhou chen
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <span class="division">|</span>
        Theme - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="琛"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://zxinc520.com">个人博客</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友情链接</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="http://static.zxinc520.com/blog/20190512/p4IWzLUrorWK.jpg?imageslim">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="http://static.zxinc520.com/blog/20190512/pGHOMdDF79sb.jpg?imageslim">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script>

<script src="/js/clickBoom1.js"></script>


<!-- ClickBoom2 -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>