<!DOCTYPE html>


<html lang="en">


<head>
  <meta charset="utf-8" />
   
  <meta name="keywords" content="博客，学习网站，hexo，周琛，周琛的个人博客" />
   
  <meta name="description" content="周琛的博客" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     周琛的博客
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

  

<link rel="alternate" href="/atom.xml" title="琛" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    
      <canvas class="fireworks"></canvas>
      <style>
        .fireworks {
          position: fixed;
          left: 0;
          top: 0;
          z-index: 99999;
          pointer-events: none;
        }
      </style>
      
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/ZhChen7"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">琛</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['学习', '学习使我快乐', '快乐，开心～'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-JS-Web-API"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/04/JS-Web-API/"
    >JS-Web-API</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/08/04/JS-Web-API/" class="article-date">
  <time datetime="2019-08-04T08:44:08.000Z" itemprop="datePublished">2019-08-04</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a> / <a class="article-category-link" href="/categories/JS/JS-%E4%B8%89%E5%BA%A7%E5%A4%A7%E5%B1%B1/">JS 三座大山</a> / <a class="article-category-link" href="/categories/JS/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">基础知识</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="JS-Web-API"><a href="#JS-Web-API" class="headerlink" title="JS-Web-API"></a>JS-Web-API</h1><blockquote>
<p>前端 JS 基础面试技巧 - - <strong>JS-Web-API 上</strong></p>
<p>讲解 JS 在浏览器中具体应用的面试题。包括 <strong>DOM 操作</strong>，<strong>BOM 操作</strong> ，<strong>事件绑定</strong>，<strong>ajax</strong> 和 <strong>存储</strong> ，这些类别的题目。</p>
</blockquote>
<h2 id="从基础知识到-JS-Web-API"><a href="#从基础知识到-JS-Web-API" class="headerlink" title="从基础知识到 JS-Web-API"></a>从基础知识到 JS-Web-API</h2><blockquote>
<p>从基础知识 <strong>过渡</strong> 到 JS-Web-API</p>
</blockquote>
<ul>
<li>回顾 JS 基础知识</li>
<li>JS-Web-API</li>
<li>总结</li>
</ul>
<h3 id="回顾-JS-基础知识"><a href="#回顾-JS-基础知识" class="headerlink" title="回顾 JS 基础知识"></a>回顾 JS 基础知识</h3><blockquote>
<p>特点：表面看来并不能哟用于工作中开发代码</p>
<p>内置函数：Object，Array，Boolean，String ……</p>
<p>内置对象：Math，Json …..</p>
<p>详情请参考：<a target="_blank" rel="noopener" href="http://zxinc520.com/lcj/%225d2df2cdda85353d5ca8b83f%22">原型和原型链，闭包和作用域</a> <a target="_blank" rel="noopener" href="http://zxinc520.com/lcj/%225d2eeda9d797f0309cf6ab02%22">异步和单线程</a></p>
<ul>
<li>我们连在网页上弹出一句 hello world 都不能实现</li>
</ul>
</blockquote>
<p><strong>知识点</strong> ：</p>
<ul>
<li><p>变量类型和计算</p>
</li>
<li><p>原型和原型链</p>
</li>
<li><p>闭包和作用域</p>
</li>
<li><p>异步和单线程</p>
</li>
<li><p>其它（如日期，Math，各种常用 API）</p>
</li>
<li><p>JS 基础知识：<strong>ECMA 262 标准</strong></p>
</li>
<li><p>JS-Web-API ：<strong>W3C 标准</strong></p>
</li>
</ul>
<h3 id="JS-Web-API-1"><a href="#JS-Web-API-1" class="headerlink" title="JS-Web-API"></a>JS-Web-API</h3><blockquote>
<p>JS-Web-API</p>
</blockquote>
<p><strong>W3C 标准中关于 JS 的规定有</strong> ：</p>
<ul>
<li>DOM 操作</li>
<li>BOM 操作</li>
<li>事件绑定</li>
<li>ajax 请求（包括 http 协议）</li>
<li>储存</li>
</ul>
<p><strong>页面弹框 window.alert(123) ，浏览器需要做：</strong></p>
<ul>
<li>定义一个 window 全局变量 ，对象类型</li>
<li>给它定义一个 alert 属性，属性值是一个函数</li>
</ul>
<p><strong>获取元素 document.getElementById(id)，浏览器需要做：</strong></p>
<ul>
<li>定义一个 document 全局变量 ，对象类型</li>
<li>给它定义一个 getElementById 属性，属性值是一个函数</li>
</ul>
<p><strong>W3C 标准：</strong></p>
<ul>
<li>W3C 标准没有规定任何 JS 基础相关的东西</li>
<li>不管什么变量类型，原型，作用域和异步</li>
<li>只管 定义用于 浏览器中 JS 操作页面的 API 和 全局变量</li>
</ul>
<h4 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h4><p><strong>常说的 JS （浏览器执行的 JS ）包含两部分：</strong></p>
<ul>
<li>JS 基础知识：<strong>ECMA 262 标准</strong></li>
<li>JS-Web-API ：<strong>W3C 标准</strong></li>
</ul>
<h2 id="5-1-BOM-节点操作"><a href="#5-1-BOM-节点操作" class="headerlink" title="5-1 BOM 节点操作"></a>5-1 BOM 节点操作</h2><blockquote>
<p>BOM 操作： <strong>Browser</strong>、<strong>Object</strong>、<strong>Model</strong> （ 浏览器对象模型 ）</p>
<p><strong>BOM 节点操作</strong> 可以理解为：浏览器把拿到的 html 代码，结构化一个 浏览器 能识别并且 js 可操作的一个模型而已 。</p>
<p>javacsript 是通过 <strong>访问 BOM</strong> （Browser Object Model）对象来 <strong>访问、控制、修改</strong> 客户端(浏览器)，由于 BOM 的 window 包含了 document，<strong>window 对象的属性和方法是直接可以使用而且被感知的</strong> ，因此可以直接使用 window 对象的 document 属性，通过 document 属性就可以访问、检索、修改 XHTML 文档内容与结构。因为 document 对象又是 DOM（Document Object Model）模型的根节点。可以说，<strong>BOM 包含了 DOM(对象)</strong> ，浏览器提供出来给予访问的是 BOM 对象，从 BOM 对象再访问到 DOM 对象，从而 js 可以操作浏览器以及浏览器读取到的文档。</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190718/LLToFChkpany.png?imageslim" alt="mark"></p>
<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><ul>
<li>如何检测浏览器的类型</li>
<li>拆解 url 的 各部分</li>
</ul>
<h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>navigator</li>
<li>screen</li>
<li>location</li>
<li>history</li>
</ul>
<h4 id="navigator-amp-screen"><a href="#navigator-amp-screen" class="headerlink" title="navigator &amp; screen"></a>navigator &amp; screen</h4><blockquote>
<p>navigator &amp; screen</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190718/r3iKL9Xukvhh.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190718/HGtIQM9isqCI.png?imageslim" alt="mark"></p>
<h4 id="location-amp-history"><a href="#location-amp-history" class="headerlink" title="location &amp; history"></a>location &amp; history</h4><blockquote>
<h6 id="location-amp-history-1"><a href="#location-amp-history-1" class="headerlink" title="location &amp; history"></a>location &amp; history</h6></blockquote>
<p><img src="http://static.zxinc520.com/blog/20190718/cbYxCVkoLMQu.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190718/wBG2i12YtTmW.png?imageslim" alt="mark"></p>
<h3 id="解答"><a href="#解答" class="headerlink" title="解答"></a>解答</h3><ul>
<li>如何检测浏览器的类型</li>
</ul>
<p><img src="http://static.zxinc520.com/blog/20190718/TfK1lJ7IAry5.png?imageslim" alt="mark"></p>
<ul>
<li>拆解 url 的 各部分</li>
</ul>
<p><img src="http://static.zxinc520.com/blog/20190718/UzzCgHl1fImg.png?imageslim" alt="mark"></p>
<h2 id="5-2-DOM-节点操作"><a href="#5-2-DOM-节点操作" class="headerlink" title="5-2 DOM 节点操作"></a>5-2 DOM 节点操作</h2><blockquote>
<p><strong>DOM 操作的重点：找到节点对节点（元素/文本/属性节点）增删改查</strong></p>
<p><strong>各方法和属性之间的结合操作才会使得 DOM 文档活跃起来</strong></p>
<p><code>注意方法与属性的不同。</code> <strong>注意属性的返回值</strong></p>
<p><strong>注意 javascript 操作样式的可读可写性</strong></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5b16113f5188257d7a49ada7">可参考</a></p>
</blockquote>
<h3 id="DOM-节点操作："><a href="#DOM-节点操作：" class="headerlink" title="DOM 节点操作："></a>DOM 节点操作：</h3><ul>
<li>获取 DOM 节点</li>
<li>prototype</li>
<li>Attribute</li>
</ul>
<h4 id="获取-DOM-节点"><a href="#获取-DOM-节点" class="headerlink" title="获取 DOM 节点"></a>获取 DOM 节点</h4><blockquote>
<p>获取 DOM 节点</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;id&quot;</span>);</span><br><span class="line"><span class="built_in">document</span>.getElementByClassName(<span class="string">&quot;classname&quot;</span>);</span><br><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;tag&quot;</span>);</span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&quot;#foo &gt; div.bar&quot;</span>);</span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;.bar&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190718/TsP71SzkfFU5.png?imageslim" alt="mark"></p>
<h4 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h4><blockquote>
<p>prototype</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190718/nehMbgtKQirx.png?imageslim" alt="mark"></p>
<h4 id="property"><a href="#property" class="headerlink" title="property"></a>property</h4><blockquote>
<p>property 只是一个 JS 对象的属性的修改</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190718/3vippb1mnJqF.png?imageslim" alt="mark"></p>
<h4 id="Attribute"><a href="#Attribute" class="headerlink" title="Attribute"></a>Attribute</h4><blockquote>
<p>Attribute</p>
<p>Attribute 是对 html <strong>标签属性</strong> 的修改 （获取）</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190718/B7FUAdLGXAHz.png?imageslim" alt="mark"></p>
<h3 id="DOM-结构操作"><a href="#DOM-结构操作" class="headerlink" title="DOM 结构操作"></a>DOM 结构操作</h3><blockquote>
<p>DOM 结构操作</p>
</blockquote>
<ul>
<li>新增节点</li>
<li>获取父元素</li>
<li>获取子元素</li>
<li>删除节点</li>
</ul>
<h4 id="新增节点"><a href="#新增节点" class="headerlink" title="新增节点"></a>新增节点</h4><blockquote>
<p>新增节点</p>
<p>移动已有 的节点</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;div1&#x27;</span>) p = <span class="built_in">document</span>.createElement(<span class="string">&#x27;p&#x27;</span>)</span><br><span class="line">  p.innerHTML = <span class="string">&#x27;&lt;h3&gt;hello world&lt;/h3&gt;&#x27;</span> div1.appendChild(p) <span class="keyword">var</span> p2 =</span><br><span class="line">  <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.p2&#x27;</span>) div1.appendChild(p2) <span class="built_in">console</span>.log(div1)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190718/e7UMDpPFqB1d.png?imageslim" alt="mark"></p>
<h4 id="获取父元素和子元素"><a href="#获取父元素和子元素" class="headerlink" title="获取父元素和子元素"></a>获取父元素和子元素</h4><blockquote>
<p>获取父元素和子元素</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;div1&quot;</span>&gt;</span><br><span class="line">    &lt;div id=<span class="string">&quot;p1&quot;</span>&gt;<span class="built_in">this</span> is p1&lt;/div&gt;</span><br><span class="line">    &lt;div id=<span class="string">&quot;p2&quot;</span>&gt;<span class="built_in">this</span> is p2&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=<span class="string">&quot;div2&quot;</span>&gt;</span><br><span class="line">    &lt;div id=<span class="string">&quot;p3&quot;</span>&gt;<span class="built_in">this</span> is p3&lt;/div&gt;</span><br><span class="line">    &lt;div id=<span class="string">&quot;p4&quot;</span>&gt;<span class="built_in">this</span> is p4&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> div1=<span class="built_in">document</span>.getElementById(<span class="string">&#x27;div1&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(div1.parentElement)</span><br><span class="line">    <span class="built_in">console</span>.log(div1.childNodes)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(div1.childNodes[<span class="number">0</span>].nodeType)  <span class="comment">//3</span></span><br><span class="line">    <span class="built_in">console</span>.log(div1.childNodes[<span class="number">1</span>].nodeType)  <span class="comment">//1</span></span><br><span class="line">    <span class="built_in">console</span>.log(div1.childNodes[<span class="number">0</span>].nodeName)  <span class="comment">//#text</span></span><br><span class="line">    <span class="built_in">console</span>.log(div1.childNodes[<span class="number">1</span>].nodeName)  <span class="comment">// DIV</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190718/BD4IQWndiCTW.png?imageslim" alt="mark"></p>
<h4 id="解答-1"><a href="#解答-1" class="headerlink" title="解答"></a>解答</h4><ul>
<li><p>DOM 是哪种基本的数据结构</p>
<ul>
<li>树</li>
</ul>
</li>
<li><p>DOM 操作的常用 API 有哪些</p>
<ul>
<li>获取 DOM 节点，以及节点的 property 和 Attribute</li>
<li>获取父节点，获取子节点</li>
<li>新增节点，删除节点</li>
</ul>
</li>
<li><p>DOM 节点的 Attribute 和 property 有何区别</p>
<ul>
<li>property 只是一个 JS 对象的属性的修改</li>
<li>Attribute 是对 html 标签属性的修改</li>
</ul>
</li>
</ul>
<h4 id="重点总结"><a href="#重点总结" class="headerlink" title="重点总结"></a>重点总结</h4><ul>
<li>DOM 本质</li>
<li>DOM 节点操作</li>
<li>DOM 结构操作</li>
</ul>
<h2 id="5-3-事件绑定"><a href="#5-3-事件绑定" class="headerlink" title="5-3 事件绑定"></a>5-3 事件绑定</h2><blockquote>
<p>JavaScript 绑定事件的三种方式</p>
</blockquote>
<h3 id="JavaScript-绑定事件的三种方式："><a href="#JavaScript-绑定事件的三种方式：" class="headerlink" title="JavaScript 绑定事件的三种方式："></a>JavaScript 绑定事件的三种方式：</h3><ul>
<li>使用内联</li>
<li>使用<code>.onclick</code>的方式</li>
<li>使用事件监听<code>addEventListener</code>的方式</li>
</ul>
<h4 id="内联"><a href="#内联" class="headerlink" title="内联"></a>内联</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;按钮&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(1);&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>这种方式就是在一个元素上面直接绑定了一个点击<code>onclick</code>事件，此事件为<a href="https://link.juejin.im/?target=https://baike.baidu.com/item/DOM/50288?fr=aladdin">DOM 0 级标准</a>。同时，这个事件的优先级是最高的。</p>
<h4 id="使用对象-事件的形式"><a href="#使用对象-事件的形式" class="headerlink" title="使用对象.事件的形式"></a>使用对象.事件的形式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;按钮&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	<span class="keyword">var</span> bt = <span class="built_in">document</span>.getElementsBytagname(<span class="string">&quot;input&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">	bt.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		alert(<span class="number">2</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>使用这种形式也是可以给一个 DOM 元素添加上一个事件。这个也是<a href="https://link.juejin.im/?target=https://baike.baidu.com/item/DOM/50288?fr=aladdin">DOM 0 级标准</a>。</p>
<h4 id="以上的弊端"><a href="#以上的弊端" class="headerlink" title="以上的弊端"></a>以上的弊端</h4><p>以上两种方式都是存在一个弊端的，就是一个元素只能添加一个事件。第一种就不用说了，写在行内就一个属性。至于第二种，有的网友可能会说我可以再写一个，比如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;按钮&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    <span class="keyword">var</span> bt = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;input&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">    bt.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bt.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="number">3</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190718/u7dGQvDbEuTR.gif" alt="mark"></p>
<p>写是可以这么写。那么我们先来看一看这个写法的意思，这种写法的本质就是在一个对象上添加一个属性，就上面的例子，就是在<code>bt</code>这个对象上添加一个<code>onclick</code>属性。那么，如果在之后的代码中也存在<code>bt.onclcik</code>，只会吧前面的给覆盖了。所以这样的写法也只能添加一个事件。</p>
<p>那么，问题来了。我要给一个元素（DOM 对象）添加两个甚至是多个事件，使用什么呢？此时，就需要使用<code>addEventListener</code>的方式来添加事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;按钮&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	<span class="keyword">var</span> bt = <span class="built_in">document</span>.getElementsBytagname(<span class="string">&quot;input&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">	bt.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		alert(<span class="number">1</span>)</span><br><span class="line">	&#125;)</span><br><span class="line">	bt.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		alert(<span class="number">2</span>)</span><br><span class="line">	&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190718/fH7NDlrt0vLr.gif" alt="mark"></p>
<p>上面的方式就可以给一个 DOM 对象绑定一个或者是多个事件。<strong>强烈推荐使用这一种绑定事件的方式</strong>。 使用<code>addEventListener</code>的方式还可以拥有第三个参数。 <a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/met-element-addeventlistener.html">参看</a></p>
<p><strong>三个参数</strong> ：</p>
<ol>
<li>事件类型，<strong>不需要</strong>添加上<code>on</code></li>
<li>事件函数</li>
<li>是否捕获（布尔值），默认是<code>false</code>，即不捕获，那就是冒泡。</li>
</ol>
<h3 id="捕获和冒泡"><a href="#捕获和冒泡" class="headerlink" title="捕获和冒泡"></a>捕获和冒泡</h3><h4 id="捕获"><a href="#捕获" class="headerlink" title="捕获"></a>捕获</h4><p><img src="http://static.zxinc520.com/blog/20190718/VLE5T5uzApOX.png?imageslim" alt="mark"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;a&quot;</span>&gt;</span></span><br><span class="line">  a</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;b&quot;</span>&gt;</span></span><br><span class="line">    b</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span>&gt;</span>c<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> a = <span class="built_in">document</span>.getElementById(<span class="string">&quot;a&quot;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> b = <span class="built_in">document</span>.getElementById(<span class="string">&quot;b&quot;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> c = <span class="built_in">document</span>.getElementById(<span class="string">&quot;c&quot;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 捕获</span></span></span><br><span class="line">  a.addEventListener(</span><br><span class="line"><span class="javascript">    <span class="string">&quot;click&quot;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      alert(<span class="string">&quot;b-a&quot;</span>);</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="literal">true</span></span></span><br><span class="line">  );</span><br><span class="line">  b.addEventListener(</span><br><span class="line"><span class="javascript">    <span class="string">&quot;click&quot;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      alert(<span class="string">&quot;b-b&quot;</span>);</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="literal">true</span></span></span><br><span class="line">  );</span><br><span class="line">  c.addEventListener(</span><br><span class="line"><span class="javascript">    <span class="string">&quot;click&quot;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      alert(<span class="string">&quot;b-c&quot;</span>);</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="literal">true</span></span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="comment">//运行结果：点击c时，上面的代码的执行顺序：b-a，b-b，b-c</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="冒泡"><a href="#冒泡" class="headerlink" title="冒泡"></a>冒泡</h4><p><img src="http://static.zxinc520.com/blog/20190718/eVyMTBdrppfb.png?imageslim" alt="mark"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;a&quot;</span>&gt;</span><br><span class="line">    a</span><br><span class="line">    &lt;div id=<span class="string">&quot;b&quot;</span>&gt;</span><br><span class="line">        b</span><br><span class="line">        &lt;div id=<span class="string">&quot;c&quot;</span>&gt;c&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"> 	<span class="keyword">var</span> a = <span class="built_in">document</span>.getElementById(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> b = <span class="built_in">document</span>.getElementById(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> c = <span class="built_in">document</span>.getElementById(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">      <span class="comment">// 冒泡</span></span><br><span class="line">    a.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">&quot;m-a&quot;</span>)</span><br><span class="line">    &#125;,<span class="literal">false</span>)</span><br><span class="line">    b.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">&quot;m-b&quot;</span>)</span><br><span class="line">    &#125;,<span class="literal">false</span>)</span><br><span class="line">    c.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">&quot;m-c&quot;</span>)</span><br><span class="line">    &#125;,<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//运行结果：点击c时，上面的代码的执行顺序：m-c，m-b，m-a</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="停止传播"><a href="#停止传播" class="headerlink" title="停止传播"></a>停止传播</h4><p>使用<code>stopPropagation</code>可以阻止事件的<strong>传播</strong>。不能使用<code>return false</code> ，阻止捕获也是一样，添加之后就不会在继续往下传递了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 阻止冒泡</span></span><br><span class="line">c.addEventListener(</span><br><span class="line">  <span class="string">&quot;click&quot;</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">&quot;m-c&quot;</span>);</span><br><span class="line">    e.stopPropagation(); <span class="comment">// 此处阻止传播</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">false</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 此时的顺序：b-a,b-c,m-c。不会传递，后面的不会执行了</span></span><br></pre></td></tr></table></figure>

<h4 id="关于使用addEventListener"><a href="#关于使用addEventListener" class="headerlink" title="关于使用addEventListener"></a>关于使用<code>addEventListener</code></h4><p><strong>由于<code>addEventListener</code>单词太长：</strong> 所以封装一下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">ele, type, fn</span>) </span>&#123;</span><br><span class="line">  ele.addEventListener(type, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    fn(e);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="关于事件代理（委托）"><a href="#关于事件代理（委托）" class="headerlink" title="关于事件代理（委托）"></a>关于事件代理（委托）</h4><p>如果你要给每一个<code>li</code>标签添加一个点击事件，弹出每一个<code>li</code>的索引值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>list-1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>list-2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>list-3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>list-4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>闭包：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oLis = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;li&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; oLis.length; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line">    addEvent(oLis[i], <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      alert(i);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为你的<code>li</code>的个数可能发生改变，如果是这样的话，可能会出一些问题。</p>
<p>事件代理代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oBox = <span class="built_in">document</span>.getElementById(<span class="string">&quot;box&quot;</span>);</span><br><span class="line"></span><br><span class="line">addEvent(oBox, <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> target = e.target;</span><br><span class="line">  <span class="comment">// 判断点击的是li</span></span><br><span class="line">  <span class="keyword">if</span> (target.nodeName == <span class="string">&quot;LI&quot;</span>) &#123;</span><br><span class="line">    alert(target.innerHTML);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>这样也是可以的，不过此时的<code>addEvent</code>函数点击的时候就需要在<code>fn</code>里面判断点击的是哪一个标签。为了更好的使用<code>addEvent</code>，我们可以改进一下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">ele, type, selector, fn</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 如果只有三个参数，那么3,4互换</span></span><br><span class="line">  <span class="keyword">if</span> (fn == <span class="literal">null</span>) &#123;</span><br><span class="line">    fn = selector;</span><br><span class="line">    selector = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  ele.addEventListener(type, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> target;</span><br><span class="line">    <span class="keyword">if</span> (selector) &#123;</span><br><span class="line">      <span class="comment">//  代理</span></span><br><span class="line">      target = e.target;</span><br><span class="line">      <span class="keyword">if</span> (target.matches(selector)) &#123;</span><br><span class="line">        fn.call(target.e);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 不代理</span></span><br><span class="line">      fn(e);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这时点击<code>li</code>弹出 innerHTML 就可以这样实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">addEvent(oBox, <span class="string">&quot;click&quot;</span>, <span class="string">&quot;li&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  alert(<span class="built_in">this</span>.innerHTML);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="总结：-1"><a href="#总结：-1" class="headerlink" title="总结："></a>总结：</h4><ol>
<li><strong>同时 存在捕获与冒泡时</strong> ，<strong>捕获的优先级是高于冒泡的</strong> 。</li>
<li>没有捕获的时候谁在前面先执行谁</li>
</ol>
<p>如果要取消一个使用<code>addEventListener</code>绑定的事件函数，使用<code>removeEventListener</code>可以移除事件。</p>
<h4 id="解答-2"><a href="#解答-2" class="headerlink" title="解答"></a>解答</h4><ul>
<li>编写一个通用的事件监听函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindEvent</span>(<span class="params">elem, type, seletor, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (fn == <span class="literal">null</span>) &#123;</span><br><span class="line">    fn = selector;</span><br><span class="line">    seletor = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  elem.addEventListener(type, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> target;</span><br><span class="line">    <span class="keyword">if</span> (seletor) &#123;</span><br><span class="line">      target = e.target;</span><br><span class="line">      <span class="keyword">if</span> (target.matches(seletor)) &#123;</span><br><span class="line">        fn.call(target, e);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fn(e);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>描述事件冒泡的流程</p>
<ul>
<li>DOM 树形结构</li>
<li>事件冒泡</li>
<li>阻止冒泡</li>
<li>冒泡的应用</li>
</ul>
</li>
<li><p>对于一个无线下拉加载图片的页面，如何给每个图片绑定事件</p>
<ul>
<li>使用代理</li>
<li>知道代理的两个优点</li>
</ul>
</li>
</ul>
<h4 id="重点总结-1"><a href="#重点总结-1" class="headerlink" title="重点总结"></a>重点总结</h4><ul>
<li>通用事件绑定</li>
<li>事件冒泡</li>
<li>代理</li>
</ul>
<h2 id="5-4-Ajax"><a href="#5-4-Ajax" class="headerlink" title="5-4 Ajax"></a>5-4 Ajax</h2><blockquote>
<p>题目</p>
<p>知识点</p>
<p>题目</p>
</blockquote>
<h3 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h3><ul>
<li>手动编写一个 ajax，不依赖第三方库</li>
<li>跨域的几种实现方式</li>
</ul>
<h3 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>XMLHttpRequest</li>
<li>状态码说明</li>
<li>跨域</li>
</ul>
<h4 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h4><blockquote>
<p>使用 XMLHttpRequest (XHR)对象可以与服务器交互。您可以从 URL 获取数据，而无需让整个的页面刷新。这使得 Web 页面可以只更新页面的局部，而不影响用户的操作。XMLHttpRequest 在 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/AJAX">Ajax</a> 编程中被大量使用</p>
<p>尽管名称如此，XMLHttpRequest 可以用于获取任何类型的数据，而不仅仅是 XML，它还支持 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP">HTTP</a>以外的协议(包括文件和 ftp)。</p>
<p>如果您的通信需要从服务器接收事件或消息数据，请考虑通过<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventSource"><code>EventSource</code></a>接口使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events">server-sent events</a>。对于 full-duplex 通信， <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API">WebSockets</a> 可能是更好的选择。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">可参考</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;/api&quot;</span>, <span class="literal">false</span>); <span class="comment">//false 使用异步</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//这里是函数异步执行，可参考之前 JS 基础中的异步 模块</span></span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">      alert(xhr.responseText);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">xhr.send(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<h4 id="IE-兼容性问题"><a href="#IE-兼容性问题" class="headerlink" title="IE 兼容性问题"></a>IE 兼容性问题</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/mlb2er/3miu1pxk.html">有意向者可参考</a></p>
</blockquote>
<ul>
<li>IE 低版本使用 ActiveXObject，和 W3C 标准不一样</li>
<li>IE 低版本使用量非常少，很多网站都早已不支持</li>
<li>建议对 IE 低版本的兼容性：<strong>了解即可，无需深究</strong> 。</li>
<li>如果遇到对 IE 低版本要求苛刻的面试，果断放弃</li>
</ul>
<h4 id="readyState-状态码说明"><a href="#readyState-状态码说明" class="headerlink" title="readyState 状态码说明"></a>readyState 状态码说明</h4><blockquote>
<p>readyState 是 XMLHttpRequest 对象的一个属性，用来标识当前 XMLHttpRequest 对象处于什么状态。<br>readyState 总共有 5 个状态值，分别为 0~4，每个值代表了不同的含义</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>：未初始化，还没有调用 send()方法</span><br><span class="line"><span class="number">1</span>：载入，已调用send()方法，XMLHttpRequest对象开始发送请求</span><br><span class="line"><span class="number">2</span>：载入完成，send()方法执行完成，已经接收到全部的相应内容</span><br><span class="line"><span class="number">3</span>：交互，正在解析响应内容</span><br><span class="line"><span class="number">4</span>：完成，响应内容解析完成，可以在客户端调用了</span><br></pre></td></tr></table></figure>

<h4 id="status-状态码说明"><a href="#status-状态码说明" class="headerlink" title="status 状态码说明"></a>status 状态码说明</h4><blockquote>
<p>status 是 XMLHttpRequest 对象的一个属性，表示响应的 HTTP 状态码</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/liu-fei-fei/p/5618782.html">详细参考</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>xx：信息响应类，表示接收到请求并且继续处理</span><br><span class="line"><span class="number">2</span>xx：处理成功响应类，表示动作被成功接收、理解和接受</span><br><span class="line"><span class="number">3</span>xx：重定向响应类，为了完成指定的动作，必须接受进一步处理</span><br><span class="line"><span class="number">4</span>xx：客户端错误，客户请求包含语法错误或者是不能正确执行</span><br><span class="line"><span class="number">5</span>xx：服务端错误，服务器不能正确执行一个正确的请求</span><br><span class="line"></span><br><span class="line"><span class="number">200</span>——交易成功</span><br><span class="line"><span class="number">404</span>——没有发现文件、查询或URl</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="5-5-跨域"><a href="#5-5-跨域" class="headerlink" title="5-5 跨域"></a>5-5 跨域</h2><blockquote>
<p><strong>定义</strong> ：跨域是指从一个域名的网页去请求另一个域名的资源。比如从<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 页面去请求 <a target="_blank" rel="noopener" href="http://www.google.com/">www.google.com</a> 的资源。但是一般情况下不能这么做，它是由浏览器的同源策略造成的，是浏览器对<a href="https://link.juejin.im/?target=http://lib.csdn.net/base/javascript">JavaScript</a>施加的安全限制。跨域的严格一点的定义是：只要 协议，域名，端口有任何一个的不同，就被当作是跨域</p>
<p><strong>所谓同源是指，域名，协议，端口均相同。</strong>这里说的 js 跨域是指通过 js 在不同的域之间进行数据传输或通信，比如用 ajax 向一个不同的域请求数据，或者通过 js 获取页面中不同域的框架中(iframe)的数据。</p>
<p>概念：<strong>只要协议、域名、端口有任何一个不同</strong> ，都被当作是不同的域。算作 跨域。</p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000015597029">参考</a></p>
<p>http 默认端口：80</p>
<p>https 默认端口：443</p>
</blockquote>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><ul>
<li>说明什么是跨域</li>
<li>JSONP</li>
<li>服务器端设置 http header</li>
</ul>
<h4 id="什么是跨域"><a href="#什么是跨域" class="headerlink" title="什么是跨域"></a>什么是跨域</h4><p><strong>跨域是</strong>指一个<strong>域</strong>下的文档或脚本试图去请求另一个<strong>域</strong>下的资源，这里<strong>跨域是</strong>广义的。 其实我们通常所说的<strong>跨域是</strong>狭义的，<strong>是</strong>由浏览器同源策略限制的一类请求场景。</p>
<h4 id="可以跨域的三个标签"><a href="#可以跨域的三个标签" class="headerlink" title="可以跨域的三个标签"></a>可以跨域的三个标签</h4><ul>
<li>&lt;**img src=xxx** &gt; 用于打点统计，统计网站可能是其它域</li>
<li>&lt;**link href=xxxx** &gt; 可以使用 CDN,CDN 也是其它域</li>
<li>&lt;**script src=xxx** &gt; 可以使用 CDN, 可以用于 <strong>JSONP</strong></li>
</ul>
<h4 id="跨域注意事项"><a href="#跨域注意事项" class="headerlink" title="跨域注意事项"></a>跨域注意事项</h4><ul>
<li>所有的跨域请求都必须经过信息提供方允许</li>
<li>如果未经允许即可获取，那是浏览器同源策略出现漏洞</li>
</ul>
<h3 id="JSONP-实现原理"><a href="#JSONP-实现原理" class="headerlink" title="JSONP 实现原理"></a>JSONP 实现原理</h3><blockquote>
<p>jsonp 是一种跨域通信的手段</p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000007665361">参考 1</a> <a target="_blank" rel="noopener" href="https://github.com/qianlongo/zepto-analysis/issues/4">参考 2</a></p>
</blockquote>
<p><strong>jsonp 是一种跨域通信的手段，它的原理其实很简单：</strong></p>
<ol>
<li>客户端利用<code>script</code>标签可以跨域请求资源的性质，向网页中动态插入<code>script</code>标签，来向服务端请求数据。</li>
<li>服务端会解析请求的<code>url</code>,至少拿到一个回调函数(比如<code>callback=myCallback</code>)参数,之后将数据放入其中返回给客户端。</li>
<li>当然 jsonp 不同于平常的<code>ajax</code>请求,它仅仅支持 get 类型的方式</li>
</ol>
<h4 id="实现流程"><a href="#实现流程" class="headerlink" title="实现流程"></a>实现流程</h4><ol>
<li><p>设定一个 script 标签</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;http://jsonp.js?callback=xxx&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>callback 定义了一个函数名，而远程服务端通过调用指定的函数并传入参数来实现传递参数，将<code>fn(response)</code>传递回客户端</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$callback = !<span class="keyword">empty</span>($_GET[<span class="string">&#x27;callback&#x27;</span>]) ? $_GET[<span class="string">&#x27;callback&#x27;</span>] : <span class="string">&#x27;callback&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> $callback.<span class="string">&#x27;(.json_encode($data).)&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>客户端接收到返回的 js 脚本，开始解析和执行<code>fn(response)</code></p>
</li>
</ol>
<h4 id="服务端设置-http-header"><a href="#服务端设置-http-header" class="headerlink" title="服务端设置 http header"></a>服务端设置 http header</h4><ul>
<li>另外一个解决跨域的简洁方法，需要服务器端来做</li>
<li>但是作为交互方，我们必须知道这个方法</li>
<li>是将来解决跨域问题的一个趋势</li>
</ul>
<p><img src="http://static.zxinc520.com/blog/20190718/YNGAeXPTUx6I.png?imageslim" alt="mark"></p>
<h4 id="重点总结-2"><a href="#重点总结-2" class="headerlink" title="重点总结"></a>重点总结</h4><ul>
<li>XMLHttpRequest</li>
<li>状态码说明</li>
<li>跨域</li>
</ul>
<h2 id="5-6-存储"><a href="#5-6-存储" class="headerlink" title="5-6 存储"></a>5-6 存储</h2><blockquote>
<p>题目</p>
<p>知识点</p>
<p>解答</p>
</blockquote>
<h3 id="题目-2"><a href="#题目-2" class="headerlink" title="题目"></a>题目</h3><ul>
<li>请描述一下 cookie，sessionStorage 和 localStorage 的区别？</li>
</ul>
<h3 id="知识点-2"><a href="#知识点-2" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>cookie</li>
<li>sessionStorage 和 localStorage</li>
</ul>
<h4 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5b57dba3f265da0fb018741f">可参考</a></p>
</blockquote>
<ul>
<li>本身用于客户端和服务器端通信</li>
<li>但是它有本地储存的功能，于是就被 <strong>借用</strong></li>
<li>使用 document.cookie = … 获取和修改即可</li>
</ul>
<h4 id="cookie-用于储存的缺点"><a href="#cookie-用于储存的缺点" class="headerlink" title="cookie 用于储存的缺点"></a>cookie 用于储存的缺点</h4><ul>
<li><p><strong>储存量太小</strong> ，Cookie`数量和长度的限制。每个 domain 最多只能有 20 条 cookie，每个 cookie 长度不能超过 4KB，否则会被截掉。在当今新的浏览器和客户端设备版本中，支持 8192 字节的 Cookie 大小已愈发常见。</p>
</li>
<li><p>所有 http 请求都带着，会<strong>影响获取资源的效率</strong></p>
</li>
<li><p>用户配置为禁用。有些用户禁用了浏览器或客户端设备接收 Cookie 的能力，因此限制了这一功能</p>
</li>
<li><p>由于在 HTTP 请求中的 cookie 是明文传递的，潜在的安全风险，Cookie 可能会被篡改</p>
</li>
<li><p>有些状态不可能保存在客户端</p>
</li>
<li><p>cookie 会被附加在每个 HTTP 请求中，所以无形中增加了流量</p>
</li>
<li><p>cookie 一般不可跨域使用</p>
</li>
<li><p>没有封装好的 setCookie 和 getCookie 方法，需要开发者自省封装</p>
</li>
</ul>
<h3 id="sessionStorage-和-localStorage"><a href="#sessionStorage-和-localStorage" class="headerlink" title="sessionStorage 和 localStorage"></a>sessionStorage 和 localStorage</h3><ul>
<li>HTML5 专门为储存而设计，最大容量 5M</li>
<li>API 简答易用</li>
<li>localStorage.setItem(key, value); localStorage.getItem(key, value);</li>
</ul>
<h4 id="区别："><a href="#区别：" class="headerlink" title="区别："></a>区别：</h4><p><strong>localStorage</strong> 生命周期是永久，这意味着除非用户显示在浏览器提供的 UI 上清除 localStorage 信息，否则这些信息将永远存在。</p>
<p><strong>sessionStorage</strong> 生命周期为当前窗口或标签页，一旦窗口或标签页被永久关闭了，那么所有通过 sessionStorage 存储的数据也就被清空了。</p>
<p>不同浏览器无法共享 localStorage 或 sessionStorage 中的信息。相同浏览器的不同页面间可以共享相同的 localStorage（页面属于相同域名和端口），但是不同页面或标签页间无法共享 sessionStorage 的信息。这里需要注意的是，页面及标 签页仅指顶级窗口，如果一个标签页包含多个 iframe 标签且他们属于同源页面，那么他们之间是可以共享 sessionStorage 的。</p>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ul>
<li>iOS safari 隐藏模式下</li>
<li>localStorage.getItem 会报错</li>
<li>建议 统一使用 try-catch 封装</li>
</ul>
<h3 id="解答-3"><a href="#解答-3" class="headerlink" title="解答"></a>解答</h3><ul>
<li>请描述一下 cookie，sessionStorage 和 localStorage 的区别？<ul>
<li>容量</li>
<li>是否携带到 ajax 中</li>
<li>API 易用性</li>
</ul>
</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BOM/" rel="tag">BOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DOM/" rel="tag">DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ajax-%E8%AF%B7%E6%B1%82/" rel="tag">ajax 请求</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A/" rel="tag">事件绑定</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%82%A8%E5%AD%98/" rel="tag">储存</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-OperationEnvironment"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/07/19/OperationEnvironment/"
    >运行环境</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/07/19/OperationEnvironment/" class="article-date">
  <time datetime="2019-07-19T15:06:51.000Z" itemprop="datePublished">2019-07-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a> / <a class="article-category-link" href="/categories/JS/%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/">运行环境</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h1><blockquote>
<p>讲解 JS 代码在浏览器中运行的相关问题，例如 <strong>页面加载和渲染</strong>，<strong>性能优化</strong>，<strong>安全性</strong> ，这些类别的题目。</p>
<p>知识点：</p>
<p>8-1 页面加载过程</p>
<p>8-2 性能优化</p>
</blockquote>
<ul>
<li>浏览器就可以通过访问链接来得到页面内容</li>
<li>通过绘制和渲染，显示出页面的最终的样子</li>
</ul>
<h2 id="整个过程中，我们需要考虑什么问题？"><a href="#整个过程中，我们需要考虑什么问题？" class="headerlink" title="整个过程中，我们需要考虑什么问题？"></a>整个过程中，我们需要考虑什么问题？</h2><h3 id="3-个重点"><a href="#3-个重点" class="headerlink" title="3 个重点"></a>3 个重点</h3><ul>
<li>页面加载过程</li>
<li>性能优化</li>
<li>安全性</li>
</ul>
<h2 id="8-1-页面加载过程"><a href="#8-1-页面加载过程" class="headerlink" title="8-1 页面加载过程"></a>8-1 页面加载过程</h2><blockquote>
<p>题目</p>
<p>知识点</p>
<p>解答</p>
</blockquote>
<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><ul>
<li>从输入 url 到得到 html 的详细过程</li>
<li>window.onload 和 DOMContentLoaded 的区别？</li>
</ul>
<h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>加载资源的形式</li>
<li>加载一个资源的过程</li>
<li>浏览器渲染页面的过程</li>
</ul>
<h4 id="加载资源的形式"><a href="#加载资源的形式" class="headerlink" title="加载资源的形式"></a>加载资源的形式</h4><ul>
<li>输入 url （或跳转页面）加载 html</li>
<li>url: <a target="_blank" rel="noopener" href="https://www.imooc.com/">https://www.imooc.com/</a></li>
<li>加载 html 中的静态资源</li>
<li>script 标签中资源的加载: &lt;**script src=”/static/jsjquery.js”&gt;&lt;/script** &gt;</li>
</ul>
<h4 id="加载一个资源的过程"><a href="#加载一个资源的过程" class="headerlink" title="加载一个资源的过程"></a>加载一个资源的过程</h4><ol>
<li>浏览器根据 DNS 服务器得到域名的 IP 地址</li>
<li>向这个 IP 的机器发送 http 请求</li>
<li>服务器收到、处理并返回 http 请求</li>
<li>浏览器得到返回内容</li>
</ol>
<h4 id="浏览器渲染页面的过程："><a href="#浏览器渲染页面的过程：" class="headerlink" title="浏览器渲染页面的过程："></a>浏览器渲染页面的过程：</h4><p>1.根据 HTML 结构生成 DOM Tree 2.根据 CSS 生成 CSSOM 3.将 DOM 和 CSSOM 整合形成 RenderTree 4.根据 RenderTree 开始渲染和展示 5.遇到&lt;**script** &gt;时，会执行并阻止渲染。</p>
<h4 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h4><ul>
<li><strong>为何要把 css 放在 head 中？</strong><ul>
<li>css 放在 body 标签尾部时, DOMTree 构建完成之后便开始构建 RenderTree, 并计算布局渲染网页, 等加载解析完 css 之后, 开始构建 CSSOMTree, 并和 DOMTree 重新构建 RenderTree, 重新计算布局渲染网页</li>
<li>css 放在 head 标签中时, 先加载 css, 之后解析 css 构建 CSSOMTree, 于此同时构建 DOMTree, CSSOMTree 和 DOMTree 都构建完毕之后开始构建 RenderTree, 计算布局渲染网页</li>
</ul>
</li>
</ul>
<p>对比两者, css 放在 head 标签中比 css 放在 body 标签尾部少了一次构建 RenderTree, 一次计算布局和一次渲染网页, 因此性能会更好; 并且 css 放在 body 标签尾部时会在网页中短暂出现”裸奔”的 HTML, 这不利于用户体验</p>
<hr>
<ul>
<li><p><strong>为何要把 js 放在 body 最下面？</strong> ，<u>既然 Dom 树完全生成好后才能显示“没有图片的首屏”，浏览器又必须读完全部 HTML 才能生成完整的 Dom 树，script 标签不放在 body 底部是不是也一样？</u></p>
<ul>
<li>—— JS 放在底部可以保证让浏览器优先渲染完现有的 HTML 内容，让用户先看到内容，体验好。另外，JS 执行如果涉及 DOM 操作，得等待 DOM 解析完成才行，JS 放在底部执行时，HTML 肯定都解析成了 DOM 结构。JS 如果放在 HTML 顶部，JS 执行的时候 HTML 还没来得及转换为 DOM 结构，可能会报错。 <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000004292479">JS 一定要放在 Body 的最底部么？聊聊浏览器的渲染机制</a></li>
</ul>
</li>
</ul>
<h4 id="window-onload-和-DOMContentLoaded"><a href="#window-onload-和-DOMContentLoaded" class="headerlink" title="window.onload 和 DOMContentLoaded"></a>window.onload 和 DOMContentLoaded</h4><p><img src="http://static.zxinc520.com/blog/20190719/sSK9VYP2CSRd.png?imageslim" alt="mark"></p>
<h3 id="解答"><a href="#解答" class="headerlink" title="解答"></a>解答</h3><ul>
<li><p>从输入 url 到得到 html 的详细过程</p>
<ul>
<li>浏览器根据 DNS 服务器得到域名的 IP 地址</li>
<li>向这个 IP 的机器发送 http 请求</li>
<li>服务器收到、处理并返回 http 请求</li>
<li>浏览器得到返回内容</li>
</ul>
</li>
<li><p>window.onload 和 DOMContentLoaded 的区别？</p>
<ul>
<li>window.onload： 页面的全部资源加载完才会执行，包括图片、视频等</li>
<li>DOMContentLoaded： DOM 渲染完即可执行，此时图片、视频还没有加载完</li>
</ul>
</li>
</ul>
<h2 id="8-2-性能优化"><a href="#8-2-性能优化" class="headerlink" title="8-2 性能优化"></a>8-2 性能优化</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5a966bd16fb9a0635172a50a">2018 前端性能优化清单</a></p>
<p>关于 <strong>性能优化</strong> 是个大的面，这篇文章主要涉及到 <strong>前端</strong> 的几个点，如 <strong>前端性能优化</strong> 的流程、常见技术手段、工具等。</p>
<p>提及 <strong>前端性能优化</strong> ，大家应该都会想到 <strong>雅虎军规</strong>，本文会结合 <strong>雅虎军规</strong> 融入自己的了解知识，进行的总结和梳理 😜</p>
</blockquote>
<h3 id="我们先来看看-👀-雅虎军规-的-35-条-："><a href="#我们先来看看-👀-雅虎军规-的-35-条-：" class="headerlink" title="我们先来看看 👀 雅虎军规 的 35 条 ："></a>我们先来看看 👀 雅虎军规 的 35 条 ：</h3><ul>
<li>尽量减少 HTTP 请求个数——须权衡</li>
<li>使用 <strong>CDN</strong>（内容分发网络）</li>
<li>为文件头指定 Expires 或 Cache-Control ，使内容具有缓存性。</li>
<li>避免空的 src 和 href</li>
<li>使用 gzip 压缩内容</li>
<li>把 CSS 放到顶部</li>
<li>把 JS 放到底部</li>
<li>避免使用 CSS 表达式</li>
<li>将 CSS 和 JS 放到外部文件中</li>
<li>减少 DNS 查找次数</li>
<li>精简 CSS 和 JS</li>
<li>避免跳转</li>
<li>剔除重复的 JS 和 CSS</li>
<li>配置 ETags</li>
<li>使 AJAX 可缓存</li>
<li>尽早刷新输出缓冲</li>
<li>使用 GET 来完成 AJAX 请求</li>
<li>延迟加载</li>
<li>预加载</li>
<li>减少 DOM 元素个数</li>
<li>根据域名划分页面内容</li>
<li>尽量减少 iframe 的个数</li>
<li>避免 404</li>
<li>减少 Cookie 的大小</li>
<li>使用无 cookie 的域</li>
<li>减少 DOM 访问</li>
<li>开发智能事件处理程序</li>
<li>用 代替 @import</li>
<li>避免使用滤镜</li>
<li>优化图像</li>
<li>优化 CSS Spirite</li>
<li>不要在 HTML 中缩放图像——须权衡</li>
<li>favicon.ico 要小而且可缓存</li>
<li>保持单个内容小于 25K</li>
<li>打包组件成复合文本</li>
</ul>
<hr>
<ul>
<li>这本身就是一个综合性的问题</li>
<li>没有标准答案，如果要非常全面，能写一本书</li>
<li>只关注核心点，针对面试</li>
</ul>
<h3 id="原则"><a href="#原则" class="headerlink" title="原则"></a>原则</h3><ul>
<li>多使用内存、缓存或其他方法</li>
<li>减少 CPU 计算、减少网络请求</li>
</ul>
<h3 id="从哪里入手"><a href="#从哪里入手" class="headerlink" title="从哪里入手"></a>从哪里入手</h3><ul>
<li>加载页面和静态资源</li>
<li>页面渲染</li>
</ul>
<h3 id="加载资源优化"><a href="#加载资源优化" class="headerlink" title="加载资源优化"></a>加载资源优化</h3><ul>
<li>静态资源的压缩合并</li>
<li>静态资源缓存</li>
<li>使用 CDN 让资源加载更快</li>
<li>使用 SSR 后端渲染，数据直接输出到 HTML 中</li>
</ul>
<h3 id="渲染优化"><a href="#渲染优化" class="headerlink" title="渲染优化"></a>渲染优化</h3><ul>
<li>CSS 放前面 ，JS 放后面</li>
<li>懒加载 （图片懒加载、下拉加载更多）</li>
<li>减少 DOM 查询 ，对 DOM 查询做缓存</li>
<li>减少 DOM 操作，多个操作尽量合并 在一起执行</li>
<li>事件节流</li>
<li>尽早执行操作 （如 DOMContentLoaded）</li>
</ul>
<h3 id="优化示例"><a href="#优化示例" class="headerlink" title="优化示例"></a>优化示例</h3><blockquote>
<p>展示几个优化示例</p>
</blockquote>
<h4 id="资源合并"><a href="#资源合并" class="headerlink" title="资源合并"></a>资源合并</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;a.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;b.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;c.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//资源合并</span></span><br><span class="line">&lt;script src=<span class="string">&quot;abc.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h4><ul>
<li>通过连接名字控制缓存</li>
<li>&lt;**script src=”adc_1.js”&gt;&lt;/script** &gt;</li>
<li>只有内容改变的时候，连接名称才会改变</li>
<li>&lt;**script src=”adc_2.js”&gt;&lt;/script** &gt;</li>
</ul>
<h4 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h4><blockquote>
<p>2 个在线的好用的 CDN 网站：</p>
<p><a target="_blank" rel="noopener" href="https://www.bootcdn.cn/">https://www.bootcdn.cn/</a></p>
<p><a target="_blank" rel="noopener" href="https://cdnjs.com/">https://cdnjs.com/</a></p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190719/wqVaD4amGTnT.png?imageslim" alt="mark"></p>
<h4 id="使用-SSR-后端渲染"><a href="#使用-SSR-后端渲染" class="headerlink" title="使用 SSR 后端渲染"></a>使用 SSR 后端渲染</h4><ul>
<li>现在 Vue React 提出了这样的概念</li>
<li>其实 jsp php asp 都属于后端渲染</li>
</ul>
<h4 id="懒加载"><a href="#懒加载" class="headerlink" title="懒加载"></a>懒加载</h4><p><img src="http://static.zxinc520.com/blog/20190719/dNHq1Xfe0Ep5.png?imageslim" alt="mark"></p>
<h4 id="缓存-DOM-查询"><a href="#缓存-DOM-查询" class="headerlink" title="缓存 DOM 查询"></a>缓存 DOM 查询</h4><p><img src="http://static.zxinc520.com/blog/20190719/4xj98cKCzJh9.png?imageslim" alt="mark"></p>
<h4 id="合并-DOM-插入"><a href="#合并-DOM-插入" class="headerlink" title="合并 DOM 插入"></a>合并 DOM 插入</h4><p><img src="http://static.zxinc520.com/blog/20190719/S7Fvwi6QNApC.png?imageslim" alt="mark"></p>
<h4 id="事件节流"><a href="#事件节流" class="headerlink" title="事件节流"></a>事件节流</h4><p><img src="http://static.zxinc520.com/blog/20190719/vHApgiVQan6S.png?imageslim" alt="mark"></p>
<h4 id="尽早操作"><a href="#尽早操作" class="headerlink" title="尽早操作"></a>尽早操作</h4><p><img src="http://static.zxinc520.com/blog/20190719/q8SS7PiiaKI4.png?imageslim" alt="mark"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B/" rel="tag">加载过程</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" rel="tag">性能优化</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-DevelopmentEnvironment"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/07/19/DevelopmentEnvironment/"
    >开发环境</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/07/19/DevelopmentEnvironment/" class="article-date">
  <time datetime="2019-07-19T09:57:31.000Z" itemprop="datePublished">2019-07-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a> / <a class="article-category-link" href="/categories/JS/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">开发环境</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h1><blockquote>
<p>讲解在面试过程中，面试官可能会问及的前端开发环境的问题，例如 <strong>IDE</strong> ，<strong>Git</strong> ，<strong>模块化</strong> ，<strong>打包工具</strong> ，<strong>上线流程</strong> ，这些类别的题目。</p>
<p>知识点：</p>
<p>7-1 IDE</p>
<p>7-2 Git</p>
<p>7-3 模块化</p>
<p>7-4 构建工具</p>
<p>7-5 上线和回滚</p>
</blockquote>
<h3 id="关于开发环境"><a href="#关于开发环境" class="headerlink" title="关于开发环境"></a>关于开发环境</h3><ul>
<li>面试官想通过开发环境了解面试者的经验</li>
<li>开发环境，最能体现工作产出的效率</li>
<li>会以聊天的形式为主，而不是出具体的问题</li>
</ul>
<h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><blockquote>
<p><strong>IDE</strong> ，<strong>Git</strong> ，<strong>JS 模块化</strong> ，<strong>打包工具</strong> ，<strong>上线流程</strong> ，</p>
</blockquote>
<ul>
<li>IDE （ 写代码的效率 ）</li>
<li>git （ 代码版本管理 ，多人协作开发 ）</li>
<li>JS 模块化</li>
<li>打包工具</li>
<li>上线回滚的流程</li>
</ul>
<h2 id="7-1-IDE"><a href="#7-1-IDE" class="headerlink" title="7-1 IDE"></a>7-1 IDE</h2><ul>
<li>webstorm （ 我平常基本用的就是 <strong>webstorm</strong> ）</li>
<li>sublime</li>
<li>vscode</li>
<li>atom</li>
<li>插件 插件 插件 ！！！</li>
</ul>
<p><img src="http://static.zxinc520.com/blog/20190719/MxVs8IUJKDhO.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190719/QNC5aBgIVByU.png?imageslim" alt="mark"></p>
<p><strong>注意：</strong></p>
<ul>
<li>千万不要说你使用 Dreamweaver 或者 notpad ++</li>
<li>不做 .net 也不要用 Visual Studio</li>
<li>不做 java 也不要用 eclipse</li>
</ul>
<h2 id="7-2-Git"><a href="#7-2-Git" class="headerlink" title="7-2 Git"></a>7-2 Git</h2><blockquote>
<p>Git 详细介绍：可参考的的博客：<a target="_blank" rel="noopener" href="http://zxinc520.com/lcj/%225d285a027b8c9f7d8dc4f627%22">Git 篇</a></p>
</blockquote>
<ul>
<li>正式项目都需要代码版本管理</li>
<li>大型项目需要多人协作开发</li>
<li>Git 和 linux 是一个作者</li>
</ul>
<h2 id="7-3-模块化"><a href="#7-3-模块化" class="headerlink" title="7-3 模块化"></a>7-3 模块化</h2><blockquote>
<p>模块化编程就是通过组合一些<strong>相对独立可复用的模块</strong>来进行功能的实现，其最核心的两部分是<strong>定义模块</strong>和<strong>引入模块</strong>；</p>
<ul>
<li>定义模块时，每个模块内部的执行逻辑是不被外部感知的，只是导出（暴露）出部分方法和数据；</li>
<li>引入模块时，同步 / 异步去加载待引入的代码，执行并获取到其暴露的方法和数据；</li>
</ul>
<p><strong>模块化的发展情况</strong> ：无模块化–&gt;CommonJS 规范–&gt;AMD 规范–&gt;CMD 规范–&gt;ES6 模块化</p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5b6c222a6fb9a04fde5af4ee">Javascript 模块化指北</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5b4420e7f265da0f4b7a7b27">这一次，我要弄懂 javascript 的模块化</a></p>
</blockquote>
<h3 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>不使用模块化的情况</li>
<li>使用模块化</li>
<li>AMD</li>
<li>CommonJS</li>
</ul>
<h4 id="无模块化"><a href="#无模块化" class="headerlink" title="无模块化"></a>无模块化</h4><p>script 标签引入 js 文件，相互罗列，但是被依赖的放在前面，否则使用就会报错。如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;jquery.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">　　&lt;script src=<span class="string">&quot;jquery_scroller.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">　　&lt;script src=<span class="string">&quot;main.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">　　&lt;script src=<span class="string">&quot;other1.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">　　&lt;script src=<span class="string">&quot;other2.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">　　&lt;script src=<span class="string">&quot;other3.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>​ 即简单的将所有的 js 文件统统放在一起。但是这些文件的顺序还不能出错，比如 jquery 需要先引入，才能引入 jquery 插件，才能在其他的文件中使用 jquery。缺点很明显：</p>
<ul>
<li>污染全局作用域</li>
<li>维护成本高</li>
<li>依赖关系不明显</li>
</ul>
<h3 id="AMD-规范"><a href="#AMD-规范" class="headerlink" title="AMD 规范"></a>AMD 规范</h3><blockquote>
<p>异步模块定义（<strong>AMD</strong>）API 指定了一种定义模块的机制，以便可以异步加载模块及其依赖项。这特别适用于浏览器环境，其中模块的同步加载会导致性能，可用性，调试和跨域访问问题。</p>
</blockquote>
<ul>
<li>require.js <a target="_blank" rel="noopener" href="https://requirejs.org/">https://requirejs.org/</a></li>
<li>全局 define 函数</li>
<li>全局 require 函数</li>
<li>依赖 JS 会自动、异步加载</li>
</ul>
<p>AMD 标准中，定义了下面三个 API：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="built_in">module</span>], callback);</span><br><span class="line">define(id, [depends], callback);</span><br><span class="line"><span class="built_in">require</span>.config();</span><br></pre></td></tr></table></figure>

<p>即通过 define 来<strong>定义</strong>一个模块，然后使用 require 来<strong>加载</strong>一个模块, 使用 require.config()指定引用路径。</p>
<h4 id="举例说明："><a href="#举例说明：" class="headerlink" title="举例说明："></a>举例说明：</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script</span><br><span class="line">  src=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js&quot;</span></span><br><span class="line">  data-main=<span class="string">&quot;./main.js&quot;</span></span><br><span class="line">&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><em>main.js:</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">&quot;./a.js&quot;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  a.printDate(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><em>a.js:</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">&quot;./a-util.js&quot;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">aUtil</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = &#123;</span><br><span class="line">    printDate: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(aUtil.aGetFormatDate(data));</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> a;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><em>a-util.js:</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">&quot;./util.js&quot;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">util</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> aUtil = &#123;</span><br><span class="line">    aGetFormatDate: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> util.getFormatDate(data, <span class="number">2</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> aUtil;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><em>util.js:</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> util = &#123;</span><br><span class="line">    getFormatDate: <span class="function"><span class="keyword">function</span> (<span class="params">data, type</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (type === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;2019-07-19&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (type === <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;2019年6月20日&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> util;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190719/tVkLYFlEzrtH.png?imageslim" alt="mark"></p>
<h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><blockquote>
<p>2009 年 ry 发布 Node.js 的第一个版本，CommonJS 作为其中最核心的特性之一，适用于服务端下的场景；历年来的考察和时间的洗礼，以及前端工程化对其的充分支持，CommonJS 被广泛运用于 Node.js 和浏览器；</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Core Module</span></span><br><span class="line"><span class="keyword">const</span> cp = <span class="built_in">require</span>(<span class="string">&quot;child_process&quot;</span>);</span><br><span class="line"><span class="comment">// Npm Module</span></span><br><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">&quot;axios&quot;</span>);</span><br><span class="line"><span class="comment">// Custom Module</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="built_in">require</span>(<span class="string">&quot;./foo&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123; axios &#125;;</span><br><span class="line"><span class="built_in">exports</span>.foo = foo;</span><br></pre></td></tr></table></figure>

<p><strong>规范</strong></p>
<ul>
<li>module (Object): 模块本身</li>
<li>exports (*): 模块的导出部分，即暴露出来的内容</li>
<li>require (Function): 加载模块的函数，获得目标模块的导出值（基础类型为复制，引用类型为浅拷贝），可以加载内置模块、npm 模块和自定义模块。</li>
</ul>
<p><strong>nodejs 模块化规范，现在被大量用前端，原因</strong> ：</p>
<ul>
<li>前端开发依赖的插件课库，都可以从 npm 中获取</li>
<li>构建工具的高度自动化，使得使用 npm 的成本非常低</li>
<li>CommonJS 不会异步加载 JS ，而是同步一次性加载出来</li>
</ul>
<h4 id="使用-CommonJS"><a href="#使用-CommonJS" class="headerlink" title="使用 CommonJS"></a>使用 CommonJS</h4><blockquote>
<p><strong>module</strong> (Object)、<strong>exports</strong> (*)、<strong>require</strong> (Function)</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//util.ls</span></span><br><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">  getFormatDate: <span class="function"><span class="keyword">function</span> (<span class="params">data, type</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;2019-07-19&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;2019年6月20日&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//a-util.js</span></span><br><span class="line"><span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">&quot;util.js&quot;</span>);</span><br><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">  aGetFormatDate: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> util.getFormatDate(data, <span class="number">2</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="特性总结"><a href="#特性总结" class="headerlink" title="特性总结"></a>特性总结</h4><ul>
<li>同步执行模块声明和引入逻辑，分析一些复杂的依赖引用（如循环依赖）时需注意；</li>
<li>缓存机制，性能更优，同时限制了内存占用；</li>
<li>Module 模块可供改造的灵活度高，可以实现一些定制需求（如热更新、任意文件类型模块支持）；</li>
</ul>
<h4 id="AMD-和-CommonJS-的使用场景"><a href="#AMD-和-CommonJS-的使用场景" class="headerlink" title="AMD 和 CommonJS 的使用场景"></a>AMD 和 CommonJS 的使用场景</h4><ul>
<li>需要异步加载 JS ，使用 AMD</li>
<li>使用了 npm 之后建议使用 CommonJS</li>
</ul>
<h3 id="重点总结"><a href="#重点总结" class="headerlink" title="重点总结"></a>重点总结</h3><ul>
<li>AMD</li>
<li>CommonJS</li>
<li>两者的区别</li>
</ul>
<h2 id="7-4-构建工具"><a href="#7-4-构建工具" class="headerlink" title="7-4 构建工具"></a>7-4 构建工具</h2><blockquote>
<p>我们一定会感叹前端技术发展之快，各种可以提高开发效率的新思想和框架层出不穷。但是他们都有一个共同特点：源代码无法直接运行，必须通过转换后才能正常运行。</p>
<p>比如：Grunt 、Gulp、FIS 3、<strong>Webpack</strong> …</p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/entry/5ae5c8c9f265da0b9f400d8e">前端构建工具发展及其比较</a></p>
<p><a target="_blank" rel="noopener" href="http://zxinc520.com/lcj/%225cb181596d3d4a5cb52b65c9%22">webpack 学习可参考我的博客 </a> 和 <a target="_blank" rel="noopener" href="http://zxinc520.com/lcj/%225cb72a04009ae94788aa0d7f%22">我的另一篇博客</a> 均有 涉及。</p>
</blockquote>
<p>构建工具就是做这件事，将源代码转换成可以执行的 JavaScript、CSS、HTML 代码，包括如下内容：</p>
<ul>
<li>代码转换：将 TypeScript 编译成 JavaScript、将 SCSS 编译成 CSS 等。</li>
<li>文件优化：压缩 JavaScript、CSS、HTML 代码，压缩合并图片等。</li>
<li>代码分割：提取多个页面的公共代码，提取首屏不需要执行部分代码让其异步记在。</li>
<li>模块合并：在采用模块化的项目里会有很多个模块和文件，需要通过构建功能将模块分类合并成一个文件。</li>
<li>自动刷新：监听本地源代码变化，自动重新构建、刷新浏览器。</li>
<li>代码校验：在代码被提交到仓库前需要校验代码是否符合规范，以及单元测试是否通过。</li>
<li>自动发布：更新代码后，自动构建出线上发布代码并传输给发布系统。</li>
</ul>
<p>构建其实是工程化、自动化思想在前端开发中的体现，将一系列流程用代码去实现，让代码自动化地执行这一系列复杂的流程。构建为前端开发注入了更大的活力，解放了我们的生产力。</p>
<p>历史上先后出现了一系列构建工具，他们各有优缺点。由于前端工程师很熟悉 JavaScript，Node.js 又可以胜任所有构建需求，所以大多数构建工具都是用 Node.js 开发的。</p>
<h2 id="7-5-上线和回滚"><a href="#7-5-上线和回滚" class="headerlink" title="7-5 上线和回滚"></a>7-5 上线和回滚</h2><ul>
<li>不会有具体的问题，交流询问的方式</li>
</ul>
<h3 id="知识点-2"><a href="#知识点-2" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>上线和回滚的基本流程</li>
<li>linux 基本命令</li>
</ul>
<h4 id="上线和回滚的基本流程"><a href="#上线和回滚的基本流程" class="headerlink" title="上线和回滚的基本流程"></a>上线和回滚的基本流程</h4><ul>
<li><p>是非常重要的开发环节</p>
</li>
<li><p>各个公司的具体流程不同</p>
</li>
<li><p>由专门的工具后者系统完成，我们无需关心细节</p>
</li>
<li><p>如果你没有参与过，面试时也要说出要点</p>
</li>
<li><p>只讲要点，具体实现无法讲解</p>
</li>
</ul>
<h3 id="上线流程要点"><a href="#上线流程要点" class="headerlink" title="上线流程要点"></a>上线流程要点</h3><ul>
<li>将测试完成的代码提交到 git 版本库的 master 分支</li>
<li>将当前服务器的代码全部打包并记录版本号，备份</li>
<li>将 master 分支的代码提交覆盖到线上服务器，生成新版本号</li>
</ul>
<h3 id="回滚的流程要点"><a href="#回滚的流程要点" class="headerlink" title="回滚的流程要点"></a>回滚的流程要点</h3><ul>
<li>将当前服务器的代码打包并记录版本号，备份</li>
<li>将备份的上一个版本号解压，覆盖到线上服务器，并生成新的版本号</li>
</ul>
<h3 id="linux-基本命令"><a href="#linux-基本命令" class="headerlink" title="linux 基本命令"></a>linux 基本命令</h3><ul>
<li>服务器使用 linux 居多，server 版，只有命令行</li>
<li>测试环境要匹配线上环境，因此也是 linux</li>
<li>经常需要登录测试机来自己配置，获取数据</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IDE/" rel="tag">IDE</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B8%8A%E7%BA%BF%E5%92%8C%E5%9B%9E%E6%BB%9A/" rel="tag">上线和回滚</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" rel="tag">构建工具</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/" rel="tag">模块化</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-gitLearning"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/07/12/gitLearning/"
    >Git 学习</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/07/12/gitLearning/" class="article-date">
  <time datetime="2019-07-12T09:59:30.000Z" itemprop="datePublished">2019-07-12</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Git-学习"><a href="#Git-学习" class="headerlink" title="Git 学习"></a>Git 学习</h1><blockquote>
<p><strong>Git 学习</strong></p>
<p>Git 的优势</p>
<p>Git 与 SVN 的主要区别</p>
<p>安装 Git</p>
<p>初始化 Git 仓储/（仓库）</p>
<p>配置使用者的用户名和邮箱</p>
<p>把代码 存储到仓库中</p>
<p>Git 查看日志</p>
<p>Git 版本回退</p>
<p>Git 分支的新建与合并</p>
<p>上传至 github</p>
<p>通过 ssh 方式 上传 代码</p>
<p>push 和 pull 简写</p>
</blockquote>
<h3 id="什么是-Git？"><a href="#什么是-Git？" class="headerlink" title="什么是 Git？"></a>什么是 Git？</h3><blockquote>
<p>git – fast 版本控制</p>
<p>Git 是由“Linux 之父” <strong>Linus Torvalds</strong> 创建的。因为他发现找不到满意的方案来管理 Linux Kernel 联合开发的版本控制，就自己写了 Git。</p>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/">官方网站</a></p>
</blockquote>
<ul>
<li>Git 是一个<a target="_blank" rel="noopener" href="https://git-scm.com/about/free-and-open-source">免费的开源</a> 分布式版本控制系统，旨在快速高效地处理从小型到大型项目的所有事务</li>
<li>Git <a target="_blank" rel="noopener" href="https://git-scm.com/doc">易于学习</a>， <a target="_blank" rel="noopener" href="https://git-scm.com/about/small-and-fast">占地面积小，具有闪电般快速的性能</a>。它超越了 Subversion，CVS，Perforce 和 ClearCase 等 SCM 工具，具有<a target="_blank" rel="noopener" href="https://git-scm.com/about/branching-and-merging">廉价本地分支</a>，便捷的<a target="_blank" rel="noopener" href="https://git-scm.com/about/staging-area">临时区域</a>和 <a target="_blank" rel="noopener" href="https://git-scm.com/about/distributed">多个工作流程等功能</a>。</li>
</ul>
<h3 id="Git-的优势"><a href="#Git-的优势" class="headerlink" title="Git 的优势"></a>Git 的优势</h3><p>说到优势，那么自然是相对与 SVN 而言的</p>
<ol>
<li><p><strong>版本库本地化，支持离线提交，相对独立不影响协同开发。</strong>每个开发者都拥有自己的版本控制库，在自己的版本库上可以任意的执行提交代码、创建分支等行为。例如，开发者认为自己提交的代码有问题？没关系，因为版本库是自己的，回滚历史、反复提交、归并分支并不会影响到其他开发者。</p>
</li>
<li><p><strong>更少的“仓库污染”。</strong>git 对于每个工程只会产生一个.git 目录，这个工程所有的版本控制信息都在这个目录中，不会像 SVN 那样在每个目录下都产生.svn 目录。</p>
</li>
<li><p><strong>把内容按元数据方式存储，完整克隆版本库。</strong>所有版本信息位于.git 目录中，它是处于你的机器上的一个克隆版的版本库，它拥有中心版本库上所有的东西，例如标签、分支、版本记录等。</p>
</li>
<li><p><strong>支持快速切换分支方便合并，比较合并性能好。</strong>在同一目录下即可切换不同的分支，方便合并，且合并文件速度比 SVN 快。</p>
</li>
<li><p><strong>分布式版本库，无单点故障，内容完整性好。</strong>内容存储使用的是 SHA-1 哈希算法。这能确保代码内容的完整性，确保在遇到磁盘故障和网络问题时降低对版本库的破坏。</p>
</li>
</ol>
<h3 id="Git-与-SVN-的主要区别"><a href="#Git-与-SVN-的主要区别" class="headerlink" title="Git 与 SVN 的主要区别"></a>Git 与 SVN 的主要区别</h3><p>Git 是<strong>分布式</strong>SCM，而 SVN 是基于<strong>服务器</strong>的，也就是说每个开发者本地都有一套 git 库，每个人维护自己的版本（或者合并其他人的版本），而 SVN 是每个人写完代码后都及时的 checkin 到服务器上，进行合并。</p>
<h3 id="安装-Git"><a href="#安装-Git" class="headerlink" title="安装 Git"></a>安装 Git</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/896043488029600/896067074338496">廖雪峰的官方网站 git 安装</a></p>
</blockquote>
<p>鼠标 <strong>右键</strong>，选中 <code>Git Bash Here</code> 在里面输入相关命令：</p>
<p><img src="http://static.zxinc520.com/blog/20190711/litoDVMJqNVb.png?imageslim" alt="mark"></p>
<h2 id="使用-Git"><a href="#使用-Git" class="headerlink" title="使用 Git"></a>使用 Git</h2><h3 id="初始化-Git-仓储-（仓库）"><a href="#初始化-Git-仓储-（仓库）" class="headerlink" title="初始化 Git 仓储/（仓库）"></a>初始化 Git 仓储/（仓库）</h3><ol>
<li><strong>新建</strong>一个文件夹</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/9NbV1d2Bf3H2.png?imageslim" alt="mark"></p>
<ol start="2">
<li><strong>进入</strong>文件夹，鼠标<strong>右键</strong> 选中 <code>Git Bash Here</code>，输入命令 <code>git init</code> 回车。</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/PApIqKpihnsJ.gif" alt="mark"></p>
<h3 id="配置使用者的用户名和邮箱"><a href="#配置使用者的用户名和邮箱" class="headerlink" title="配置使用者的用户名和邮箱"></a>配置使用者的用户名和邮箱</h3><blockquote>
<p>配置使用者的用户名和邮箱 （自报家门）,每一次备份都会把当前备份者的信息存储起来。</p>
<p><strong>配置用户名</strong> ： <code>git config --global user.name &quot;zhouchen&quot;</code></p>
<p><strong>配置邮箱</strong>： <code>git config --global user.email &quot;1583741285@qq.com&quot;</code></p>
</blockquote>
<ol>
<li><p>配置使用者的<strong>用户名</strong>：<strong>进入</strong>文件夹，鼠标<strong>右键</strong> 选中 <code>Git Bash Here</code>，</p>
<p>输入命令 <code>git config --global user.name &quot;zhouchen&quot;</code> 回车 。</p>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/FUG7gTH6S2Mh.png?imageslim" alt="mark"></p>
<ol start="2">
<li><p>同样的配置使用者的 <strong>邮箱</strong>：<strong>进入</strong>文件夹，鼠标<strong>右键</strong> 选中 <code>Git Bash Here</code>，</p>
<p>输入命令 <code>git config --global user.email &quot;1583741285@qq.com&quot;</code> 回车 。</p>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/p62Mz0UPYcY9.png?imageslim" alt="mark"></p>
<h3 id="把代码-存储到仓库中"><a href="#把代码-存储到仓库中" class="headerlink" title="把代码 存储到仓库中"></a>把代码 存储到仓库中</h3><blockquote>
<p>把代码 存储到仓库中</p>
</blockquote>
<p><strong>需求</strong>：将 readme.md 文件 存储到仓库中</p>
<p><img src="http://static.zxinc520.com/blog/20190711/KwUDn18LHU1f.png?imageslim" alt="mark"></p>
<ol>
<li><p><strong>进入</strong>文件夹，鼠标<strong>右键</strong> 选中 <code>Git Bash Here</code>，</p>
<p>输入命令 <code>git add ./readme.md</code> 回车 。</p>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/P1DnSzDuSOBO.png?imageslim" alt="mark"></p>
<ol start="2">
<li>紧接上一步，输入命令 <code>git commit -m &quot;add Introductions&quot;</code> 回车 。</li>
</ol>
<p><u>add Introductions</u>—–可以自定义，一个辅助的解释 <strong>说明</strong>。</p>
<p><img src="http://static.zxinc520.com/blog/20190711/FqHM4n7stzsF.png?imageslim" alt="mark"></p>
<h4 id="查看提交状态"><a href="#查看提交状态" class="headerlink" title="查看提交状态"></a>查看提交状态</h4><p>命令：<code>git status</code></p>
<p><img src="http://static.zxinc520.com/blog/20190711/85IXkLM5Wusf.png?imageslim" alt="mark"></p>
<h4 id="add-补充-–-添加到大门口"><a href="#add-补充-–-添加到大门口" class="headerlink" title="add 补充 – 添加到大门口"></a>add 补充 – 添加到大门口</h4><p>命令 ：<code>git add .</code></p>
<h4 id="一次性-–-放入仓库"><a href="#一次性-–-放入仓库" class="headerlink" title="一次性 – 放入仓库"></a>一次性 – 放入仓库</h4><blockquote>
<p>合并 add 和 commit 命令</p>
</blockquote>
<p>命令：<code>git commit --all -m &quot;这是一次性的操作&quot;</code></p>
<h3 id="Git-查看日志"><a href="#Git-查看日志" class="headerlink" title="Git 查看日志"></a>Git 查看日志</h3><blockquote>
<p>查看日志—-能够查看自己提交的信息</p>
<p><code>git log</code>：查看历史提交的日志</p>
<p><code>git log --oneline</code> 可以看到精简版的日志</p>
</blockquote>
<p>命令：<code>git log</code></p>
<p><img src="http://static.zxinc520.com/blog/20190711/PBubR1jYW0fX.png?imageslim" alt="mark"></p>
<p>命令：<code>git log --oneline</code></p>
<p><img src="http://static.zxinc520.com/blog/20190711/bDLltWMjdSo2.png?imageslim" alt="mark"></p>
<h3 id="Git-版本回退"><a href="#Git-版本回退" class="headerlink" title="Git 版本回退"></a>Git 版本回退</h3><blockquote>
<p>git 版本回退</p>
<p>场景：如果最后一次提交的代码有误，可以通过 git 版本回退，回到代码无误的那一个状态。</p>
</blockquote>
<h4 id="根据索引回退"><a href="#根据索引回退" class="headerlink" title="根据索引回退"></a>根据索引回退</h4><ol>
<li>使用命令 <code>git log --oneline</code>查看状态</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/3RDzcU0Fo8Vy.png?imageslim" alt="mark"></p>
<ol start="2">
<li>命令：<code>git reset --hard Head~0 </code> ( 向后退 <strong>0</strong> 次)</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/Uobb7X1EwPUd.png?imageslim" alt="mark"></p>
<ol start="3">
<li>命令：<code>git reset --hard Head~1</code> （向后退 <strong>1</strong> 次）；此时代码回退了<strong>一次</strong> 。</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190711/3lM4UYpv7mQw.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190711/rwuTTeqbAFNc.png?imageslim" alt="mark"></p>
<h4 id="通过版本号回退"><a href="#通过版本号回退" class="headerlink" title="通过版本号回退"></a>通过版本号回退</h4><blockquote>
<p>通过版本号回退</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190712/VsLjP0uf8h8D.png?imageslim" alt="mark"></p>
<p>命令：<code>git reset --hard ac97cbc </code> 回车执行</p>
<p><img src="http://static.zxinc520.com/blog/20190712/puqQzAUO57un.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190712/4b2kofXa5m3B.png?imageslim" alt="mark"></p>
<h4 id="git-reflog"><a href="#git-reflog" class="headerlink" title="git reflog"></a>git reflog</h4><blockquote>
<p>可以看到每一次切换版本记录</p>
</blockquote>
<p>命令：<code>git reflog</code> 查看总体记录</p>
<p><img src="http://static.zxinc520.com/blog/20190712/rIsddoYu54q2.png?imageslim" alt="mark"></p>
<h3 id="Git-分支的新建与合并"><a href="#Git-分支的新建与合并" class="headerlink" title="Git 分支的新建与合并"></a>Git 分支的新建与合并</h3><blockquote>
<p>git 创建分支</p>
<p>运用场景：放开发者只开发完成部分代码，想保存代码,为了能够后续继续开发，可以创建分支。</p>
</blockquote>
<p><strong>现在让我们来看一个简单的分支与合并的例子，实际工作中大体也会用到这样的工作流程：</strong></p>
<ol>
<li>开发某个网站。</li>
<li>为实现某个新的需求，创建一个分支。</li>
<li>在这个分支上开展工作。</li>
</ol>
<p><strong>假设此时，你突然接到一个电话说有个很严重的问题需要紧急修补，那么可以按照下面的方式处理：</strong></p>
<ol>
<li>返回到原先已经发布到生产服务器上的分支。</li>
<li>为这次紧急修补建立一个新分支，并在其中修复问题。</li>
<li>通过测试后，回到生产服务器所在的分支，将修补分支合并进来，然后再推送到生产服务器上。</li>
<li>切换到之前实现新需求的分支，继续工作。</li>
</ol>
<h3 id="Git-分支的新建"><a href="#Git-分支的新建" class="headerlink" title="Git 分支的新建"></a>Git 分支的新建</h3><p><strong>新建分支</strong> ：命令：<code>git branch &lt;name&gt;</code></p>
<p><img src="http://static.zxinc520.com/blog/20190712/vCIxtjnYlgsu.png?imageslim" alt="mark"></p>
<p><strong>查看分支信息</strong> ：命令：<code>git branch</code> （ <strong>绿色</strong> –&gt; 代表正处于此分支）</p>
<p><img src="http://static.zxinc520.com/blog/20190712/R3t4POgEphiO.png?imageslim" alt="mark"></p>
<p><strong>切换分支</strong> ：命令 <code>git checkout dev</code></p>
<p><img src="http://static.zxinc520.com/blog/20190712/MQQVVoNGu41k.png?imageslim" alt="mark"></p>
<h4 id="在分支中提交部分代码"><a href="#在分支中提交部分代码" class="headerlink" title="在分支中提交部分代码"></a>在分支中提交部分代码</h4><blockquote>
<p>类似于主分支 提交（一样）</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190712/gBcACkrl5Gxf.png?imageslim" alt="mark"></p>
<h3 id="Git-合并分支"><a href="#Git-合并分支" class="headerlink" title="Git 合并分支"></a>Git 合并分支</h3><blockquote>
<p>合并分支</p>
<p><strong>需求</strong>：将 dev 分支 合并到主分支（master 分支）上。</p>
</blockquote>
<ol>
<li>切换到 <strong>master</strong> 分支：命令：<code>git checkout master</code></li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190712/bKIzXXwv3Xnm.png?imageslim" alt="mark"></p>
<ol start="2">
<li>合并 dev 分支 到 master 分支上：命令：<code>git merge dev</code></li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190712/uMQR0k4u6qTT.png?imageslim" alt="mark"></p>
<ol start="3">
<li>查看自己的提交记录 命令：<code>git log --oneline</code></li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190712/gu7FKi6tGBkf.png?imageslim" alt="mark"></p>
<h3 id="上传至-github"><a href="#上传至-github" class="headerlink" title="上传至 github"></a>上传至 github</h3><blockquote>
<p><code>git push [地址] master</code></p>
<p><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/896043488029600/900937935629664">参考廖雪峰的官方网站 github 篇</a></p>
<p>【地址】：例如：<a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Travel.git">https://github.com/ZhChen7/Travel.git</a></p>
</blockquote>
<p><strong>git push</strong> 推项目到 github：<code>git push [地址] master</code></p>
<h4 id="从-github-拉下项目"><a href="#从-github-拉下项目" class="headerlink" title="从 github 拉下项目"></a>从 github 拉下项目</h4><blockquote>
<p>github 拉下项目</p>
<p>【地址】：例如：<a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Travel.git">https://github.com/ZhChen7/Travel.git</a></p>
</blockquote>
<p><strong>git pull</strong> 从 github 拉下项目 ：<code>git pull [地址] master</code></p>
<p><strong>git clone</strong> 从 github 复制项目（往往在第一次使用）：<code>git clone [地址]</code></p>
<h3 id="通过-ssh-方式-上传-代码"><a href="#通过-ssh-方式-上传-代码" class="headerlink" title="通过 ssh 方式 上传 代码"></a>通过 ssh 方式 上传 代码</h3><blockquote>
<p>公钥 和 私钥 ；两者之间是有关联的。</p>
</blockquote>
<ol>
<li><p>生成 <strong>公钥</strong> 和 <strong>私钥</strong></p>
<p>命令：<code>ssh-keygen -t rsa -C &lt;邮箱&gt;</code></p>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190712/2GKvEKipn11B.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190712/9qHzNoUvBgy2.png?imageslim" alt="mark"></p>
<p><strong>找到生成的文件</strong> ：</p>
<p><img src="http://static.zxinc520.com/blog/20190712/DPxGphRT9AXv.png?imageslim" alt="mark"></p>
<p><strong>给自己的 github 配置 ssh</strong> ：</p>
<p><img src="http://static.zxinc520.com/blog/20190712/eK9KUtgXVIrN.png?imageslim" alt="mark"></p>
<h3 id="提交冲突"><a href="#提交冲突" class="headerlink" title="提交冲突"></a>提交冲突</h3><blockquote>
<p>先 <strong>pull</strong> 还是 先 <strong>push</strong></p>
<p>应用场景：多人共同提交时，产生提交冲突时。</p>
</blockquote>
<p><strong>解决方案</strong>：<strong>先 pull</strong> 然后 <strong>后 push</strong></p>
<h3 id="push-和-pull-简写"><a href="#push-和-pull-简写" class="headerlink" title="push 和 pull 简写"></a>push 和 pull 简写</h3><blockquote>
<p>push 和 pull 简写</p>
<p>【地址简写】：<code>git remote add &lt;变量名&gt; &lt;远程地址&gt;</code></p>
</blockquote>
<p><strong>配置远程地址</strong>（设置别名）：方便每一次不用输入很长的地址</p>
<p>命令：<code>git remote add origin git@github.com:ZhChen7/Travel.git</code></p>
<p>即：为 <code>git@github.com:ZhChen7/Travel.git</code>设置别名： **origin **</p>
<h4 id="默认关联"><a href="#默认关联" class="headerlink" title="默认关联"></a>默认关联</h4><blockquote>
<p>当我们在 push 时，加上 <strong>-u 参数</strong> ，那么在<strong>下次 push 时</strong>；只用 写 <code>git push</code> 即可上传代码。</p>
<p>（加上 <strong>-u</strong> 之后，git 会把当前分支 与 远程指定的分支 进行<strong>关联</strong>）</p>
</blockquote>
<p>下次 直接写 <code>git push</code> 相当于 写 <code>git push origin master</code> 。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-DataStructure"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/06/25/DataStructure/"
    >数组API</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/06/25/DataStructure/" class="article-date">
  <time datetime="2019-06-25T03:42:57.000Z" itemprop="datePublished">2019-06-25</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/API/">API</a> / <a class="article-category-link" href="/categories/API/%E6%95%B0%E7%BB%84API/">数组API</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="JavaScript-数组那些事"><a href="#JavaScript-数组那些事" class="headerlink" title="JavaScript 数组那些事"></a>JavaScript 数组那些事</h2><blockquote>
<p>JavaScript 数据结构与算法 — <strong>数组</strong> 篇</p>
<p>迭代器函数</p>
<p>ECMAScript 6 和 数组 新功能</p>
</blockquote>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><blockquote>
<p>数组对象的作用是：使用单独的变量名来存储一系列的值**.**</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array">总的方法参考</a></p>
</blockquote>
<h3 id="数组相关操作"><a href="#数组相关操作" class="headerlink" title="数组相关操作:"></a>数组相关操作:</h3><h4 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h4><ul>
<li><p>添加末尾元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr.push(<span class="number">11</span>);</span><br><span class="line">arr.push(<span class="number">12</span>, <span class="number">13</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加首位元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.unshift();</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h4><ul>
<li><p>删除末尾元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.pop();</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除首位元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.shift();</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="在任意位置添加或删除元素"><a href="#在任意位置添加或删除元素" class="headerlink" title="在任意位置添加或删除元素"></a>在任意位置添加或删除元素</h4><blockquote>
<p><strong>splice()</strong> 方法通过删除或替换现有元素或者原地添加新的元素来修改数组,并以数组形式返回被修改的内容。此方法会改变原数组。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/splice">参考</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> months = [<span class="string">&quot;Jan&quot;</span>, <span class="string">&quot;March&quot;</span>, <span class="string">&quot;April&quot;</span>, <span class="string">&quot;June&quot;</span>];</span><br><span class="line">months.splice(<span class="number">1</span>, <span class="number">0</span>, <span class="string">&quot;Feb&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入到索引为1的位置</span></span><br><span class="line"><span class="built_in">console</span>.log(months);</span><br><span class="line"><span class="comment">// 结果: Array [&#x27;Jan&#x27;, &#x27;Feb&#x27;, &#x27;March&#x27;, &#x27;April&#x27;, &#x27;June&#x27;]</span></span><br><span class="line"></span><br><span class="line">months.splice(<span class="number">4</span>, <span class="number">1</span>, <span class="string">&quot;May&quot;</span>);</span><br><span class="line"><span class="comment">// 从索引为4开始 删除一个数据并添加一个 May数据</span></span><br><span class="line"><span class="built_in">console</span>.log(months);</span><br><span class="line"><span class="comment">// 结果: Array [&#x27;Jan&#x27;, &#x27;Feb&#x27;, &#x27;March&#x27;, &#x27;April&#x27;, &#x27;May&#x27;]</span></span><br></pre></td></tr></table></figure>

<h2 id="迭代器函数"><a href="#迭代器函数" class="headerlink" title="迭代器函数"></a>迭代器函数</h2><blockquote>
<p>处理集合中的每个项是很常见的操作。JavaScript 提供了许多迭代集合的方法，从简单的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for"><code>for</code></a>循环到<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>map()</code></a>和<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>filter()</code></a>。迭代器和生成器将迭代的概念直接带入核心语言，并提供了一种机制来自定义<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...of"><code>for...of</code></a>循环的行为 。</p>
</blockquote>
<h3 id="every"><a href="#every" class="headerlink" title="every:"></a>every:</h3><blockquote>
<p><code>**every()**</code> 方法测试一个数组内的所有元素是否都能通过某个指定函数的测试。它返回一个布尔值。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every">参考</a></p>
<p>描述: <code>every</code> 方法为数组中的每个元素执行一次 <code>callback</code> 函数，直到它找到一个会使 <code>callback</code> 返回 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Glossary/falsy">falsy</a> 的元素。如果发现了一个这样的元素，<code>every</code> 方法将会立即返回 <code>false</code>。否则，<code>callback</code> 为每一个元素返回 <code>true</code>，<code>every</code> 就会返回 <code>true</code>。<code>callback</code> 只会为那些已经被赋值的索引调用。不会为那些被删除或从未被赋值的索引调用。</p>
<p><strong>注意</strong>：若收到一个空数组，此方法在一切情况下都会返回 <code>true</code>。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBigEnough</span>(<span class="params">element, index, array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> element &gt;= <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line">[<span class="number">12</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">130</span>, <span class="number">44</span>].every(isBigEnough); <span class="comment">// false</span></span><br><span class="line">[<span class="number">12</span>, <span class="number">54</span>, <span class="number">18</span>, <span class="number">130</span>, <span class="number">44</span>].every(isBigEnough); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="some"><a href="#some" class="headerlink" title="some:"></a>some:</h3><blockquote>
<p><code>**some()**</code> 方法测试是否至少有一个元素可以通过被提供的函数方法。该方法返回一个 Boolean 类型的值。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/some">参考</a></p>
<p><code>some()</code> 为数组中的每一个元素执行一次 <code>callback</code> 函数，直到找到一个使得 callback <strong>返回一个“真值”</strong>（即可转换为布尔值 true 的值）。如果找到了这样一个值，<code>some()</code> 将会立即返回 <code>true</code>。否则，<code>some()</code> 返回 <code>false</code>。<code>callback</code> 只会在那些”有值“的索引上被调用，不会在那些被删除或从来未被赋值的索引上调用。</p>
<p><code>callback</code> 被调用时传入三个参数：元素的值，元素的索引，被遍历的数组。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBelowThreshold</span>(<span class="params">currentValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> currentValue &lt; <span class="number">40</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="number">30</span>, <span class="number">41</span>, <span class="number">29</span>, <span class="number">10</span>, <span class="number">13</span>];</span><br><span class="line"><span class="keyword">var</span> array2 = [<span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>];</span><br><span class="line">array1.some(isBelowThreshold); <span class="comment">//true</span></span><br><span class="line">array2.some(isBelowThreshold); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach:"></a>foreach:</h3><blockquote>
<p><code>**forEach()**</code> 方法对数组的每个元素执行一次提供的函数。</p>
<p><code>forEach</code> 方法按升序为数组中含有效值的每一项执行一次<code>callback</code> 函数，那些已删除或者未初始化的项将被跳过（例如在稀疏数组上）。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach">参考</a></p>
</blockquote>
<blockquote>
<p><strong>注意：</strong> foreach 没有办法中止或者跳出 <code>forEach()</code> 循环，除了抛出一个异常。如果你需要这样，使用 <code>forEach()</code> 方法是错误的。</p>
<p>若你需要提前终止循环，你可以使用：</p>
<ul>
<li>简单循环</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...of">for…of</a> 循环</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every"><code>Array.prototype.every()</code></a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/some"><code>Array.prototype.some()</code></a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/find"><code>Array.prototype.find()</code></a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex"><code>Array.prototype.findIndex()</code></a></li>
</ul>
<p>这些数组方法可以对数组元素判断，以便确定是否需要继续遍历：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every"><code>every()</code></a>，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/some"><code>some()</code></a>，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/find"><code>find()</code></a>，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex"><code>findIndex()</code></a></p>
<p>译者注：若条件允许，也可以使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>filter()</code></a> 提前过滤出需要遍历的部分，再用 <code>forEach()</code> 处理。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line"></span><br><span class="line">array1.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(element);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// expected output: &quot;a&quot;</span></span><br><span class="line"><span class="comment">// expected output: &quot;b&quot;</span></span><br><span class="line"><span class="comment">// expected output: &quot;c&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="map-和-filter-方法"><a href="#map-和-filter-方法" class="headerlink" title="map 和 filter 方法"></a>map 和 filter 方法</h3><blockquote>
<p>JavaScript 还有两个会 <strong>返回新数组</strong> 的遍历方法.</p>
</blockquote>
<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><blockquote>
<p><code>**map()**</code> 方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map">参考</a></p>
<p><code>map</code> 方法会给原数组中的每个元素都按顺序调用一次 <code>callback</code> 函数。<code>callback</code> 每次执行后的返回值（包括 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>）组合起来形成一个新数组。 <code>callback</code> 函数只会在有值的索引上被调用；那些从来没被赋过值或者使用 <code>delete</code> 删除的索引则不会被调用。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// pass a function to map</span></span><br><span class="line"><span class="keyword">const</span> map1 = array1.map(<span class="function">(<span class="params">x</span>) =&gt;</span> x * <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map1);</span><br><span class="line"><span class="comment">// expected output: Array [2, 8, 18, 32]</span></span><br></pre></td></tr></table></figure>

<h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><blockquote>
<p><code>**filter()**</code> 方法创建一个新数组, 其包含通过所提供函数实现的测试的所有元素。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter">参考</a></p>
<p><code>filter</code> 为数组中的每个元素调用一次 <code>callback</code> 函数，并利用所有使得 <code>callback</code> 返回 true 或<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Truthy">等价于 true 的值</a>的元素创建一个新数组。<code>callback</code> 只会在已经赋值的索引上被调用，对于那些已经被删除或者从未被赋值的索引不会被调用。那些没有通过 <code>callback</code> 测试的元素会被跳过，不会被包含在新数组中.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> words = [<span class="string">&quot;spray&quot;</span>, <span class="string">&quot;limit&quot;</span>, <span class="string">&quot;elite&quot;</span>, <span class="string">&quot;exuberant&quot;</span>, <span class="string">&quot;destruction&quot;</span>, <span class="string">&quot;present&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = words.filter(<span class="function">(<span class="params">word</span>) =&gt;</span> word.length &gt; <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 上面是ES6里面的箭头函数,下面是完整版</span></span><br><span class="line"><span class="comment">* const result = words.filter(function (e) &#123;</span></span><br><span class="line"><span class="comment">    return e.length&gt;6</span></span><br><span class="line"><span class="comment">&#125;);</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="comment">// expected output: Array [&quot;exuberant&quot;, &quot;destruction&quot;, &quot;present&quot;]</span></span><br></pre></td></tr></table></figure>

<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce:"></a>reduce:</h3><blockquote>
<p><code>**reduce()**</code> 方法对数组中的每个元素执行一个由您提供的<strong>reducer</strong>函数(升序执行)，将其结果汇总为单个返回值。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">参考</a></p>
<p><code>reduce</code>为数组中的每一个元素依次执行<code>callback</code>函数，不包括数组中被删除或从未被赋值的元素，接受四个参数：</p>
<ul>
<li><code>accumulator 累计器</code></li>
<li><code>currentValue 当前值</code></li>
<li><code>currentIndex 当前索引</code></li>
<li><code>array 数组</code></li>
</ul>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> reducer = <span class="function">(<span class="params">accumulator, currentValue</span>) =&gt;</span> accumulator + currentValue;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 + 2 + 3 + 4</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.reduce(reducer));</span><br><span class="line"><span class="comment">// expected output: 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5 + 1 + 2 + 3 + 4</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.reduce(reducer, <span class="number">5</span>));</span><br><span class="line"><span class="comment">// expected output: 15</span></span><br></pre></td></tr></table></figure>

<p>_假如运行下段<code>reduce()</code>代码_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].reduce(<span class="function"><span class="keyword">function</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  accumulator,</span></span></span><br><span class="line"><span class="function"><span class="params">  currentValue,</span></span></span><br><span class="line"><span class="function"><span class="params">  currentIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">  array</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> accumulator + currentValue;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>_callback 被调用四次，每次调用的参数和返回值如下表_：</p>
<p><img src="http://static.zxinc520.com/blog/20190625/FxoC6IyrTRcr.png?imageslim" alt="mark"></p>
<h2 id="ECMAScript-6-和-数组-新功能"><a href="#ECMAScript-6-和-数组-新功能" class="headerlink" title="ECMAScript 6 和 数组 新功能"></a>ECMAScript 6 和 数组 新功能</h2><blockquote>
<p>ECMAScript 6 和 数组 新功能</p>
<p>这里主要介绍下 <strong>数组 ES6</strong> 新特性</p>
<p><a target="_blank" rel="noopener" href="http://es6.ruanyifeng.com/#docs/iterator">Iterator 和 for…of 循环</a></p>
</blockquote>
<h3 id="for-…of-循环迭代"><a href="#for-…of-循环迭代" class="headerlink" title="for …of 循环迭代"></a>for …of 循环迭代</h3><blockquote>
<p><strong>强大的 for-of 循环</strong></p>
<p>还记得在《<a target="_blank" rel="noopener" href="http://www.infoq.com/cn/articles/es6-in-depth-an-introduction">深入浅出 ES6（一）：ES6 是什么</a>》中我向你们承诺过的话么？ES6 不会破坏你已经写好的 JS 代码。目前看来，成千上万的 Web 网站依赖 for-in 循环，其中一些网站甚至将其用于数组遍历。如果想通过修正 for-in 循环增加数组遍历支持会让这一切变得更加混乱，因此，标准委员会在 ES6 中增加了一种新的循环语法来解决目前的问题。</p>
<p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/es6-in-depth-iterators-and-the-for-of-loop">参考</a></p>
</blockquote>
<hr>
<h4 id="关于-for…in"><a href="#关于-for…in" class="headerlink" title="关于 for…in"></a>关于 for…in</h4><blockquote>
<p>这 <strong>绝对是一个糟糕的选择</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> myArray) &#123;</span><br><span class="line">  <span class="comment">// 千万别这样做</span></span><br><span class="line">  <span class="built_in">console</span>.log(myArray[index]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这 <strong>绝对是一个糟糕的选择</strong>，为什么呢？</p>
<ul>
<li>在这段代码中，赋给 index 的值不是实际的数字，而是字符串“0”、“1”、“2”，此时很可能在无意之间进行字符串算数计算，例如：“2” + 1 == “21”，这给编码过程带来极大的不便。</li>
<li>作用于数组的 for-in 循环体除了遍历数组元素外，还会遍历<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Glossary/Expando">自定义</a>属性。举个例子，如果你的数组中有一个可枚举属性 myArray.name，循环将额外执行一次，遍历到名为“name”的索引。就连数组原型链上的属性都能被访问到。</li>
<li>最让人震惊的是，在某些情况下，这段代码可能按照随机顺序遍历数组元素。</li>
<li>简而言之，for-in 是为普通对象设计的，你可以遍历得到字符串类型的键，因此不适用于数组遍历。</li>
</ul>
<hr>
<h3 id="强大的-for-of-循环"><a href="#强大的-for-of-循环" class="headerlink" title="强大的 for-of 循环"></a>强大的 for-of 循环</h3><blockquote>
<p>我们将要探究一下 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of">for-of</a> 循环的外表下隐藏着哪些强大的功能。</p>
<p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/es6-in-depth-iterators-and-the-for-of-loop">参考</a></p>
</blockquote>
<p><strong>优势:</strong></p>
<ul>
<li>这是最简洁、最直接的遍历数组元素的语法</li>
<li>这个方法避开了 for-in 循环的所有缺陷</li>
<li>与 forEach() 不同的是，它可以正确响应 <strong>break</strong>、<strong>continue</strong> 和 <strong>return</strong> 语句</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> value <span class="keyword">of</span> myArray) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="使用-ES6-新的迭代器"><a href="#使用-ES6-新的迭代器" class="headerlink" title="使用 ES6 新的迭代器"></a>使用 ES6 新的迭代器</h2><blockquote>
<p>使用 ES6 新的迭代器</p>
<p><a target="_blank" rel="noopener" href="http://es6.ruanyifeng.com/#docs/iterator">参考</a></p>
</blockquote>
<h3 id="Iterator（遍历器）的概念"><a href="#Iterator（遍历器）的概念" class="headerlink" title="Iterator（遍历器）的概念"></a>Iterator（遍历器）的概念</h3><p>JavaScript 原有的表示“集合”的数据结构，主要是数组（<code>Array</code>）和对象（<code>Object</code>），ES6 又添加了<code>Map</code>和<code>Set</code>。这样就有了四种数据集合，用户还可以组合使用它们，定义自己的数据结构，比如数组的成员是<code>Map</code>，<code>Map</code>的成员是对象。这样就需要一种统一的接口机制，来处理所有不同的数据结构。</p>
<p>遍历器（Iterator）就是这样一种机制。它是一种接口，为各种不同的数据结构提供统一的访问机制。任何数据结构只要部署 Iterator 接口，就可以完成遍历操作（即依次处理该数据结构的所有成员）。</p>
<p><strong>Iterator 的作用有三个</strong>：</p>
<ul>
<li><p>一是为各种数据结构，提供一个统一的、简便的访问接口；</p>
</li>
<li><p>二是使得数据结构的成员能够按某种次序排列；</p>
</li>
<li><p>三是 ES6 创造了一种新的遍历命令<code>for...of</code>循环，Iterator 接口主要供<code>for...of</code>消费。</p>
</li>
</ul>
<p><strong>Iterator 的遍历过程是这样的</strong> :</p>
<p>（1）创建一个指针对象，指向当前数据结构的起始位置。也就是说，遍历器对象本质上，就是一个指针对象。</p>
<p>（2）第一次调用指针对象的<code>next</code>方法，可以将指针指向数据结构的第一个成员。</p>
<p>（3）第二次调用指针对象的<code>next</code>方法，指针就指向数据结构的第二个成员。</p>
<p>（4）不断调用指针对象的<code>next</code>方法，直到它指向数据结构的结束位置。</p>
<p>每一次调用<code>next</code>方法，都会返回数据结构的当前成员的信息。具体来说，就是返回一个包含<code>value</code>和<code>done</code>两个属性的对象。其中，<code>value</code>属性是当前成员的值，<code>done</code>属性是一个布尔值，表示遍历是否结束</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> it = makeIterator([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>]);</span><br><span class="line"></span><br><span class="line">it.next(); <span class="comment">// &#123; value: &quot;a&quot;, done: false &#125;</span></span><br><span class="line">it.next(); <span class="comment">// &#123; value: &quot;b&quot;, done: false &#125;</span></span><br><span class="line">it.next(); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeIterator</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> nextIndex = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    next: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> nextIndex &lt; array.length</span><br><span class="line">        ? &#123; <span class="attr">value</span>: array[nextIndex++], <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">        : &#123; <span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面代码定义了一个<code>makeIterator</code>函数，它是一个遍历器生成函数，作用就是返回一个遍历器对象。对数组<code>[&#39;a&#39;, &#39;b&#39;]</code>执行这个函数，就会返回该数组的遍历器对象（即指针对象）<code>it</code>。</p>
<h3 id="默认-Iterator-接口"><a href="#默认-Iterator-接口" class="headerlink" title="默认 Iterator 接口"></a>默认 Iterator 接口</h3><blockquote>
<p>Iterator 接口的目的，就是为所有数据结构，提供了一种统一的访问机制，即<code>for...of</code>循环（详见下文）。当使用<code>for...of</code>循环遍历某种数据结构时，该循环会自动去寻找 Iterator 接口。</p>
<p>一种数据结构只要部署了 Iterator 接口，我们就称这种数据结构是“可遍历的”（iterable）。</p>
</blockquote>
<p>ES6 的有些数据结构原生具备 Iterator 接口（比如数组），即不用任何处理，就可以被<code>for...of</code>循环遍历。原因在于，这些数据结构原生部署了<code>Symbol.iterator</code>属性（详见下文），另外一些数据结构没有（比如对象）。凡是部署了<code>Symbol.iterator</code>属性的数据结构，就称为部署了遍历器接口。调用这个接口，就会返回一个遍历器对象。</p>
<p>原生具备 Iterator 接口的数据结构如下。</p>
<ul>
<li>Array</li>
<li>Map</li>
<li>Set</li>
<li>String</li>
<li>TypedArray</li>
<li>函数的 arguments 对象</li>
<li>NodeList 对象</li>
</ul>
<p>下面的例子是数组的<code>Symbol.iterator</code>属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> iter = arr[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line"></span><br><span class="line">iter.next(); <span class="comment">// &#123; value: &#x27;a&#x27;, done: false &#125;</span></span><br><span class="line">iter.next(); <span class="comment">// &#123; value: &#x27;b&#x27;, done: false &#125;</span></span><br><span class="line">iter.next(); <span class="comment">// &#123; value: &#x27;c&#x27;, done: false &#125;</span></span><br><span class="line">iter.next(); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，变量<code>arr</code>是一个数组，原生就具有遍历器接口，部署在<code>arr</code>的<code>Symbol.iterator</code>属性上面。所以，调用这个属性，就得到遍历器对象。</p>
<h3 id="数组的-entries、keys-和-values-方法"><a href="#数组的-entries、keys-和-values-方法" class="headerlink" title="数组的 entries、keys 和 values 方法"></a>数组的 entries、keys 和 values 方法</h3><blockquote>
<p>ES6 提供三个新的方法——<code>entries()</code>，<code>keys()</code>和<code>values()</code>——用于遍历数组。它们都返回一个遍历器对象（详见《Iterator》一章），可以用<code>for...of</code>循环进行遍历，唯一的区别是<code>keys()</code>方法是对 <strong>键名</strong> 的遍历、<code>values()</code>方法是对 <strong>键值</strong> 的遍历，<code>entries()</code>方法是对 <strong>键值对</strong> 的遍历。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">of</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>].keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> elem <span class="keyword">of</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>].values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;a&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;b&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [index, elem] <span class="keyword">of</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>].entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index, elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0 &quot;a&quot;</span></span><br><span class="line"><span class="comment">// 1 &quot;b&quot;</span></span><br></pre></td></tr></table></figure>

<p>如果不使用<code>for...of</code>循环，可以手动调用遍历器对象的<code>next</code>方法，进行遍历。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> letter = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> entries = letter.entries();</span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [0, &#x27;a&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [1, &#x27;b&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [2, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="Array-from-方法"><a href="#Array-from-方法" class="headerlink" title="Array.from()方法"></a>Array.from()方法</h3><blockquote>
<p><code>Array.from()</code>方法用于将两类对象转为真正的数组：类似数组的对象（array-like object）和可遍历（iterable）的对象（包括 ES6 新增的数据结构 Set 和 Map）。</p>
<p><a target="_blank" rel="noopener" href="http://www.waibo.wang/bible/es6/html/8/8.2.html">参考</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">  <span class="number">0</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="string">&quot;b&quot;</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="string">&quot;c&quot;</span>,</span><br><span class="line">  length: <span class="number">3</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5的写法 ==&gt; [].slice.call(arguments)能将具有length属性的对象转成数组：</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [].slice.call(arrayLike); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6的写法</span></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="built_in">Array</span>.from(arrayLike); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ae57baecc57d">你遇到过 [ ].slice.call() 吗？</a></p>
<p>实际应用中，常见的类似数组的对象是 DOM 操作返回的 NodeList 集合，以及函数内部的<code>arguments</code>对象。<code>Array.from()</code>方法都可以将它们转为真正的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NodeList对象</span></span><br><span class="line"><span class="keyword">let</span> ps = <span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;p&quot;</span>);</span><br><span class="line"><span class="built_in">Array</span>.from(ps).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">p</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(p);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// arguments对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>querySelectorAll</code>方法返回的是一个类似数组的对象，可以将这个对象转为真正的数组，再使用<code>forEach</code>方法。</p>
<p>只要是部署了 Iterator 接口的数据结构，<code>Array.from()</code>方法都能将其转为数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="comment">// [&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> namesSet = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>]);</span><br><span class="line"><span class="built_in">Array</span>.from(namesSet); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>值得提醒的是，扩展运算符（<code>...</code>）也可以将某些数据结构转为数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// arguments对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> args = [...arguments];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NodeList对象</span></span><br><span class="line">[...document.querySelectorAll(<span class="string">&quot;div&quot;</span>)];</span><br></pre></td></tr></table></figure>

<p>扩展运算符背后调用的是遍历器接口（<code>Symbol.iterator</code>），如果一个对象没有部署这个接口，就无法转换。<code>Array.from()</code>方法还支持类似数组的对象。所谓类似数组的对象，本质特征只有一点，即必须有<code>length</code>属性。因此，任何有<code>length</code>属性的对象，都可以通过<code>Array.from()</code>方法转为数组，而此时扩展运算符就无法转换。</p>
<p>对于还没有部署该方法的浏览器，可以用<code>Array.prototype.slice</code>方法替代。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> toArray = (<span class="function">() =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from ? <span class="built_in">Array</span>.from : <span class="function">(<span class="params">obj</span>) =&gt;</span> [].slice.call(obj))();</span><br></pre></td></tr></table></figure>

<p>Array.from()<code>方法还可以接受第二个参数，作用类似于数组的</code>map`方法，用来对每个元素进行处理，将处理后的值放入返回的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(arrayLike, <span class="function">(<span class="params">x</span>) =&gt;</span> x * x);</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="built_in">Array</span>.from(arrayLike).map(<span class="function">(<span class="params">x</span>) =&gt;</span> x * x);</span><br><span class="line"></span><br><span class="line">arr1 = <span class="built_in">Array</span>.from([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="function">(<span class="params">e</span>) =&gt;</span> e * e);</span><br><span class="line"><span class="built_in">console</span>.log(arr1); <span class="comment">//  [ 1, 4, 9 ]</span></span><br></pre></td></tr></table></figure>

<h3 id="Array-of-方法"><a href="#Array-of-方法" class="headerlink" title="Array.of()方法"></a>Array.of()方法</h3><blockquote>
<p><code>Array.of()</code>方法用于将一组值，转换为数组。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>, <span class="number">11</span>, <span class="number">8</span>); <span class="comment">// [3,11,8]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>); <span class="comment">// [3]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>).length; <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>这个方法的主要目的，是弥补数组构造函数<code>Array()</code>的不足。因为参数个数的不同，会导致<code>Array()</code>的行为有差异。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>(); <span class="comment">// []</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>); <span class="comment">// [, , ,]</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>, <span class="number">11</span>, <span class="number">8</span>); <span class="comment">// [3, 11, 8]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">//[ &lt;3 empty items&gt; ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr.length); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>Array</code>方法没有参数、一个参数、三个参数时，返回结果都不一样。只有当参数个数不少于 2 个时，<code>Array()</code>才会返回由参数组成的新数组。参数个数只有一个时，实际上是指定数组的长度。</p>
<p><code>Array.of()</code>方法基本上可以用来替代<code>Array()</code>或<code>new Array()</code>，并且不存在由于参数不同而导致的重载。它的行为非常统一。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of(); <span class="comment">// []</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="literal">undefined</span>); <span class="comment">// [undefined]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>); <span class="comment">// [1]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure>

<p><code>Array.of()</code>方法总是返回参数值组成的数组。如果没有参数，就返回一个空数组。</p>
<p><code>Array.of()</code>方法可以用下面的代码模拟实现。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ArrayOf</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [].slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数组实例的-fill-方法"><a href="#数组实例的-fill-方法" class="headerlink" title="数组实例的 fill()方法"></a>数组实例的 fill()方法</h3><blockquote>
<p><code>fill()</code>方法使用给定值，填充一个数组。</p>
<p><a target="_blank" rel="noopener" href="http://www.waibo.wang/bible/es6/html/8/8.6.html">参考</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>].fill(<span class="number">7</span>); <span class="comment">// [7, 7, 7]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>).fill(<span class="number">7</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [7, 7, 7]</span></span><br></pre></td></tr></table></figure>

<p>上面代码表明，<code>fill()</code>方法用于空数组的初始化非常方便。数组中已有的元素，会被全部抹去。</p>
<p><code>fill()</code>方法还可以接受第二个和第三个参数，用于指定填充的起始位置和结束位置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>]</span><br><span class="line">  .fill(<span class="number">7</span>, <span class="number">1</span>, <span class="number">2</span>) <span class="comment">// [&#x27;a&#x27;, 7, &#x27;c&#x27;]</span></span><br><span class="line">  [(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)].fill(<span class="number">7</span>, <span class="number">1</span>, <span class="number">4</span>); <span class="comment">// [ &#x27;a&#x27;, 7, 7, 7, 2, 3 ]</span></span><br></pre></td></tr></table></figure>

<p>上面代码表示，<code>fill()</code>方法从 1 号位开始，向原数组填充 7，到 2 号位之前结束。</p>
<h3 id="数组实例的-copyWithin-方法"><a href="#数组实例的-copyWithin-方法" class="headerlink" title="数组实例的 copyWithin()方法"></a>数组实例的 copyWithin()方法</h3><blockquote>
<p>数组实例的<code>copyWithin()</code>方法，在当前数组内部，将指定位置的成员复制到其他位置（会覆盖原有成员），然后返回当前数组。也就是说，使用这个方法，会修改当前数组。</p>
</blockquote>
<p><u>Array.prototype.copyWithin(target, start = 0, end = this.length)</u> ：</p>
<ul>
<li>它接受三个参数。<ul>
<li>target（必需）：从该位置开始替换数据。</li>
<li>start（可选）：从该位置开始读取数据，默认为 0。如果为负值，表示倒数。</li>
<li>end（可选）：到该位置前停止读取数据，默认等于数组长度。如果为负值，表示倒数。</li>
</ul>
</li>
</ul>
<p>这三个参数都应该是数值，如果不是，会自动转为数值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>); <span class="comment">// [4, 5, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<p>上面代码表示将从 3 号位直到数组结束的成员（4 和 5），复制到从 0 号位开始的位置，结果覆盖了原来的 1 和 2。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将3号位复制到0号位</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>) <span class="comment">// [4, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// -2相当于3号位，-1相当于4号位</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">-2</span>, <span class="number">-1</span>) <span class="comment">// [4, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将3号位复制到0号位</span></span><br><span class="line">[].copyWithin.call(&#123;<span class="attr">length</span>: <span class="number">5</span>, <span class="number">3</span>: <span class="number">1</span>&#125;, <span class="number">0</span>, <span class="number">3</span>) <span class="comment">// &#123;0: 1, 3: 1, length: 5&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将2号位到数组结束，复制到0号位</span></span><br><span class="line"><span class="keyword">let</span> i32a = <span class="keyword">new</span> <span class="built_in">Int32Array</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">i32a.copyWithin(<span class="number">0</span>, <span class="number">2</span>);<span class="comment">// Int32Array [3, 4, 5, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对于没有部署 TypedArray 的 copyWithin 方法的平台</span></span><br><span class="line"><span class="comment">// 需要采用下面的写法</span></span><br><span class="line">[].copyWithin.call(<span class="keyword">new</span> <span class="built_in">Int32Array</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]), <span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="comment">// Int32Array [4, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<h3 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h3><blockquote>
<p>扩展运算符（spread）是三个点（<code>...</code>）。它好比 rest 参数的逆运算，将一个数组转为用逗号分隔的参数序列。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]) <span class="comment">// 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>, ...[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>) <span class="comment">// 1 2 3 4 5</span></span><br><span class="line"></span><br><span class="line">[...document.querySelectorAll(<span class="string">&#x27;div&#x27;</span>)] <span class="comment">// [&lt;div&gt;, &lt;div&gt;, &lt;div&gt;]</span></span><br></pre></td></tr></table></figure>

<p>该运算符主要用于函数调用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">array, ...items</span>) </span>&#123;</span><br><span class="line">  array.push(...items);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numbers = [<span class="number">4</span>, <span class="number">38</span>];</span><br><span class="line">add(...numbers); <span class="comment">// 42</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>array.push(...items)</code>和<code>add(...numbers)</code>这两行，都是函数的调用，它们的都使用了扩展运算符。该运算符将一个数组，变为参数序列。</p>
<p>扩展运算符与正常的函数参数可以结合使用，非常灵活。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">v, w, x, y, z</span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">const</span> args = [<span class="number">0</span>, <span class="number">1</span>];</span><br><span class="line">f(<span class="number">-1</span>, ...args, <span class="number">2</span>, ...[<span class="number">3</span>]);</span><br></pre></td></tr></table></figure>

<h4 id="替代数组的-apply-方法"><a href="#替代数组的-apply-方法" class="headerlink" title="替代数组的 apply 方法"></a>替代数组的 apply 方法</h4><blockquote>
<p>由于扩展运算符可以展开数组，所以不再需要<code>apply</code>方法，将数组转为函数的参数了。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5 的写法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y, z</span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> args = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">f.apply(<span class="literal">null</span>, args);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6的写法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y, z</span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">let</span> args = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">f(...args);</span><br></pre></td></tr></table></figure>

<p>下面是扩展运算符取代<code>apply</code>方法的一个实际的例子，应用<code>Math.max</code>方法，简化求出一个数组最大元素的写法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5 的写法</span></span><br><span class="line"><span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, [<span class="number">14</span>, <span class="number">3</span>, <span class="number">77</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 的写法</span></span><br><span class="line"><span class="built_in">Math</span>.max(...[<span class="number">14</span>, <span class="number">3</span>, <span class="number">77</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="built_in">Math</span>.max(<span class="number">14</span>, <span class="number">3</span>, <span class="number">77</span>);</span><br></pre></td></tr></table></figure>

<p>上面代码中，由于 JavaScript 不提供求数组最大元素的函数，所以只能套用<code>Math.max</code>函数，将数组转为一个参数序列，然后求最大值。有了扩展运算符以后，就可以直接用<code>Math.max</code>了。</p>
<p>另一个例子是通过<code>push</code>函数，将一个数组添加到另一个数组的尾部。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5的 写法</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(arr1, arr2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 的写法</span></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr1.push(...arr2);</span><br></pre></td></tr></table></figure>

<h3 id="扩展运算符的应用"><a href="#扩展运算符的应用" class="headerlink" title="扩展运算符的应用"></a>扩展运算符的应用</h3><blockquote>
<p>扩展运算符的应用</p>
</blockquote>
<h4 id="复制数组"><a href="#复制数组" class="headerlink" title="复制数组"></a>复制数组</h4><p>扩展运算符提供了复制数组的简便写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a1 = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a2 = [...a1]; <span class="comment">// 写法一</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [...a2] = a1; <span class="comment">// 写法二</span></span><br></pre></td></tr></table></figure>

<p>上面的两种写法，<code>a2</code>都是<code>a1</code>的克隆。</p>
<h4 id="合并数组"><a href="#合并数组" class="headerlink" title="合并数组"></a>合并数组</h4><p>扩展运算符提供了数组合并的新写法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>].concat(more)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, ...more]</span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> arr3 = [<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5的合并数组</span></span><br><span class="line">arr1.concat(arr2, arr3); <span class="comment">// [ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27; ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6的合并数组</span></span><br><span class="line">[...arr1, ...arr2, ...arr3] <span class="comment">// [ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27; ]</span></span><br></pre></td></tr></table></figure>

<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>扩展运算符还可以将字符串转为真正的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...<span class="string">&quot;hello&quot;</span>]; <span class="comment">// [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]</span></span><br></pre></td></tr></table></figure>

<p>上面的写法，有一个重要的好处，那就是能够正确识别四个字节的 Unicode 字符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;x\uD83D\uDE80y&#x27;</span>.length <span class="comment">// 4</span></span><br><span class="line">[...<span class="string">&#x27;x\uD83D\uDE80y&#x27;</span>].length <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h3 id="数组实例的-find-和-findIndex-方法"><a href="#数组实例的-find-和-findIndex-方法" class="headerlink" title="数组实例的 find() 和 findIndex()方法"></a>数组实例的 find() 和 findIndex()方法</h3><blockquote>
<p>数组实例的<code>find()</code>方法，用于找出第一个符合条件的数组成员。它的参数是一个回调函数，所有数组成员依次执行该回调函数，直到找出第一个返回值为<code>true</code>的成员，然后返回该成员。如果没有符合条件的成员，则返回<code>undefined</code>。</p>
<p>ECMAScript6—find() 和 findIndex()方法——搜索</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">-5</span>, <span class="number">10</span>].find(<span class="function">(<span class="params">n</span>) =&gt;</span> n &lt; <span class="number">0</span>); <span class="comment">// -5</span></span><br></pre></td></tr></table></figure>

<p>上面代码找出数组中第一个小于 0 的成员。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>].find(<span class="function"><span class="keyword">function</span> (<span class="params">value, index, arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value &gt; <span class="number">9</span>;</span><br><span class="line">&#125;); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>find()</code>方法的回调函数可以接受三个参数，依次为当前的值、当前的位置和原数组。</p>
<p>这两个方法都可以接受第二个参数，用来绑定回调函数的<code>**this</code>对象** 。</p>
<p>另外，这两个方法都可以发现<code>NaN</code>，弥补了数组的<code>indexOf()</code>方法的不足。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="literal">NaN</span>]</span><br><span class="line">  .indexOf(<span class="literal">NaN</span>) <span class="comment">// -1</span></span><br><span class="line"></span><br><span class="line">  [<span class="literal">NaN</span>].findIndex(<span class="function">(<span class="params">y</span>) =&gt;</span> <span class="built_in">Object</span>.is(<span class="literal">NaN</span>, y)); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>indexOf</code>方法无法识别数组的<code>NaN</code>成员，但是<code>findIndex()</code>方法可以借助<code>Object.is</code>方法做到。</p>
<h3 id="数组实例的-includes-方法"><a href="#数组实例的-includes-方法" class="headerlink" title="数组实例的 includes()方法"></a>数组实例的 includes()方法</h3><blockquote>
<p><code>Array.prototype.includes()</code>方法返回一个布尔值，表示某个数组是否包含给定的值，与字符串的<code>includes()</code>方法类似。ES2016 引入了该方法。</p>
<p>ECMAScript7 —includes()方法 ——搜索</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">  .includes(<span class="number">2</span>) <span class="comment">// true</span></span><br><span class="line">  [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)].includes(<span class="number">4</span>) <span class="comment">// false</span></span><br><span class="line">  [(<span class="number">1</span>, <span class="number">2</span>, <span class="literal">NaN</span>)].includes(<span class="literal">NaN</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>该方法的第二个参数表示搜索的起始位置，默认为<code>0</code>。如果第二个参数为负数，则表示倒数的位置，如果这时它大于数组长度（比如第二个参数为<code>-4</code>，但数组长度为<code>3</code>），则会重置为从<code>0</code>开始。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">3</span>, <span class="number">3</span>); <span class="comment">// false</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">3</span>, <span class="number">-1</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">  .includes(<span class="number">2</span>, <span class="number">1</span>) <span class="comment">//true</span></span><br><span class="line">  [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)].includes(<span class="number">2</span>, <span class="number">2</span>); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p>没有该方法之前，我们通常使用数组的<code>indexOf()</code>方法，检查是否包含某个值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (arr.indexOf(el) !== <span class="number">-1</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>indexOf()</code>方法有两个缺点，一是不够语义化，它的含义是找到参数值的第一个出现位置，所以要去比较是否不等于<code>-1</code>，表达起来不够直观。二是，它内部使用严格相等运算符（<code>===</code>）进行判断，这会导致对<code>NaN</code>的误判。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>); <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>

<p>另外，Map 和 Set 数据结构有一个<code>has</code>方法，需要注意与<code>includes()</code>区分。</p>
<ul>
<li>Map 结构的<code>has</code>方法，是用来查找键名的，比如<code>Map.prototype.has(key)</code>、<code>WeakMap.prototype.has(key)</code>、<code>Reflect.has(target, propertyKey)</code>。</li>
<li>Set 结构的<code>has</code>方法，是用来查找值的，比如<code>Set.prototype.has(value)</code>、<code>WeakSet.prototype.has(value)</code>。</li>
</ul>
<h3 id="数组的空位"><a href="#数组的空位" class="headerlink" title="数组的空位"></a>数组的空位</h3><blockquote>
<p>数组的空位，是指数组的某一个位置没有任何值。比如，<code>Array</code>构造函数返回的数组都是空位。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>); <span class="comment">// [, , ,]</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>Array(3)</code>返回一个具有 3 个空位的数组。</p>
<p>注意，空位不是<code>undefined</code>，一个位置的值等于<code>undefined</code>，依然是有值的。空位是没有任何值，<code>in</code>运算符可以说明这一点。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> <span class="keyword">in</span> [<span class="literal">undefined</span>, <span class="literal">undefined</span>, <span class="literal">undefined</span>]; <span class="comment">// true</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">in</span> [, , ,]; <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>上面代码说明，第一个数组的 0 号位置是有值的，第二个数组的 0 号位置没有值。</p>
<h4 id="ES5-对空位的处理，已经很不一致了，大多数情况下会忽略空位。"><a href="#ES5-对空位的处理，已经很不一致了，大多数情况下会忽略空位。" class="headerlink" title="ES5 对空位的处理，已经很不一致了，大多数情况下会忽略空位。"></a>ES5 对空位的处理，已经很不一致了，大多数情况下会忽略空位。</h4><ul>
<li><code>forEach()</code>,<code>filter()</code>,<code>reduce()</code>,<code>every()</code>和<code>some()</code>都会跳过空位。</li>
<li><code>map()</code>会跳过空位，但会保留这个值</li>
<li><code>join()</code>和<code>toString()</code>会将空位视为<code>undefined</code>，而<code>undefined</code>和<code>null</code>会被处理成空字符串。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// forEach方法</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].forEach(<span class="function">(<span class="params">x,i</span>) =&gt;</span> <span class="built_in">console</span>.log(x+<span class="string">&#x27;---&#x27;</span>+i)); <span class="comment">// a---1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// filter方法</span></span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>,,<span class="string">&#x27;b&#x27;</span>].filter(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// [&#x27;a&#x27;,&#x27;b&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// every方法</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].every(<span class="function"><span class="params">x</span> =&gt;</span> x===<span class="string">&#x27;a&#x27;</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// reduce方法</span></span><br><span class="line">[<span class="number">1</span>,,<span class="number">2</span>].reduce(<span class="function">(<span class="params">x,y</span>) =&gt;</span> <span class="keyword">return</span> x+y) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// some方法</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].some(<span class="function"><span class="params">x</span> =&gt;</span> x !== <span class="string">&#x27;a&#x27;</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="ES6-则是明确将空位转为undefined。"><a href="#ES6-则是明确将空位转为undefined。" class="headerlink" title="ES6 则是明确将空位转为undefined。"></a>ES6 则是明确将空位转为<code>undefined</code>。</h4><p><code>Array.from</code>方法会将数组的空位，转为<code>undefined</code>，也就是说，这个方法不会忽略空位。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from([<span class="string">&quot;a&quot;</span>, , <span class="string">&quot;b&quot;</span>]); <span class="comment">// [ &quot;a&quot;, undefined, &quot;b&quot; ]</span></span><br></pre></td></tr></table></figure>

<p>扩展运算符（<code>...</code>）也会将空位转为<code>undefined</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...[<span class="string">&quot;a&quot;</span>, , <span class="string">&quot;b&quot;</span>]]; <span class="comment">// [ &quot;a&quot;, undefined, &quot;b&quot; ]</span></span><br></pre></td></tr></table></figure>

<p>copyWithin() 会连空位一起拷贝</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, ,].copyWithin(<span class="number">2</span>, <span class="number">0</span>); <span class="comment">// [,&quot;a&quot;,,&quot;a&quot;]</span></span><br></pre></td></tr></table></figure>

<p><code>fill()</code>会将空位视为正常的数组位置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>).fill(<span class="string">&quot;a&quot;</span>); <span class="comment">// [&quot;a&quot;,&quot;a&quot;,&quot;a&quot;]</span></span><br></pre></td></tr></table></figure>

<p><code>for...of</code>循环也会遍历空位。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [, ,];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，数组<code>arr</code>有两个空位，<code>for...of</code>并没有忽略它们。如果<strong>改成<code>map</code>方法遍历</strong>，空位是会<strong>跳过</strong>的。</p>
<p><code>entries()</code>、<code>keys()</code>、<code>values()</code>、<code>find()</code>和<code>findIndex()</code>会将空位处理成<code>undefined</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// entries()</span></span><br><span class="line">[...[,<span class="string">&#x27;a&#x27;</span>].entries()] <span class="comment">// [[0,undefined], [1,&quot;a&quot;]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// keys()</span></span><br><span class="line">[...[,<span class="string">&#x27;a&#x27;</span>].keys()] <span class="comment">// [0,1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// values()</span></span><br><span class="line">[...[,<span class="string">&#x27;a&#x27;</span>].values()] <span class="comment">// [undefined,&quot;a&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// find()</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].find(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// findIndex()</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].findIndex(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<h2 id="组数排序"><a href="#组数排序" class="headerlink" title="组数排序"></a>组数排序</h2><blockquote>
<p>组数排序</p>
</blockquote>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><blockquote>
<p><code>**sort()**</code> 方法用<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/In-place_algorithm">原地算法</a>对数组的元素进行排序，并返回数组。排序算法现在是<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95#.E7.A9.A9.E5.AE.9A.E6.80.A7">稳定的</a>。默认排序顺序是根据字符串 Unicode 码点。</p>
<p>由于它取决于具体实现，因此无法保证排序的时间和空间复杂性。</p>
<p><strong>sort()</strong> 用来指定按某种顺序进行排列的函数。如果省略，元素按照转换为的字符串的各个字符的 Unicode 位点进行排序。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort">参考</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> months = [<span class="string">&#x27;March&#x27;</span>, <span class="string">&#x27;Jan&#x27;</span>, <span class="string">&#x27;Feb&#x27;</span>, <span class="string">&#x27;Dec&#x27;</span>];</span><br><span class="line">months.sort();</span><br><span class="line"><span class="built_in">console</span>.log(months);</span><br><span class="line"><span class="comment">// expected output: Array [&quot;Dec&quot;, &quot;Feb&quot;, &quot;Jan&quot;, &quot;March&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="number">30</span>, <span class="number">4</span>, <span class="number">21</span>, <span class="number">100000</span>];</span><br><span class="line">array1.sort();</span><br><span class="line"><span class="built_in">console</span>.log(array1);</span><br><span class="line"><span class="comment">// expected output: Array [1, 100000, 21, 30, 4]</span></span><br></pre></td></tr></table></figure>

<h4 id="描述："><a href="#描述：" class="headerlink" title="描述："></a>描述：</h4><p>​ 如果没有指明 <code>compareFunction</code> ，那么元素会按照转换为的字符串的诸个字符的 Unicode 位点进行排序。例如 “Banana” 会被排列到 “cherry” 之前。当数字按由小到大排序时，9 出现在 80 之前，但因为（没有指明 <code>compareFunction</code>），比较的数字会先被转换为字符串，所以在 Unicode 顺序上 “80” 要比 “9” 要靠前。</p>
<p>如果指明了 <code>compareFunction</code> ，那么数组会按照调用该函数的返回值排序。即 a 和 b 是两个将要被比较的元素：</p>
<ul>
<li><p>如果 <code>compareFunction(a, b)</code> 小于 0 ，那么 a 会被排列到 b 之前；</p>
</li>
<li><p>如果 <code>compareFunction(a, b)</code> 等于 0 ， a 和 b 的相对位置不变。备注： ECMAScript 标准并不保证这一行为，而且也不是所有浏览器都会遵守（例如 Mozilla 在 2003 年之前的版本）；</p>
</li>
<li><p>如果 <code>compareFunction(a, b)</code> 大于 0 ， b 会被排列到 a 之前。</p>
</li>
<li><p><code>compareFunction(a, b)</code> 必须总是对相同的输入返回相同的比较结果，否则排序的结果将是不确定的。</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (a &lt; b) &#123;</span><br><span class="line">    <span class="comment">// 按某种排序标准进行比较, a 小于 b</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// a must be equal to b</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>要比较数字而非字符串，比较函数可以简单的以 a 减 b，如下的函数将会将数组升序排列</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compareNumbers</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>sort</code> 方法可以使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/function">函数表达式</a> 方便地书写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = [<span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>];</span><br><span class="line">numbers.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(numbers);</span><br><span class="line"></span><br><span class="line">也可以写成：</span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>];</span><br><span class="line">numbers.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line"><span class="built_in">console</span>.log(numbers);</span><br><span class="line"></span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<h2 id="输出数组为字符串"><a href="#输出数组为字符串" class="headerlink" title="输出数组为字符串"></a>输出数组为字符串</h2><blockquote>
<p>输出数组为字符串</p>
</blockquote>
<h3 id="toString-和-join"><a href="#toString-和-join" class="headerlink" title="toString 和 join"></a>toString 和 join</h3><blockquote>
<p>将数组转为字符串</p>
</blockquote>
<h4 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString"></a>toString</h4><blockquote>
<p><code>**toString()**</code> 返回一个字符串，表示指定的数组及其元素。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Array"><code>Array</code></a>对象覆盖了<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object"><code>Object</code></a>的 <code>toString</code> 方法。对于数组对象，<code>toString</code> 方法连接数组并返回一个字符串，其中包含用逗号分隔的每个数组元素。</p>
<p>当一个数组被作为文本值或者进行字符串连接操作时，将会自动调用其 <code>toString</code> 方法。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;1a&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1.toString()); <span class="comment">// &quot;1,2,a,1a&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="join"><a href="#join" class="headerlink" title="join"></a>join</h4><blockquote>
<p>该<code>**join()**</code>方法通过连接数组（或类<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Indexed_collections#Working_with_array-like_objects">数组对象</a>）中的所有元素（由逗号或指定的分隔符字符串分隔）来创建并返回新字符串。如果数组只有一个项目，那么将返回该项目而不使用分隔符。</p>
<p>指定用于分隔数组的每对相邻元素的字符串。如有必要，分隔符将转换为字符串。如果省略，则数组元素用逗号（“，”）分隔。如果<code>separator</code>是空字符串，则连接所有元素，它们之间没有任何字符。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elements = [<span class="string">&quot;Fire&quot;</span>, <span class="string">&quot;Air&quot;</span>, <span class="string">&quot;Water&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(elements.join()); <span class="comment">//  &quot;Fire,Air,Water&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(elements.join(<span class="string">&quot;&quot;</span>)); <span class="comment">// &quot;FireAirWater&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(elements.join(<span class="string">&quot;-&quot;</span>)); <span class="comment">//  &quot;Fire-Air-Water&quot;</span></span><br></pre></td></tr></table></figure>

<p>下面的示例创建一个<code>a</code>包含三个元素的数组，然后将数组连接四次：使用默认分隔符，然后是逗号和空格，然后是加号和空字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&quot;Wind&quot;</span>, <span class="string">&quot;Water&quot;</span>, <span class="string">&quot;Fire&quot;</span>];</span><br><span class="line">a.join(); <span class="comment">// &#x27;Wind,Water,Fire&#x27;</span></span><br><span class="line">a.join(<span class="string">&quot;, &quot;</span>); <span class="comment">// &#x27;Wind, Water, Fire&#x27;</span></span><br><span class="line">a.join(<span class="string">&quot; + &quot;</span>); <span class="comment">// &#x27;Wind + Water + Fire&#x27;</span></span><br><span class="line">a.join(<span class="string">&quot;&quot;</span>); <span class="comment">// &#x27;WindWaterFire&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>加入类似数组的对象</strong></p>
<p>以下示例<code>arguments</code>通过调用<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call"><code>Function.prototype.call</code></a>on 来连接类似于 array 的对象（）<code>Array.prototype.join</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> s = <span class="built_in">Array</span>.prototype.join.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(s); <span class="comment">// &#x27;1,a,true&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">f(<span class="number">1</span>, <span class="string">&quot;a&quot;</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">//expected output: &quot;1,a,true&quot;</span></span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/API/" rel="tag">API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E7%BB%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/" rel="tag">数组相关操作</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-OperatingSystemCourseDesign"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/06/15/OperatingSystemCourseDesign/"
    >操作系统课程设计</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/06/15/OperatingSystemCourseDesign/" class="article-date">
  <time datetime="2019-06-15T05:24:42.000Z" itemprop="datePublished">2019-06-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/">课程设计</a> / <a class="article-category-link" href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E8%AE%AD/">操作系统实训</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="操作系统课程设计"><a href="#操作系统课程设计" class="headerlink" title="操作系统课程设计"></a>操作系统课程设计</h1><p><img src="http://static.zxinc520.com/blog/20190615/PaXCTq1hgEbO.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190615/HbzHoGRT91yz.png?imageslim" alt="mark"></p>
<table>
<thead>
<tr>
<th>课题</th>
<th>操作系统</th>
</tr>
</thead>
<tbody><tr>
<td>院系</td>
<td>计算机与信息工程学院</td>
</tr>
<tr>
<td>班级</td>
<td>1701</td>
</tr>
<tr>
<td>姓名</td>
<td>周琛</td>
</tr>
<tr>
<td>学号</td>
<td>2017115010124</td>
</tr>
</tbody></table>
<h2 id="实验一-处理器调度"><a href="#实验一-处理器调度" class="headerlink" title="实验一 处理器调度"></a>实验一 处理器调度</h2><h3 id="一、实习内容"><a href="#一、实习内容" class="headerlink" title="一、实习内容"></a>一、实习内容</h3><p>​ 选择一个调度算法，实现处理器调度。</p>
<h3 id="二、实习目的"><a href="#二、实习目的" class="headerlink" title="二、实习目的"></a>二、实习目的</h3><p>​ 在采用多道程序设计的系统中，往往有若干个进程同时处于就绪状态。当就绪进程个数大于处理器数时，就必须依照某种策略来决定哪些进程优先占用处理器。本实习模拟在单处理器情况下的处理器调度，帮助学生加深了解处理器调度的工作。</p>
<h3 id="三、实习题目"><a href="#三、实习题目" class="headerlink" title="三、实习题目"></a>三、实习题目</h3><p>​ 本实习有两个题，学生可选择其中的一题做实习。</p>
<p>​ 第一题：设计一个<strong>按优先数调度算法</strong>实现处理器调度的程序。</p>
<h4 id="提示"><a href="#提示" class="headerlink" title="提示:"></a>提示:</h4><ol>
<li><p>假定系统有五个进程，每一个进程用一个进程控制块 PCB 来代表，进程控制块的<strong>格式为</strong>：</p>
<p><img src="http://static.zxinc520.com/blog/20190615/BvLSkm8uRm2W.png?imageslim" alt="mark"></p>
</li>
</ol>
<p>其中，进程名——作为进程的标识，假设五个进程的进程名分别为 P1，P2，P3，P4，P5。</p>
<ul>
<li>指针——按优先数的大小把五个进程连成队列，用指针指出下一个进程的进程控制块的首地址，最后一个进程中的指针为“0”。</li>
<li>要求运行时间——假设进程需要运行的单位时间数。</li>
<li>优先数——赋予进程的优先数，调度时总是选取优先数大的进程先执行。</li>
<li>状态——可假设有两种状态，“就绪”状态和“结束”状态。五个进程的初始状态都为“就绪”，用“R”表示，当一个进程运行结束后，它的状态为“结束”，用“E”表示。</li>
</ul>
<ol start="2">
<li><p>在每次运行你所设计的处理器调度程序之前，为每个进程任意确定它的“优先数”和“要求运行时间”。</p>
</li>
<li><p>为了调度方便，把五个进程按给定的优先数从大到小连成队列。用一单元指出队首进程，用指针指出队列的连接情况。例：</p>
<p><strong>队首标志</strong></p>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190615/cAeym1O3lvaj.png?imageslim" alt="mark"></p>
<ol start="4">
<li>处理器调度总是选队首进程运行。采用动态改变优先数的办法，进程每运行一次优先数就减“1”。由于本实习是模拟处理器调度，所以，对被选中的进程并不实际的启动运行，而是执行：</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190615/nEAGCE9sJJqJ.png?imageslim" alt="mark"></p>
<p><strong>提醒注意的是：</strong>在实际的系统中，当一个进程被选中运行时，必须恢复进程的现场，让它占有处理器运行，直到出现等待事件或运行结束。在这里省去了这些工作。</p>
<ol start="5">
<li>进程运行一次后，若要求运行时间 ¹0，则再将它加入队列（按优先数大小插入，且置队首标志）；若要求运行时间=0，则把它的状态修改成“结束”（E），且退出队列。</li>
<li>若“就绪”状态的进程队列不为空，则重复上面（4）和（5）的步骤，直到所有进程都成为“结束”状态。</li>
<li>在所设计的程序中应有显示或打印语句，能显示或打印每次被选中进程的进程名以及运行一次后进程队列的变化。</li>
<li>为五个进程任意确定一组“优先数”和“要求运行时间”，启动所设计的处理器调度程序，显示或打印逐次被选中进程的进程名以及进程控制块的动态变化过程。</li>
</ol>
<p><strong>源代码:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt; //strcpy()</span><br><span class="line">#include&lt;stdlib.h&gt;//malloc()</span><br><span class="line"><span class="keyword">void</span> insertQuestion();</span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line"><span class="keyword">void</span> view();</span><br><span class="line"><span class="keyword">void</span> arithmetic();</span><br><span class="line">typedef struct process</span><br><span class="line">&#123;</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">    int Priority;</span><br><span class="line">    int Time;</span><br><span class="line">    int processState;</span><br><span class="line">    struct process *next;</span><br><span class="line">&#125;nodelist;</span><br><span class="line"></span><br><span class="line">nodelist *pHead=NULL;<span class="comment">//存放调度的首节点地址</span></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    insertQuestion();</span><br><span class="line">    arithmetic();</span><br><span class="line">    <span class="comment">// view();</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加问题</span></span><br><span class="line"><span class="keyword">void</span> insertQuestion()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">    int Priority;</span><br><span class="line">    int Time;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int n;</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      scanf(<span class="string">&quot;%s %d %d&quot;</span>,ProcessName,&amp;Priority,&amp;Time);</span><br><span class="line">      insertNode(ProcessName,Priority,Time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将数据插入链表</span></span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//申请存储空间</span></span><br><span class="line">    nodelist *pNew=(nodelist *)malloc(sizeof(nodelist));</span><br><span class="line">    nodelist *p,*q;</span><br><span class="line">    strcpy(pNew-&gt;ProcessName,ProcessName);</span><br><span class="line">    pNew-&gt;Priority = Priority;</span><br><span class="line">    pNew-&gt;Time = Time;</span><br><span class="line">    pNew-&gt;processState=<span class="number">1</span>;</span><br><span class="line">    pNew-&gt;next=NULL;</span><br><span class="line">        <span class="keyword">if</span>(pHead==NULL) <span class="comment">//插入前链表为空，新插入的节点为头节点</span></span><br><span class="line">        &#123;</span><br><span class="line">            pHead=pNew;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            p=pHead;</span><br><span class="line">            <span class="keyword">if</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                q=p-&gt;next;</span><br><span class="line">                p=q;</span><br><span class="line">                &#125;</span><br><span class="line">                p-&gt;next=pNew;</span><br><span class="line">                pNew-&gt;next=NULL;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p-&gt;next==<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                p-&gt;next=pNew;</span><br><span class="line">                p=pNew;</span><br><span class="line">                pNew-&gt;next=NULL;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示链表中的数据</span></span><br><span class="line"><span class="keyword">void</span> view()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* 显示所有的结果 */</span></span><br><span class="line">    nodelist *p=pHead;</span><br><span class="line">    <span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">    &#123;</span><br><span class="line">    	    printf(<span class="string">&quot;进程名\t优先数\t时间\t就绪状态\n&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span>(p!=NULL)</span><br><span class="line">            &#123;</span><br><span class="line">                printf(<span class="string">&quot;%s\t&quot;</span>,p-&gt;ProcessName);</span><br><span class="line">                printf(<span class="string">&quot;%d\t&quot;</span>,p-&gt;Priority);</span><br><span class="line">                printf(<span class="string">&quot;%d\t&quot;</span>,p-&gt;Time);</span><br><span class="line">                 printf(<span class="string">&quot;%d\t&quot;</span>,p-&gt;processState);</span><br><span class="line">                p=p-&gt;next;</span><br><span class="line">                printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      printf(<span class="string">&quot;链表中啥都没有！\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> arithmetic()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//相关算法实现</span></span><br><span class="line">    nodelist *p=pHead;</span><br><span class="line">    nodelist *q=pHead;</span><br><span class="line">    nodelist *m=pHead;</span><br><span class="line">    int max=p-&gt;Priority;</span><br><span class="line">    int flag=<span class="number">0</span>;</span><br><span class="line">    int i;</span><br><span class="line">    int sum=<span class="number">0</span>;</span><br><span class="line">    char firstName[<span class="number">5</span>];</span><br><span class="line">    char ReturnProcessName[<span class="number">5</span>];</span><br><span class="line">    strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m!=<span class="number">0</span>)&#123;</span><br><span class="line">        sum+=m-&gt;Time;</span><br><span class="line">        m=m-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sum; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(p!=NULL)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>( max &lt; (p-&gt;Priority) &amp;&amp; (p-&gt;Time&gt;<span class="number">0</span>))&#123;</span><br><span class="line">                    max= p-&gt;Priority;</span><br><span class="line">                    strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line">                    flag=<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                p=p-&gt;next;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">                      <span class="keyword">while</span>(q!=NULL)</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="keyword">if</span>(strcmp(q-&gt;ProcessName,ReturnProcessName) == <span class="number">0</span>)&#123;</span><br><span class="line">                            	printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                            	printf(<span class="string">&quot;被选中进程的进程名:&quot;</span>);</span><br><span class="line">                                printf(<span class="string">&quot;%s\n&quot;</span>,q-&gt;ProcessName);</span><br><span class="line">                                q-&gt;Priority--;</span><br><span class="line">                                q-&gt;Time--;</span><br><span class="line">                            &#125;</span><br><span class="line">	                              <span class="keyword">if</span> (q-&gt;Time==<span class="number">0</span>)</span><br><span class="line">					                &#123;</span><br><span class="line">					                	q-&gt;processState=<span class="number">0</span>;</span><br><span class="line">					                &#125;</span><br><span class="line">                            q=q-&gt;next;</span><br><span class="line">                        &#125;</span><br><span class="line">                    p=pHead;</span><br><span class="line">                    q=pHead;</span><br><span class="line">                    max=p-&gt;Priority;</span><br><span class="line">                    printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                    printf(<span class="string">&quot;运行一次后进程队列的变化:\n&quot;</span>);</span><br><span class="line">                    printf(<span class="string">&quot;----------------------------------\n&quot;</span>);</span><br><span class="line">                    view();</span><br><span class="line">                    printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">                    strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果:</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190615/1Xn16500J847.jpg?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190615/qCGSz0Azzdif.jpg?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190615/FMiq4WyNObOV.gif" alt="mark"></p>
<h2 id="实验二-主存储器空间的分配和回收"><a href="#实验二-主存储器空间的分配和回收" class="headerlink" title="实验二 主存储器空间的分配和回收"></a>实验二 主存储器空间的分配和回收</h2><h3 id="一、实习内容-1"><a href="#一、实习内容-1" class="headerlink" title="一、实习内容"></a>一、实习内容</h3><p>​ 主存储器空间的分配和回收。</p>
<h3 id="二、实习目的-1"><a href="#二、实习目的-1" class="headerlink" title="二、实习目的"></a>二、实习目的</h3><p>​ 一个好的计算机系统不仅要有一个足够容量的、存取速度高的、稳定可靠的主存储器，而且要能合理地分配和使用这些存储空间。当用户提出申请存储器空间时，存储管理必须根据申请者的要求，按一定的策略分析主存空间的使用情况，找出足够的空闲区域分配给申请者。当作业撤离或主动归还主存资源时，则存储管理要收回作业占用的主存空间或归还部分主存空间。主存的分配和回收的实现虽与主存储器的管理方式有关的，通过本实习帮助学生理解在不同的存储管理方式下应怎样实现主存空间的分配和回收。</p>
<h3 id="三、实习题目-1"><a href="#三、实习题目-1" class="headerlink" title="三、实习题目"></a>三、实习题目</h3><p>​ 模拟在分页式管理方式下采用位示图来表示主存分配情况，实现主存空间的分配和回收。</p>
<h4 id="提示："><a href="#提示：" class="headerlink" title="提示："></a>提示：</h4><ol>
<li><p>分页式存储器把主存分成大小相等的若干块，作业的信息也按块的大小分页，作业装入主存时可把作业的信息按页分散存放在主存的空闲块中，为了说明主存中哪些块已经被占用，哪些块是尚未分配的空闲块，可用一张位示图来指出。位示图可由若干存储单元来构成，其中每一位与一个物理块对应，用 0/1 表示对应块为空闲/已占用。</p>
</li>
<li><p>假设某系统的主存被分成大小相等的 64 块，则位示图可用 8 个字节来构成，另用一单元记录当前空闲块数。如果已有第 0，1，4，5，6，9，11，13，24，31，共 10 个主存块被占用了，那么位示图情况如下：</p>
<p><img src="http://static.zxinc520.com/blog/20190615/y2yBXTmrC7SP.png?imageslim" alt="mark"></p>
</li>
<li><p>当要装入一个作业时，根据作业对主存的需要量，先查当前空闲块数是否能满足作业要求，若不能满足则输出分配不成功。若能满足，则查位示图，找出为“0”的一些位，置上占用标志“1”，从“当前空闲块数”中减去本次占用块数。</p>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190615/Wq5YpOTIc25K.png?imageslim" alt="mark"></p>
<p>其中，j 表示找到的是第 n 个字节，I 表示对应的是第 n 位。</p>
<p>根据分配给作业的块号，为作业建立一张<strong>页表</strong>，页表格式：</p>
<p><img src="http://static.zxinc520.com/blog/20190615/fWnQmUT7up8x.png?imageslim" alt="mark"></p>
<ol start="4">
<li><p>当一个作业执行结束，归还主存时，根据该作业的页表可以知道应归还的块号，由块号可计算出在位示图中的对应位置，把对应位的占用标志清成“0”，表示对应的块已成为空闲块。归还的块数加入到当前空闲块数中。由块号计算在位示图中的位置的公式如下：</p>
<p><img src="http://static.zxinc520.com/blog/20190615/0zJ5vnMejiNd.png?imageslim" alt="mark"></p>
</li>
<li><p>设计实现主存分配和回收的程序。假定位示图的初始状态如（2）所述，现有一信息量为 5 页的作业要装入，运行你所设计的分配程序，为作业分配主存且建立页表（格式如（3）所述）。然后假定有另一作业执行结束，它占用的块号为第 4，5，6 和 31 块，运行你所设计的回收程序，收回作业归还的主存块。</p>
</li>
</ol>
<p>要求能显示和打印分配或回收前后的位示图和当前空闲块数，对完成一次分配后还要显示或打印为作业建立的页表。</p>
<h3 id="四、实习报告"><a href="#四、实习报告" class="headerlink" title="四、实习报告"></a>四、实习报告</h3><ol>
<li>实习题目。</li>
<li>程序中使用的数据结构及符号说明。</li>
<li>流程图。</li>
<li>打印一份源程序并附上注释。</li>
<li>打印程序运行时的初值和运行结果，要求如下：</li>
</ol>
<h4 id="输出要求"><a href="#输出要求" class="headerlink" title="输出要求:"></a>输出要求:</h4><p>​ 打印位示图和当前空闲块数的初值；要求装入的作业对主存的申请量，为作业分配后的位示图、当前空闲块数和页表；作业归还的块号、回收作业所占主存后的位示图和当前空闲块数。</p>
<p><strong>源代码:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;stdio.h&quot;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">  int arr[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">  int n=<span class="number">0</span>;</span><br><span class="line">  int sumsheng=<span class="number">54</span>;</span><br><span class="line">  int i=<span class="number">0</span>,j=<span class="number">0</span>;</span><br><span class="line">  int count=<span class="number">0</span>;</span><br><span class="line">  int indexI=<span class="number">0</span>;</span><br><span class="line">  int flag=<span class="number">0</span>;</span><br><span class="line">  int arr1[<span class="number">64</span>];</span><br><span class="line">  int finallyIndex=<span class="number">0</span>;</span><br><span class="line">  int arrindex=<span class="number">0</span>;</span><br><span class="line">  int arrindex2=<span class="number">0</span>;</span><br><span class="line">  int indexflag=<span class="number">0</span>;</span><br><span class="line">  int x[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">  int ReturnNum=<span class="number">0</span>;</span><br><span class="line">  int term;</span><br><span class="line">  arr[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">4</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">5</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">6</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">9</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">11</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">13</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">24</span>]=<span class="number">1</span>;</span><br><span class="line">  arr[<span class="number">31</span>]=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  printf(<span class="string">&quot;装入的作业对主存的申请量:&quot;</span>);</span><br><span class="line">  scanf(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// printf(&quot;%d\n&quot;, sumsheng);</span></span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;-------------------------------------\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;初始位示图:\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span> (i%<span class="number">8</span>==<span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  printf(<span class="string">&quot;%d &quot;</span>,arr[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;当前空闲块数的初值:%d\n&quot;</span>,sumsheng );</span><br><span class="line">printf(<span class="string">&quot;-------------------------------------\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">sumsheng=sumsheng-n;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (n&gt;sumsheng)</span><br><span class="line">    &#123;</span><br><span class="line">      printf(<span class="string">&quot;分配不成功\n&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            indexI=i;</span><br><span class="line">            goto LOOP;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">       LOOP:<span class="keyword">for</span>(i=indexI;i&lt;<span class="number">64</span>;i++)&#123;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            arr[i]=<span class="number">1</span>;</span><br><span class="line">            arr1[indexflag]=i;</span><br><span class="line">            indexflag++;</span><br><span class="line">            count++;</span><br><span class="line">            <span class="keyword">if</span>(count==n)&#123;</span><br><span class="line">                 finallyIndex=i;</span><br><span class="line">                 goto A;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">       A:printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">printf(<span class="string">&quot;-------------------------------------\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;为作业分配后的位示图:\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span> (i%<span class="number">8</span>==<span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  printf(<span class="string">&quot;%d &quot;</span>,arr[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;为作业分配后的空闲块数:%d\n&quot;</span>,sumsheng);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;页表:\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;页号\t块号\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">&#123;</span><br><span class="line">  printf(<span class="string">&quot;%d\t%d\n&quot;</span>,i,arr1[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">&quot;-------------------------------------\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;-------------------------------------\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;输入作业归还的块号的数量:&quot;</span>);</span><br><span class="line">scanf(<span class="string">&quot;%d&quot;</span>,&amp;ReturnNum);</span><br><span class="line">printf(<span class="string">&quot;输入作业归还的块号:&quot;</span>);</span><br><span class="line"> <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;ReturnNum ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        scanf(<span class="string">&quot;%d&quot;</span>,&amp;x[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; ReturnNum; i++)</span><br><span class="line">    &#123;</span><br><span class="line">       term=x[i];</span><br><span class="line">       arr[term]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">printf(<span class="string">&quot;回收作业所占主存后的位示图:\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span> (i%<span class="number">8</span>==<span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  printf(<span class="string">&quot;%d &quot;</span>,arr[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">printf(<span class="string">&quot;当前空闲块数:%d\n&quot;</span>,sumsheng+ReturnNum);</span><br><span class="line">printf(<span class="string">&quot;-------------------------------------\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果:</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190615/oPYSHAezbqWC.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190615/5tuH6MxvT5cc.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190615/Mhg1pbnGuPwe.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190615/DePT3qGywNBk.gif" alt="mark"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%AE%AD/" rel="tag">学习实训</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-Database"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/06/11/Database/"
    >大二数据库实验</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/06/11/Database/" class="article-date">
  <time datetime="2019-06-11T10:10:52.000Z" itemprop="datePublished">2019-06-11</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%A4%A7%E5%AD%A6%E5%AE%9E%E8%AE%AD/">大学实训</a> / <a class="article-category-link" href="/categories/%E5%A4%A7%E5%AD%A6%E5%AE%9E%E8%AE%AD/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="大二数据库实验"><a href="#大二数据库实验" class="headerlink" title="大二数据库实验"></a>大二数据库实验</h1><h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><blockquote>
<p>数据库课程实验综合小实验（做一个项目实现增删改查功能）</p>
<p>大二下学期期末大作业！</p>
</blockquote>
<h3 id="技术运用："><a href="#技术运用：" class="headerlink" title="技术运用："></a>技术运用：</h3><p>​ <u>运用到的技术</u>：<strong>bootstrap</strong>+ <strong>art-template</strong> + <strong>node.js</strong> + <strong>mysql</strong></p>
<table>
<thead>
<tr>
<th>课题</th>
<th>数据库</th>
</tr>
</thead>
<tbody><tr>
<td>班级</td>
<td>1701</td>
</tr>
<tr>
<td>作者姓名</td>
<td>周琛</td>
</tr>
<tr>
<td>学号</td>
<td>2017115010124</td>
</tr>
<tr>
<td>所在院系</td>
<td>计算机信息与工程学院</td>
</tr>
<tr>
<td>学科专业名称</td>
<td>计算机科学与技术</td>
</tr>
<tr>
<td>导师及职称</td>
<td>童强</td>
</tr>
</tbody></table>
<p>​</p>
<h2 id="一、实验目的与要求"><a href="#一、实验目的与要求" class="headerlink" title="一、实验目的与要求"></a>一、实验目的与要求</h2><ol>
<li>用 node 设计一个应用程序，实现对平时实验数据库的增、删、改、查。</li>
<li>说明文档中有 node 连接数据库的关键代码说明。</li>
<li>给了一个实例代码，实现了对一张表的增删改查功能（说明文档中可以看到数据库及表的名称，和有关连接数据库和实现增删改查的关键代码）。</li>
<li>可以运行，实现对学生课程数据库的操作；</li>
</ol>
<h2 id="二-步骤操作"><a href="#二-步骤操作" class="headerlink" title="二.步骤操作"></a>二.步骤操作</h2><h4 id="1-用-node-设计一个应用程序，实现对平时实验数据库的增、删、改、查。"><a href="#1-用-node-设计一个应用程序，实现对平时实验数据库的增、删、改、查。" class="headerlink" title="1. 用 node 设计一个应用程序，实现对平时实验数据库的增、删、改、查。"></a>1. 用 node 设计一个应用程序，实现对平时实验数据库的增、删、改、查。</h4><p><strong>效果图:</strong></p>
<p>用图说话：</p>
<p><img src="http://static.zxinc520.com/blog/20190525/JWCuqSFLOqbB.png?imageslim" alt="mark"></p>
<h3 id="视频"><a href="#视频" class="headerlink" title="视频:"></a><img src="http://static.zxinc520.com/blog/20190525/KHUkC8mo5c0L.png?imageslim" alt="mark">视频:</h3><video id="video" controls="" preload="none" poster="http://static.zxinc520.com/blog/20190613/yhdLmF30B7EP.png?imageslim">
      <source id="mp4" src="http://static.zxinc520.com/bandicam%202019-05-28%2012-50-22-208.mp4" type="video/mp4">
      </video>

<h3 id="2-说明文档中有-node-连接数据库的关键代码"><a href="#2-说明文档中有-node-连接数据库的关键代码" class="headerlink" title="2. 说明文档中有 node 连接数据库的关键代码"></a>2. 说明文档中有 node 连接数据库的关键代码</h3><blockquote>
<p>文件 : mysql.js</p>
<p><strong>作用: 连接数据库,执行数据操作、 封装、暴露方法.</strong></p>
</blockquote>
<p><strong>mysql.js</strong>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&quot;mysql&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行数据操作、 封装、暴露方法</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  query: <span class="function"><span class="keyword">function</span> (<span class="params">sql, params, callback</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.创建链接</span></span><br><span class="line">    <span class="keyword">const</span> connection = mysql.createConnection(&#123;</span><br><span class="line">      host: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">      user: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">      password: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">      database: <span class="string">&quot;zc&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//每次使用的时候需要创建链接，数据操作完成之后要关闭连接</span></span><br><span class="line">    connection.connect(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;数据库链接失败&quot;</span>);</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//开始数据操作</span></span><br><span class="line">      <span class="comment">//传入三个参数，第一个参数sql语句，第二个参数sql语句中需要的数据，第三个参数回调函数</span></span><br><span class="line">      connection.query(sql, params, <span class="function"><span class="keyword">function</span> (<span class="params">err, results, fields</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&quot;数据操作失败&quot;</span>);</span><br><span class="line">          <span class="keyword">throw</span> err;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//将查询出来的数据返回给回调函数</span></span><br><span class="line">        callback &amp;&amp; callback(results, fields);</span><br><span class="line">        <span class="comment">//results作为数据操作后的结果，fields作为数据库连接的一些字段</span></span><br><span class="line">        <span class="comment">//停止链接数据库，必须再查询语句后，要不然一调用这个方法，就直接停止链接，数据操作就会失败</span></span><br><span class="line">        connection.end(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;关闭数据库连接失败！&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> err;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="3-实现了对一张表的增删改查功能"><a href="#3-实现了对一张表的增删改查功能" class="headerlink" title="3.实现了对一张表的增删改查功能"></a>3.实现了对一张表的增删改查功能</h2><blockquote>
<p>给了一个实例代码，实现了对一张表的增删改查功能（说明文档中可以看到数据库及表的名称，和有关连接数据库和实现增删改查的关键代码）。</p>
</blockquote>
<h4 id="添加功能实现"><a href="#添加功能实现" class="headerlink" title="添加功能实现:"></a>添加功能实现:</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">router.post(<span class="string">&quot;/add&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> body = req.body;</span><br><span class="line">  <span class="built_in">console</span>.log(body);</span><br><span class="line">  <span class="keyword">let</span> addSql = <span class="string">&quot;INSERT INTO user(id,username,tel) VALUES(?,?,?)&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> addSqlParams = [body.id, body.username, body.tel];</span><br><span class="line">  db.query(addSql, addSqlParams, <span class="function"><span class="keyword">function</span> (<span class="params">result, fields</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;添加成功&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">      err_code: <span class="number">0</span>,</span><br><span class="line">      message: <span class="string">&quot;OK&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>效果图:</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190525/Q4p9PqfySpYr.png?imageslim" alt="mark"></p>
<h4 id="删除功能实现"><a href="#删除功能实现" class="headerlink" title="删除功能实现 :"></a>删除功能实现 :</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">&quot;/delete&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> deleteSql = <span class="string">&quot;DELETE FROM user  WHERE id = ?&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> deleteSqlParams = req.query.id;</span><br><span class="line">  db.query(deleteSql, deleteSqlParams, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">    res.redirect(<span class="number">302</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>效果图:</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190611/Gu16nhNmt2FM.png?imageslim" alt="mark"></p>
<h4 id="修改功能实现"><a href="#修改功能实现" class="headerlink" title="修改功能实现"></a>修改功能实现</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">&quot;/fix&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  fixsql = <span class="string">&quot;SELECT * FROM user WHERE id = ?&quot;</span>;</span><br><span class="line">  fixSqlParams = req.query.id;</span><br><span class="line">  db.query(fixsql, fixSqlParams, <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    res.render(<span class="string">&quot;fix.html&quot;</span>, &#123;</span><br><span class="line">      result: result[<span class="number">0</span>],</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">&quot;/fix&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.body);</span><br><span class="line">  updatasql = <span class="string">&quot;UPDATE user SET username = ?,tel=? WHERE id = ?&quot;</span>;</span><br><span class="line">  updataSqlParams = [req.body.username, req.body.tel, req.body.id];</span><br><span class="line">  db.query(updatasql, updataSqlParams, <span class="function">(<span class="params">err, results</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">      err_code: <span class="number">0</span>,</span><br><span class="line">      message: <span class="string">&quot;OK&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>效果图:</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190525/RdNGNjvSnJNF.png?imageslim" alt="mark"></p>
<h4 id="查找功能实现"><a href="#查找功能实现" class="headerlink" title="查找功能实现"></a>查找功能实现</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">router.post(<span class="string">&quot;/search&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.body);</span><br><span class="line">  arr = [];</span><br><span class="line">  db.query(<span class="string">&quot;select * from user&quot;</span>, [], <span class="function"><span class="keyword">function</span> (<span class="params">result, fields</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">    result.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        e.id.indexOf(req.body.value) &gt;= <span class="number">0</span> ||</span><br><span class="line">        e.username.indexOf(req.body.value) &gt;= <span class="number">0</span> ||</span><br><span class="line">        e.tel.indexOf(req.body.value) &gt;= <span class="number">0</span></span><br><span class="line">      ) &#123;</span><br><span class="line">        arr.push(e);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">      err_code: <span class="number">0</span>,</span><br><span class="line">      message: arr,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>效果图:</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190611/Ed1NKxGH1I4I.png?imageslim" alt="mark"></p>
<h2 id="4-运行程序"><a href="#4-运行程序" class="headerlink" title="4. 运行程序"></a>4. 运行程序</h2><p>相关代码源代码以上传至码云,地址为:</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/zxinc/sophomore_database_experiment">源码地址</a></p>
<video id="video" controls="" preload="none" poster="http://static.zxinc520.com/blog/20190613/yhdLmF30B7EP.png?imageslim">
 <source id="mp4" src="http://static.zxinc520.com/bandicam%202019-05-28%2012-50-22-208.mp4" type="video/mp4">
  </video>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%A7%E4%BA%8C/" rel="tag">大二</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E8%AE%AD/" rel="tag">数据库实训</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-Promise"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/13/Promise/"
    >Promise</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/05/13/Promise/" class="article-date">
  <time datetime="2019-05-13T04:52:54.000Z" itemprop="datePublished">2019-05-13</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a> / <a class="article-category-link" href="/categories/JS/%E5%BC%82%E6%AD%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">异步解决方案</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><blockquote>
<p>前言: Promise 是 <strong>异步编程</strong> 的一种解决方案, 相比传统的解决方案—&gt;回调函数和事件更加强大.由社区最早提出和实现,ES6 将其写进了语言标准,统一了用法,原生提供了 Promise 对象.</p>
<p>没有 Promise 之前,解决异步都是依赖回调,但执行多个具备前后顺序的异步操作时代码就会非常乱并且出现问题难调试.</p>
<p>Promise 的 <strong>本质</strong> 是要干什么的：就是单纯的为了解决 <strong>回调地狱问题</strong>，但是并不能帮我们减少代码量。</p>
</blockquote>
<h3 id="“回调地狱”是什么"><a href="#“回调地狱”是什么" class="headerlink" title="“回调地狱”是什么"></a>“回调地狱”是什么</h3><p>”回调地狱“也叫”回调金字塔“，我们平时写代码的时候 js 如果异步 回调是不可避免的<br>例如 ajax 不断的进行异步请求数据 回调方法里还要对数据进行处理，继续回调…形成回调地狱<br>这会使得我们的代码可读性变差，出现问题 不好调试 也会导致性能下降</p>
<p>而 nodejs 是一种单线程的事件驱动而且是非阻塞的 I/O 模型，而 I/O 模型，是异步的，这样 nodejs 在处理结果的时候 就需要在回调函数中执行，这样也就形成了回调地狱。</p>
<p><img src="http://static.zxinc520.com/blog/20190420/4iquo6cVxxSQ.jpg?imageslim" alt="mark"></p>
<h3 id="Promise-介绍"><a href="#Promise-介绍" class="headerlink" title="Promise 介绍"></a>Promise 介绍</h3><p>Promise 就是实现异步编程的一种解决方案，核心就是 Promise 对象。Promise 对象就像一个容器，里面保存着某个未来才会结束的事件（通常是一个异步操作）的结果。它可以将异步操作以同步操作的流程表达出来，避免层层嵌套(callback)的毁掉函数。此外，Promise 对象提供统一的接口，使得控制异步操作更加容易。</p>
<p><strong>Promise 对象的两个特点</strong>：</p>
<ol>
<li><p>对象的状态不受外界影响。有三种状态：pending(进行中)、resolved(已成功)、rejected(已失败);</p>
</li>
<li><p>一旦状态改变，就不会再变，任何时候都可以得到这个结果。Promise 对象的状态改变，只有两种可能：从 pending 变为 resolved 和从 pending 变为 rejected。</p>
</li>
</ol>
<p><strong>Promise 缺点：</strong></p>
<ol>
<li>无法取消 Promise，一旦新建它就会立即执行，无法中途取消;</li>
<li>如果不设置回调函数，Promise 内部抛出的错误，不会反应到外部;</li>
<li>当处于 pending 状态时，无法得知目前进展到哪一个阶段（刚刚开始还是即将完成）</li>
</ol>
<hr>
<h4 id="基本概念："><a href="#基本概念：" class="headerlink" title="基本概念："></a><strong>基本概念：</strong></h4><ol>
<li><p>Promise 是一个构造函数，既然是构造函数，那么，我们就可以 new Promise() 得到一个 Promise 的实例</p>
</li>
<li><p>在 Promise 上，有两个函数，分别叫做 <strong>resolve</strong>（成功之后的回调函数） 和 <strong>reject</strong>（失败之后的回调函数）</p>
</li>
<li><p>在 Promise 构造函数的 Prototype 属性上，有一个 <strong>.then()</strong> 方法，也就说，只要是 Promise 构造函数创建的实例，都可以访问到 .then() 方法。</p>
</li>
<li><p>Promise 表示一个 异步操作，每当我们 new 一个 Promise 的实例，这个实例，就表示一个具体的异步操作</p>
</li>
<li><p>既然 Promise 创建的实例，是一个异步操作，那么，这个 异步操作的结果，只能有两种状态：</p>
</li>
</ol>
<p>​ 5.1 <strong>状态 1</strong>： 异步执行成功了，需要在内部调用成功的回调函数（<strong>resolve</strong>），把结果返回给调用者。</p>
<p>​ 5.2 <strong>状态 2</strong>： 异步执行失败了，需要在内部调用失败的回调函数（<strong>reject</strong>），把结果返回给调用者。</p>
<p>​ 5.3 由于 Promise 的实例，是一个异步操作，所以，内部拿到 操作结果后，无法使用 return 把操作的结果返回给调用者；这时候，只能使用回调函数的形式，来把 成功 或 失败的结果，返回给调用者。</p>
<ol start="6">
<li>我们可以在 new 出来的 Promise 实例上，调用 <strong>.then() 方法</strong>，【预先】为这个 Promise 异步操作指定 成功（<strong>resolve</strong>）和 失败（<strong>reject</strong>）回调函数</li>
</ol>
<h2 id="关于-Promise-要解决回调地狱问题的说明"><a href="#关于-Promise-要解决回调地狱问题的说明" class="headerlink" title="关于 Promise 要解决回调地狱问题的说明"></a>关于 Promise 要解决回调地狱问题的说明</h2><p><strong>实验需求</strong>：你要封装一个方法，我给你一个要读取文件的路径，你这个方法帮我读取文件，并把内容返回给我。</p>
<p><em>代码实际演示：</em></p>
<p>目录结构：</p>
<p><img src="http://static.zxinc520.com/blog/20190420/djU0REH3KKbb.png?imageslim" alt="mark"></p>
<h3 id="第一步：初步实现一个读取文件的功能："><a href="#第一步：初步实现一个读取文件的功能：" class="headerlink" title="第一步：初步实现一个读取文件的功能："></a>第一步：初步实现一个读取文件的功能：</h3><p><strong>封装读取文件的方法.js</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 需求：你要封装一个方法，我给你一个要读取文件的路径，你这个方法帮我读取文件，并把内容返回给我</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line">fs.readFile(path.join(__dirname, <span class="string">&quot;./files/1.txt&quot;</span>), <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">throw</span> err;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(dataStr);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="http://static.zxinc520.com/blog/20190420/TR4X4SXC6m2m.png?imageslim" alt="mark"></p>
<h3 id="第二步：封装一个读取文件的方法"><a href="#第二步：封装一个读取文件的方法" class="headerlink" title="第二步：封装一个读取文件的方法"></a>第二步：封装一个读取文件的方法</h3><p><strong>封装读取文件的方法.js</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//初衷 ：给定文件路径 ，返回读取到的内容</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileByPath</span>(<span class="params">fpath</span>) </span>&#123;</span><br><span class="line">  fs.readFile(fpath, <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dataStr;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = getFileByPath(path.join(__dirname, <span class="string">&quot;./files/1.txt&quot;</span>));</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="http://static.zxinc520.com/blog/20190420/4LrSd5ascJjT.png?imageslim" alt="mark"></p>
<h2 id="解决方案：使用回调函数"><a href="#解决方案：使用回调函数" class="headerlink" title="解决方案：使用回调函数"></a>解决方案：使用回调函数</h2><p><strong>封装读取文件的方法.js</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileByPath</span>(<span class="params">fpath, callback</span>) </span>&#123;</span><br><span class="line">  fs.readFile(fpath, <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(err);</span><br><span class="line">    &#125;</span><br><span class="line">    callback(dataStr);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getFileByPath(path.join(__dirname, <span class="string">&quot;./files/1.txt&quot;</span>), <span class="function">(<span class="params">dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(dataStr);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="http://static.zxinc520.com/blog/20190420/U5MDnc8QChTb.png?imageslim" alt="mark"></p>
<h2 id="封装读取文件的方法–改进："><a href="#封装读取文件的方法–改进：" class="headerlink" title="封装读取文件的方法–改进："></a>封装读取文件的方法–改进：</h2><h4 id="callback-中，设置两个参数（err-dataStr）"><a href="#callback-中，设置两个参数（err-dataStr）" class="headerlink" title="callback 中，设置两个参数（err, dataStr）"></a>callback 中，设置两个参数（err, dataStr）</h4><p><strong>封装读取文件的方法.js</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用回调函数</span></span><br><span class="line"><span class="comment">//我们可以规定一下，callback中，有两个参数，第一个参数是失败的结果，第二个参数是成功的结果</span></span><br><span class="line"><span class="comment">//同时，我们规定了：如果成功后，返回的结果，应该位于callback 参数的第二个位置，此时，第一个位置由于没有出错，所以放一个null，如果失败了则第一个位置放置 Error对象，第二个位置放置一个 undefined</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileByPath</span>(<span class="params">fpath, callback</span>) </span>&#123;</span><br><span class="line">  fs.readFile(fpath, <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(err);</span><br><span class="line">    &#125;</span><br><span class="line">    callback(<span class="literal">null</span>, dataStr);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getFileByPath(path.join(__dirname, <span class="string">&quot;./files/1.txt&quot;</span>), <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(err.message);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(dataStr);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190420/Gi6Iffxxw1Jk.png?imageslim" alt="mark"></p>
<h2 id="封装读取文件的方法-提高版"><a href="#封装读取文件的方法-提高版" class="headerlink" title="封装读取文件的方法-提高版"></a>封装读取文件的方法-提高版</h2><h4 id="拆分成-两个-回调（getFileByPath-fpath-succCb-errCb-）"><a href="#拆分成-两个-回调（getFileByPath-fpath-succCb-errCb-）" class="headerlink" title="拆分成 两个 回调（getFileByPath (fpath, succCb, errCb)）"></a>拆分成 两个 回调（getFileByPath (fpath, succCb, errCb)）</h4><p><strong>封装读取文件的方法-提高版.js：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用两个回调---便于理解</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileByPath</span>(<span class="params">fpath, succCb, errCb</span>) </span>&#123;</span><br><span class="line">  fs.readFile(fpath, <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> errCb(err);</span><br><span class="line">    &#125;</span><br><span class="line">    succCb(dataStr);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getFileByPath(</span><br><span class="line">  path.join(__dirname, <span class="string">&quot;./files/1.txt&quot;</span>),</span><br><span class="line">  (dataStr) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;成功的结果，使用成功的回调succCb: &quot;</span> + dataStr);</span><br><span class="line">  &#125;,</span><br><span class="line">  (err) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;失败的结果，使用失败的回调errCb: &quot;</span> + err.message);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>成功的结果：</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190420/OfeQfiHdiJVC.png?imageslim" alt="mark"></p>
<p><strong>失败的结果：</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190420/uVvrqObQxNtc.png?imageslim" alt="mark"></p>
<h2 id="回调嵌套"><a href="#回调嵌套" class="headerlink" title="回调嵌套"></a>回调嵌套</h2><h3 id="需求：先读取文件-1，在读取文件-2，最后读取文件-3"><a href="#需求：先读取文件-1，在读取文件-2，最后读取文件-3" class="headerlink" title="需求：先读取文件 1，在读取文件 2，最后读取文件 3"></a>需求：先读取文件 1，在读取文件 2，最后读取文件 3</h3><h6 id="初步实现："><a href="#初步实现：" class="headerlink" title="初步实现："></a><strong><em>初步实现：</em></strong></h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileByPath</span>(<span class="params">fpath, callback</span>) </span>&#123;</span><br><span class="line">  fs.readFile(fpath, <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(err.message);</span><br><span class="line">    &#125;</span><br><span class="line">    callback(dataStr);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//回调地狱</span></span><br><span class="line">getFileByPath(path.join(__dirname, <span class="string">&quot;./files/1.txt&quot;</span>), <span class="function">(<span class="params">dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(dataStr);</span><br><span class="line">  getFileByPath(path.join(__dirname, <span class="string">&quot;./files/2.txt&quot;</span>), <span class="function">(<span class="params">dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(dataStr);</span><br><span class="line">    getFileByPath(path.join(__dirname, <span class="string">&quot;./files/3.txt&quot;</span>), <span class="function">(<span class="params">dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(dataStr);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>运行结果：</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190420/lQlQH83IcW3B.png?imageslim" alt="mark"></p>
<h3 id="使用-Promise"><a href="#使用-Promise" class="headerlink" title="使用 **Promise **:"></a>使用 **Promise **:</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileByPath</span>(<span class="params">fpath</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(path.join(__dirname, fpath), <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, dataStr</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> reject(err);</span><br><span class="line">      &#125;</span><br><span class="line">      resolve(dataStr);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getFileByPath(<span class="string">&quot;./files/1.txt&quot;</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    <span class="comment">//读取文件2</span></span><br><span class="line">    <span class="keyword">return</span> getFileByPath(<span class="string">&quot;./files/2.txt&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    <span class="comment">//读取文件3</span></span><br><span class="line">    <span class="keyword">return</span> getFileByPath(<span class="string">&quot;./files/3.txt&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err.message);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190420/G1arCfeFpYYK.png?imageslim" alt="mark"></p>
<h2 id="Ajax-使用-then-方法高逼格请求数据"><a href="#Ajax-使用-then-方法高逼格请求数据" class="headerlink" title="Ajax 使用 then 方法高逼格请求数据"></a>Ajax 使用 then 方法高逼格请求数据</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./node_modules/jquery/dist/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&quot;#btn&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">            url: <span class="string">&quot;./data.json&quot;</span>,</span></span><br><span class="line"><span class="javascript">            type: <span class="string">&quot;get&quot;</span>,</span></span><br><span class="line"><span class="javascript">            dataType: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="javascript">          &#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(data);</span></span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="http://static.zxinc520.com/blog/20190420/Raly4WtVEqEx.gif" alt="mark"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/promise/" rel="tag">promise</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9B%9E%E8%B0%83%E5%9C%B0%E7%8B%B1/" rel="tag">回调地狱</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BC%82%E6%AD%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" rel="tag">异步解决方案</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-ProcessScheduling"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/13/ProcessScheduling/"
    >操作系统进程调度作业</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/05/13/ProcessScheduling/" class="article-date">
  <time datetime="2019-05-13T04:52:54.000Z" itemprop="datePublished">2019-05-13</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/">课程设计</a> / <a class="article-category-link" href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6%E4%BD%9C%E4%B8%9A/">操作系统进程调度作业</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="操作系统进程调度作业"><a href="#操作系统进程调度作业" class="headerlink" title="操作系统进程调度作业"></a>操作系统进程调度作业</h1><blockquote>
<p>操作系统进程调度作业</p>
<p>锻炼下思维！</p>
</blockquote>
<h2 id="进程调度-1"><a href="#进程调度-1" class="headerlink" title="进程调度 1"></a>进程调度 1</h2><p><strong>问题描述</strong>：</p>
<p>​ 要求输入 3 个进程，找出最先执行的那个进程的进程名。（如果遇到优先级一样，按照输入顺序执行。），本题中，优先数数值大的表示优先级比较高。</p>
<p><strong>输入格式</strong>：</p>
<p>​ 程序要求输入 3 行，以回车符号作为分隔，每行有 3 个数据，以空格作为分隔。首先输入一个字符串（长度小于等于 10），为进程名，第 2 个数据类型为整型，表示进程的优先数，第 3 个数据类型为整型，表示进程的运行时间。</p>
<p><strong>输出格式</strong>：</p>
<p>​ 输出一个字符串，为最先执行进程的进程名。</p>
<p><em>样例输入 1：</em></p>
<p>P1 1 1</p>
<p>P2 2 2</p>
<p>P3 3 3</p>
<p>样例输出 1：</p>
<p>P3</p>
<p><em>样例输入 2：</em></p>
<p>P1 130 10</p>
<p>P2 100 100</p>
<p>P3 100 100</p>
<p>样例输出 2：</p>
<p>P2</p>
<p><strong>链表实现：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt; //strcpy()</span><br><span class="line">#include &lt;stdlib.h&gt;//malloc()</span><br><span class="line"><span class="keyword">void</span> insertQuestion();</span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line"><span class="keyword">void</span> view();</span><br><span class="line"><span class="keyword">void</span> arithmetic();</span><br><span class="line">typedef struct process</span><br><span class="line">&#123;</span><br><span class="line">	char ProcessName[<span class="number">5</span>];</span><br><span class="line">	int Priority;</span><br><span class="line">	int Time;</span><br><span class="line">	struct process *next;</span><br><span class="line">&#125;nodelist;</span><br><span class="line"></span><br><span class="line">nodelist *pHead=NULL;<span class="comment">//存放调度的首节点地址</span></span><br><span class="line"></span><br><span class="line">int main(<span class="keyword">void</span>)&#123;</span><br><span class="line">    insertQuestion();</span><br><span class="line">    arithmetic();</span><br><span class="line">	system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加问题</span></span><br><span class="line"><span class="keyword">void</span> insertQuestion()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">	int Priority;</span><br><span class="line">	int Time;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">	  scanf(<span class="string">&quot;%s&quot;</span>,ProcessName);</span><br><span class="line">	  scanf(<span class="string">&quot;%d&quot;</span>,&amp;Priority);</span><br><span class="line">	  scanf(<span class="string">&quot;%d&quot;</span>,&amp;Time);</span><br><span class="line">	  insertNode(ProcessName,Priority,Time);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将数据插入链表</span></span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//申请存储空间</span></span><br><span class="line">	nodelist *pNew=(nodelist *)malloc(sizeof(nodelist));</span><br><span class="line">	nodelist *p,*q;</span><br><span class="line">	strcpy(pNew-&gt;ProcessName,ProcessName);</span><br><span class="line">	pNew-&gt;Priority = Priority;</span><br><span class="line">	pNew-&gt;Time = Time;</span><br><span class="line">	pNew-&gt;next=NULL;</span><br><span class="line">	<span class="comment">// printf(&quot;5\n&quot;);</span></span><br><span class="line">		<span class="keyword">if</span>(pHead==NULL) <span class="comment">//插入前链表为空，新插入的节点为头节点</span></span><br><span class="line">		&#123;</span><br><span class="line">			pHead=pNew;</span><br><span class="line">			<span class="comment">//p1=pHead;</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			p=pHead;</span><br><span class="line">			<span class="keyword">if</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">while</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">				q=p-&gt;next;</span><br><span class="line">			    p=q;</span><br><span class="line">				&#125;</span><br><span class="line">				p-&gt;next=pNew;</span><br><span class="line">				pNew-&gt;next=NULL;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (p-&gt;next==<span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				p-&gt;next=pNew;</span><br><span class="line">			    p=pNew;</span><br><span class="line">				pNew-&gt;next=NULL;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示链表中的数据</span></span><br><span class="line"><span class="keyword">void</span> view()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">/* 显示所有的结果 */</span></span><br><span class="line">	nodelist *p=pHead;</span><br><span class="line">	<span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">	&#123;</span><br><span class="line">			<span class="keyword">while</span>(p!=NULL)</span><br><span class="line">			&#123;</span><br><span class="line">				printf(<span class="string">&quot;%s &quot;</span>,p-&gt;ProcessName);</span><br><span class="line">				printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Priority);</span><br><span class="line">				printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Time);</span><br><span class="line">				p=p-&gt;next;</span><br><span class="line">				printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">	  printf(<span class="string">&quot;链表中啥都没有！\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> arithmetic()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//相关算法实现</span></span><br><span class="line">	nodelist *p=pHead;</span><br><span class="line">	int max=p-&gt;Priority;</span><br><span class="line">	int flag=<span class="number">0</span>;</span><br><span class="line">	char firstName[<span class="number">5</span>];</span><br><span class="line">	char ReturnProcessName[<span class="number">5</span>];</span><br><span class="line">	strcpy(firstName,p-&gt;ProcessName);</span><br><span class="line">	<span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">	&#123;</span><br><span class="line">			<span class="keyword">while</span>(p!=NULL)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>( max &lt; (p-&gt;Priority))&#123;</span><br><span class="line">                    max= p-&gt;Priority;</span><br><span class="line">                    strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line">					flag=<span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				p=p-&gt;next;</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(flag==<span class="number">1</span>)&#123;</span><br><span class="line">		printf(<span class="string">&quot;%s\n&quot;</span>,ReturnProcessName);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		printf(<span class="string">&quot;%s\n&quot;</span>,firstName);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190513/liF2w98LPKem.gif" alt="mark"></p>
<p>​ <img src="http://static.zxinc520.com/blog/20190513/XXOxTOQJ8P0H.gif" alt="mark"></p>
<h2 id="进程调度-2"><a href="#进程调度-2" class="headerlink" title="进程调度 2"></a>进程调度 2</h2><p><strong>问题描述</strong>：</p>
<p>​ 要求输入 N 个进程（0&lt;N&lt;=100），找出最后执行的那个进程的进程名。（如果遇到优先级一样，按照输入顺序执行。），本题中，优先数数值较高的优先级也较高。</p>
<p><strong>输入格式</strong>：</p>
<p>​ 程序首先要求输入一个整型值 N，接下来输入为 N 行，以回车符号作为分隔，每行有 3 个数据，以空格作为分隔。首先输入一个字符串（长度小于等于 10），该字符串为进程名。第 2 个数据类型为整型，表示进程的优先数。第 3 个数据类型为整型，表示进程的运行时间。</p>
<p><strong>输出格式：</strong></p>
<p>​ 输出一个字符串，为最后执行进程的进程名。</p>
<p><em>样例输入 1：</em></p>
<p>3</p>
<p>P1 1 1</p>
<p>P2 2 2</p>
<p>P3 3 3</p>
<p>样例输出 1：</p>
<p>P3</p>
<p><em>样例输入 2：</em></p>
<p>2</p>
<p>P1 10 10</p>
<p>P2 100 100</p>
<p>样例输出 2：</p>
<p>P2</p>
<p><strong>源代码：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt; //strcpy()</span><br><span class="line">#include &lt;stdlib.h&gt;//malloc()</span><br><span class="line"><span class="keyword">void</span> insertQuestion();</span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line"><span class="keyword">void</span> view();</span><br><span class="line"><span class="keyword">void</span> arithmetic();</span><br><span class="line">typedef struct process</span><br><span class="line">&#123;</span><br><span class="line">	char ProcessName[<span class="number">5</span>];</span><br><span class="line">	int Priority;</span><br><span class="line">	int Time;</span><br><span class="line">	struct process *next;</span><br><span class="line">&#125;nodelist;</span><br><span class="line"></span><br><span class="line">nodelist *pHead=NULL;<span class="comment">//存放调度的首节点地址</span></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    insertQuestion();</span><br><span class="line">    arithmetic();</span><br><span class="line">    <span class="comment">// view();</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加问题</span></span><br><span class="line"><span class="keyword">void</span> insertQuestion()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">	int Priority;</span><br><span class="line">	int Time;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int n;</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">	  scanf(<span class="string">&quot;%s %d %d&quot;</span>,ProcessName,&amp;Priority,&amp;Time);</span><br><span class="line">	  insertNode(ProcessName,Priority,Time);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将数据插入链表</span></span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//申请存储空间</span></span><br><span class="line">	nodelist *pNew=(nodelist *)malloc(sizeof(nodelist));</span><br><span class="line">	nodelist *p,*q;</span><br><span class="line">	strcpy(pNew-&gt;ProcessName,ProcessName);</span><br><span class="line">	pNew-&gt;Priority = Priority;</span><br><span class="line">	pNew-&gt;Time = Time;</span><br><span class="line">	pNew-&gt;next=NULL;</span><br><span class="line">	<span class="comment">// printf(&quot;5\n&quot;);</span></span><br><span class="line">		<span class="keyword">if</span>(pHead==NULL) <span class="comment">//插入前链表为空，新插入的节点为头节点</span></span><br><span class="line">		&#123;</span><br><span class="line">			pHead=pNew;</span><br><span class="line">			<span class="comment">//p1=pHead;</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//将地址为pNew的节点插入到首地址为pHead的链表的尾部</span></span><br><span class="line">			<span class="comment">/*p1-&gt;next=pNew;</span></span><br><span class="line"><span class="comment">			p1=pNew;</span></span><br><span class="line"><span class="comment">			pNew-&gt;next=NULL;*/</span></span><br><span class="line">			p=pHead;</span><br><span class="line">			<span class="comment">//q=(nodelist *)malloc(sizeof(nodelist));</span></span><br><span class="line">			<span class="keyword">if</span>(p-&gt;next!=<span class="number">0</span>)     <span class="comment">//文件不为空，即pHead后面有数据</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">while</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">				q=p-&gt;next;</span><br><span class="line">			    p=q;</span><br><span class="line">				&#125;</span><br><span class="line">				p-&gt;next=pNew;</span><br><span class="line">				pNew-&gt;next=NULL;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (p-&gt;next==<span class="number">0</span>) <span class="comment">//只有头结点，即pHead后面无数据</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//将地址为pNew的节点插入到首地址为pHead的链表的尾部</span></span><br><span class="line">				p-&gt;next=pNew;</span><br><span class="line">			    p=pNew;</span><br><span class="line">				pNew-&gt;next=NULL;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示链表中的数据</span></span><br><span class="line"><span class="keyword">void</span> view()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">/* 显示所有的结果 */</span></span><br><span class="line">	nodelist *p=pHead;</span><br><span class="line">	<span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">	&#123;</span><br><span class="line">			<span class="keyword">while</span>(p!=NULL)</span><br><span class="line">			&#123;</span><br><span class="line">				printf(<span class="string">&quot;%s &quot;</span>,p-&gt;ProcessName);</span><br><span class="line">				printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Priority);</span><br><span class="line">				printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Time);</span><br><span class="line">				p=p-&gt;next;</span><br><span class="line">				printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">	  printf(<span class="string">&quot;链表中啥都没有！\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> arithmetic()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//相关算法实现</span></span><br><span class="line">	nodelist *p=pHead;</span><br><span class="line">	nodelist *q=pHead;</span><br><span class="line">	nodelist *m=pHead;</span><br><span class="line">	int max=p-&gt;Priority;</span><br><span class="line">	int flag=<span class="number">0</span>;</span><br><span class="line">	int i;</span><br><span class="line">	int sum=<span class="number">0</span>;</span><br><span class="line">	char firstName[<span class="number">5</span>];</span><br><span class="line">	char ReturnProcessName[<span class="number">5</span>];</span><br><span class="line">	char FinallProcessName[<span class="number">5</span>];</span><br><span class="line">	strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(m!=<span class="number">0</span>)&#123;</span><br><span class="line">		sum+=m-&gt;Time;</span><br><span class="line">	    m=m-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sum; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">while</span>(p!=NULL)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>( max &lt; (p-&gt;Priority) &amp;&amp; (p-&gt;Time&gt;<span class="number">0</span>))&#123;</span><br><span class="line">                    max= p-&gt;Priority;</span><br><span class="line">                    strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line">					flag=<span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				p=p-&gt;next;</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">				  	<span class="keyword">while</span>(q!=NULL)</span><br><span class="line">						&#123;</span><br><span class="line">							<span class="keyword">if</span>(strcmp(q-&gt;ProcessName,ReturnProcessName) == <span class="number">0</span>)&#123;</span><br><span class="line">                                strcpy(FinallProcessName,q-&gt;ProcessName);</span><br><span class="line">								q-&gt;Priority--;</span><br><span class="line">								q-&gt;Time--;</span><br><span class="line">							&#125;</span><br><span class="line">							q=q-&gt;next;</span><br><span class="line">						&#125;</span><br><span class="line">					p=pHead;</span><br><span class="line">					q=pHead;</span><br><span class="line">					max=p-&gt;Priority;</span><br><span class="line">					strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">			printf(<span class="string">&quot;%s\n&quot;</span>,FinallProcessName);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190513/HbsJqnfhPfHR.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190513/Ge7alyBXmauM.gif" alt="mark"></p>
<h2 id="进程调度-3"><a href="#进程调度-3" class="headerlink" title="进程调度 3"></a>进程调度 3</h2><p><strong>问题描述</strong>：</p>
<p>​ 要求输入 N 个进程（N 为正整型数，0&lt;N&lt;=25535），输出按照优先级从高到低执行的进程名字符串序列,直至结束。（如果遇到优先级一样，按照输入顺序先后执行。），本题中，优先数数值较高的进程，优先级也较高。</p>
<p><strong>输入格式</strong>：</p>
<p>​ 程序首先要求输入一个整型变量 N，接下来输入为 N 行，以回车符号作为分隔，每行有 3 个数据，以空格作为分隔。首先输入一个字符串（长度小于等于 10），该字符串为进程名。第 2 个数据类型为整型，表示进程的优先数。第 3 个数据类型为整型，表示进程的运行时间。</p>
<p><strong>输出格式</strong>：</p>
<p>​ 输出 1 行，M 个字符串，字符串之间用空格作为分隔。</p>
<p>样例输入 1：</p>
<p>3</p>
<p>P1 1 1</p>
<p>P2 2 2</p>
<p>P3 3 3</p>
<p>样例输出 1：</p>
<p>P3 P2 P3 P1 P2 P3</p>
<p>样例输入 2：</p>
<p>2</p>
<p>P1 3 3</p>
<p>P2 1 1</p>
<p>样例输出 2：</p>
<p>P1 P1 P1 P2</p>
<p>样例输入 3：</p>
<p>100</p>
<p>P0 0 1 P1 1 1 P2 2 1 P3 3 1 P4 4 1 P5 5 1 P6 6 1 P7 7 1 P8 8 1 P9 9 1 P10 10 1 P11 11 1 P12 12 1 P13 13 1 P14 14 1 P15 15 1 P16 16 1 P17 17 1 P18 18 1 P19 19 1 P20 20 1 P21 21 1 P22 22 1 P23 23 1 P24 24 1 P25 25 1 P26 26 1 P27 27 1 P28 28 1 P29 29 1 P30 30 1 P31 31 1 P32 32 1 P33 33 1 P34 34 1 P35 35 1 P36 36 1 P37 37 1 P38 38 1 P39 39 1 P40 40 1 P41 41 1 P42 42 1 P43 43 1 P44 44 1 P45 45 1 P46 46 1 P47 47 1 P48 48 1 P49 49 1 P50 50 1 P51 51 1 P52 52 1 P53 53 1 P54 54 1 P55 55 1 P56 56 1 P57 57 1 P58 58 1 P59 59 1 P60 60 1 P61 61 1 P62 62 1 P63 63 1 P64 64 1 P65 65 1 P66 66 1 P67 67 1 P68 68 1 P69 69 1 P70 70 1 P71 71 1 P72 72 1 P73 73 1 P74 74 1 P75 75 1 P76 76 1 P77 77 1 P78 78 1 P79 79 1 P80 80 1 P81 81 1 P82 82 1 P83 83 1 P84 84 1 P85 85 1 P86 86 1 P87 87 1 P88 88 1 P89 89 1 P90 90 1 P91 91 1 P92 92 1 P93 93 1 P94 94 1 P95 95 1 P96 96 1 P97 97 1 P98 98 1 P99 99 1</p>
<p>样例输出 3：</p>
<p>P100 P99 P98 P97 P96 P95 P94 P93 P92 P91 P90 P89 P88 P87 P86 P85 P84 P83 P82 P81 P80 P79 P78 P77 P76 P75 P74 P73 P72 P71 P70 P69 P68 P67 P66 P65 P64 P63 P62 P61 P60 P59 P58 P57 P56 P55 P54 P53 P52 P51 P50 P49 P48 P47 P46 P45 P44 P43 P42 P41 P40 P39 P38 P37 P36 P35 P34 P33 P32 P31 P30 P29 P28 P27 P26 P25 P24 P23 P22 P21 P20 P19 P18 P17 P16 P15 P14 P13 P12 P11 P10 P9 P8 P7 P6 P5 P4 P3 P2 P1</p>
<p><strong>源代码：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt; //strcpy()</span><br><span class="line">#include&lt;stdlib.h&gt;//malloc()</span><br><span class="line"><span class="keyword">void</span> insertQuestion();</span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line"><span class="keyword">void</span> view();</span><br><span class="line"><span class="keyword">void</span> arithmetic();</span><br><span class="line">typedef struct process</span><br><span class="line">&#123;</span><br><span class="line">	char ProcessName[<span class="number">5</span>];</span><br><span class="line">	int Priority;</span><br><span class="line">	int Time;</span><br><span class="line">	struct process *next;</span><br><span class="line">&#125;nodelist;</span><br><span class="line"></span><br><span class="line">nodelist *pHead=NULL;<span class="comment">//存放调度的首节点地址</span></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    insertQuestion();</span><br><span class="line">    arithmetic();</span><br><span class="line">    <span class="comment">// view();</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加问题</span></span><br><span class="line"><span class="keyword">void</span> insertQuestion()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time);</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">	int Priority;</span><br><span class="line">	int Time;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int n;</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">	  scanf(<span class="string">&quot;%s %d %d&quot;</span>,ProcessName,&amp;Priority,&amp;Time);</span><br><span class="line">	  insertNode(ProcessName,Priority,Time);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将数据插入链表</span></span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Priority,int Time)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//申请存储空间</span></span><br><span class="line">	nodelist *pNew=(nodelist *)malloc(sizeof(nodelist));</span><br><span class="line">	nodelist *p,*q;</span><br><span class="line">	strcpy(pNew-&gt;ProcessName,ProcessName);</span><br><span class="line">	pNew-&gt;Priority = Priority;</span><br><span class="line">	pNew-&gt;Time = Time;</span><br><span class="line">	pNew-&gt;next=NULL;</span><br><span class="line">	<span class="comment">// printf(&quot;5\n&quot;);</span></span><br><span class="line">		<span class="keyword">if</span>(pHead==NULL) <span class="comment">//插入前链表为空，新插入的节点为头节点</span></span><br><span class="line">		&#123;</span><br><span class="line">			pHead=pNew;</span><br><span class="line">			<span class="comment">//p1=pHead;</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//将地址为pNew的节点插入到首地址为pHead的链表的尾部</span></span><br><span class="line">			<span class="comment">/*p1-&gt;next=pNew;</span></span><br><span class="line"><span class="comment">			p1=pNew;</span></span><br><span class="line"><span class="comment">			pNew-&gt;next=NULL;*/</span></span><br><span class="line">			p=pHead;</span><br><span class="line">			<span class="comment">//q=(nodelist *)malloc(sizeof(nodelist));</span></span><br><span class="line">			<span class="keyword">if</span>(p-&gt;next!=<span class="number">0</span>)     <span class="comment">//文件不为空，即pHead后面有数据</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">while</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">				q=p-&gt;next;</span><br><span class="line">			    p=q;</span><br><span class="line">				&#125;</span><br><span class="line">				p-&gt;next=pNew;</span><br><span class="line">				pNew-&gt;next=NULL;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (p-&gt;next==<span class="number">0</span>) <span class="comment">//只有头结点，即pHead后面无数据</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//将地址为pNew的节点插入到首地址为pHead的链表的尾部</span></span><br><span class="line">				p-&gt;next=pNew;</span><br><span class="line">			    p=pNew;</span><br><span class="line">				pNew-&gt;next=NULL;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示链表中的数据</span></span><br><span class="line"><span class="keyword">void</span> view()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">/* 显示所有的结果 */</span></span><br><span class="line">	nodelist *p=pHead;</span><br><span class="line">	<span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">	&#123;</span><br><span class="line">			<span class="keyword">while</span>(p!=NULL)</span><br><span class="line">			&#123;</span><br><span class="line">				printf(<span class="string">&quot;%s &quot;</span>,p-&gt;ProcessName);</span><br><span class="line">				printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Priority);</span><br><span class="line">				printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Time);</span><br><span class="line">				p=p-&gt;next;</span><br><span class="line">				printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">	  printf(<span class="string">&quot;链表中啥都没有！\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> arithmetic()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//相关算法实现</span></span><br><span class="line">	nodelist *p=pHead;</span><br><span class="line">	nodelist *q=pHead;</span><br><span class="line">	nodelist *m=pHead;</span><br><span class="line">	int max=p-&gt;Priority;</span><br><span class="line">	int flag=<span class="number">0</span>;</span><br><span class="line">	int i;</span><br><span class="line">	int sum=<span class="number">0</span>;</span><br><span class="line">	char firstName[<span class="number">5</span>];</span><br><span class="line">	char ReturnProcessName[<span class="number">5</span>];</span><br><span class="line">	strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(m!=<span class="number">0</span>)&#123;</span><br><span class="line">		sum+=m-&gt;Time;</span><br><span class="line">	    m=m-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">// printf(&quot;1\n&quot;);</span></span><br><span class="line">    <span class="comment">// printf(&quot;%d\n&quot;,sum);</span></span><br><span class="line">    <span class="comment">// printf(&quot;2\n&quot;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sum; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">while</span>(p!=NULL)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>( max &lt; (p-&gt;Priority) &amp;&amp; (p-&gt;Time&gt;<span class="number">0</span>))&#123;</span><br><span class="line">                    max= p-&gt;Priority;</span><br><span class="line">                    strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line">					flag=<span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				p=p-&gt;next;</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">					<span class="comment">// printf(&quot;ReturnProcessName:%s\n&quot;, ReturnProcessName);</span></span><br><span class="line">                    <span class="comment">//printf(&quot;q-&gt;ProcessName:%s\n&quot;,q-&gt;ProcessName);</span></span><br><span class="line">                    <span class="comment">//printf(&quot;\n&quot;);</span></span><br><span class="line">				  	<span class="keyword">while</span>(q!=NULL)</span><br><span class="line">						&#123;</span><br><span class="line">							 <span class="comment">// printf(&quot;ReturnProcessName:%s\n&quot;, ReturnProcessName);</span></span><br><span class="line">      						 <span class="comment">// printf(&quot;q-&gt;ProcessName:%s\n&quot;,q-&gt;ProcessName);</span></span><br><span class="line">							<span class="keyword">if</span>(strcmp(q-&gt;ProcessName,ReturnProcessName) == <span class="number">0</span>)&#123;</span><br><span class="line">								printf(<span class="string">&quot;%s &quot;</span>,q-&gt;ProcessName);</span><br><span class="line">								q-&gt;Priority--;</span><br><span class="line">								q-&gt;Time--;</span><br><span class="line">							&#125;</span><br><span class="line">							q=q-&gt;next;</span><br><span class="line">						&#125;</span><br><span class="line">					p=pHead;</span><br><span class="line">					q=pHead;</span><br><span class="line">					max=p-&gt;Priority;</span><br><span class="line">					<span class="comment">// printf(&quot;\n&quot;);</span></span><br><span class="line">					<span class="comment">// view();</span></span><br><span class="line">					<span class="comment">// printf(&quot;\n&quot;);</span></span><br><span class="line"></span><br><span class="line">					strcpy(ReturnProcessName,p-&gt;ProcessName);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190513/fWvr6o5WnCac.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190513/UBx2BDfscUbD.gif" alt="mark"></p>
<h2 id="进程调度-4：时间片轮转"><a href="#进程调度-4：时间片轮转" class="headerlink" title="进程调度 4：时间片轮转"></a>进程调度 4：时间片轮转</h2><p><strong>问题描述</strong>：</p>
<p>​ 要求输入 N 个进程（0&lt;N&lt;=100），输入时间片 M（0&lt;M〈=5），按照进程输入的顺序以时间片轮转的方法输出指定的第 K 轮（K&gt;0）执行的那个进程的进程名。</p>
<p><strong>输入格式</strong>：</p>
<p>​ 程序首先输入一个正整数 M（0&lt;M〈=5）作为时间片，下一行输入一个正整数 N（0&lt;N&lt;=100），接下来输入为 N 行，以回车符号作为分隔，每行有 2 个数据，以空格作为分隔。第一个数据是字符串（长度小于等于 10），该字符串为进程名，第 2 个数据类型为整型，表示该进程需要的运行时间。最后输入一个正整数 K，作为时间片轮转的次数（次数从 1 开始计数）。</p>
<p><strong>输出格式</strong>：</p>
<p>​ 输出一个字符串，为最后执行进程的进程名；若无进程运行，则输出“over”（不含双引号，所有字母皆为小写）。</p>
<p>样例输入 1：</p>
<p>1</p>
<p>3</p>
<p>P1 1</p>
<p>P2 2</p>
<p>P3 3</p>
<p>3</p>
<p>样例输出 1：P3</p>
<p>样例输入 2：</p>
<p>1</p>
<p>3</p>
<p>P1 1</p>
<p>P2 2</p>
<p>P3 3</p>
<p>10</p>
<p>样例输出 2：over</p>
<p>样例输入 3：</p>
<p>2</p>
<p>3</p>
<p>P1 1</p>
<p>P2 2</p>
<p>P3 3</p>
<p>4</p>
<p>样例输出 3：P3</p>
<p><em>代码展示：</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt; //strcpy()</span><br><span class="line">#include&lt;stdlib.h&gt;//malloc()</span><br><span class="line"><span class="keyword">void</span> insertQuestion();</span><br><span class="line"> <span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Time);</span><br><span class="line"><span class="keyword">void</span> view();</span><br><span class="line"><span class="keyword">void</span> arithmetic(int M,int n,int count);</span><br><span class="line">typedef struct process</span><br><span class="line">&#123;</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">    int Priority;</span><br><span class="line">    int Time;</span><br><span class="line">    struct process *next;</span><br><span class="line">&#125;nodelist;</span><br><span class="line"></span><br><span class="line">nodelist *pHead=NULL;<span class="comment">//存放调度的首节点地址</span></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    insertQuestion();</span><br><span class="line">    <span class="comment">// view();</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加问题</span></span><br><span class="line"><span class="keyword">void</span> insertQuestion()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Time);</span><br><span class="line">	<span class="keyword">void</span> arithmetic(int M,int n,int count);</span><br><span class="line">    char ProcessName[<span class="number">5</span>];</span><br><span class="line">    int Priority;</span><br><span class="line">    int Time;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int n;</span><br><span class="line">	int M;</span><br><span class="line">	int count;</span><br><span class="line">	scanf(<span class="string">&quot;%d&quot;</span>,&amp;M);</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      scanf(<span class="string">&quot;%s %d&quot;</span>,ProcessName,&amp;Time);</span><br><span class="line">      insertNode(ProcessName,Time);</span><br><span class="line">    &#125;</span><br><span class="line">	scanf(<span class="string">&quot;%d&quot;</span>,&amp;count);</span><br><span class="line">	arithmetic(M,n,count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将数据插入链表</span></span><br><span class="line"><span class="keyword">void</span> insertNode(char ProcessName[<span class="number">5</span>],int Time)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//申请存储空间</span></span><br><span class="line">    nodelist *pNew=(nodelist *)malloc(sizeof(nodelist));</span><br><span class="line">    nodelist *p,*q;</span><br><span class="line">    strcpy(pNew-&gt;ProcessName,ProcessName);</span><br><span class="line">    pNew-&gt;Time = Time;</span><br><span class="line">    pNew-&gt;next=NULL;</span><br><span class="line">    <span class="comment">// printf(&quot;5\n&quot;);</span></span><br><span class="line">        <span class="keyword">if</span>(pHead==NULL) <span class="comment">//插入前链表为空，新插入的节点为头节点</span></span><br><span class="line">        &#123;</span><br><span class="line">            pHead=pNew;</span><br><span class="line">            <span class="comment">//p1=pHead;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//将地址为pNew的节点插入到首地址为pHead的链表的尾部</span></span><br><span class="line">            <span class="comment">/*p1-&gt;next=pNew;</span></span><br><span class="line"><span class="comment">            p1=pNew;</span></span><br><span class="line"><span class="comment">            pNew-&gt;next=NULL;*/</span></span><br><span class="line">            p=pHead;</span><br><span class="line">            <span class="comment">//q=(nodelist *)malloc(sizeof(nodelist));</span></span><br><span class="line">            <span class="keyword">if</span>(p-&gt;next!=<span class="number">0</span>)     <span class="comment">//文件不为空，即pHead后面有数据</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span>(p-&gt;next!=<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                q=p-&gt;next;</span><br><span class="line">                p=q;</span><br><span class="line">                &#125;</span><br><span class="line">                p-&gt;next=pNew;</span><br><span class="line">                pNew-&gt;next=NULL;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p-&gt;next==<span class="number">0</span>) <span class="comment">//只有头结点，即pHead后面无数据</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//将地址为pNew的节点插入到首地址为pHead的链表的尾部</span></span><br><span class="line">                p-&gt;next=pNew;</span><br><span class="line">                p=pNew;</span><br><span class="line">                pNew-&gt;next=NULL;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示链表中的数据</span></span><br><span class="line"><span class="keyword">void</span> view()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* 显示所有的结果 */</span></span><br><span class="line">    nodelist *p=pHead;</span><br><span class="line">    <span class="keyword">if</span>(pHead!=NULL)</span><br><span class="line">    &#123;</span><br><span class="line">            <span class="keyword">while</span>(p!=NULL)</span><br><span class="line">            &#123;</span><br><span class="line">                printf(<span class="string">&quot;%s &quot;</span>,p-&gt;ProcessName);</span><br><span class="line">                printf(<span class="string">&quot;%d &quot;</span>,p-&gt;Time);</span><br><span class="line">                p=p-&gt;next;</span><br><span class="line">                printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      printf(<span class="string">&quot;链表中啥都没有！\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> arithmetic(int M,int n,int count)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//相关算法实现</span></span><br><span class="line">    nodelist *p=pHead;</span><br><span class="line">    int index=<span class="number">0</span>;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int forcount=<span class="number">0</span>;</span><br><span class="line">    int Numcount=<span class="number">0</span>;</span><br><span class="line">    int sum=<span class="number">0</span>;</span><br><span class="line">    int flag=<span class="number">0</span>;</span><br><span class="line">    int finallyNum=<span class="number">0</span>;</span><br><span class="line">	 <span class="comment">// printf(&quot;%d %d %d\n&quot;,M,n,count);</span></span><br><span class="line">     <span class="comment">// printf(&quot;%d\n&quot;,count/n);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(count%n==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        forcount=count/n;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        forcount=count/n+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">// printf(&quot;forcount:%d\n&quot;, forcount);</span></span><br><span class="line">     <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; forcount; i++)</span><br><span class="line">         &#123;</span><br><span class="line">                    <span class="keyword">while</span>(p!=NULL)</span><br><span class="line">                    &#123;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">if</span>(p-&gt;Time&gt;<span class="number">0</span>)&#123;</span><br><span class="line"></span><br><span class="line">                            p-&gt;Time=p-&gt;Time - M;</span><br><span class="line">                            <span class="comment">// printf(&quot;%s\n&quot;,p-&gt;ProcessName);</span></span><br><span class="line">                            <span class="comment">// view();</span></span><br><span class="line">                            <span class="comment">// printf(&quot;\n&quot;);</span></span><br><span class="line">                            Numcount++;</span><br><span class="line">                            <span class="comment">// printf(&quot;%d\n&quot;,Numcount);</span></span><br><span class="line">                            finallyNum=Numcount;</span><br><span class="line">                            <span class="keyword">if</span> (Numcount==count)</span><br><span class="line">                            &#123;</span><br><span class="line">                              printf(<span class="string">&quot;%s\n&quot;</span>,p-&gt;ProcessName);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                         p=p-&gt;next;</span><br><span class="line">                    &#125;</span><br><span class="line">                    p=pHead;</span><br><span class="line">         &#125;</span><br><span class="line"><span class="keyword">if</span>(finallyNum &lt; count)&#123;</span><br><span class="line">   printf(<span class="string">&quot;over\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190522/EE00fbgzk6Ho.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190522/FAQDVGbxoawJ.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190522/ddwSvMe4TwsW.gif" alt="mark"></p>
<hr>
<h2 id="存储管理-1"><a href="#存储管理-1" class="headerlink" title="存储管理 1"></a>存储管理 1</h2><p><strong>问题描述</strong>：</p>
<p>​ 现有一个 8*8 的存储器，要对其空间进行分配。（下标从 0 开始，最后一个内存块下标为 63）。现已有块号为 1、7、13、23、47、59 的几个内存块被占用。现操作系统要求申请 N 块内存空间（0&lt;N&lt;=64），当输入的块数 N 超出其剩余空闲块数的时候，输出为“false”，当输入为合理范围的时候，就输出其以行主序分配的最后一个内存空间的下标。</p>
<p><strong>输入格式：</strong></p>
<p>​ 程序要求输入一个整型数 N，表示要申请分配空间的大小。</p>
<p><strong>输出格式</strong>：</p>
<p>​ 输出为一个整型数，表示最后一个被分配空间的下标。</p>
<p>样例输入 1：</p>
<p>3</p>
<p>样例输出 1：</p>
<p>3</p>
<p>样例输入 2：</p>
<p>100</p>
<p>样例输出 2：</p>
<p>false</p>
<p>样例输入 3：</p>
<p>50</p>
<p>样例输出 3：</p>
<p>54</p>
<p>_源代码_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int arr[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int n;</span><br><span class="line">    int count=<span class="number">0</span>;</span><br><span class="line">    arr[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">7</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">13</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">23</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">47</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">59</span>]=<span class="number">1</span>;</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">if</span> (n&gt;<span class="number">58</span>)</span><br><span class="line">    &#123;</span><br><span class="line">    	printf(<span class="string">&quot;false\n&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    	 <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n+<span class="number">1</span>; i++)</span><br><span class="line">		    &#123;</span><br><span class="line">		    	<span class="keyword">if</span> (arr[i]==<span class="number">1</span>)</span><br><span class="line">		    	&#123;</span><br><span class="line">		    		count++;</span><br><span class="line">		   		&#125;</span><br><span class="line">		 	&#125;</span><br><span class="line"> 	printf(<span class="string">&quot;%d\n&quot;</span>, count+n<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190522/fhJf38dsniWT.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190522/G8b9fg3D0LVM.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190522/cy8XL8vNxJrJ.gif" alt="mark"></p>
<h2 id="存储管理-2"><a href="#存储管理-2" class="headerlink" title="存储管理 2"></a>存储管理 2</h2><p><strong>问题描述</strong>：</p>
<p>​ 现有一个 8*8 的存储器，要对其空间进行分配。（下标从 0 开始，最后一个内存块下标为 63）。现已有块号为 2、7、13、23、37、47、59、61 的几个内存块被占用。要求输入需分配的进程数 M（0&lt;M&lt;=56），接下来输入为 M 个整型数，每个数为各个进程需占用的内存块数。当分配到某进程时，其剩余空闲块数可以分配，就输出当前进程分配的最后一个内存空间的下标。当分配到某进程时，其进程块数超出剩余空闲块数无法分配，输出为“false”（不含双引号，且为全小写）。输出的多个下标（或”false”）之间用空格隔开。</p>
<p><strong>输入格式</strong>：</p>
<p>​ 程序输入分为两行，第一行要求输入一个整型数 M，表示要所需分配空间的进程数，接下来的第二行输入 M 个整型数，每个数之间用空格隔开，表示 M 个进程每个进程占用的内存空间大小。</p>
<p><strong>输出格式：</strong></p>
<p>​ 输出为 M 组整型数（或”false”），每个整型数表示该进程最后一个被分配的内存空间的下标（或”false”），下标（或”false”）之间用空格隔开。</p>
<p>样例输入 1：</p>
<p>3</p>
<p>3 3 3</p>
<p>样例输出 1：</p>
<p>3 6 10</p>
<p>样例输入 2：</p>
<p>4</p>
<p>3 3 64 3</p>
<p>样例输出 2：</p>
<p>3 6 false 10</p>
<p><em>源代码：</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">void</span> funsave(int n,int arr[<span class="number">64</span>],int residue);</span><br><span class="line">    int arr[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int num[<span class="number">200</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int inputnum;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int x[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int sumsheng=<span class="number">56</span>;</span><br><span class="line">    char thirdName[<span class="number">10</span>];</span><br><span class="line">    char str[<span class="number">10</span>];</span><br><span class="line">    int getInTStr;</span><br><span class="line">    arr[<span class="number">2</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">7</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">13</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">23</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">37</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">41</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">47</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">59</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">61</span>]=<span class="number">1</span>;</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;inputnum);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; inputnum; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        scanf(<span class="string">&quot;%d&quot;</span>,&amp;num[i]);</span><br><span class="line">        <span class="keyword">if</span> (sumsheng&gt;num[i])</span><br><span class="line">        &#123;</span><br><span class="line">           sumsheng=sumsheng-num[i];</span><br><span class="line">        &#125;</span><br><span class="line">      x[i]=sumsheng;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; inputnum; i++)</span><br><span class="line">     &#123;</span><br><span class="line">      funsave(num[i],arr,x[i]);</span><br><span class="line">     &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> funsave(int n,int arr[<span class="number">64</span>],int residue)&#123;</span><br><span class="line">    int i=<span class="number">0</span>;</span><br><span class="line">    int count=<span class="number">0</span>;</span><br><span class="line">    int indexI=<span class="number">0</span>;</span><br><span class="line">    int flag=<span class="number">0</span>;</span><br><span class="line">    int arr1[<span class="number">20</span>];</span><br><span class="line">    int arr2[<span class="number">20</span>];</span><br><span class="line">    int finallyIndex=<span class="number">0</span>;</span><br><span class="line">    int arrindex=<span class="number">0</span>;</span><br><span class="line">    int arrindex2=<span class="number">0</span>;</span><br><span class="line">   <span class="comment">// printf(&quot;start n:%d\n&quot;,n);</span></span><br><span class="line">    <span class="comment">// printf(&quot;getInTStr:%d\n&quot;,getInTStr);</span></span><br><span class="line">  <span class="keyword">if</span> (n&gt;residue)</span><br><span class="line">    &#123;</span><br><span class="line">      printf(<span class="string">&quot;false &quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (arr[<span class="number">0</span>]==<span class="number">0</span>)</span><br><span class="line">       &#123;</span><br><span class="line">         <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="keyword">if</span> (arr[i]==<span class="number">1</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            count++;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; count+n; i++)</span><br><span class="line">         &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                arr2[arrindex2]=i;</span><br><span class="line">                arrindex2++;</span><br><span class="line">            &#125;</span><br><span class="line">            arr[i]=<span class="number">1</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         printf(<span class="string">&quot;%d &quot;</span>, n+count<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            indexI=i;</span><br><span class="line">            goto LOOP;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">       LOOP:<span class="keyword">for</span>(i=indexI;i&lt;indexI+n;i++)&#123;</span><br><span class="line">          <span class="keyword">if</span> (arr[i]==<span class="number">1</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            count++;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (i = indexI; i &lt; indexI+count+n; i++)</span><br><span class="line">         &#123;</span><br><span class="line">          <span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            finallyIndex=i;</span><br><span class="line">            arr1[arrindex]=i;</span><br><span class="line">          arrindex=arrindex+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line">            arr[i]=<span class="number">1</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         printf(<span class="string">&quot;%d &quot;</span>, finallyIndex);</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190523/iyJhP4Rqt9KS.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190523/ri4eCOgCqxI1.gif" alt="mark"></p>
<h2 id="储存管理-3"><a href="#储存管理-3" class="headerlink" title="储存管理 3"></a>储存管理 3</h2><p><strong>问题描述：</strong></p>
<p>​ 现有一个 8*8 的存储器，要对其已分配的空间进行分配及回收。（下标从 0 开始，最后一个内存块下标为 63）。现已有块号为 2、7、13、23、37、41、47、59、61 的几个内存块被占用。要求输入需分配的进程数 M（0&lt;M&lt;=55），接下来输入为 M 个整型数，每个数为各个进程需占用的内存块数。当分配到某进程时，其剩余空闲块数可以分配，就输出当前进程分配的最后一个内存空间的下标。当分配到某进程时，其进程块数超出剩余空闲块数无法分配，输出为“false”（不含双引号，且为全小写）。输出的多个下标（或”false”）之间用空格隔开。以上进程不管是否分配成功，按照输入顺序依次命名为 p1、p2、p3………pM。回收的时候输入进程名 pN，则返回进程名为 pN 的所有占用内存块号下标，如果该进程名不存在或输入的数值为不合理范围，则返回“false”。</p>
<p><strong>输入格式：</strong></p>
<p>​ 程序输入分为三行，第一行是一个整型数 M，表示要所需分配空间的进程数，第二行为 M 个整型数，每个数之间用空格隔开，表示 M 个进程每个进程占用的内存空间大小。第三行为需要回收的进程名 pN，p 为小写字母，N 为正整型数。</p>
<p><strong>输出格式：</strong></p>
<p>​ 输出为两行，第一行为一组整型数，每个整型数表示该进程最后一个被分配的内存空间的下标，下标之间用空格隔开。第二行为一组整型数，表示被回收的进程的内存块下标，多个下标之间用空格隔开。</p>
<p>样例输入 1：</p>
<p>3</p>
<p>3 3 3</p>
<p>p3</p>
<p>样例输出 1：</p>
<p>3 6 10</p>
<p>8 9 10</p>
<p>样例输入 2：</p>
<p>4</p>
<p>3 3 64 3</p>
<p>p3</p>
<p>样例输出 2：</p>
<p>3 6 false 10</p>
<p>false</p>
<p><em>源代码：</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int *funsave(int n,int arr[<span class="number">64</span>],int residue,int getInTStr,int indexflag,int num[<span class="number">64</span>]);</span><br><span class="line">    int arr[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int num[<span class="number">200</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int inputnum;</span><br><span class="line">    int i=<span class="number">0</span>,j=<span class="number">0</span>;</span><br><span class="line">    int x[<span class="number">64</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    int sumsheng=<span class="number">56</span>;</span><br><span class="line">    char thirdName[<span class="number">10</span>];</span><br><span class="line">    char str[<span class="number">10</span>];</span><br><span class="line">    int getInTStr;</span><br><span class="line">     int *p;</span><br><span class="line">     int indexflag=<span class="number">0</span>;</span><br><span class="line">    arr[<span class="number">2</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">7</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">13</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">23</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">37</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">41</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">47</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">59</span>]=<span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">61</span>]=<span class="number">1</span>;</span><br><span class="line">    scanf(<span class="string">&quot;%d&quot;</span>,&amp;inputnum);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; inputnum; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        scanf(<span class="string">&quot;%d&quot;</span>,&amp;num[i]);</span><br><span class="line">        <span class="keyword">if</span> (sumsheng&gt;num[i])</span><br><span class="line">        &#123;</span><br><span class="line">        	 sumsheng=sumsheng-num[i];</span><br><span class="line">        &#125;</span><br><span class="line"> 			x[i]=sumsheng;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    scanf(<span class="string">&quot;%s&quot;</span>,thirdName);</span><br><span class="line"></span><br><span class="line">    strncpy(str, thirdName+<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	getInTStr=atoi(str);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; inputnum; i++)</span><br><span class="line">     &#123;</span><br><span class="line">     	p=funsave(num[i],arr,x[i],getInTStr,indexflag,num);</span><br><span class="line"></span><br><span class="line">     		indexflag=indexflag+<span class="number">1</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="comment">// printf(&quot;sumsheng:%d\n&quot;, sumsheng);</span></span><br><span class="line">     <span class="comment">// for(i=0;i&lt;inputnum;i++)&#123;</span></span><br><span class="line">     <span class="comment">//       printf(&quot;%d &quot;,num[i]);</span></span><br><span class="line">     <span class="comment">//   &#125;</span></span><br><span class="line">       <span class="comment">// printf(&quot;\n&quot;);</span></span><br><span class="line">       <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;inputnum;i++)&#123;</span><br><span class="line">           <span class="keyword">if</span>(num[i]&gt;sumsheng&amp;&amp;getInTStr==i+<span class="number">1</span>)&#123;</span><br><span class="line">           		printf(<span class="string">&quot;false\n&quot;</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">       <span class="keyword">if</span> (getInTStr==<span class="number">1</span>)</span><br><span class="line">       &#123;</span><br><span class="line">	       <span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; num[<span class="number">0</span>]; i++ )</span><br><span class="line">		   &#123;</span><br><span class="line">		       printf(<span class="string">&quot;%d &quot;</span>, *(p + i));</span><br><span class="line">		   &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int *funsave(int n,int arr[<span class="number">64</span>],int residue,int getInTStr,int indexflag,int num[<span class="number">64</span>])&#123;</span><br><span class="line">    int i=<span class="number">0</span>,j=<span class="number">0</span>;</span><br><span class="line">    int count=<span class="number">0</span>;</span><br><span class="line">    int indexI=<span class="number">0</span>;</span><br><span class="line">    int flag=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">static</span>  int arr1[<span class="number">64</span>][<span class="number">64</span>];</span><br><span class="line">    <span class="keyword">static</span>  int arr2[<span class="number">20</span>];</span><br><span class="line">    int finallyIndex=<span class="number">0</span>;</span><br><span class="line">    int arrindex=<span class="number">0</span>;</span><br><span class="line">    int arrindex2=<span class="number">0</span>;</span><br><span class="line">   <span class="comment">// printf(&quot;start n:%d\n&quot;,n);</span></span><br><span class="line">    <span class="comment">// printf(&quot;getInTStr:%d\n&quot;,getInTStr);</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// for(i=0;i&lt;10;i++)&#123;</span></span><br><span class="line">    <span class="comment">// 	printf(&quot;%d &quot;, num[i]);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// printf(&quot;\n&quot;);</span></span><br><span class="line">	<span class="keyword">if</span> (n&gt;residue)</span><br><span class="line">    &#123;</span><br><span class="line">    	printf(<span class="string">&quot;false &quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    	 <span class="keyword">if</span> (arr[<span class="number">0</span>]==<span class="number">0</span>)</span><br><span class="line">    	 &#123;</span><br><span class="line">    	 	 <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">		    &#123;</span><br><span class="line">		    	<span class="keyword">if</span> (arr[i]==<span class="number">1</span>)</span><br><span class="line">		    	&#123;</span><br><span class="line">		    		count++;</span><br><span class="line">		   		&#125;</span><br><span class="line">		 	&#125;</span><br><span class="line">		 	 <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; count+n; i++)</span><br><span class="line">			   &#123;</span><br><span class="line">			   	  <span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">			   	  &#123;</span><br><span class="line">			   	      arr2[arrindex2]=i;</span><br><span class="line">			   	      arrindex2++;</span><br><span class="line">			   	  &#125;</span><br><span class="line">			   	  arr[i]=<span class="number">1</span>;</span><br><span class="line">			   &#125;</span><br><span class="line">			   printf(<span class="string">&quot;%d &quot;</span>, n+count<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    	 &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    	 	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">    	 	&#123;</span><br><span class="line">    	 		<span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">    	 		&#123;</span><br><span class="line">    	 			indexI=i;</span><br><span class="line">    	 			goto LOOP;</span><br><span class="line">    	 		&#125;</span><br><span class="line">    	 	&#125;</span><br><span class="line"></span><br><span class="line">    	 LOOP:<span class="keyword">for</span>(i=indexI;i&lt;indexI+n;i++)&#123;</span><br><span class="line">    	 		<span class="keyword">if</span> (arr[i]==<span class="number">1</span>)</span><br><span class="line">		    	&#123;</span><br><span class="line">		    		count++;</span><br><span class="line">		   		&#125;</span><br><span class="line">    	 	&#125;</span><br><span class="line">    	 	<span class="comment">// printf(&quot;indexflag:%d\n&quot;, indexflag);</span></span><br><span class="line">    	 	<span class="keyword">for</span> (i = indexI; i &lt; indexI+count+n; i++)</span><br><span class="line">			   &#123;</span><br><span class="line">			   	<span class="keyword">if</span> (arr[i]==<span class="number">0</span>)</span><br><span class="line">			   	&#123;</span><br><span class="line">			   		finallyIndex=i;</span><br><span class="line">			   		arr1[indexflag<span class="number">-1</span>][arrindex]=i;</span><br><span class="line">					arrindex=arrindex+<span class="number">1</span>;</span><br><span class="line">			   	&#125;</span><br><span class="line">			   	  arr[i]=<span class="number">1</span>;</span><br><span class="line">			   &#125;</span><br><span class="line">			    printf(<span class="string">&quot;%d &quot;</span>, finallyIndex);</span><br><span class="line">    			&#125;</span><br><span class="line">    	 &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    	 <span class="keyword">if</span> (getInTStr==<span class="number">1</span>)</span><br><span class="line">    	 &#123;</span><br><span class="line">    	 	<span class="keyword">return</span> arr2;</span><br><span class="line">    	 &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">    	 	<span class="comment">// printf(&quot;getInTStr:%d\n&quot;, getInTStr);</span></span><br><span class="line">       <span class="comment">//       printf(&quot;n:%d\n&quot;,n );</span></span><br><span class="line">       <span class="comment">//       printf(&quot;indexflag:%d\n&quot;,indexflag );</span></span><br><span class="line">    	 	<span class="comment">// for(i=0;i&lt;10;i++)</span></span><br><span class="line">			    <span class="comment">// &#123;</span></span><br><span class="line">			    <span class="comment">//     for(j=0;j&lt; 10;j++)</span></span><br><span class="line">			    <span class="comment">//     &#123;</span></span><br><span class="line">			    <span class="comment">//         printf(&quot;%d\t&quot;,arr1[i][j]);//访问i行j列的二维数组元素</span></span><br><span class="line">			    <span class="comment">//     &#125;</span></span><br><span class="line">			    <span class="comment">//     printf(&quot;\n&quot;);</span></span><br><span class="line">			    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">             <span class="keyword">if</span> (n&lt;=residue)&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">             	 <span class="keyword">if</span> (indexflag+<span class="number">1</span>&gt;=n)</span><br><span class="line">				 &#123;</span><br><span class="line">				 		printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">				        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;num[getInTStr<span class="number">-1</span>];j++)</span><br><span class="line">				        &#123;</span><br><span class="line">				        	<span class="keyword">if</span>(arr1[getInTStr<span class="number">-2</span>][j]!=<span class="number">0</span>)&#123;</span><br><span class="line"> 									printf(<span class="string">&quot;%d &quot;</span>,arr1[getInTStr<span class="number">-2</span>][j]);<span class="comment">//访问i行j列的二维数组元素</span></span><br><span class="line">				        	&#125;</span><br><span class="line"></span><br><span class="line">				        &#125;</span><br><span class="line">				 &#125;</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    	 &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190602/famTkQ0URtAP.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190602/u7GSImrnET42.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190602/upFLuGwWxBsR.gif" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190602/KXkISHw5iD2s.gif" alt="mark"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%AE%AD/" rel="tag">学习实训</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6/" rel="tag">进程调度</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-ReactLearn03"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/05/12/ReactLearn03/"
    >React 学习第三天</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/05/12/ReactLearn03/" class="article-date">
  <time datetime="2019-05-12T05:10:24.000Z" itemprop="datePublished">2019-05-12</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a> / <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/React/">React</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="React-第三天学习"><a href="#React-第三天学习" class="headerlink" title="React 第三天学习"></a>React 第三天学习</h2><blockquote>
<p>在 react 项目中 添加样式</p>
<p>加载外部 css 样式文件</p>
<p>css 样式作用域的问题（modules，localIdentName， local 和 global）</p>
<p>在 React 项目中 使用 bootsrtap（ 使用 sass ）</p>
<p>React 中 绑定事件</p>
<p>React 中双向绑定事件（e.target.value 和 this.refs.txt.value）</p>
<p>React 组件的生命周期</p>
<p>Dream what you want to dream; go where you want to go; be what you want to be, because you have only one life and one chance to do all the things you want to do！</p>
<p>做你想做的梦吧，去你想去的地方吧，成为你想成为的人吧，因为你只有一次生命，一个机会去做所有那些你想做的事。</p>
</blockquote>
<h2 id="在-react-项目中-添加样式"><a href="#在-react-项目中-添加样式" class="headerlink" title="在 react 项目中 添加样式"></a>在 react 项目中 添加样式</h2><h3 id="第一种方式："><a href="#第一种方式：" class="headerlink" title="第一种方式："></a>第一种方式：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 style=&#123;&#123; <span class="attr">color</span>: <span class="string">&quot;red&quot;</span>, <span class="attr">fontSize</span>: <span class="string">&quot;50px&quot;</span> &#125;&#125;&gt;这是评论列表组件&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<h4 id="第一层封装："><a href="#第一层封装：" class="headerlink" title="第一层封装："></a>第一层封装：</h4><p><strong>将样式对象抽离出来</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cmtStyle=&#123;<span class="attr">color</span>:<span class="string">&#x27;red&#x27;</span>,<span class="attr">fontSize</span>:<span class="string">&#x27;30px&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">&lt;h1 style=&#123;cmtStyle&#125;&gt;这是评论列表组件&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<h4 id="第二层封装："><a href="#第二层封装：" class="headerlink" title="第二层封装："></a>第二层封装：</h4><p><strong>合并成一个大的样式对象</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = &#123;</span><br><span class="line">  Item: &#123; <span class="attr">border</span>: <span class="string">&quot;1px dashed #ccc&quot;</span>, <span class="attr">margin</span>: <span class="string">&quot;10px 10px&quot;</span> &#125;,</span><br><span class="line">  user: &#123; <span class="attr">color</span>: <span class="string">&quot;#333&quot;</span> &#125;,</span><br><span class="line">  content: &#123; <span class="attr">color</span>: <span class="string">&quot;green&quot;</span>, <span class="attr">fontSize</span>: <span class="string">&quot;22px&quot;</span> &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">CmtItem</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div style=&#123;styles.Item&#125;&gt;</span><br><span class="line">      &lt;h3 style=&#123;styles.user&#125;&gt;评论人：&#123;props.user&#125;&lt;/h3&gt;</span><br><span class="line">      &lt;p style=&#123;styles.content&#125;&gt;评论内容：&#123;props.content&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190508/ivSmbt2swrg3.png?imageslim" alt="mark"></p>
<h4 id="第三层封装"><a href="#第三层封装" class="headerlink" title="第三层封装"></a>第三层封装</h4><p><strong>抽离为单独的 样式表模块</strong></p>
<p><img src="http://static.zxinc520.com/blog/20190508/Gg6ricXHCgO0.png?imageslim" alt="mark"></p>
<p>_CmtItem.jsx_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react</span></span><br><span class="line"><span class="string">import styles from &#x27;</span>@/components/styles<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default function CmtItem(props) &#123;</span></span><br><span class="line"><span class="string">    return &lt;div style=&#123;styles.Item&#125;&gt;</span></span><br><span class="line"><span class="string">        &lt;h3 style=&#123;styles.user&#125;&gt;评论人：&#123;props.user&#125;&lt;/h3&gt;</span></span><br><span class="line"><span class="string">        &lt;p style=&#123;styles.content&#125;&gt;评论内容：&#123;props.content&#125;&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p><em>styles.js</em>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  Item: &#123; <span class="attr">border</span>: <span class="string">&quot;1px dashed #ccc&quot;</span>, <span class="attr">margin</span>: <span class="string">&quot;10px 10px&quot;</span> &#125;,</span><br><span class="line">  user: &#123; <span class="attr">color</span>: <span class="string">&quot;#333&quot;</span> &#125;,</span><br><span class="line">  content: &#123; <span class="attr">color</span>: <span class="string">&quot;green&quot;</span>, <span class="attr">fontSize</span>: <span class="string">&quot;22px&quot;</span> &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="加载外部-css-样式文件"><a href="#加载外部-css-样式文件" class="headerlink" title="加载外部 css 样式文件"></a>加载外部 css 样式文件</h2><p><em>index.js</em>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>; <span class="comment">//创建组件，虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>; <span class="comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> CmtList <span class="keyword">from</span> <span class="string">&quot;@/components/CmtList&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 ReactDOM 把虚拟 DOM 渲染到页面上</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;CmtList&gt;&lt;/CmtList&gt;</span><br><span class="line">  &lt;/div&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>_CmtList.jsx_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> CmtItem <span class="keyword">from</span> <span class="string">&#x27;@/components/CmtItem&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cmtStyle = &#123;<span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>, <span class="attr">fontSize</span>: <span class="string">&#x27;30px&#x27;</span>, <span class="attr">textAlign</span>: <span class="string">&#x27;center&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">import</span> cssobj <span class="keyword">from</span> cmtList.scss</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CmtList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">super</span>()</span><br><span class="line">        <span class="built_in">this</span>.state = &#123;</span><br><span class="line">            CommentList: [</span><br><span class="line">                &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">user</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;哈哈哈哈哈&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">user</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;打游戏&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">user</span>: <span class="string">&#x27;王五&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;唱歌，喝酒&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">id</span>: <span class="number">4</span>, <span class="attr">user</span>: <span class="string">&#x27;王麦子&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;到处happy&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">id</span>: <span class="number">5</span>, <span class="attr">user</span>: <span class="string">&#x27;周琛&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;帅的不要不要了！&#x27;</span>&#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是评论列表组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;this.state.CommentList.map(item =&gt;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">CmtItem</span> &#123;<span class="attr">...item</span>&#125; <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">CmtItem</span>&gt;</span></span></span><br><span class="line"><span class="xml">            )&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>_CmtItem.jsx_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;@/components/styles&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">CmtItem</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div style=&#123;styles.Item&#125;&gt;</span><br><span class="line">      &lt;h1 style=&#123;styles.user&#125;&gt;评论人：&#123;props.user&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;p&gt;评论内容：&#123;props.content&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>webpack.config.js</em>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> htmlplugin = <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">  template: path.join(__dirname, <span class="string">&quot;src/index.html&quot;</span>),</span><br><span class="line">  filename: <span class="string">&quot;index.html&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    port: <span class="number">3000</span>,</span><br><span class="line">    contentBase: path.join(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [htmlplugin],</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.m?js|jsx$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            presets: [</span><br><span class="line">              <span class="string">&quot;@babel/preset-env&quot;</span>,</span><br><span class="line">              [</span><br><span class="line">                <span class="string">&quot;@babel/preset-react&quot;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                  pragmaFrag: <span class="string">&quot;DomFrag&quot;</span>, <span class="comment">// default is React.Fragment</span></span><br><span class="line">                  throwIfNamespace: <span class="literal">false</span>, <span class="comment">// defaults to true</span></span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">            ],</span><br><span class="line">            plugins: [<span class="string">&quot;@babel/plugin-proposal-class-properties&quot;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, use: [<span class="string">&quot;style-loader,css-loader&quot;</span>] &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [<span class="string">&quot;.js&quot;</span>, <span class="string">&quot;.jsx&quot;</span>, <span class="string">&quot;.json&quot;</span>],</span><br><span class="line">    alias: &#123;</span><br><span class="line">      <span class="string">&quot;@&quot;</span>: path.join(__dirname, <span class="string">&quot;./src&quot;</span>), <span class="comment">//这样，@ 就表示 项目根目录中 的src 这一层路径</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="配置好相应的文件后，但是却意外的发生了错误！"><a href="#配置好相应的文件后，但是却意外的发生了错误！" class="headerlink" title="配置好相应的文件后，但是却意外的发生了错误！"></a>配置好相应的文件后，但是却意外的发生了错误！</h4><p><img src="http://static.zxinc520.com/blog/20190511/GMbDLo9GrxeD.png?imageslim" alt="mark"></p>
<p>查阅资料：参考 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/35171288/error-cannot-resolve-module-style-loader"><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/35171288/error-cannot-resolve-module-style-loader">Error: Cannot resolve module ‘style-loader’</a></a></p>
<p>但是不知咋地，我瞎弄了一下，突然就好了！~</p>
<p>_结果_：</p>
<p><img src="http://static.zxinc520.com/blog/20190509/o8CRGPxVP3S2.png?imageslim" alt="mark"></p>
<h1 id="引出-css-样式作用域的问题"><a href="#引出-css-样式作用域的问题" class="headerlink" title="引出 css 样式作用域的问题"></a>引出 css 样式作用域的问题</h1><h4 id="给普通样式表加模块化"><a href="#给普通样式表加模块化" class="headerlink" title="给普通样式表加模块化"></a>给普通样式表加模块化</h4><blockquote>
<p>CSS MODULE 是一种 css in javascript 的方式，当我们把一个 css 文件 import 到一个 js 模块时，这个 css 文件会暴露一个对象，这个对象映射所有的本地和全局 css 类名</p>
</blockquote>
<p>​ <a target="_blank" rel="noopener" href="https://juejin.im/entry/5826e755c4c9710054313d6e">你真的知道 css-loader 怎么用吗？</a></p>
<h2 id="modules"><a href="#modules" class="headerlink" title="modules"></a>modules</h2><p><strong>操作</strong>：</p>
<ul>
<li>配置 <strong><em>webpack.config.js</em></strong>: 追加参数 _modules_：表示为 普通的 css 样式表，启用模块化。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.css$/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader?modules&#x27;</span>]&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：</p>
<ul>
<li>css 模块化，只针对 <strong>类选择器</strong> 和 <strong>Id 选择器</strong>生效。</li>
<li>css 模块化，不会将 <strong>标签选择器</strong> 模块化。</li>
</ul>
<p><strong>使用</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cssobj <span class="keyword">from</span> cmtList.scss</span><br><span class="line"></span><br><span class="line">&lt;h1 className=&#123;cssobj.title&#125;&gt;这是评论列表组件&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190509/uBEiMLCl4Po1.png?imageslim" alt="mark"></p>
<h2 id="localIdentName"><a href="#localIdentName" class="headerlink" title="localIdentName"></a>localIdentName</h2><blockquote>
<p>通常 modules 参数还要通过 localIdentName 的配合来设置 css 的类名。在上文中我们看到没有设置 localIdentName 的 css 编译后是一串随机字符串，可读性很差，因此我们还需要对它的类名进行处理，这就用到了 localIdentName。</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190509/LmY7Up6tjWsL.png?imageslim" alt="mark"></p>
<p>使用 localIdentName 设置 css-modules 模式下 local 类名的命名。</p>
<p>_例如_：</p>
<p>【path】：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.css$/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader?modules&amp;localIdentName=[path]&#x27;</span>]&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/6kzRvdhhMCya.png?imageslim" alt="mark"></p>
<p>【path】【name】：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.css$/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader?modules&amp;localIdentName=[path][name]&#x27;</span>]&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/1fSFPLQWlGcr.png?imageslim" alt="mark"></p>
<p>【path】【name】【local】：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.css$/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader?modules&amp;localIdentName=[path][name]-[local]&#x27;</span>]&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190509/mnElXq2M49y5.png?imageslim" alt="mark"></p>
<p>【path】【name】【local】【hash】：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.css$/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader?modules&amp;localIdentName=[path][name]-[local]-[hash]&#x27;</span>]&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/f0mCgGRosdOV.png?imageslim" alt="mark"></p>
<h2 id="通过-local-和-global-设置类名是否被模块化"><a href="#通过-local-和-global-设置类名是否被模块化" class="headerlink" title="通过 local 和 global 设置类名是否被模块化"></a>通过 local 和 global 设置类名是否被模块化</h2><blockquote>
<p>被 <strong>:local()</strong> 包裹起来的类名，会被模块化，默认情况下，所有的类名和 ID 都被模块化了。</p>
<p>被 :global() 包裹起来的类名，不会被模块化，而会全局生效。</p>
</blockquote>
<p><strong>需求</strong>：</p>
<p><img src="http://static.zxinc520.com/blog/20190511/1nDtTim2qWpX.png?imageslim" alt="mark"></p>
<p>解决方案： <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/23843710">可以参考</a></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:global(.test)</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>结果</strong> ：</p>
<ul>
<li>test 类名 <em>未被模块化</em> ，而是 _全局生效_：</li>
</ul>
<p><img src="http://static.zxinc520.com/blog/20190509/mxSgHjcOQL7t.png?imageslim" alt="mark"></p>
<h2 id="在-React-项目中-使用-bootsrtap"><a href="#在-React-项目中-使用-bootsrtap" class="headerlink" title="在 React 项目中 使用 bootsrtap"></a>在 React 项目中 使用 bootsrtap</h2><ol>
<li>安装 bootstrap 我一般使用 3.3.7 版本</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i bootstrap@3.3.7 -S</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>安装 相关 路径 图标 加载依赖</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i url-loader file-loader -D</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>配置 webpack-config-js 文件</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.ttf|woff|woff2|eot|svg$/</span>,use:<span class="string">&#x27;url-loader&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>导入 <strong>bootstrap 包</strong> 并且 使用 <em>bootstrap 类</em></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bootcss <span class="keyword">from</span> <span class="string">&quot;bootstrap/dist/css/bootstrap.min.css&quot;</span>;</span><br><span class="line"></span><br><span class="line">&lt;button className=&#123;[bootcss.btn, bootcss[<span class="string">&quot;btn-primary&quot;</span>]].join(<span class="string">&quot; &quot;</span>)&#125;&gt;</span><br><span class="line">  点我</span><br><span class="line">&lt;/button&gt;;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190509/AIA3b6TmGWOP.png?imageslim" alt="mark"></p>
<h3 id="升级："><a href="#升级：" class="headerlink" title="升级："></a>升级：</h3><p>问题：className={[bootcss.btn,bootcss[‘btn-primary’]].join(‘ ‘)} <strong>这样调用太麻烦了</strong></p>
<blockquote>
<p>_自己规定_：</p>
<p><strong>第三方的 样式表</strong>：(例如: bootsrtap 等 )都是以 .css 结尾，这样，我们不要为普通的 .css 启用模块化。</p>
<p><strong>自己定义样式表</strong>：都要以 .scss 或 .less 结尾，只为 .scss 或 .less 结尾的启用模块化。</p>
</blockquote>
<h3 id="使用-sass"><a href="#使用-sass" class="headerlink" title="使用 sass"></a>使用 sass</h3><blockquote>
<p>​ <a target="_blank" rel="noopener" href="https://www.cnblogs.com/wangpenghui522/p/5467560.html">Sass/Scss、Less 是什么?</a></p>
</blockquote>
<ol>
<li>安装：</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i sass-loader node-sass -D</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>配置 <em>webpack.comfig.js</em> :</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.css$/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>]&#125;,</span><br><span class="line"></span><br><span class="line">&#123;<span class="attr">test</span>:<span class="regexp">/\.scss/</span>,use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader?modules&amp;localIdentName=[path][name]-[local]-[hash:5]&#x27;</span>,<span class="string">&#x27;sass-loader&#x27;</span>]&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>导入 <strong>bootstrap 包</strong> 并且 使用 <em>bootstrap 类</em> （ <em>只用导入第三方路径即可</em> ）</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;bootstrap/dist/css/bootstrap.min.css&quot;</span>;</span><br><span class="line"></span><br><span class="line">&lt;button className=<span class="string">&quot;btn btn-danger&quot;</span>&gt;点我&lt;/button&gt;;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/nsjoVX1si22z.png?imageslim" alt="mark"></p>
<h2 id="React-中-绑定事件"><a href="#React-中-绑定事件" class="headerlink" title="React 中 绑定事件"></a>React 中 绑定事件</h2><h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><p><em>BindEvent.jsx</em>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        BindEvent组件</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          按钮</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/QvadnFjsB97L.gif" alt="mark"></p>
<p>_分离_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;BindEvent组件！&lt;/h1&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.myClickHandler();</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          你敢点我吗？</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  myClickHandler = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    alert(<span class="string">&quot;这是myClickHandler方法！&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/9kb9Av4PcP9d.gif" alt="mark"></p>
<p>_传递参数_：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;BindEvent组件！&lt;/h1&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.myClickHandler(<span class="string">&quot;哈哈哈哈哈哈！&quot;</span>);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          你敢点我吗？</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  myClickHandler = <span class="function">(<span class="params">arg1</span>) =&gt;</span> &#123;</span><br><span class="line">    alert(<span class="string">&quot;这是myClickHandler方法！&quot;</span> + arg1);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/x9zF0YsaynFo.gif" alt="mark"></p>
<h3 id="需求：点击按钮，改变-this-state-里面的值"><a href="#需求：点击按钮，改变-this-state-里面的值" class="headerlink" title="需求：点击按钮，改变 this.state 里面的值"></a>需求：点击按钮，改变 <strong>this.state</strong> 里面的值</h3><blockquote>
<p>this.setState 方法的使用</p>
<p><strong>注意</strong>：this.setState 方法的执行是 <strong>异步</strong> 的</p>
</blockquote>
<p><img src="http://static.zxinc520.com/blog/20190511/1TfoRzRHPm3H.png?imageslim" alt="mark"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">BindEvent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      msg: <span class="string">&quot;周琛！&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;BindEvent组件！&lt;/h1&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.myClickHandler(<span class="string">&quot;哈哈哈哈哈哈！&quot;</span>, <span class="string">&quot;大傻瓜！&quot;</span>);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          你敢点我吗？</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">        &lt;h3&gt;&#123;<span class="built_in">this</span>.state.msg&#125;&lt;/h3&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  myClickHandler = <span class="function">(<span class="params">arg1, arg2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// alert(&#x27;这是myClickHandler方法！&#x27;+arg1+arg2)</span></span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      msg: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/AVQprOBiH0De.gif" alt="mark"></p>
<p><strong>注意</strong>：在执行 this.setState 后，又想立即拿到最新的 state 值，需要使用 this.setState({},callback)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">myClickHandler = <span class="function">(<span class="params">arg1, arg2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// alert(&#x27;这是myClickHandler方法！&#x27;+arg1+arg2)</span></span><br><span class="line">  <span class="built_in">this</span>.setState(</span><br><span class="line">    &#123;</span><br><span class="line">      msg: <span class="string">&quot;张三&quot;</span> + arg1 + arg2,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.state.msg);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="React-中绑定文本框与-State-中的值"><a href="#React-中绑定文本框与-State-中的值" class="headerlink" title="React 中绑定文本框与 State 中的值"></a>React 中绑定文本框与 State 中的值</h2><blockquote>
<p>类似于 Vue 的双向绑定</p>
</blockquote>
<h4 id="第一种双向绑定实现方式"><a href="#第一种双向绑定实现方式" class="headerlink" title="第一种双向绑定实现方式"></a>第一种双向绑定实现方式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  type=<span class="string">&quot;text&quot;</span></span><br><span class="line">  style=&#123;&#123; <span class="attr">width</span>: <span class="string">&quot;100%&quot;</span> &#125;&#125;</span><br><span class="line">  value=&#123;<span class="built_in">this</span>.state.msg&#125;</span><br><span class="line">  onChange=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="built_in">this</span>.txtChanged(e)&#125;</span><br><span class="line">/&gt;;</span><br><span class="line"></span><br><span class="line">txtChanged = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">    msg: e.target.value,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img src="http://static.zxinc520.com/blog/20190511/k4Pz5wOdvDMe.gif" alt="mark"></p>
<h3 id="使用-ref-获取-DOM-元素引用"><a href="#使用-ref-获取-DOM-元素引用" class="headerlink" title="使用 ref 获取 DOM 元素引用"></a>使用 ref 获取 DOM 元素引用</h3><blockquote>
<p>Vue 中，Vue 为页面上的元素提供了 ref 的属性，获取元素引用，则需要使用 <strong>this.$refs</strong> 引用名称</p>
<p>React 中 获取元素的引用 ：<strong>this.refs</strong></p>
</blockquote>
<p>第二种双向绑定实现方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  type=<span class="string">&quot;text&quot;</span></span><br><span class="line">  style=&#123;&#123; <span class="attr">width</span>: <span class="string">&quot;100%&quot;</span> &#125;&#125;</span><br><span class="line">  value=&#123;<span class="built_in">this</span>.state.msg&#125;</span><br><span class="line">  onChange=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="built_in">this</span>.txtChanged(e)&#125;</span><br><span class="line">  ref=<span class="string">&quot;txt&quot;</span></span><br><span class="line">/&gt;;</span><br><span class="line"></span><br><span class="line">txtChanged = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">    msg: <span class="built_in">this</span>.refs.txt.value,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="React-组件的生命周期"><a href="#React-组件的生命周期" class="headerlink" title="React 组件的生命周期"></a>React 组件的生命周期</h2><p><a target="_blank" rel="noopener" href="https://juejin.im/post/5a062fb551882535cd4a4ce3">可以参考</a></p>
<p><img src="http://static.zxinc520.com/blog/20190512/WR2qsCelssvf.webp" alt="mark"></p>
<blockquote>
<p>如图，React 生命周期主要包括三个阶段：初始化阶段、运行中阶段和销毁阶段，在 React 不同的生命周期里，会依次触发不同的钩子函数，下面我们就来详细介绍一下 React 的生命周期函数</p>
</blockquote>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2020
        <i class="ri-heart-fill heart_icon"></i> zhou chen
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <span class="division">|</span>
        Theme - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="琛"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script>

<script src="/js/clickBoom1.js"></script>


<!-- ClickBoom2 -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>