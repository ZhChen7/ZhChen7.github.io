<!DOCTYPE html>


<html lang="en">


<head>
  <meta charset="utf-8" />
   
  <meta name="keywords" content="åšå®¢ï¼Œå­¦ä¹ ç½‘ç«™ï¼Œhexoï¼Œå‘¨ç›ï¼Œå‘¨ç›çš„ä¸ªäººåšå®¢" />
   
  <meta name="description" content="å‘¨ç›çš„åšå®¢" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    æ‰‹æ’•ä»£ç  |  å‘¨ç›çš„åšå®¢
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.png" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

  

<link rel="alternate" href="/atom.xml" title="èŠ ğŸ’—  ç›" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    
      <canvas class="fireworks"></canvas>
      <style>
        .fireworks {
          position: fixed;
          left: 0;
          top: 0;
          z-index: 99999;
          pointer-events: none;
        }
      </style>
      
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-getOfferHandcode"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  æ‰‹æ’•ä»£ç 
</h1>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/03/23/getOfferHandcode/" class="article-date">
  <time datetime="2020-03-23T09:46:34.000Z" itemprop="datePublished">2020-03-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Offer/">Offer</a> / <a class="article-category-link" href="/categories/Offer/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/">å­—èŠ‚è·³åŠ¨</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">9.3k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading timeâ‰ˆ</span>
            <span class="post-count">48 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="é¢è¯•ä¸“é¢˜æ€»ç»“ï¼šæ‰‹æ’•ä»£ç "><a href="#é¢è¯•ä¸“é¢˜æ€»ç»“ï¼šæ‰‹æ’•ä»£ç " class="headerlink" title="é¢è¯•ä¸“é¢˜æ€»ç»“ï¼šæ‰‹æ’•ä»£ç "></a>é¢è¯•ä¸“é¢˜æ€»ç»“ï¼šæ‰‹æ’•ä»£ç </h2><blockquote>
<p>å¸Œæœ›è¯»è€…ä¾æ­¤æ„å»ºè‡ªå·±çš„çŸ¥è¯†æ ‘ï¼ˆæ€ç»´å¯¼å›¾ï¼‰</p>
<p>å·æ‡’ä¸€ä¸‹ï¼šå¯å‚è€ƒæˆ‘è‡ªå·±æ€»ç»“æ€ç»´å¯¼å›¾ : <a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Interview-mind-map">ç‚¹è¿™é‡Œ</a></p>
<p>æ‰‹æ’•ä»£ç åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/ZhChen7/Technical-interview">åœ°å€</a></p>
<p>é™„å¸¦ï¼šé«˜é¢‘é¢è¯•é¢˜ç§¯ç´¯æ–‡æ¡£ã€‚ æ¥è‡ªäºï¼ˆå­¦é•¿ã€ç‰›å®¢ç½‘ç­‰å¹³å°ï¼‰</p>
<p>è‡ªå·±å¼€å‘çš„åšå®¢åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://zxinc520.com/">zxinc520.com</a></p>
<p>github åœ°å€: <a target="_blank" rel="noopener" href="https://github.com/ZhChen7">ç‚¹å‡»</a></p>
</blockquote>
<blockquote>
<p>æ­¤ç¯‡ js - ã€æ‰‹æ’•ä»£ç ã€‘ çŸ¥è¯†ç‚¹ï¼š å…¨éƒ¨å¼„æ‡‚äº†ï¼Œé¢è¯•å¾ˆå®¹æ˜“ã€‚</p>
</blockquote>
<h3 id="1ã€Promiseï¼ˆA-è§„èŒƒï¼‰ã€thenã€all-æ–¹æ³•"><a href="#1ã€Promiseï¼ˆA-è§„èŒƒï¼‰ã€thenã€all-æ–¹æ³•" class="headerlink" title="1ã€Promiseï¼ˆA+è§„èŒƒï¼‰ã€thenã€all æ–¹æ³•"></a>1ã€Promiseï¼ˆA+è§„èŒƒï¼‰ã€thenã€all æ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     Promiseï¼šæ„é€  Promise å‡½æ•°å¯¹è±¡</span></span><br><span class="line"><span class="comment">     excutor: æ‰§è¡Œæ„é€ å™¨ ï¼ˆåŒæ­¥æ‰§è¡Œï¼‰</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">excutor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> _that = <span class="built_in">this</span>;</span><br><span class="line">  _that.status = <span class="string">&quot;pending&quot;</span>; <span class="comment">// ç»™ promiseå¯¹è±¡æŒ‡å®š statuså±æ€§,åˆå§‹å€¼ä¸º pending</span></span><br><span class="line">  _that.data = <span class="literal">undefined</span>; <span class="comment">//ç»™ promise å¯¹è±¡æŒ‡å®šä¸€ä¸ªç”¨äºå‚¨å­˜ç»“æœæ•°æ®çš„å±æ€§</span></span><br><span class="line">  _that.callbacks = []; <span class="comment">// æ¯ä¸ªå…ƒç´ çš„ç»“æ„ï¼š&#123; onFulfilled()&#123;&#125;, onRejected()&#123;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœå½“å‰çŠ¶æ€ä¸æ˜¯ pendingï¼Œç›´æ¥ç»“æŸ</span></span><br><span class="line">    <span class="keyword">if</span> (_that.status !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† çŠ¶æ€æ”¹ä¸º resolved</span></span><br><span class="line">    _that.status = <span class="string">&quot;resolved&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿å­˜ value æ•°æ®</span></span><br><span class="line">    _that.data = value;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæœ‰å¾…æ‰§è¡Œcallback å‡½æ•°ï¼Œç«‹åˆ»å¼‚æ­¥æ‰§è¡Œå›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (_that.callbacks.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        _that.callbacks.forEach(<span class="function">(<span class="params">callbacksObj</span>) =&gt;</span> &#123;</span><br><span class="line">          callbacksObj.onFulfilled(value);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœå½“å‰çŠ¶æ€ä¸æ˜¯ pendingï¼Œç›´æ¥ç»“æŸ</span></span><br><span class="line">    <span class="keyword">if</span> (_that.status !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† çŠ¶æ€æ”¹ä¸º rejected</span></span><br><span class="line">    _that.status = <span class="string">&quot;rejected&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿å­˜ value æ•°æ®</span></span><br><span class="line">    _that.data = reason;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæœ‰å¾…æ‰§è¡Œcallback å‡½æ•°ï¼Œç«‹åˆ»å¼‚æ­¥æ‰§è¡Œå›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (_that.callbacks.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        _that.callbacks.forEach(<span class="function">(<span class="params">callbacksObj</span>) =&gt;</span> &#123;</span><br><span class="line">          callbacksObj.onRejected(reason);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ç«‹åˆ»åŒæ­¥æ‰§è¡Œ excutor</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    excutor(resolve, reject);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">//å¦‚æœæ‰§è¡Œå™¨æŠ›å‡ºå¼‚å¸¸ï¼Œpromiseå¯¹è±¡å˜ä¸º rejected çŠ¶æ€</span></span><br><span class="line">    reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">          PromiseåŸå‹å¯¹è±¡çš„ then() --- *æ€è·¯*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            1ã€æŒ‡å®šæˆåŠŸå’Œå¤±è´¥çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">            2ã€è¿”å›ä¸€ä¸ªæ–°çš„ promise å¯¹è±¡</span></span><br><span class="line"><span class="comment">            3ã€è¿”å›promiseçš„ç»“æœç”± onFulfilled/onRejectedæ‰§è¡Œç»“æœå†³å®š</span></span><br><span class="line"><span class="comment">            4ã€æŒ‡å®š onFulfilled/onRejectedçš„é»˜è®¤å€¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="built_in">Promise</span>.prototype.then = <span class="function"><span class="keyword">function</span> (<span class="params">onFulfilled, onRejected</span>) </span>&#123;</span><br><span class="line">  onFulfilled =</span><br><span class="line">    <span class="keyword">typeof</span> onFulfilled === <span class="string">&quot;function&quot;</span> ? onFulfilled : <span class="function">(<span class="params">reason</span>) =&gt;</span> reason; <span class="comment">//å‘åä¼ é€’æˆåŠŸçš„value</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//æŒ‡å®šé»˜è®¤çš„å¤±è´¥çš„å›è°ƒï¼ˆå®ç°é”™è¯¯/å¼‚å¸¸ç©¿é€çš„å…³é”®ç‚¹ï¼‰</span></span><br><span class="line">  onRejected =</span><br><span class="line">    <span class="keyword">typeof</span> onRejected === <span class="string">&quot;function&quot;</span></span><br><span class="line">      ? onRejected</span><br><span class="line">      : <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">//å‘åä¼ é€’å¤±è´¥çš„reason</span></span><br><span class="line">          <span class="keyword">throw</span> reason;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> _that = <span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è¿”å›ä¸€ä¸ªæ–°çš„promise å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">                    è°ƒç”¨æŒ‡å®šçš„å›è°ƒå‡½æ•°å¤„ç†ï¼Œæ ¹æ®æ‰§è¡Œç»“æœï¼Œæ”¹å˜returnçš„promiseçš„çŠ¶æ€</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">                           1. å¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œreturn çš„promiseå°±ä¼šå¤±è´¥ï¼Œreason å°±æ˜¯ error</span></span><br><span class="line"><span class="comment">                           2. å¦‚æœå›è°ƒå‡½æ•°è¿”å›çš„ä¸æ˜¯promiseï¼Œreturnçš„promiseå°±ä¼šæˆåŠŸï¼Œvalueå°±æ˜¯è¿”å›çš„å€¼</span></span><br><span class="line"><span class="comment">                           3.å¦‚æœå›è°ƒå‡½æ•°è¿”å›çš„æ˜¯promiseï¼Œreturnçš„promiseçš„ç»“æœå°±æ˜¯è¿™ä¸ªpromiseçš„ç»“æœ</span></span><br><span class="line"><span class="comment">                        */</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> result = callback(_that.data);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.å¦‚æœå›è°ƒå‡½æ•°è¿”å›çš„æ˜¯promiseï¼Œreturnçš„promiseçš„ç»“æœå°±æ˜¯è¿™ä¸ªpromiseçš„ç»“æœ</span></span><br><span class="line">        <span class="keyword">if</span> (result <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">          <span class="comment">// result.then(</span></span><br><span class="line">          <span class="comment">//     value =&gt; resolve(value), //å½“resultæˆåŠŸæ—¶ï¼Œè®©returnçš„promiseä¹ŸæˆåŠŸ</span></span><br><span class="line">          <span class="comment">//     reason =&gt; reject(reason)  //å½“resultå¤±è´¥æ—¶ï¼Œè®©returnçš„promiseä¹Ÿå¤±è´¥</span></span><br><span class="line">          <span class="comment">// )</span></span><br><span class="line"></span><br><span class="line">          result.then(resolve, reject);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">//  2. å¦‚æœå›è°ƒå‡½æ•°è¿”å›çš„ä¸æ˜¯promiseï¼Œreturnçš„promiseå°±ä¼šæˆåŠŸï¼Œvalueå°±æ˜¯è¿”å›çš„å€¼</span></span><br><span class="line">          resolve(result);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="comment">//1. å¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œreturn çš„promiseå°±ä¼šå¤±è´¥ï¼Œreason å°±æ˜¯ error</span></span><br><span class="line"></span><br><span class="line">        reject(error);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (_that.status === <span class="string">&quot;pending&quot;</span>) &#123;</span><br><span class="line">      <span class="comment">//å‡è®¾å½“å‰çŠ¶æ€è¿˜æ˜¯ pending çŠ¶æ€ï¼Œå°†å›è°ƒå‡½æ•° ä¿å­˜èµ·æ¥</span></span><br><span class="line">      _that.callbacks.push(&#123;</span><br><span class="line">        onFulfilled(value) &#123;</span><br><span class="line">          handle(onFulfilled); <span class="comment">//æ”¹promiseçš„çŠ¶æ€ä¸º onFulfilledçŠ¶æ€</span></span><br><span class="line">        &#125;,</span><br><span class="line">        onRejected(reason) &#123;</span><br><span class="line">          handle(onRejected); <span class="comment">//æ”¹promiseçš„çŠ¶æ€ä¸º onRejectedçŠ¶æ€</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (_that.status === <span class="string">&quot;resolved&quot;</span>) &#123;</span><br><span class="line">      <span class="comment">//å¦‚æœå½“å‰æ˜¯resolvedçŠ¶æ€ï¼Œå¼‚æ­¥æ‰§è¡Œonresolvedå¹¶æ”¹å˜returnçš„promiseçŠ¶æ€</span></span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        handle(onFulfilled);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//onRejected</span></span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœå½“å‰æ˜¯rejectedçŠ¶æ€ï¼Œå¼‚æ­¥æ‰§è¡ŒonRejectedå¹¶æ”¹å˜returnçš„promiseçŠ¶æ€</span></span><br><span class="line">        handle(onRejected);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">            PromiseåŸå‹å¯¹è±¡çš„ catch()</span></span><br><span class="line"><span class="comment">            æŒ‡å®šå¤±è´¥çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">            è¿”å›ä¸€ä¸ªæ–°çš„ promise å¯¹è±¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="built_in">Promise</span>.prototype.catch = <span class="function"><span class="keyword">function</span> (<span class="params">onRejected</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.then(<span class="literal">undefined</span>, onRejected);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.prototype.finally = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.then(</span><br><span class="line">    (value) =&gt; &#123;</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(callback(value));</span><br><span class="line">    &#125;,</span><br><span class="line">    (reason) =&gt; &#123;</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(callback(reason));</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">            Promiseå‡½æ•°å¯¹è±¡çš„ resolve()</span></span><br><span class="line"><span class="comment">            è¿”å› æŒ‡å®šç»“æœçš„ &quot;æˆåŠŸ&quot; çš„ promise å¯¹è±¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="built_in">Promise</span>.resolve = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//è¿”å› ä¸€ä¸ª æˆåŠŸ/å¤±è´¥ çš„promise</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">      <span class="comment">//ä½¿ç”¨valueçš„ç»“æœä½œä¸º promise çš„ç»“æœ</span></span><br><span class="line">      value.then(resolve, reject);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//valueä¸æ˜¯promise =&gt; promiseå˜ä¸ºæˆåŠŸï¼Œæ•°æ®æ˜¯ value</span></span><br><span class="line">      resolve(value);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">            Promiseå‡½æ•°å¯¹è±¡çš„ reject()</span></span><br><span class="line"><span class="comment">            è¿”å› æŒ‡å®šç»“æœçš„ &quot;å¤±è´¥&quot; çš„ promise å¯¹è±¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="built_in">Promise</span>.reject = <span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//è¿”å› ä¸€ä¸ªå¤±è´¥çš„ promise</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject(reason);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">            Promiseå‡½æ•°å¯¹è±¡çš„ all()</span></span><br><span class="line"><span class="comment">            è¿”å› ä¸€ä¸ªpromiseï¼Œåªæœ‰å½“æ‰€æœ‰promiseéƒ½æˆåŠŸæ—¶æ‰æˆåŠŸï¼Œå¦åˆ™åªè¦æœ‰ä¸€ä¸ªå¤±è´¥å°± å¤±è´¥</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="built_in">Promise</span>.all = <span class="function"><span class="keyword">function</span> (<span class="params">promises</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> values = <span class="built_in">Array</span>.apply(<span class="literal">null</span>, &#123; <span class="attr">length</span>: promises.length &#125;); <span class="comment">//ç”¨æ¥ä¿å­˜æ‰€æœ‰æˆåŠŸ valueçš„æ•°ç»„</span></span><br><span class="line">  <span class="keyword">let</span> resolvedCount = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//éå†è·å–æ¯ä¸€ä¸ª promiseçš„ç»“æœ</span></span><br><span class="line">    promises.forEach(<span class="function">(<span class="params">p, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(p).then(</span><br><span class="line">        <span class="comment">//pæˆåŠŸï¼Œå°†æˆåŠŸçš„ value ä¿å­˜ values</span></span><br><span class="line">        <span class="comment">// values.push(value)  =&gt; ä¸èƒ½è¿™æ ·</span></span><br><span class="line">        (value) =&gt; &#123;</span><br><span class="line">          resolvedCount++; <span class="comment">//æˆåŠŸçš„æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">          values[index] = value;</span><br><span class="line"></span><br><span class="line">          <span class="comment">//å¦‚æœå…¨éƒ¨æˆåŠŸäº†ï¼Œå°†returnçš„ promise æ”¹ä¸ºæˆåŠŸ</span></span><br><span class="line">          <span class="keyword">if</span> (resolvedCount === promises.length) &#123;</span><br><span class="line">            resolve(values);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        (reason) =&gt; &#123;</span><br><span class="line">          <span class="comment">//åªè¦ä¸€ä¸ªå¤±è´¥äº†ï¼Œreturn çš„promiseå°±å¤±è´¥</span></span><br><span class="line">          reject(reason);</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">            Promiseå‡½æ•°å¯¹è±¡çš„ race()</span></span><br><span class="line"><span class="comment">            è¿”å› ä¸€ä¸ªpromiseï¼Œå…¶ç»“æœç”±ç¬¬ä¸€ä¸ªå®Œæˆçš„promiseæ¥å†³å®š</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="built_in">Promise</span>.race = <span class="function"><span class="keyword">function</span> (<span class="params">promises</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//éå†è·å–æ¯ä¸€ä¸ª promiseçš„ç»“æœ</span></span><br><span class="line">    promises.forEach(<span class="function">(<span class="params">p, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(p).then(</span><br><span class="line">        (value) =&gt; &#123;</span><br><span class="line">          <span class="comment">// ä¸€æ—¦ç”±æˆåŠŸäº†ï¼Œå°†return å˜ä¸ºå¤±è´¥</span></span><br><span class="line">          resolve(value);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        (reason) =&gt; &#123;</span><br><span class="line">          <span class="comment">//åªè¦ä¸€ä¸ªå¤±è´¥äº†ï¼Œreturn çš„promiseå°±å¤±è´¥</span></span><br><span class="line">          reject(reason);</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2ã€æ‰‹å†™-call-apply-bind"><a href="#2ã€æ‰‹å†™-call-apply-bind" class="headerlink" title="2ã€æ‰‹å†™ call apply bind"></a>2ã€æ‰‹å†™ call apply bind</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰applyå‡½æ•°</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.apply1 = <span class="function"><span class="keyword">function</span> (<span class="params">obj, arg</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//contextä¸ºnullæˆ–è€…æ˜¯undefinedæ—¶,è®¾ç½®é»˜è®¤å€¼</span></span><br><span class="line">  <span class="keyword">if</span> (!obj) &#123;</span><br><span class="line">    obj = <span class="keyword">typeof</span> <span class="built_in">window</span> === <span class="string">&quot;undefined&quot;</span> ? <span class="built_in">global</span> : <span class="built_in">window</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  obj.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="literal">null</span>;</span><br><span class="line">  <span class="comment">//undefined æˆ–è€… æ˜¯ null ä¸æ˜¯ Iterator å¯¹è±¡ï¼Œä¸èƒ½è¢« ...</span></span><br><span class="line">  <span class="keyword">if</span> (arg === <span class="literal">undefined</span> || arg === <span class="literal">null</span>) &#123;</span><br><span class="line">    result = obj.fn(arg);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result = obj.fn(...arg);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span> obj.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰ call å‡½æ•°</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.call1 = <span class="function"><span class="keyword">function</span> (<span class="params">obj, ...arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj) &#123;</span><br><span class="line">    obj = <span class="keyword">typeof</span> <span class="built_in">window</span> === <span class="string">&quot;undefined&quot;</span> ? <span class="built_in">global</span> : <span class="built_in">window</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  obj.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="literal">null</span>;</span><br><span class="line">  result = obj.fn(...arg);</span><br><span class="line">  <span class="keyword">delete</span> obj.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰ bind å‡½æ•°</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">obj, ...arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj) &#123;</span><br><span class="line">    obj = <span class="keyword">typeof</span> <span class="built_in">window</span> === <span class="string">&quot;undefined&quot;</span> ? <span class="built_in">global</span> : <span class="built_in">window</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">let</span> args = arg;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">  f.prototype = <span class="built_in">this</span>.prototype;</span><br><span class="line">  <span class="keyword">let</span> bound = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = [...args, ...arguments];</span><br><span class="line">    <span class="keyword">let</span> obj = <span class="built_in">this</span> <span class="keyword">instanceof</span> f ? <span class="built_in">this</span> : obj;</span><br><span class="line">    <span class="keyword">return</span> self.apply(obj, res);</span><br><span class="line">  &#125;;</span><br><span class="line">  bound.prototype = <span class="keyword">new</span> f();</span><br><span class="line">  <span class="keyword">return</span> bound;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3ã€Promise-å°è£…-Ajax-æ–¹æ³•"><a href="#3ã€Promise-å°è£…-Ajax-æ–¹æ³•" class="headerlink" title="3ã€Promise å°è£… Ajax æ–¹æ³•"></a>3ã€Promise å°è£… Ajax æ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">url, methods, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(methods, url, <span class="literal">true</span>);</span><br><span class="line">    xhr.send(data);</span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">        resolve(xhr.responseText);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        reject(xhr.status);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4ã€å¼‚æ­¥åŠ è½½å›¾ç‰‡"><a href="#4ã€å¼‚æ­¥åŠ è½½å›¾ç‰‡" class="headerlink" title="4ã€å¼‚æ­¥åŠ è½½å›¾ç‰‡"></a>4ã€å¼‚æ­¥åŠ è½½å›¾ç‰‡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadImageAsync</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">    image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(image);</span><br><span class="line">    &#125;;</span><br><span class="line">    image.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;Could not load image at &quot;</span> + url));</span><br><span class="line">    &#125;;</span><br><span class="line">    image.src = url;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5ã€é˜²æŠ–ï¼ŒèŠ‚æµ"><a href="#5ã€é˜²æŠ–ï¼ŒèŠ‚æµ" class="headerlink" title="5ã€é˜²æŠ–ï¼ŒèŠ‚æµ"></a>5ã€é˜²æŠ–ï¼ŒèŠ‚æµ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é˜²æŠ–</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timeout = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">    timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//èŠ‚æµ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> canRun = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!canRun) <span class="keyword">return</span>;</span><br><span class="line">    canRun = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">      canRun = <span class="literal">true</span>;</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6ã€åœ£æ¯ã€åŒé£ç¿¼"><a href="#6ã€åœ£æ¯ã€åŒé£ç¿¼" class="headerlink" title="6ã€åœ£æ¯ã€åŒé£ç¿¼"></a>6ã€åœ£æ¯ã€åŒé£ç¿¼</h3><h4 id="åœ£æ¯"><a href="#åœ£æ¯" class="headerlink" title="åœ£æ¯"></a>åœ£æ¯</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        *&#123;</span><br><span class="line">            padding: 0;</span><br><span class="line">            margin: 0;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.container</span>&#123;</span></span><br><span class="line">            overflow: hidden;</span><br><span class="line">            padding: 0 100px 0 100px;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.middle</span>,<span class="selector-class">.left</span>,<span class="selector-class">.right</span>&#123;</span></span><br><span class="line">            position: relative;</span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.left</span>&#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background: red;</span><br><span class="line">            margin-left: -100%;</span><br><span class="line">            left: -100px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.right</span>&#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background: green;</span><br><span class="line">            margin-left: -100px;</span><br><span class="line">            right: -100px;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.middle</span>&#123;</span></span><br><span class="line">            background: blue;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 300px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;middle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="åŒé£ç¿¼"><a href="#åŒé£ç¿¼" class="headerlink" title="åŒé£ç¿¼"></a>åŒé£ç¿¼</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">            overflow: hidden;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.middle</span>, <span class="selector-class">.left</span>, <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">            height: 100px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            background: red;</span><br><span class="line">            margin-left: -100%;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            background: blue;</span><br><span class="line">            margin-left: -100px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.middle</span> &#123;</span></span><br><span class="line">            width: 100%;</span><br><span class="line">            background: aqua;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.inner</span> &#123;</span></span><br><span class="line">            margin: 0 100px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;middle&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span>middle<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7ã€ç»§æ‰¿ç›¸å…³"><a href="#7ã€ç»§æ‰¿ç›¸å…³" class="headerlink" title="7ã€ç»§æ‰¿ç›¸å…³"></a>7ã€ç»§æ‰¿ç›¸å…³</h3><h4 id="7-1ã€åŸå‹é“¾ç»§æ‰¿"><a href="#7-1ã€åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="7.1ã€åŸå‹é“¾ç»§æ‰¿"></a>7.1ã€åŸå‹é“¾ç»§æ‰¿</h4><ul>
<li><p>åŸå‹é“¾ç»§æ‰¿çš„åŸºæœ¬æ€æƒ³ï¼šæ˜¯åˆ©ç”¨åŸå‹è®©ä¸€ä¸ªå¼•ç”¨ç±»å‹ç»§æ‰¿å¦ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
<p>å¦‚ SubType.prototype = new SuperType();</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&quot;Yvette&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.age = <span class="number">22</span>;</span><br><span class="line">&#125;</span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼ºç‚¹</p>
<ol>
<li>é€šè¿‡åŸå‹æ¥å®ç°ç»§æ‰¿æ—¶ï¼ŒåŸå‹ä¼šå˜æˆå¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ï¼ŒåŸå…ˆçš„å®ä¾‹å±æ€§å˜æˆäº†ç°åœ¨çš„åŸå‹å±æ€§ï¼Œè¯¥åŸå‹çš„å¼•ç”¨ç±»å‹å±æ€§ä¼šè¢«æ‰€æœ‰çš„å®ä¾‹å…±äº«</li>
<li>åœ¨åˆ›å»ºå­ç±»å‹çš„å®ä¾‹æ—¶ï¼Œä¸èƒ½å‘è¶…ç±»å‹çš„æ„é€ å‡½æ•°ä¸­ä¼ é€’å‚æ•°</li>
</ol>
</li>
</ul>
<h4 id="7-2ã€å€Ÿç”¨æ„é€ å‡½æ•°"><a href="#7-2ã€å€Ÿç”¨æ„é€ å‡½æ•°" class="headerlink" title="7.2ã€å€Ÿç”¨æ„é€ å‡½æ•°"></a>7.2ã€å€Ÿç”¨æ„é€ å‡½æ•°</h4><ul>
<li><p>å…¶åŸºæœ¬æ€æƒ³ä¸º:åœ¨å­ç±»å‹çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨è¶…ç±»å‹æ„é€ å‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  SuperType.call(<span class="built_in">this</span>, name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¼˜ç‚¹</p>
<ol>
<li>å¯ä»¥å‘è¶…ç±»ä¼ é€’å‚æ•°</li>
<li>è§£å†³äº†åŸå‹ä¸­åŒ…å«å¼•ç”¨ç±»å‹å€¼è¢«æ‰€æœ‰å®ä¾‹å…±äº«çš„é—®é¢˜</li>
</ol>
</li>
<li><p>ç¼ºç‚¹</p>
<ol>
<li>æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œå‡½æ•°å¤ç”¨æ— ä»è°ˆèµ·</li>
<li>å¦å¤–è¶…ç±»å‹åŸå‹ä¸­å®šä¹‰çš„æ–¹æ³•å¯¹äºå­ç±»å‹è€Œè¨€éƒ½æ˜¯ä¸å¯è§çš„</li>
</ol>
</li>
</ul>
<h4 id="7-3ã€ç»„åˆç»§æ‰¿"><a href="#7-3ã€ç»„åˆç»§æ‰¿" class="headerlink" title="7.3ã€ç»„åˆç»§æ‰¿"></a>7.3ã€ç»„åˆç»§æ‰¿</h4><ul>
<li><p>ç»„åˆç»§æ‰¿æŒ‡çš„æ˜¯å°†åŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•°æŠ€æœ¯ç»„åˆåˆ°ä¸€å—ï¼Œä»è€Œå‘æŒ¥äºŒè€…ä¹‹é•¿çš„ä¸€ç§ç»§æ‰¿æ¨¡å¼ã€‚åŸºæœ¬æ€è·¯ï¼šä½¿ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œé€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿ï¼Œæ—¢é€šè¿‡åœ¨åŸå‹ä¸Šå®šä¹‰æ–¹æ³•æ¥å®ç°äº†å‡½æ•°å¤ç”¨ï¼Œåˆä¿è¯äº†æ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„å±æ€§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&quot;zc&quot;</span>;</span><br><span class="line">  <span class="built_in">this</span>.colors = [<span class="string">&quot;pink&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  SuperType.call(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line">SubType.prototype.constructor = SubType;</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> SubType();</span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> SubType();</span><br><span class="line"></span><br><span class="line">a.colors.push(<span class="string">&quot;red&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.colors); <span class="comment">//[ &#x27;pink&#x27;, &#x27;blue&#x27;, &#x27;green&#x27;, &#x27;red&#x27; ]</span></span><br><span class="line"><span class="built_in">console</span>.log(b.colors); <span class="comment">//[ &#x27;pink&#x27;, &#x27;blue&#x27;, &#x27;green&#x27; ]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¼˜ç‚¹</p>
<ol>
<li>å¯ä»¥å‘è¶…ç±»ä¼ é€’å‚æ•°</li>
<li>æ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„å±æ€§</li>
<li>å®ç°äº†å‡½æ•°å¤ç”¨</li>
</ol>
</li>
<li><p>ç¼ºç‚¹</p>
<ol>
<li>æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼Œéƒ½ä¼šè°ƒç”¨ä¸¤æ¬¡è¶…ç±»å‹æ„é€ å‡½æ•°ï¼šä¸€æ¬¡æ˜¯åœ¨åˆ›å»ºå­ç±»å‹åŸå‹çš„æ—¶å€™ï¼Œå¦ä¸€æ¬¡æ˜¯åœ¨å­ç±»å‹æ„é€ å‡½æ•°å†…éƒ¨ã€‚</li>
</ol>
</li>
</ul>
<h4 id="7-4ã€åŸå‹å¼ç»§æ‰¿"><a href="#7-4ã€åŸå‹å¼ç»§æ‰¿" class="headerlink" title="7.4ã€åŸå‹å¼ç»§æ‰¿"></a>7.4ã€åŸå‹å¼ç»§æ‰¿</h4><ul>
<li><p>åŸå‹å¼ç»§æ‰¿ç»§æ‰¿çš„åŸºæœ¬æ€æƒ³ï¼šåœ¨ object() å‡½æ•°å†…éƒ¨ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªä¸´æ—¶æ€§çš„æ„é€ å‡½æ•°ï¼Œç„¶åå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºè¿™ä¸ªæ„é€ å‡½æ•°çš„åŸå‹ï¼Œæœ€åè¿”å›äº†è¿™ä¸ªä¸´æ—¶ç±»å‹çš„ä¸€ä¸ªæ–°å®ä¾‹ï¼Œä»æœ¬è´¨ä¸Šè®²ï¼Œobject() å¯¹ä¼ å…¥çš„å¯¹è±¡æ‰§è¡Œäº†ä¸€æ¬¡æµ…æ‹·è´ã€‚</p>
<p>ECMAScript5 é€šè¿‡æ–°å¢ Object.create()æ–¹æ³•è§„èŒƒäº†åŸå‹å¼ç»§æ‰¿ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªç”¨ä½œæ–°å¯¹è±¡åŸå‹çš„å¯¹è±¡å’Œï¼ˆå¯é€‰çš„ï¼‰ä¸€ä¸ªä¸ºæ–°å¯¹è±¡å®šä¹‰é¢å¤–å±æ€§çš„å¯¹è±¡(å¯ä»¥è¦†ç›–åŸå‹å¯¹è±¡ä¸Šçš„åŒåå±æ€§)ï¼Œåœ¨ä¼ å…¥ä¸€ä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼ŒObject.create() å’Œ object() æ–¹æ³•çš„è¡Œä¸ºç›¸åŒã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype = o;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼ºç‚¹</p>
<ol>
<li>åŒåŸå‹é“¾å®ç°ç»§æ‰¿ä¸€æ ·ï¼ŒåŒ…å«å¼•ç”¨ç±»å‹å€¼çš„å±æ€§ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«</li>
</ol>
</li>
</ul>
<h4 id="7-5ã€å¯„ç”Ÿå¼ç»§æ‰¿"><a href="#7-5ã€å¯„ç”Ÿå¼ç»§æ‰¿" class="headerlink" title="7.5ã€å¯„ç”Ÿå¼ç»§æ‰¿"></a>7.5ã€å¯„ç”Ÿå¼ç»§æ‰¿</h4><ul>
<li><p>å¯„ç”Ÿå¼ç»§æ‰¿æ˜¯ä¸åŸå‹å¼ç»§æ‰¿ç´§å¯†ç›¸å…³çš„ä¸€ç§æ€è·¯ã€‚å¯„ç”Ÿå¼ç»§æ‰¿çš„æ€è·¯ä¸å¯„ç”Ÿæ„é€ å‡½æ•°å’Œå·¥å‚æ¨¡å¼ç±»ä¼¼ï¼Œå³åˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å†…éƒ¨å·²æŸç§æ–¹å¼æ¥å¢å¼ºå¯¹è±¡ï¼Œæœ€åå†åƒçœŸåœ°æ˜¯å®ƒåšäº†æ‰€æœ‰å·¥ä½œä¸€æ ·è¿”å›å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype = o;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createAnother</span>(<span class="params">original</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> clone = object(original); <span class="comment">//é€šè¿‡è°ƒç”¨å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line">  clone.sayHi = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//ä»¥æŸç§æ–¹å¼å¢å¼ºè¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;hi&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> clone; <span class="comment">//è¿”å›è¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¼˜ç‚¹</p>
<ol>
<li>åŸºäº person è¿”å›äº†ä¸€ä¸ªæ–°å¯¹è±¡ -â€”â€” person2ï¼Œæ–°å¯¹è±¡ä¸ä»…å…·æœ‰ person çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œè€Œä¸”è¿˜æœ‰è‡ªå·±çš„ sayHi() æ–¹æ³•ã€‚åœ¨è€ƒè™‘å¯¹è±¡è€Œä¸æ˜¯è‡ªå®šä¹‰ç±»å‹å’Œæ„é€ å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œå¯„ç”Ÿå¼ç»§æ‰¿ä¹Ÿæ˜¯ä¸€ç§æœ‰ç”¨çš„æ¨¡å¼ã€‚</li>
</ol>
</li>
<li><p>ç¼ºç‚¹</p>
<ol>
<li>ä½¿ç”¨å¯„ç”Ÿå¼ç»§æ‰¿æ¥ä¸ºå¯¹è±¡æ·»åŠ å‡½æ•°ï¼Œä¼šç”±äºä¸èƒ½åšåˆ°å‡½æ•°å¤ç”¨è€Œæ•ˆç‡ä½ä¸‹ã€‚</li>
<li>åŒåŸå‹é“¾å®ç°ç»§æ‰¿ä¸€æ ·ï¼ŒåŒ…å«å¼•ç”¨ç±»å‹å€¼çš„å±æ€§ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«ã€‚</li>
</ol>
</li>
</ul>
<h4 id="7-6ã€å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"><a href="#7-6ã€å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿" class="headerlink" title="7.6ã€å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"></a>7.6ã€å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h4><ul>
<li><p>æ‰€è°“å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼Œå³é€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥ç»§æ‰¿å±æ€§ï¼Œé€šè¿‡åŸå‹é“¾çš„æ··æˆå½¢å¼æ¥ç»§æ‰¿æ–¹æ³•ï¼ŒåŸºæœ¬æ€è·¯ï¼š</p>
<p>ä¸å¿…ä¸ºäº†æŒ‡å®šå­ç±»å‹çš„åŸå‹è€Œè°ƒç”¨è¶…ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦çš„ä»…æ˜¯è¶…ç±»å‹åŸå‹çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä½¿ç”¨å¯„ç”Ÿå¼ç»§æ‰¿æ¥ç»§æ‰¿è¶…ç±»å‹çš„åŸå‹ï¼Œç„¶åå†å°†ç»“æœæŒ‡å®šç»™å­ç±»å‹çš„åŸå‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">subType, superType</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> prototype = object(superType.prototype); <span class="comment">//åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">  prototype.constructor = subType; <span class="comment">//å¢å¼ºå¯¹è±¡</span></span><br><span class="line">  subType.prototype = prototype; <span class="comment">//æŒ‡å®šå¯¹è±¡</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.colors = [<span class="string">&quot;pink&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuberType</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  SuperType.call(<span class="built_in">this</span>, name);</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">inheritPrototype(SuberType, SuperType);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ­¥éª¤</p>
<p>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºè¶…ç±»å‹åŸå‹çš„ä¸€ä¸ªå‰¯æœ¬</p>
<p>ç¬¬äºŒæ­¥ï¼šä¸ºåˆ›å»ºçš„å‰¯æœ¬æ·»åŠ  constructor å±æ€§</p>
<p>ç¬¬ä¸‰æ­¥ï¼šå°†æ–°åˆ›å»ºçš„å¯¹è±¡èµ‹å€¼ç»™å­ç±»å‹çš„åŸå‹</p>
</li>
<li><p>ä¼˜ç‚¹</p>
<ol>
<li>åªè°ƒç”¨äº†ä¸€æ¬¡è¶…ç±»æ„é€ å‡½æ•°ï¼Œæ•ˆç‡æ›´é«˜ã€‚é¿å…åœ¨ SuberType.prototype ä¸Šé¢åˆ›å»ºä¸å¿…è¦çš„ã€å¤šä½™çš„å±æ€§ï¼Œä¸å…¶åŒæ—¶ï¼ŒåŸå‹é“¾è¿˜èƒ½ä¿æŒä¸å˜ã€‚å› æ­¤å¯„ç”Ÿç»„åˆç»§æ‰¿æ˜¯å¼•ç”¨ç±»å‹æœ€ç†æ€§çš„ç»§æ‰¿èŒƒå¼ã€‚</li>
</ol>
</li>
</ul>
<h4 id="7-7ã€ES6-ç»§æ‰¿"><a href="#7-7ã€ES6-ç»§æ‰¿" class="headerlink" title="7.7ã€ES6 ç»§æ‰¿"></a>7.7ã€ES6 ç»§æ‰¿</h4><ul>
<li><p>Class å¯ä»¥é€šè¿‡ extends å…³é”®å­—å®ç°ç»§æ‰¿</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperType</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(age) &#123;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line">  getAge() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.age);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubType</span> <span class="keyword">extends</span> <span class="title">SuperType</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(age, name) &#123;</span><br><span class="line">    <span class="built_in">super</span>(age); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„constructor(x, y)</span></span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">  getName() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯¹äº ES6 çš„ class éœ€è¦åšä»¥ä¸‹å‡ ç‚¹è¯´æ˜</p>
<ol>
<li>class å£°æ˜ä¼šæå‡ï¼Œä½†ä¸ä¼šåˆå§‹åŒ–èµ‹å€¼ã€‚Foo è¿›å…¥æš‚æ—¶æ€§æ­»åŒºï¼Œç±»ä¼¼äº letã€const å£°æ˜å˜é‡ã€‚</li>
<li>class å£°æ˜å†…éƒ¨ä¼šå¯ç”¨ä¸¥æ ¼æ¨¡å¼ã€‚</li>
<li>class çš„æ‰€æœ‰æ–¹æ³•ï¼ˆåŒ…æ‹¬é™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼‰éƒ½æ˜¯ä¸å¯æšä¸¾çš„ã€‚</li>
<li>class çš„æ‰€æœ‰æ–¹æ³•ï¼ˆåŒ…æ‹¬é™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼‰éƒ½æ²¡æœ‰åŸå‹å¯¹è±¡ prototypeï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰[[construct]]ï¼Œä¸èƒ½ä½¿ç”¨ new æ¥è°ƒç”¨ã€‚</li>
<li>å¿…é¡»ä½¿ç”¨ new è°ƒç”¨ class</li>
<li>class å†…éƒ¨æ— æ³•é‡å†™ç±»å</li>
</ol>
</li>
</ul>
<h4 id="ä½¿ç”¨-extends-å…³é”®å­—å®ç°ç»§æ‰¿ï¼Œæœ‰å‡ ç‚¹éœ€è¦ç‰¹åˆ«è¯´æ˜"><a href="#ä½¿ç”¨-extends-å…³é”®å­—å®ç°ç»§æ‰¿ï¼Œæœ‰å‡ ç‚¹éœ€è¦ç‰¹åˆ«è¯´æ˜" class="headerlink" title="ä½¿ç”¨ extends å…³é”®å­—å®ç°ç»§æ‰¿ï¼Œæœ‰å‡ ç‚¹éœ€è¦ç‰¹åˆ«è¯´æ˜"></a>ä½¿ç”¨ extends å…³é”®å­—å®ç°ç»§æ‰¿ï¼Œæœ‰å‡ ç‚¹éœ€è¦ç‰¹åˆ«è¯´æ˜</h4><ul>
<li>å­ç±»å¿…é¡»åœ¨ constructor ä¸­è°ƒç”¨ super æ–¹æ³•ï¼Œå¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ã€‚å¦‚æœæ²¡æœ‰å­ç±»æ²¡æœ‰å®šä¹‰ constructor æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ã€‚åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œåªæœ‰è°ƒç”¨ super ä¹‹åï¼Œæ‰èƒ½ä½¿ç”¨ this å…³é”®å­—ï¼Œå¦åˆ™æŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»å®ä¾‹çš„æ„å»ºï¼ŒåŸºäºçˆ¶ç±»å®ä¾‹ï¼Œåªæœ‰ super æ–¹æ³•æ‰èƒ½è°ƒç”¨çˆ¶ç±»å®ä¾‹ã€‚</li>
<li>ES5 çš„ç»§æ‰¿ï¼Œå®è´¨æ˜¯å…ˆåˆ›é€ å­ç±»çš„å®ä¾‹å¯¹è±¡ thisï¼Œç„¶åå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ° this ä¸Šé¢ï¼ˆParent.apply(this)ï¼‰ã€‚ES6 çš„ç»§æ‰¿æœºåˆ¶å®Œå…¨ä¸åŒï¼Œå®è´¨æ˜¯å…ˆå°†çˆ¶ç±»å®ä¾‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŠ åˆ° this ä¸Šé¢ï¼ˆæ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨ super æ–¹æ³•ï¼‰ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®æ”¹ this</li>
</ul>
<h3 id="8ã€è‡ªå®šä¹‰-new-è¿‡ç¨‹"><a href="#8ã€è‡ªå®šä¹‰-new-è¿‡ç¨‹" class="headerlink" title="8ã€è‡ªå®šä¹‰ new è¿‡ç¨‹"></a>8ã€è‡ªå®šä¹‰ new è¿‡ç¨‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_new</span>(<span class="params">fn, ...arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line">  obj.__proto__ = fn.prototype;</span><br><span class="line">  <span class="keyword">let</span> ret = fn.apply(obj, arg);</span><br><span class="line">  <span class="keyword">return</span> ret <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? ret : obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9ã€æ‰‹å†™é€’å½’æ–¹æ³•å®ç°æ·±æ‹·è´"><a href="#9ã€æ‰‹å†™é€’å½’æ–¹æ³•å®ç°æ·±æ‹·è´" class="headerlink" title="9ã€æ‰‹å†™é€’å½’æ–¹æ³•å®ç°æ·±æ‹·è´"></a>9ã€æ‰‹å†™é€’å½’æ–¹æ³•å®ç°æ·±æ‹·è´</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰‹å†™å®ç°æ·±æ‹·è´</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkedType</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(target).slice(<span class="number">8</span>, <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> targrtType = checkedType(target);</span><br><span class="line">  <span class="keyword">let</span> result = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">if</span> (targrtType === <span class="string">&quot;Object&quot;</span>) &#123;</span><br><span class="line">    result = &#123;&#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (targrtType === <span class="string">&quot;Array&quot;</span>) &#123;</span><br><span class="line">    result = [];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">in</span> target) &#123;</span><br><span class="line">    <span class="keyword">let</span> value = target[item];</span><br><span class="line">    <span class="keyword">if</span> (checkedType(value) === <span class="string">&quot;Object&quot;</span> || checkedType(value) === <span class="string">&quot;Array&quot;</span>) &#123;</span><br><span class="line">      result[item] = clone(value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      result[item] = value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10ã€å®ç°ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°"><a href="#10ã€å®ç°ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°" class="headerlink" title="10ã€å®ç°ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°"></a>10ã€å®ç°ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ES5å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> currying = <span class="function"><span class="keyword">function</span> (<span class="params">fn, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (args.length &lt; fn.length) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> currying(fn, ...args, ...arguments);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fn(...args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ES6å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> currying = <span class="function">(<span class="params">fn, ...args</span>) =&gt;</span></span><br><span class="line">  args.length &lt; fn.length</span><br><span class="line">    ? <span class="function">(<span class="params">...argments</span>) =&gt;</span> currying(fn, ...args, ...argments)</span><br><span class="line">    : fn(...args);</span><br></pre></td></tr></table></figure>

<h3 id="11ã€åŒå‘ç»‘å®šï¼ˆæ‰‹å†™ï¼‰"><a href="#11ã€åŒå‘ç»‘å®šï¼ˆæ‰‹å†™ï¼‰" class="headerlink" title="11ã€åŒå‘ç»‘å®šï¼ˆæ‰‹å†™ï¼‰"></a>11ã€åŒå‘ç»‘å®šï¼ˆæ‰‹å†™ï¼‰</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Object.defineProperty å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> vm = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  name: <span class="string">&quot;zc&quot;</span>,</span><br><span class="line">  age: <span class="string">&quot;123&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(vm, key, &#123;</span><br><span class="line">      get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj[key];</span><br><span class="line">      &#125;,</span><br><span class="line">      set: <span class="function"><span class="keyword">function</span> (<span class="params">newvalue</span>) </span>&#123;</span><br><span class="line">        obj[key] = newvalue;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj.age = <span class="string">&quot;111&quot;</span>;</span><br><span class="line">vm.age = <span class="string">&quot;112221&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(vm.age);</span><br><span class="line"><span class="built_in">console</span>.log(obj.age);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Proxy å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, &#123;</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span> (<span class="params">target, propKey, receiver</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`getting <span class="subst">$&#123;propKey&#125;</span>!`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, propKey, receiver);</span><br><span class="line">  &#125;,</span><br><span class="line">  set: <span class="function"><span class="keyword">function</span> (<span class="params">target, propKey, value, receiver</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`setting <span class="subst">$&#123;propKey&#125;</span>!`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, propKey, value, receiver);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="10ã€JS-å‘å¸ƒè®¢é˜…æ¨¡å¼"><a href="#10ã€JS-å‘å¸ƒè®¢é˜…æ¨¡å¼" class="headerlink" title="10ã€JS å‘å¸ƒè®¢é˜…æ¨¡å¼"></a>10ã€JS å‘å¸ƒè®¢é˜…æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pubSub = &#123;</span><br><span class="line">  list: &#123;&#125;,</span><br><span class="line">  subscribe: <span class="function"><span class="keyword">function</span> (<span class="params">key, fn</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//è®¢é˜…</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.list[key]) &#123;</span><br><span class="line">      <span class="built_in">this</span>.list[key] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.list[key].push(fn);</span><br><span class="line">  &#125;,</span><br><span class="line">  publish: <span class="function"><span class="keyword">function</span> (<span class="params">key, ...args</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//å‘å¸ƒ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> fn <span class="keyword">of</span> <span class="built_in">this</span>.list[key]) &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  unSubscribe: <span class="function"><span class="keyword">function</span> (<span class="params">key, fn</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//å–æ¶ˆè®¢é˜…</span></span><br><span class="line">    <span class="keyword">let</span> fnlist = <span class="built_in">this</span>.list[key];</span><br><span class="line">    <span class="keyword">if</span> (!fnlist) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (!fn) &#123;</span><br><span class="line">      fnlist.length = <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fnlist.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item === index) &#123;</span><br><span class="line">          fnlist.splice(index, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">pubSub.subscribe(<span class="string">&quot;onwork&quot;</span>, <span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`ä¸Šç­äº†ï¼š<span class="subst">$&#123;time&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line">pubSub.subscribe(<span class="string">&quot;offwork&quot;</span>, <span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`ä¸‹ç­äº†ï¼š<span class="subst">$&#123;time&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line">pubSub.subscribe(<span class="string">&quot;launch&quot;</span>, <span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`åƒé¥­äº†ï¼š<span class="subst">$&#123;time&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// // å‘å¸ƒ</span></span><br><span class="line">pubSub.publish(<span class="string">&quot;offwork&quot;</span>, <span class="string">&quot;18:00:00&quot;</span>);</span><br><span class="line">pubSub.publish(<span class="string">&quot;launch&quot;</span>, <span class="string">&quot;12:00:00&quot;</span>);</span><br><span class="line"></span><br><span class="line">pubSub.unSubscribe(<span class="string">&quot;onwork&quot;</span>);</span><br><span class="line">pubSub.publish(<span class="string">&quot;onwork&quot;</span>, <span class="string">&quot;1222:00:00&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="11ã€JS-è·å–-url-å‚æ•°"><a href="#11ã€JS-è·å–-url-å‚æ•°" class="headerlink" title="11ã€JS è·å– url å‚æ•°"></a>11ã€JS è·å– url å‚æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test =</span><br><span class="line">  <span class="string">&quot;?ie=utf-8&amp;f=8&amp;rsv_bp=1&amp;rsv_idx=1&amp;tn=baidu&amp;wd=21331&amp;rsv_pq=b8627e62001efbb9&amp;rsv_t=eef5sqIQ98s66yOwueYH5BWlFUARj0PkHBdCA4ahbSVYQA5qO9MBoZPC0mU&amp;rqlang=cn&amp;rsv_enter=1&amp;rsv_dl=tb&amp;rsv_sug3=5&amp;rsv_sug1=1&amp;rsv_sug7=100&amp;rsv_sug2=0&amp;inputT=509&amp;rsv_sug4=509&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> str1 = str.slice(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">let</span> arr = str1.split(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(arr);</span><br><span class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">  arr.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> [key, value] = item.split(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">    map.set(key, <span class="built_in">decodeURIComponent</span>(value));</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> f(test)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12ã€äºŒå‰æ ‘"><a href="#12ã€äºŒå‰æ ‘" class="headerlink" title="12ã€äºŒå‰æ ‘"></a>12ã€äºŒå‰æ ‘</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1ã€æ±‚äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNodenum</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> getNodenum(root.left) + getNodenum(root.right) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€æ±‚äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maxDepth</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(maxDepth(root.left), maxDepth(root.right)) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.äºŒå‰æ ‘çš„æœ€å°æ·±åº¦</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">minDepth</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">let</span> left = minDepth(root.left);</span><br><span class="line">  <span class="keyword">let</span> right = minDepth(root.right);</span><br><span class="line">  <span class="keyword">return</span> left == <span class="number">0</span> || right == <span class="number">0</span> ? left + right + <span class="number">1</span> : <span class="built_in">Math</span>.min(left, right) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.å…ˆåºéå†ï¼ˆé€’å½’ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">preroot</span>(<span class="params">root, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">    callback(root.key);</span><br><span class="line">    preroot(root.left, callback);</span><br><span class="line">    preroot(root.right, callback);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…ˆåºéå†ï¼ˆéé€’å½’ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">preroot</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> stack = [],</span><br><span class="line">    result = [];</span><br><span class="line">  <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">    stack.push(root);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (stack.length != <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> temp = stack.pop();</span><br><span class="line">    result.push(temp.key);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (temp.left != <span class="literal">null</span>) &#123;</span><br><span class="line">      stack.push(temp.left);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (temp.right != <span class="literal">null</span>) &#123;</span><br><span class="line">      stack.push(temp.right);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//5 ä¸­åºéå†ï¼ˆé€’å½’ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">middleroot</span>(<span class="params">root, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">    preroot(root.left, callback);</span><br><span class="line">    callback(root.key);</span><br><span class="line">    preroot(root.right, callback);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//5.1 ä¸­åºéå†ï¼ˆéé€’å½’ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">middleroot</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> stack = [],</span><br><span class="line">    result = [];</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">while</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">      stack.push(root);</span><br><span class="line">      root = root.left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (stack.length == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> temp = stack.pop();</span><br><span class="line">    result.push(temp.key);</span><br><span class="line">    stack.push(temp.right);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ†å±‚éå†ï¼ˆé€’å½’ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bfs</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> queue = [],</span><br><span class="line">    result = [];</span><br><span class="line">  <span class="keyword">let</span> pointer = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">    queue.push(root);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> bfsFun = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> temp = queue[pointer];</span><br><span class="line">    <span class="keyword">if</span> (temp) &#123;</span><br><span class="line">      result.push(temp.key);</span><br><span class="line">      <span class="keyword">if</span> (temp.left) &#123;</span><br><span class="line">        queue.push(temp.left);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (temp.right) &#123;</span><br><span class="line">        queue.push(temp.right);</span><br><span class="line">      &#125;</span><br><span class="line">      pointer++;</span><br><span class="line">      bfsFun();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  bfsFun();</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ†å±‚éå†ï¼ˆéé€’å½’ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bfs</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> queue = [],</span><br><span class="line">    result = [];</span><br><span class="line">  <span class="keyword">if</span> (root !== <span class="literal">null</span>) &#123;</span><br><span class="line">    queue.push(root);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> pointer = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (pointer &lt; queue.length) &#123;</span><br><span class="line">    <span class="keyword">let</span> temp = queue[pointer++];</span><br><span class="line">    result.push(temp.key);</span><br><span class="line">    temp.left &amp;&amp; queue.push(temp.left);</span><br><span class="line">    temp.right &amp;&amp; queue.push(temp.right);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰ä¹‹å­—å½¢é¡ºåºæ‰“å°äºŒå‰æ ‘</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">zhiRoot</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> stack1 = [],</span><br><span class="line">    stack2 = [],</span><br><span class="line">    result = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">    stack1.push(root);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (stack1.length != <span class="number">0</span> || stack2.length != <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> list = [];</span><br><span class="line">    <span class="keyword">if</span> (flag % <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">while</span> (stack1.length != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp = stack2.pop();</span><br><span class="line">        list.push(temp.key);</span><br><span class="line">        temp.left &amp;&amp; stack2.push(temp.left);</span><br><span class="line">        temp.right &amp;&amp; stack2.push(temp.right);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">while</span> (stack2.length != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp = stack1.pop();</span><br><span class="line">        list.push(temp.key);</span><br><span class="line">        temp.left &amp;&amp; stack1.push(temp.left);</span><br><span class="line">        temp.right &amp;&amp; stack1.push(temp.right);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    i++;</span><br><span class="line">    result.push(list);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Print</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> stack1 = [];</span><br><span class="line">  <span class="keyword">const</span> stack2 = [];</span><br><span class="line"></span><br><span class="line">  stack1.push(root);</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (stack1.length !== <span class="number">0</span> || stack2.length !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> list = [];</span><br><span class="line">    <span class="keyword">if</span> (flag % <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">while</span> (stack1.length !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> temp = stack2.pop();</span><br><span class="line">        list.push(temp.val);</span><br><span class="line">        temp.left &amp;&amp; stack2.push(temp.left);</span><br><span class="line">        temp.right &amp;&amp; stack2.push(temp.right);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">while</span> (stack2.length !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> temp = stack1.pop();</span><br><span class="line">        list.push(tmp.val);</span><br><span class="line">        temp.left &amp;&amp; stack1.push(temp.left);</span><br><span class="line">        temp.right &amp;&amp; stack1.push(temp.right);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    i++;</span><br><span class="line">    result.push(list);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//7ã€æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„èŠ‚ç‚¹ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getknum</span>(<span class="params">root, k</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span> || k &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (root !== <span class="literal">null</span> &amp;&amp; k == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> getknum(root.left, k - <span class="number">1</span>) + getknum(root.right, k - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//8.æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„å¶å­èŠ‚ç‚¹ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getksonnum</span>(<span class="params">root, k</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span> || k &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (root != <span class="literal">null</span> &amp;&amp; k == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (root.left == <span class="literal">null</span> &amp;&amp; root.right == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> getksonnum(root, k - <span class="number">1</span>) + getksonnum(root, k - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åè½¬äºŒå‰æ ‘</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverseRoot</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> temp = root.left;</span><br><span class="line">  root.left = reverseRoot(root.right);</span><br><span class="line">  root.right = reverseRoot(temp);</span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚äºŒå‰æ ‘çš„ç›´å¾„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">longerlength</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> path = <span class="number">0</span>;</span><br><span class="line">  getlongerlength(root);</span><br><span class="line">  <span class="keyword">return</span> path;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getlongerlength</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> left = longerlength(root.left);</span><br><span class="line">    <span class="keyword">let</span> right = longerlength(root.right);</span><br><span class="line">    path = <span class="built_in">Math</span>.max(path, left + right);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.max(left, right) + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPath</span>(<span class="params">root, target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">if</span> (root) &#123;</span><br><span class="line">    findPath(root, target, [], <span class="number">0</span>, result);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">findPath</span>(<span class="params">root, target, stack, sum, result</span>) </span>&#123;</span><br><span class="line">    stack.push(root.key);</span><br><span class="line">    sum += root.key;</span><br><span class="line">    <span class="keyword">if</span> (!root.left &amp;&amp; !root.right &amp;&amp; sum === target) &#123;</span><br><span class="line">      result.push(stack.slice(<span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root.left) &#123;</span><br><span class="line">      findPath(root.left, target, stack, sum, result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root.right) &#123;</span><br><span class="line">      findPath(root.right, target, stack, sum, result);</span><br><span class="line">    &#125;</span><br><span class="line">    stack.pop();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»™å®šä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œè¯·æ‰¾å‡ºå…¶ä¸­çš„ç¬¬kå°çš„ç»“ç‚¹ã€‚(ä¸­åºéå†+ kå°)</span></span><br></pre></td></tr></table></figure>

<h3 id="13ã€å®ç°ä¸€ä¸ªé“¾è¡¨"><a href="#13ã€å®ç°ä¸€ä¸ªé“¾è¡¨" class="headerlink" title="13ã€å®ç°ä¸€ä¸ªé“¾è¡¨"></a>13ã€å®ç°ä¸€ä¸ªé“¾è¡¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">linkedList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">node</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.data = data;</span><br><span class="line">    <span class="built_in">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">this</span>.head = <span class="literal">null</span>;</span><br><span class="line">  <span class="built_in">this</span>.length = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  linkedList.prototype.append = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> newnode = <span class="keyword">new</span> node(data);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.head == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="built_in">this</span>.head = newnode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> current = <span class="built_in">this</span>.head;</span><br><span class="line">      <span class="keyword">while</span> (current.next) &#123;</span><br><span class="line">        current = current.next;</span><br><span class="line">      &#125;</span><br><span class="line">      current.next = newnode;</span><br><span class="line">      <span class="built_in">this</span>.length++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  linkedList.prototype.find = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="built_in">this</span>.head;</span><br><span class="line">    <span class="keyword">while</span> (current.next) &#123;</span><br><span class="line">      <span class="keyword">if</span> (current.data === data) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      current = current.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> current;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  linkedList.prototype.fixed = <span class="function"><span class="keyword">function</span> (<span class="params">data, newdata</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="built_in">this</span>.find(data);</span><br><span class="line">    current.data = newdata;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  linkedList.prototype.prefind = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="built_in">this</span>.head;</span><br><span class="line">    <span class="keyword">while</span> (current.next) &#123;</span><br><span class="line">      <span class="keyword">if</span> (current.next.data === data) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      current = current.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> current;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  linkedList.prototype.delete = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.head.data === data) &#123;</span><br><span class="line">      <span class="built_in">this</span>.head = <span class="built_in">this</span>.head.next;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> prenode = <span class="built_in">this</span>.prefind(data);</span><br><span class="line">    <span class="keyword">let</span> current = <span class="built_in">this</span>.find(data);</span><br><span class="line">    prenode = current.next;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  linkedList.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="built_in">this</span>.head;</span><br><span class="line">    <span class="keyword">while</span> (current) &#123;</span><br><span class="line">      result += current.data + <span class="string">&quot;-&gt;&quot;</span>;</span><br><span class="line">      current = current.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> linkedList();</span><br><span class="line">a.append(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">a.append(<span class="string">&quot;abcd&quot;</span>);</span><br><span class="line">a.append(<span class="string">&quot;abcde&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.toString());</span><br><span class="line"></span><br><span class="line">a.fixed(<span class="string">&quot;abc&quot;</span>, <span class="number">11111</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.toString());</span><br></pre></td></tr></table></figure>

<h3 id="14ã€å“ˆå¸Œè¡¨"><a href="#14ã€å“ˆå¸Œè¡¨" class="headerlink" title="14ã€å“ˆå¸Œè¡¨"></a>14ã€å“ˆå¸Œè¡¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é“¾åœ°å€æ³•</span></span><br><span class="line"><span class="comment">//è£…è½½å› å­ï¼ˆ0.25ï¼Œ0.75ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HashTable</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//å±æ€§</span></span><br><span class="line">  <span class="built_in">this</span>.storage = []; <span class="comment">//å­˜å‚¨çš„ä½ç½®</span></span><br><span class="line">  <span class="built_in">this</span>.count = <span class="number">0</span>; <span class="comment">// æ•°ç›®</span></span><br><span class="line">  <span class="built_in">this</span>.limit = <span class="number">7</span>; <span class="comment">//æœ€ç»ˆé™åˆ¶æ•°ç»„çš„å¤§å°</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// å“ˆå¸Œå‡½æ•°</span></span><br><span class="line">  HashTable.prototype.hashFunc = <span class="function"><span class="keyword">function</span> (<span class="params">str, size</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1ã€å®šä¹‰ hashCodeå˜é‡</span></span><br><span class="line">    <span class="keyword">let</span> hashCode = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; str.length; i++) &#123;</span><br><span class="line">      <span class="comment">//2ã€éœçº³ç®—æ³•ï¼Œæ¥è®¡ç®—hashCodeçš„å€¼</span></span><br><span class="line">      hashCode = <span class="number">37</span> * hashCode + str.charCodeAt(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3ã€å–ä½™æ“ä½œ</span></span><br><span class="line">    <span class="keyword">let</span> index = hashCode % size;</span><br><span class="line">    <span class="keyword">return</span> index;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ’å…¥&amp;ä¿®æ”¹æ“ä½œ</span></span><br><span class="line">  HashTable.prototype.put = <span class="function"><span class="keyword">function</span> (<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.æ ¹æ®keyè·å–å¯¹åº”çš„ index</span></span><br><span class="line">    <span class="keyword">let</span> index = <span class="built_in">this</span>.hashFunc(key, <span class="built_in">this</span>.limit);</span><br><span class="line">    <span class="comment">// 2ã€æ ¹æ® index å–å‡ºå¯¹åº”çš„ bucket</span></span><br><span class="line">    <span class="keyword">let</span> bucket = <span class="built_in">this</span>.storage[index];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3ã€åˆ¤æ–­ bucketæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (bucket == <span class="literal">null</span>) &#123;</span><br><span class="line">      bucket = [];</span><br><span class="line">      <span class="built_in">this</span>.storage[index] = bucket;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//4ã€åˆ¤æ–­æ˜¯å¦æ˜¯ä¿®æ”¹æ•°æ®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bucket.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> tuple = bucket[i];</span><br><span class="line">      <span class="keyword">if</span> (tuple[<span class="number">0</span>] == key) &#123;</span><br><span class="line">        tuple[<span class="number">1</span>] = value;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//5.æ·»åŠ æ“ä½œ</span></span><br><span class="line">    bucket.push([key, value]);</span><br><span class="line">    <span class="built_in">this</span>.count++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.count &gt; <span class="built_in">this</span>.limit * <span class="number">0.75</span>) &#123;</span><br><span class="line">      <span class="built_in">this</span>.resize(<span class="built_in">this</span>.limit * <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è·å–æ“ä½œ</span></span><br><span class="line">  HashTable.prototype.get = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="built_in">this</span>.hashFunc(key, <span class="built_in">this</span>.limit);</span><br><span class="line">    <span class="keyword">let</span> bucket = <span class="built_in">this</span>.storage[index];</span><br><span class="line">    <span class="keyword">if</span> (bucket == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bucket.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> tuple = bucket[i];</span><br><span class="line">      <span class="keyword">if</span> (tuple[<span class="number">0</span>] === key) &#123;</span><br><span class="line">        <span class="keyword">return</span> tuple[<span class="number">1</span>];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  HashTable.prototype.remove = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="built_in">this</span>.hashFunc(key, <span class="built_in">this</span>.limit);</span><br><span class="line">    <span class="keyword">let</span> bucket = <span class="built_in">this</span>.storage[index];</span><br><span class="line">    <span class="keyword">if</span> (bucket == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bucket.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> tuple = bucket[i];</span><br><span class="line">      <span class="keyword">if</span> (tuple[<span class="number">0</span>] == key) &#123;</span><br><span class="line">        bucket.splice(i, <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">this</span>.count--;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç¼©å°å®¹é‡</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.limit &gt; <span class="number">7</span> &amp;&amp; <span class="built_in">this</span>.count &lt; <span class="built_in">this</span>.limit * <span class="number">0.75</span>) &#123;</span><br><span class="line">          <span class="built_in">this</span>.resize(<span class="built_in">Math</span>.floor(<span class="built_in">this</span>.limit / <span class="number">2</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> tuple[<span class="number">1</span>];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å“ˆå¸Œè¡¨çš„æ‰©å®¹ã€</span></span><br><span class="line">  HashTable.prototype.resize = <span class="function"><span class="keyword">function</span> (<span class="params">newLimit</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.ä¿å­˜æ—§çš„æ•°æ®å†…å®¹</span></span><br><span class="line">    <span class="keyword">let</span> oldStorage = <span class="built_in">this</span>.storage;</span><br><span class="line">    <span class="comment">//2. é‡ç½®æ‰€æœ‰çš„å±æ€§</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.storage = [];</span><br><span class="line">    <span class="built_in">this</span>.count = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">this</span>.limit = newLimit;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.éå† oldStorage æ‰€æœ‰çš„ bucket</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; oldStorage.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> bucket = oldStorage[i];</span><br><span class="line">      <span class="keyword">if</span> (bucket == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; bucket.length; j++) &#123;</span><br><span class="line">        <span class="keyword">let</span> tuple = bucket[i];</span><br><span class="line">        <span class="built_in">this</span>.put(tuple[<span class="number">0</span>], tuple[<span class="number">1</span>]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> HashTable();</span><br><span class="line">a.put(<span class="string">&quot;zc&quot;</span>, <span class="string">&quot;15&quot;</span>);</span><br><span class="line">a.put(<span class="string">&quot;zc1&quot;</span>, <span class="string">&quot;115&quot;</span>);</span><br><span class="line">a.put(<span class="string">&quot;z1&quot;</span>, <span class="string">&quot;115&quot;</span>);</span><br><span class="line">a.put(<span class="string">&quot;asd&quot;</span>, <span class="string">&quot;115&quot;</span>);</span><br><span class="line">a.put(<span class="string">&quot;wew&quot;</span>, <span class="string">&quot;115&quot;</span>);</span><br><span class="line">a.remove(<span class="string">&quot;wew&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.get(<span class="string">&quot;wew&quot;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="15ã€å›¾"><a href="#15ã€å›¾" class="headerlink" title="15ã€å›¾"></a>15ã€å›¾</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//æ ˆä¸­çš„å±æ€§</span></span><br><span class="line">  <span class="built_in">this</span>.items = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//1.å‹å…¥æ ˆpush()</span></span><br><span class="line">  Queue.prototype.enqueue = <span class="function"><span class="keyword">function</span> (<span class="params">...element</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.items.push(...element);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//2.ä»é˜Ÿåˆ—ä¸­åˆ é™¤å‰ç«¯å…ƒç´ </span></span><br><span class="line">  Queue.prototype.dequeue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.items.shift();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//3.æŸ¥çœ‹ä¸€ä¸‹å‰ç«¯å…ƒç´ </span></span><br><span class="line">  Queue.prototype.front = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.items[<span class="number">0</span>];</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//4.åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">  Queue.prototype.isEmpty = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.items.length === <span class="number">0</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//5.è·å–æ ˆä¸­å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line">  Queue.prototype.size = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.items.length;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//6.toStringæ–¹æ³•</span></span><br><span class="line">  Queue.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.items.toString().split(<span class="string">&quot;,&quot;</span>).join(<span class="string">&quot; &quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Graph</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//å±æ€§ï¼š é¡¶ç‚¹ï¼ˆæ•°ç»„ï¼‰/è¾¹ï¼ˆå­—å…¸ï¼‰</span></span><br><span class="line">  <span class="built_in">this</span>.vertexes = []; <span class="comment">//é¡¶ç‚¹</span></span><br><span class="line">  <span class="built_in">this</span>.edges = <span class="keyword">new</span> <span class="built_in">Map</span>(); <span class="comment">//è¾¹</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ–¹æ³•</span></span><br><span class="line">  <span class="comment">//å¢åŠ å¯¹åº”é¡¶ç‚¹çš„æ–¹æ³•</span></span><br><span class="line">  Graph.prototype.addVertex = <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.vertexes.push(v);</span><br><span class="line">    <span class="built_in">this</span>.edges.set(v, []);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  Graph.prototype.addEdge = <span class="function"><span class="keyword">function</span> (<span class="params">v1, v2</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.edges.get(v1).push(v2);</span><br><span class="line">    <span class="built_in">this</span>.edges.get(v2).push(v1);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å®ç°toString æ–¹æ³•</span></span><br><span class="line">  Graph.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰å­—ç¬¦è½¬ï¼Œä¿å­˜æœ€ç»ˆçš„ç»“æ„</span></span><br><span class="line">    <span class="keyword">let</span> resultString = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.vertexes.length; i++) &#123;</span><br><span class="line">      resultString += <span class="built_in">this</span>.vertexes[i] + <span class="string">&quot;-&gt;&quot;</span>;</span><br><span class="line">      <span class="keyword">let</span> vEdges = <span class="built_in">this</span>.edges.get(<span class="built_in">this</span>.vertexes[i]);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; vEdges.length; j++) &#123;</span><br><span class="line">        resultString += vEdges[j] + <span class="string">&quot; &quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      resultString += <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> resultString;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å›¾çš„éå†</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//åˆå§‹åŒ–çŠ¶æ€é¢œè‰²</span></span><br><span class="line">  Graph.prototype.initializeColor = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> colors = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.vertexes.length; i++) &#123;</span><br><span class="line">      colors[<span class="built_in">this</span>.vertexes[i]] = <span class="string">&quot;white&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> colors;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å¹¿åº¦ä¼˜å…ˆæœç´¢ç®—æ³•(BFS)  åŸºäºé˜Ÿåˆ—å®Œæˆ</span></span><br><span class="line">  Graph.prototype.bfs = <span class="function"><span class="keyword">function</span> (<span class="params">initV, handler</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.åˆå§‹åŒ–é¢œè‰²</span></span><br><span class="line">    <span class="keyword">let</span> colors = <span class="built_in">this</span>.initializeColor();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">let</span> queue = <span class="keyword">new</span> Queue();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.å°†é¡¶ç‚¹åŠ å…¥é˜Ÿåˆ—ä¸­</span></span><br><span class="line">    queue.enqueue(initV);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.å¾ªç¯ä»é˜Ÿåˆ—ä¸­å–å‡ºå…ƒç´ </span></span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">      <span class="comment">// 4.1ä»é˜Ÿåˆ—å–å‡ºä¸€ä¸ªé¡¶ç‚¹</span></span><br><span class="line">      <span class="keyword">let</span> v = queue.dequeue();</span><br><span class="line"></span><br><span class="line">      <span class="comment">//4.2 è·å–å’Œé¡¶ç‚¹ç›¸è¿çš„å¦å¤–é¡¶ç‚¹</span></span><br><span class="line">      <span class="keyword">let</span> vList = <span class="built_in">this</span>.edges.get(v);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//4.3 å°†vçš„é¢œè‰²è®¾ç½®ä¸ºç°è‰²</span></span><br><span class="line">      colors[v] = <span class="string">&quot;gray&quot;</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//4.4  éå†æ‰€æœ‰çš„é¡¶ç‚¹ï¼Œå¹¶ä¸”åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; vList.length; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> e = vList[i];</span><br><span class="line">        <span class="keyword">if</span> (colors[e] == <span class="string">&quot;white&quot;</span>) &#123;</span><br><span class="line">          colors[e] = <span class="string">&quot;gray&quot;</span>;</span><br><span class="line">          queue.enqueue(e);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//4.5 è®¿é—®é¡¶ç‚¹</span></span><br><span class="line">      handler(v);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//4.6 å°†é¡¶ç‚¹è®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">      colors[v] = <span class="string">&quot;black&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å¹¿åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ï¼ˆDFSï¼‰</span></span><br><span class="line">  Graph.prototype.dfs = <span class="function"><span class="keyword">function</span> (<span class="params">initV, handler</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> colors = <span class="built_in">this</span>.initializeColor();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€’å½’è®¿é—®</span></span><br><span class="line">    <span class="built_in">this</span>.dfsVisit(initV, colors, handler);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  Graph.prototype.dfsVisit = <span class="function"><span class="keyword">function</span> (<span class="params">v, colors, handler</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.å°†é¢œè‰²è®¾ç½®ä¸ºç°è‰²</span></span><br><span class="line">    colors[v] = <span class="string">&quot;gray&quot;</span>;</span><br><span class="line">    <span class="comment">//2.å¤„ç†VèŠ‚ç‚¹</span></span><br><span class="line">    handler(v);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.è®¿é—®vç›¸è¿çš„é¡¶ç‚¹</span></span><br><span class="line">    <span class="keyword">let</span> vList = <span class="built_in">this</span>.edges.get(v);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; vList.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> e = vList[i];</span><br><span class="line">      <span class="keyword">if</span> (colors[e] === <span class="string">&quot;white&quot;</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.dfsVisit(e, colors, handler);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.å°†vè®¾ç½®ä¸ºé»‘è‰²</span></span><br><span class="line">    colors[v] = <span class="string">&quot;black&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16ã€å‡ ç§æ’åºç®—æ³•çš„å®ç°"><a href="#16ã€å‡ ç§æ’åºç®—æ³•çš„å®ç°" class="headerlink" title="16ã€å‡ ç§æ’åºç®—æ³•çš„å®ç°"></a>16ã€å‡ ç§æ’åºç®—æ³•çš„å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ArrayList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.array = [];</span><br><span class="line"></span><br><span class="line">  ArrayList.prototype.insert = <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.array.push(item);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  ArrayList.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.array.join(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  ArrayList.prototype.swap = <span class="function"><span class="keyword">function</span> (<span class="params">m, n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> temp = <span class="built_in">this</span>.array[m];</span><br><span class="line">    <span class="built_in">this</span>.array[m] = <span class="built_in">this</span>.array[n];</span><br><span class="line">    <span class="built_in">this</span>.array[n] = temp;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//å®ç°æ’åºç®—æ³•</span></span><br><span class="line">  <span class="comment">//å†’æ³¡æ’åº</span></span><br><span class="line">  ArrayList.prototype.bubbles = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.array === <span class="literal">null</span> || <span class="built_in">this</span>.array.length &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="built_in">this</span>.array;</span><br><span class="line">    <span class="keyword">let</span> length = <span class="built_in">this</span>.array.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.array[j] &gt; <span class="built_in">this</span>.array[j + <span class="number">1</span>]) &#123;</span><br><span class="line">          <span class="built_in">this</span>.swap(j, j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//é€‰æ‹©æ’åº</span></span><br><span class="line">  ArrayList.prototype.selectSort = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.array === <span class="literal">null</span> || <span class="built_in">this</span>.array.length &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="built_in">this</span>.array;</span><br><span class="line">    <span class="keyword">let</span> length = <span class="built_in">this</span>.array.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> min = i;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; length; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.array[min] &gt; <span class="built_in">this</span>.array[j]) &#123;</span><br><span class="line">          min = j;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.swap(min, i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ’å…¥æ’åº</span></span><br><span class="line">  ArrayList.prototype.insertSort = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.array === <span class="literal">null</span> || <span class="built_in">this</span>.array.length &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="built_in">this</span>.array;</span><br><span class="line">    <span class="keyword">let</span> length = <span class="built_in">this</span>.array.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; length; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> temp = <span class="built_in">this</span>.array[i];</span><br><span class="line">      <span class="keyword">let</span> j = i;</span><br><span class="line">      <span class="keyword">while</span> (<span class="built_in">this</span>.array[j - <span class="number">1</span>] &gt; temp &amp;&amp; j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.array[j] = <span class="built_in">this</span>.array[j - <span class="number">1</span>];</span><br><span class="line">        j--;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.array[j] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//é«˜çº§æ’åº</span></span><br><span class="line">  <span class="comment">//å¸Œå°”æ’åº (å¯¹æ’å…¥æ’åºçš„å‡çº§)</span></span><br><span class="line">  ArrayList.prototype.shellSort = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.array === <span class="literal">null</span> || <span class="built_in">this</span>.array.length &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="built_in">this</span>.array;</span><br><span class="line">    <span class="keyword">let</span> length = <span class="built_in">this</span>.array.length;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–å¢é‡</span></span><br><span class="line">    <span class="keyword">var</span> gap = <span class="built_in">Math</span>.floor(length / <span class="number">2</span>);</span><br><span class="line">    <span class="comment">// whlieå¾ªç¯</span></span><br><span class="line">    <span class="keyword">while</span> (gap &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = gap; i &lt; length; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp = <span class="built_in">this</span>.array[i];</span><br><span class="line">        <span class="keyword">let</span> j = i;</span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">this</span>.array[j - gap] &gt; temp &amp;&amp; j &gt; gap - <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="built_in">this</span>.array[j] = <span class="built_in">this</span>.array[j - gap];</span><br><span class="line">          j -= gap;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.array[j] = temp;</span><br><span class="line">      &#125;</span><br><span class="line">      gap = <span class="built_in">Math</span>.floor(gap / <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¿«æ’</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">median</span>(<span class="params">arr, left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> center = <span class="built_in">Math</span>.floor(left + (right - left) / <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">if</span> (arr[left] &gt; arr[center]) &#123;</span><br><span class="line">    swap(arr, left, right);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (arr[center] &gt; arr[right]) &#123;</span><br><span class="line">    swap(arr, center, right);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (arr[left] &gt; arr[right]) &#123;</span><br><span class="line">    swap(arr, left, right);</span><br><span class="line">  &#125;</span><br><span class="line">  swap(center, right - <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> arr[right - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, m, n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> temp = arr[m];</span><br><span class="line">  arr[m] = arr[n];</span><br><span class="line">  arr[n] = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (arr.length &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> quickSortFun(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSortFun</span>(<span class="params">arr, left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">    <span class="keyword">let</span> pivot = median(arr, left, right);</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> j = right - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">while</span> (arr[++i] &lt; pivot) &#123;&#125;</span><br><span class="line">      <span class="keyword">while</span> (arr[--j] &gt; pivot &amp;&amp; j &gt; left) &#123;&#125;</span><br><span class="line">      <span class="keyword">if</span> (i &lt; j) &#123;</span><br><span class="line">        swap(arr, i, j);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; right) &#123;</span><br><span class="line">      swap(arr, i, right - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    quickSortFun(arr, left, i - <span class="number">1</span>);</span><br><span class="line">    quickSortFun(arr, i + <span class="number">1</span>, right);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(quickSort([<span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>]));</span><br></pre></td></tr></table></figure>

<h3 id="17ã€æ‰‹å†™è¿­ä»£å™¨"><a href="#17ã€æ‰‹å†™è¿­ä»£å™¨" class="headerlink" title="17ã€æ‰‹å†™è¿­ä»£å™¨"></a>17ã€æ‰‹å†™è¿­ä»£å™¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> it = makeIterator([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(it.next());</span><br><span class="line"><span class="built_in">console</span>.log(it.next());</span><br><span class="line"><span class="built_in">console</span>.log(it.next());</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeIterator</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> nextindex = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    next: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (nextindex &lt; array.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">value</span>: array[nextindex++], <span class="attr">done</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="18ã€æœ€å¤§è¿ç»­å­åºåˆ—"><a href="#18ã€æœ€å¤§è¿ç»­å­åºåˆ—" class="headerlink" title="18ã€æœ€å¤§è¿ç»­å­åºåˆ—"></a>18ã€æœ€å¤§è¿ç»­å­åºåˆ—</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">-5</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">-4</span>, <span class="number">15</span>, <span class="number">-8</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// function getNum(arr) &#123;</span></span><br><span class="line"><span class="comment">//     let length = arr.length</span></span><br><span class="line"><span class="comment">//     let maxmun=0</span></span><br><span class="line"><span class="comment">//     for (let i = 0; i &lt;length ; i++) &#123;</span></span><br><span class="line"><span class="comment">//         let sum=arr[i]</span></span><br><span class="line"><span class="comment">//         for (let j = i+1; j &lt; length; j++) &#123;</span></span><br><span class="line"><span class="comment">//             sum+=arr[j]</span></span><br><span class="line"><span class="comment">//             if(sum&gt;maxmun)&#123;</span></span><br><span class="line"><span class="comment">//                 maxmun = sum</span></span><br><span class="line"><span class="comment">//             &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//         &#125;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//     return maxmun</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNum</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> max = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="keyword">if</span> (sum &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      sum = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    sum += num;</span><br><span class="line">    max = <span class="built_in">Math</span>.max(max, sum);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getNum(arr));</span><br></pre></td></tr></table></figure>

<h3 id="19ã€å®ç°ä¸€ä¸ª-EventListener-ç±»ï¼ŒåŒ…å«-onï¼Œoffï¼Œemit-æ–¹æ³•"><a href="#19ã€å®ç°ä¸€ä¸ª-EventListener-ç±»ï¼ŒåŒ…å«-onï¼Œoffï¼Œemit-æ–¹æ³•" class="headerlink" title="19ã€å®ç°ä¸€ä¸ª EventListener ç±»ï¼ŒåŒ…å« onï¼Œoffï¼Œemit æ–¹æ³•"></a>19ã€å®ç°ä¸€ä¸ª EventListener ç±»ï¼ŒåŒ…å« onï¼Œoffï¼Œemit æ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®ç°ä¸€ä¸ªEventListenerç±»ï¼ŒåŒ…å«onï¼Œoffï¼Œemitæ–¹æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventListener</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">this</span>.list = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  on(key, fn) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.list[key]) &#123;</span><br><span class="line">      <span class="built_in">this</span>.list[key] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.list[key].push(fn);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  emit(key, ...args) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> fn <span class="keyword">of</span> <span class="built_in">this</span>.list[key]) &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  off(key, fn) &#123;</span><br><span class="line">    <span class="keyword">let</span> fnlist = <span class="built_in">this</span>.list[key];</span><br><span class="line">    <span class="keyword">if</span> (!fnlist) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (!fn) &#123;</span><br><span class="line">      fnlist.length = <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fnlist.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item === fn) &#123;</span><br><span class="line">          fnlist.splice(index, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj1 = <span class="keyword">new</span> EventListener();</span><br><span class="line"></span><br><span class="line">obj1.on(<span class="string">&quot;work&quot;</span>, <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`æˆ‘æ˜¯<span class="subst">$&#123;value&#125;</span>å•Š`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">obj1.on(<span class="string">&quot;eat&quot;</span>, <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`æˆ‘åœ¨<span class="subst">$&#123;value&#125;</span>å•Š`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">obj1.emit(<span class="string">&quot;work&quot;</span>, <span class="string">&quot;zc&quot;</span>);</span><br><span class="line"></span><br><span class="line">obj1.off(<span class="string">&quot;eat&quot;</span>);</span><br><span class="line"></span><br><span class="line">obj1.emit(<span class="string">&quot;eat&quot;</span>, <span class="string">&quot;åƒè¥¿ç“œ&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="20ã€sleep-å‡½æ•°"><a href="#20ã€sleep-å‡½æ•°" class="headerlink" title="20ã€sleep å‡½æ•°"></a>20ã€sleep å‡½æ•°</h3><blockquote>
<p>ç”¨ promise å†™ä¸€ä¸ª delay å‡½æ•°</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(resolve, time);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sleep(<span class="number">1000</span>).then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;11111&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="21ã€æ‰‹å†™æ–æ³¢é‚£å¥‘"><a href="#21ã€æ‰‹å†™æ–æ³¢é‚£å¥‘" class="headerlink" title="21ã€æ‰‹å†™æ–æ³¢é‚£å¥‘"></a>21ã€æ‰‹å†™æ–æ³¢é‚£å¥‘</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getnum</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (num &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> getnum(num - <span class="number">1</span>) + getnum(num - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getnum(<span class="number">2</span>));</span><br><span class="line"><span class="comment">// ----------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ¨æ€è§„åˆ’</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getnum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> temp = [];</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">1</span> || n == <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    temp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    temp[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">3</span>; i &lt; n; i++) &#123;</span><br><span class="line">      temp[i] = temp[i - <span class="number">1</span>] + temp[i - <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> temp[i - <span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="22ã€åªåŒ…å«â€™-â€˜-â€˜-â€™-â€˜-â€˜-â€˜-â€™-â€˜-â€˜-â€˜-â€™-çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆã€‚"><a href="#22ã€åªåŒ…å«â€™-â€˜-â€˜-â€™-â€˜-â€˜-â€˜-â€™-â€˜-â€˜-â€˜-â€™-çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆã€‚" class="headerlink" title="22ã€åªåŒ…å«â€™(â€˜, â€˜)â€™, â€˜[â€˜, â€˜]â€™, â€˜{â€˜, â€˜}â€™ çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆã€‚"></a>22ã€åªåŒ…å«â€™(â€˜, â€˜)â€™, â€˜[â€˜, â€˜]â€™, â€˜{â€˜, â€˜}â€™ çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆã€‚</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isValid = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> rightSymbols = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; s.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (s[i] == <span class="string">&quot;(&quot;</span>) &#123;</span><br><span class="line">      rightSymbols.push(<span class="string">&quot;)&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">&quot;&#123;&quot;</span>) &#123;</span><br><span class="line">      rightSymbols.push(<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">&quot;[&quot;</span>) &#123;</span><br><span class="line">      rightSymbols.push(<span class="string">&quot;]&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (rightSymbols.pop() != s[i]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> !rightSymbols.length;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="23ã€æ•°ç»„ä¸­åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"><a href="#23ã€æ•°ç»„ä¸­åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—" class="headerlink" title="23ã€æ•°ç»„ä¸­åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"></a>23ã€æ•°ç»„ä¸­åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"><span class="keyword">const</span> p = arr.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a ^ b;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(p);</span><br></pre></td></tr></table></figure>

<h3 id="24ã€æ•°ç»„æœ€å¤§æ·±åº¦"><a href="#24ã€æ•°ç»„æœ€å¤§æ·±åº¦" class="headerlink" title="24ã€æ•°ç»„æœ€å¤§æ·±åº¦"></a>24ã€æ•°ç»„æœ€å¤§æ·±åº¦</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, [<span class="number">1</span>, [<span class="number">3</span>], <span class="number">2</span>], <span class="number">2</span>, [<span class="number">1</span>], <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDep</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> p = <span class="literal">false</span>;</span><br><span class="line">  p = arr.some(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item.length &gt; <span class="number">0</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (p) &#123;</span><br><span class="line">    count++;</span><br><span class="line">    getDep(arr.flat());</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getDep(arr));</span><br></pre></td></tr></table></figure>

<h3 id="25ã€é€’å½’æ•°ç»„æ‰å¹³åŒ–"><a href="#25ã€é€’å½’æ•°ç»„æ‰å¹³åŒ–" class="headerlink" title="25ã€é€’å½’æ•°ç»„æ‰å¹³åŒ–"></a>25ã€é€’å½’æ•°ç»„æ‰å¹³åŒ–</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">2</span>, [<span class="number">1</span>], <span class="number">2</span>]];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wrap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ret = [];</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">      <span class="keyword">if</span> (item.constructor === <span class="built_in">Array</span>) &#123;</span><br><span class="line">        ret.concat(flatten(item));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        ret.push(item);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(wrap()(arr));</span><br></pre></td></tr></table></figure>

<h3 id="26ã€æ¨¡æ‹Ÿ-js-ç²¾åº¦ä¸¢å¤±é—®é¢˜"><a href="#26ã€æ¨¡æ‹Ÿ-js-ç²¾åº¦ä¸¢å¤±é—®é¢˜" class="headerlink" title="26ã€æ¨¡æ‹Ÿ js ç²¾åº¦ä¸¢å¤±é—®é¢˜"></a>26ã€æ¨¡æ‹Ÿ js ç²¾åº¦ä¸¢å¤±é—®é¢˜</h3><blockquote>
<p>IEEE 754 æ ‡å‡†</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> num1Digits = (num1.toString().split(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>] || <span class="string">&quot;&quot;</span>).length;</span><br><span class="line">  <span class="keyword">const</span> num2Digits = (num2.toString().split(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>] || <span class="string">&quot;&quot;</span>).length;</span><br><span class="line">  <span class="keyword">const</span> baseNum = <span class="built_in">Math</span>.pow(<span class="number">10</span>, <span class="built_in">Math</span>.max(num1Digits, num2Digits));</span><br><span class="line">  <span class="keyword">return</span> (num1 * baseNum + num2 * baseNum) / baseNum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">0.1</span>, <span class="number">0.2</span>));</span><br></pre></td></tr></table></figure>

<h3 id="27ã€å•ä¾‹æ¨¡å¼"><a href="#27ã€å•ä¾‹æ¨¡å¼" class="headerlink" title="27ã€å•ä¾‹æ¨¡å¼"></a>27ã€å•ä¾‹æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•ä¾‹æ¨¡å¼ä¸é€æ˜</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">singleTon</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.instance = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">singleTon.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">singleTon.getInstance = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">this</span>.instance) &#123;</span><br><span class="line">    <span class="built_in">this</span>.instance = <span class="keyword">new</span> singleTon(name);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.instance;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = singleTon.getInstance(<span class="string">&quot;bbbbb&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> a = singleTon.getInstance(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ----------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å•ä¾‹æ¨¡å¼ä¸é€æ˜ï¼ˆé—­åŒ…ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">singleTon</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">singleTon.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">singleTon.getInstance = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> instance = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> instance || (instance = <span class="keyword">new</span> singleTon(name));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = singleTon.getInstance(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> b = singleTon.getInstance(<span class="string">&quot;bbbbb&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> c = singleTon.getInstance(<span class="string">&quot;cccccc&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line"><span class="built_in">console</span>.log(c);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//	å•ä¾‹æ¨¡å¼é€æ˜</span></span><br><span class="line"><span class="keyword">let</span> getInstance = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> instance = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!instance) &#123;</span><br><span class="line">      <span class="built_in">this</span>.name = name;</span><br><span class="line">      <span class="keyword">return</span> (instance = <span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> getInstance(<span class="string">&quot;aa&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> getInstance(<span class="string">&quot;bbbb&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// let getSingle = function (fn) &#123;</span></span><br><span class="line"><span class="comment">//     let result= null</span></span><br><span class="line"><span class="comment">//     return function () &#123;</span></span><br><span class="line"><span class="comment">//        return result || (result = fn.call(this,...arguments))</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šç”¨çš„å•ä¾‹éªŒè¯æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> getSingle = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> result || (result = fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = getSingle(a);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d = b(<span class="string">&quot;bbb&quot;</span>, <span class="string">&quot;xxx&quot;</span>, <span class="string">&quot;yyyyy&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> c = b(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(d);</span><br><span class="line"><span class="built_in">console</span>.log(c);</span><br></pre></td></tr></table></figure>

<h3 id="28ã€ç­–ç•¥æ¨¡å¼"><a href="#28ã€ç­–ç•¥æ¨¡å¼" class="headerlink" title="28ã€ç­–ç•¥æ¨¡å¼"></a>28ã€ç­–ç•¥æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç­–ç•¥ç±»ï¼ˆå¼€å‘äººå‘˜ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> Strategies = &#123;</span><br><span class="line">  backend: <span class="function"><span class="keyword">function</span> (<span class="params">task</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;è¿›è¡Œåç«¯ä»»åŠ¡ï¼š&quot;</span>, task);</span><br><span class="line">  &#125;,</span><br><span class="line">  frontend: <span class="function"><span class="keyword">function</span> (<span class="params">task</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;è¿›è¡Œå‰ç«¯ä»»åŠ¡ï¼š&quot;</span>, task);</span><br><span class="line">  &#125;,</span><br><span class="line">  testend: <span class="function"><span class="keyword">function</span> (<span class="params">task</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;è¿›è¡Œæµ‹è¯•ä»»åŠ¡ï¼š&quot;</span>, task);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//  ç¯å¢ƒç±»ï¼ˆå¼€å‘ç»„é•¿ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> Context = <span class="function"><span class="keyword">function</span> (<span class="params">type, task</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">typeof</span> Strategies[type] === <span class="string">&quot;function&quot;</span> &amp;&amp; Strategies[type](task);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="29ã€ä»£ç†æ¨¡å¼"><a href="#29ã€ä»£ç†æ¨¡å¼" class="headerlink" title="29ã€ä»£ç†æ¨¡å¼"></a>29ã€ä»£ç†æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ã€å›¾ç‰‡é¢„åŠ è½½ -- ä»£ç†æ¨¡å¼ã€‘</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰æœ¬ä½“</span></span><br><span class="line"><span class="keyword">let</span> myImg = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">  <span class="built_in">document</span>.body.append(img);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    setsrc(src) &#123;</span><br><span class="line">      <span class="built_in">this</span>.src = src;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»£ç†å‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> Proxysetimg = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">  img.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    myImg.setsrc(<span class="built_in">this</span>.src);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    setsrc(src) &#123;</span><br><span class="line">      myImg.setsrc(<span class="string">&quot;./loading.gif&quot;</span>);</span><br><span class="line">      img.src = src;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line">Proxysetimg(<span class="string">&quot;./111.png&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="30ã€è§‚å¯Ÿè€…æ¨¡å¼"><a href="#30ã€è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="30ã€è§‚å¯Ÿè€…æ¨¡å¼"></a>30ã€è§‚å¯Ÿè€…æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›®æ ‡è€…ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="built_in">this</span>.observers = []; <span class="comment">// è§‚å¯Ÿè€…åˆ—è¡¨</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ·»åŠ </span></span><br><span class="line">  add(observer) &#123;</span><br><span class="line">    <span class="built_in">this</span>.observers.push(observer);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ é™¤</span></span><br><span class="line">  remove(observer) &#123;</span><br><span class="line">    <span class="keyword">let</span> idx = <span class="built_in">this</span>.observers.findIndex(<span class="function">(<span class="params">item</span>) =&gt;</span> item === observer);</span><br><span class="line">    idx &gt; <span class="number">-1</span> &amp;&amp; <span class="built_in">this</span>.observers.splice(idx, <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šçŸ¥</span></span><br><span class="line">  notify() &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> observer <span class="keyword">of</span> <span class="built_in">this</span>.observers) &#123;</span><br><span class="line">      observer.update();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§‚å¯Ÿè€…ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç›®æ ‡å¯¹è±¡æ›´æ–°æ—¶è§¦å‘çš„å›è°ƒ</span></span><br><span class="line">  update() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`ç›®æ ‡è€…é€šçŸ¥æˆ‘æ›´æ–°äº†ï¼Œæˆ‘æ˜¯ï¼š<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹åŒ–ç›®æ ‡è€…</span></span><br><span class="line"><span class="keyword">let</span> subject = <span class="keyword">new</span> Subject();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹åŒ–ä¸¤ä¸ªè§‚å¯Ÿè€…</span></span><br><span class="line"><span class="keyword">let</span> obs1 = <span class="keyword">new</span> Observer(<span class="string">&quot;å‰ç«¯å¼€å‘è€…&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> obs2 = <span class="keyword">new</span> Observer(<span class="string">&quot;åç«¯å¼€å‘è€…&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘ç›®æ ‡è€…æ·»åŠ è§‚å¯Ÿè€…</span></span><br><span class="line">subject.add(obs1);</span><br><span class="line">subject.add(obs2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›®æ ‡è€…é€šçŸ¥æ›´æ–°</span></span><br><span class="line">subject.notify();</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// ç›®æ ‡è€…é€šçŸ¥æˆ‘æ›´æ–°äº†ï¼Œæˆ‘æ˜¯å‰ç«¯å¼€å‘è€…</span></span><br><span class="line"><span class="comment">// ç›®æ ‡è€…é€šçŸ¥æˆ‘æ›´æ–°äº†ï¼Œæˆ‘æ˜¯åç«¯å¼€å‘è€…</span></span><br></pre></td></tr></table></figure>

<h3 id="31ã€å‘½ä»¤æ¨¡å¼"><a href="#31ã€å‘½ä»¤æ¨¡å¼" class="headerlink" title="31ã€å‘½ä»¤æ¨¡å¼"></a>31ã€å‘½ä»¤æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Receiver</span> </span>&#123;</span><br><span class="line">  <span class="comment">// æ¥æ”¶è€…ç±»</span></span><br><span class="line">  execute() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æ¥æ”¶è€…æ‰§è¡Œè¯·æ±‚&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line">  <span class="comment">// å‘½ä»¤å¯¹è±¡ç±»</span></span><br><span class="line">  <span class="keyword">constructor</span>(receiver) &#123;</span><br><span class="line">    <span class="built_in">this</span>.receiver = receiver;</span><br><span class="line">  &#125;</span><br><span class="line">  execute() &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨æ¥æ”¶è€…å¯¹åº”æ¥å£æ‰§è¡Œ</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;å‘½ä»¤å¯¹è±¡-&gt;æ¥æ”¶è€…-&gt;å¯¹åº”æ¥å£æ‰§è¡Œ&quot;</span>);</span><br><span class="line">    <span class="built_in">this</span>.receiver.execute();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Invoker</span> </span>&#123;</span><br><span class="line">  <span class="comment">// å‘å¸ƒè€…ç±»</span></span><br><span class="line">  <span class="keyword">constructor</span>(command) &#123;</span><br><span class="line">    <span class="built_in">this</span>.command = command;</span><br><span class="line">  &#125;</span><br><span class="line">  invoke() &#123;</span><br><span class="line">    <span class="comment">// å‘å¸ƒè¯·æ±‚ï¼Œè°ƒç”¨å‘½ä»¤å¯¹è±¡</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;å‘å¸ƒè€…å‘å¸ƒè¯·æ±‚&quot;</span>);</span><br><span class="line">    <span class="built_in">this</span>.command.execute();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> warehouse = <span class="keyword">new</span> Receiver(); <span class="comment">// ä»“åº“</span></span><br><span class="line"><span class="keyword">const</span> order = <span class="keyword">new</span> Command(warehouse); <span class="comment">// è®¢å•</span></span><br><span class="line"><span class="keyword">const</span> client = <span class="keyword">new</span> Invoker(order); <span class="comment">// å®¢æˆ·</span></span><br><span class="line">client.invoke();</span><br></pre></td></tr></table></figure>

<h3 id="32ã€Promise-å¤„ç†æ–‡ä»¶è¯»å–"><a href="#32ã€Promise-å¤„ç†æ–‡ä»¶è¯»å–" class="headerlink" title="32ã€Promise å¤„ç†æ–‡ä»¶è¯»å–"></a>32ã€Promise å¤„ç†æ–‡ä»¶è¯»å–</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> readfile = <span class="function"><span class="keyword">function</span> (<span class="params">filename</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(path.join(__dirname, filename), <span class="string">&quot;utf-8&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">      error,</span></span></span><br><span class="line"><span class="function"><span class="params">      data</span></span></span><br><span class="line"><span class="function"><span class="params">    </span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (error) <span class="keyword">return</span> reject(error);</span><br><span class="line">      resolve(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">readfile(<span class="string">&quot;./01.txt&quot;</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">return</span> readfile(<span class="string">&quot;./02.txt&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">return</span> readfile(<span class="string">&quot;./03.txt&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(reason);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="33ã€-Generator-å‡½æ•°æ–‡ä»¶è¯»å–"><a href="#33ã€-Generator-å‡½æ•°æ–‡ä»¶è¯»å–" class="headerlink" title="33ã€ Generator å‡½æ•°æ–‡ä»¶è¯»å–"></a>33ã€ Generator å‡½æ•°æ–‡ä»¶è¯»å–</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> readfile = <span class="function"><span class="keyword">function</span> (<span class="params">filename</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(path.join(__dirname, filename), <span class="string">&quot;utf8&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (error) <span class="keyword">return</span> reject(error);</span><br><span class="line">      resolve(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> readfile(<span class="string">&quot;./01.txt&quot;</span>);</span><br><span class="line">  <span class="keyword">yield</span> readfile(<span class="string">&quot;./02.txt&quot;</span>);</span><br><span class="line">  <span class="keyword">yield</span> readfile(<span class="string">&quot;./03.txt&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> result = gen();</span><br><span class="line"></span><br><span class="line">result</span><br><span class="line">  .next()</span><br><span class="line">  .value.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">return</span> result.next().value;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">return</span> result.next().value;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(reason);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="34ã€async-å‡½æ•°æ–‡ä»¶è¯»å–"><a href="#34ã€async-å‡½æ•°æ–‡ä»¶è¯»å–" class="headerlink" title="34ã€async å‡½æ•°æ–‡ä»¶è¯»å–"></a>34ã€async å‡½æ•°æ–‡ä»¶è¯»å–</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> readfile = <span class="function"><span class="keyword">function</span> (<span class="params">filename</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(path.join(__dirname, filename), <span class="string">&quot;utf8&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (error) <span class="keyword">return</span> reject(error);</span><br><span class="line">      resolve(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> f1 = <span class="keyword">await</span> readfile(<span class="string">&quot;./01.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> f2 = <span class="keyword">await</span> readfile(<span class="string">&quot;./02.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> f3 = <span class="keyword">await</span> readfile(<span class="string">&quot;./03.txt&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(f1);</span><br><span class="line">    <span class="built_in">console</span>.log(f2);</span><br><span class="line">    <span class="built_in">console</span>.log(f3);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">gen();</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          Donate
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>Copyrightï¼š </strong>
          
          Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        åˆ†äº«
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://blog.zxinc520.com/2020/03/23/getOfferHandcode/" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/promise/" rel="tag">promise</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%89%8B%E6%92%95%E4%BB%A3%E7%A0%81/" rel="tag">æ‰‹æ’•ä»£ç </a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E5%85%A8%E9%9D%A2%E6%80%BB%E7%BB%93/" rel="tag">é¢è¯•å…¨é¢æ€»ç»“</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2020/09/22/Mactoolinto/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
        <div class="article-nav-title">
          
            mac å®ç”¨å·¥å…·
          
        </div>
      </a>
    
    
      <a href="/2020/03/23/getOfferAPI/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
        <div class="article-nav-title">APIã€æ•°ç»„ã€è·¨åŸŸã€åŠ¨ç”»ã€äº‹ä»¶</div>
      </a>
    
  </nav>

   
<!-- valineè¯„è®º -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "r4vo4ryYh2sz7J3rIgfbrM39-gzGzoHsz",
    app_key: "90mAWj0v51lHHeSeAXqsJ27Q",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "ç»™æˆ‘çš„æ–‡ç« åŠ ç‚¹è¯„è®ºå§~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2020
        <i class="ri-heart-fill heart_icon"></i> zhou chen
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <span class="division">|</span>
        Theme - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/logozc.jpg" alt="èŠ ğŸ’—  ç›"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://zxinc520.com">ä¸ªäººåšå®¢</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">å‹æƒ…é“¾æ¥</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>è¯·æˆ‘å–æ¯å’–å•¡å§~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="http://static.zxinc520.com/blog/20190512/p4IWzLUrorWK.jpg?imageslim">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="http://static.zxinc520.com/blog/20190512/pGHOMdDF79sb.jpg?imageslim">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->


<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: 'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto'
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script>

<script src="/js/clickBoom1.js"></script>


<!-- ClickBoom2 -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>