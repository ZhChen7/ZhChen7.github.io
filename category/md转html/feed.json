{
    "version": "https://jsonfeed.org/version/1",
    "title": "sunflower • All posts by \"md转html\" category",
    "description": "周琛的博客",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2019/03/15/MarkdownToHTML/",
            "url": "http://example.com/2019/03/15/MarkdownToHTML/",
            "title": "MarkdownToHtml",
            "date_published": "2019-03-15T08:44:07.000Z",
            "content_html": "<h1 id=\"markdowntohtml\"><a class=\"markdownIt-Anchor\" href=\"#markdowntohtml\">#</a> MarkdownToHtml</h1>\n<blockquote>\n<p>将 Markdown 文档转换为 HTML 显示</p>\n</blockquote>\n<h2 id=\"说明\"><a class=\"markdownIt-Anchor\" href=\"#说明\">#</a> 说明</h2>\n<blockquote>\n<p>本应用是采用 node.js + Express 搭建的</p>\n<p>运用的模板：art-template</p>\n<ul>\n<li><a href=\"https://aui.github.io/art-template/zh-cn/docs/index.html\">art-template</a> 是一个简约、超快的模板引擎。</li>\n</ul>\n</blockquote>\n<h1 id=\"准备工作\"><a class=\"markdownIt-Anchor\" href=\"#准备工作\">#</a> 准备工作</h1>\n<p>我把 <em><a href=\"http://MarkdownToHTML.md\">MarkdownToHTML.md</a></em> 放在目录 <strong>public/doc</strong> 下（放在那里看你心情咯！）</p>\n<h2 id=\"安装-marked\"><a class=\"markdownIt-Anchor\" href=\"#安装-marked\">#</a> 安装 marked</h2>\n<blockquote>\n<p>npm install marked --save</p>\n</blockquote>\n<h1 id=\"关键步骤\"><a class=\"markdownIt-Anchor\" href=\"#关键步骤\">#</a> 关键步骤</h1>\n<p>路由部分关键代码：router.js （ 里面的部分代码是关键 ）</p>\n<pre class=\"line-numbers language-Javascript\" data-language=\"Javascript\"><code class=\"language-Javascript\">src\n\nrouter.get(&quot;&#x2F;:docName&quot;, function (req, res, next) &#123;\n    docId &#x3D; req.params.docName.replace(&#x2F;&quot;&#x2F;g, &#39;&#39;)\n    publish.findById(docId, function (err, publish) &#123;\n        if (err) &#123;\n            return next(err)\n        &#125;\n        fs.readFile(__dirname + src + publish.publishMainBodyUrl + &#39;.md&#39;,           &#39;utf-8&#39;, function (err, data) &#123;\n            if (err) &#123;\n                console.log(err);\n            &#125; else &#123;\n                htmlStr &#x3D; marked(data.toString());\n                res.type(&#39;html&#39;)\n                message.find(&#123;\n                    message_type: publish.publishMainBodyUrl\n                &#125;, function (err, message) &#123;\n                    if (err) &#123;\n                        return next(err)\n                    &#125;\n                    message.forEach(function (e) &#123;\n                        e.UTCtodata &#x3D; new Date(e.message_time).toLocaleString()\n                    &#125;)\n                    res.render(&#39;MainBody.html&#39;, &#123;\n                        doc: htmlStr,\n                        publish: publish,\n                        message: message\n                    &#125;);\n                &#125;)\n            &#125;\n        &#125;);\n    &#125;)\n&#125;)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"\"><a class=\"markdownIt-Anchor\" href=\"#\">#</a> </h2>\n<p>MainBody.html: 用 art-template 模板渲染后台传来的数据</p>\n<pre class=\"line-numbers language-HTML\" data-language=\"HTML\"><code class=\"language-HTML\">&lt;!--\n   &#123;&#123;@ doc &#125;&#125;或者  &lt;%- doc %&gt;\n （ @和- 很关键 &#x3D;&#x3D;&gt;原文输出语句不会对 HTML 内容进行转义处理，可能存在安全风险，请谨慎使用。这个坑害我多走了好多弯路。）\n--&gt;\n&lt;div id&#x3D;&quot;markfs&quot;&gt;\n    &#123;&#123;@ doc &#125;&#125; &lt;!-- 或者  &lt;%- doc %&gt; --&gt;\n&lt;&#x2F;div&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"效果展示\"><a class=\"markdownIt-Anchor\" href=\"#效果展示\">#</a> 效果展示</h2>\n<p><img src=\"http://static.zxinc520.com/blogimage/20190314/x6s26FzHS5go.png?imageslim\" alt=\"g\"></p>\n",
            "tags": [
                "art-template"
            ]
        }
    ]
}