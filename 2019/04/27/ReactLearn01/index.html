<!DOCTYPE html>


<html lang="en">


<head>
  <meta charset="utf-8" />
   
  <meta name="keywords" content="博客，学习网站，hexo，周琛，周琛的个人博客" />
   
  <meta name="description" content="周琛的博客" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    React 学习第一天 |  周琛的博客
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.png" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

  

<link rel="alternate" href="/atom.xml" title="菊 💗  琛" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    
      <canvas class="fireworks"></canvas>
      <style>
        .fireworks {
          position: fixed;
          left: 0;
          top: 0;
          z-index: 99999;
          pointer-events: none;
        }
      </style>
      
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-ReactLearn01"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  React 学习第一天
</h1>
 

    </header>
     
    <div class="article-meta">
      <a href="/2019/04/27/ReactLearn01/" class="article-date">
  <time datetime="2019-04-27T14:15:41.000Z" itemprop="datePublished">2019-04-27</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a> / <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/React/">React</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">7.4k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading time≈</span>
            <span class="post-count">27 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="React-学习第一天"><a href="#React-学习第一天" class="headerlink" title="React 学习第一天"></a>React 学习第一天</h1><blockquote>
<p>ReactJS 简介</p>
<p>ReactJS 的背景和原理</p>
<p>三大主流前端框架 React、Vue、Angular</p>
<p>Vue 与 React 两个框架的区别和优势对比</p>
<p>React（虚拟 DOM，DIff 算法）</p>
<p>创建基本的 webpack4.x 项目（ 并且解决了之前的一个 bug ）</p>
<p>在项目中使用 react</p>
<p>把圈子变小 把语言变干净 把成绩往上提 把故事往心里收 现在想要的三年后都会有 ！o(<em>￣ ▽ ￣</em>)ブ</p>
</blockquote>
<h2 id="1、ReactJS-简介"><a href="#1、ReactJS-简介" class="headerlink" title="1、ReactJS 简介"></a>1、ReactJS 简介</h2><p>React 起源于 Facebook 的内部项目，因为该公司对市场上所有 JavaScript MVC 框架，都不满意，就决定自己写一套，用来架设 Instagram 的网站。做出来以后，发现这套东西很好用，就在 2013 年 5 月开源了。由于 React 的设计思想极其独特，属于革命性创新，性能出众，代码逻辑却非常简单。所以，越来越多的人开始关注和使用，认为它可能是将来 Web 开发的主流工具。</p>
<h2 id="2、ReactJS-的背景和原理"><a href="#2、ReactJS-的背景和原理" class="headerlink" title="2、ReactJS 的背景和原理"></a>2、ReactJS 的背景和原理</h2><p>在 Web 开发中，我们总需要将变化的数据实时反应到 UI 上，这时就需要对 DOM 进行操作。而复杂或频繁的 DOM 操作通常是性能瓶颈产生的原因（如何进行高性能的复杂 DOM 操作通常是衡量一个前端开发人员技能的重要指标）。</p>
<p>React 为此引入了虚拟 DOM（Virtual DOM）的机制：在浏览器端用 Javascript 实现了一套 DOM API。基于 React 进行开发时所有的 DOM 构造都是通过虚拟 DOM 进行，每当数据变化时，React 都会重新构建整个 DOM 树，然后 React 将当前整个 DOM 树和上一次的 DOM 树进行对比，得到 DOM 结构的区别，然后仅仅将需要变化的部分进行实际的浏览器 DOM 更新。而且 React 能够批处理虚拟 DOM 的刷新，在一个事件循环（Event Loop）内的两次数据变化会被合并，例如你连续的先将节点内容从 A 变成 B，然后又从 B 变成 A，React 会认为 UI 不发生任何变化，而如果通过手动控制，这种逻辑通常是极其复杂的。尽管每一次都需要构造完整的虚拟 DOM 树，但是因为虚拟 DOM 是内存数据，性能是极高的，而对实际 DOM 进行操作的仅仅是 Diff 部分，因而能达到提高性能的目的。这样，在保证性能的同时，开发者将不再需要关注某个数据的变化如何更新到一个或多个具体的 DOM 元素，而只需要关心在任意一个数据状态下，整个界面是如何 Render 的。</p>
<p>如果你像在 90 年代那样写过服务器端 Render 的纯 Web 页面那么应该知道，服务器端所要做的就是根据数据 Render 出 HTML 送到浏览器端。如果这时因为用户的一个点击需要改变某个状态文字，那么也是通过刷新整个页面来完成的。服务器端并不需要知道是哪一小段 HTML 发生了变化，而只需要根据数据刷新整个页面。换句话说，任何 UI 的变化都是通过整体刷新来完成的。而 React 将这种开发模式以高性能的方式带到了前端，每做一点界面的更新，你都可以认为刷新了整个页面。至于如何进行局部更新以保证性能，则是 React 框架要完成的事情。</p>
<p>借用 Facebook 介绍 React 的视频中聊天应用的例子，当一条新的消息过来时，你的开发过程需要知道哪条数据过来了，如何将新的 DOM 结点添加到当前 DOM 树上；而基于 React 的开发思路，你永远只需要关心数据整体，两次数据之间的 UI 如何变化，则完全交给框架去做。可以看到，使用 React 大大降低了逻辑复杂性，意味着开发难度降低，可能产生 Bug 的机会也更少。</p>
<hr>
<h4 id="清楚理解两个概念："><a href="#清楚理解两个概念：" class="headerlink" title="清楚理解两个概念："></a>清楚理解两个概念：</h4><ol>
<li><p>**ibrary(库)**：小而巧的库，只提供特定的 API；优点就是 船小好调头。可以很方便的从一个库切换到另外的库；但是代码几乎不会改变。</p>
</li>
<li><p>**Framework(框架)**：大而全的是框架；框架提供了一整套的解决方案；所以，如果在项目中间，想切换到另外的框架，是比较困难的。</p>
</li>
</ol>
<h1 id="三大主流前端框架-React、Vue、Angular"><a href="#三大主流前端框架-React、Vue、Angular" class="headerlink" title="三大主流前端框架 React、Vue、Angular"></a>三大主流前端框架 React、Vue、Angular</h1><p><img src="http://static.zxinc520.com/blog/20190423/Q4Mrbn6pFhYJ.jpg?imageslim" alt="mark"></p>
<p>React（ <strong>最流行</strong> ）起源于 Facebook 的内部项目，用来架设 Instagram 的网站， 并于 2013 年 5 月开源。React 拥有较高的性能，代码逻辑非常简单，越来越多的人已开始关注和使用它。它有以下的<strong>特性</strong>：</p>
<ol>
<li><p>声明式设计：React 采用声明范式，可以轻松描述应用。</p>
</li>
<li><p>高效：React 通过对 DOM 的模拟，最大限度地减少与 DOM 的交互。</p>
</li>
<li><p>灵活：React 可以与已知的库或框架很好地配合。</p>
</li>
</ol>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">1. 速度快：在UI渲染过程中，React通过在虚拟DOM中的微操作来实现对实际DOM的局部更新。
2. 跨浏览器兼容：虚拟DOM帮助我们解决了跨浏览器问题，它为我们提供了标准化的API，甚至在IE8中都是没问题的。
3. 模块化：为你程序编写独立的模块化UI组件，这样当某个或某些组件出现问题是，可以方便地进行隔离。
4. 单向数据流：Flux是一个用于在JavaScript应用中创建单向数据层的架构，它随着React视图库的开发而被Facebook概念化。
5. 同构、纯粹的javascript：因为搜索引擎的爬虫程序依赖的是服务端响应而不是JavaScript的执行，预渲染你的应用有助于搜索引擎优化。
6.兼容性好：比如使用RequireJS来加载和打包，而Browserify和Webpack适用于构建大型应用。它们使得那些艰难的任务不再让人望而生畏。
缺点：
React本身只是一个V而已，并不是一个完整的框架，所以如果是大型项目想要一套完整的框架的话，基本都需要加上ReactRouter和Flux才能写大型应用。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="http://static.zxinc520.com/blog/20190423/7hBjb1epQFoH.webp" alt="mark"></p>
<p>Vue ( <strong>目前市场上的主流</strong> ) 是尤雨溪编写的一个构建数据驱动的 Web 界面的库，准确来说不是一个框架，它聚焦在 V（view）视图层。</p>
<p>_它有以下的特性_：</p>
<ol>
<li><p>轻量级的框架</p>
</li>
<li><p>双向数据绑定</p>
</li>
<li><p>指令</p>
</li>
<li><p>插件化</p>
</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">优点：
1. 简单：官方文档很清晰，比 Angular 简单易学。
2. 快速：异步批处理方式更新 DOM。
3. 组合：用解耦的、可复用的组件组合你的应用程序。
4. 紧凑：~18kb min+gzip，且无依赖。
5. 强大：表达式 无需声明依赖的可推导属性 (computed properties)。
6. 对模块友好：可以通过 NPM、Bower 或 Duo 安装，不强迫你所有的代码都遵循 Angular 的各种规定，使用场景更加灵活。
缺点：
1. 新生儿：Vue.js是一个新的项目，没有angular那么成熟。
2. 影响度不是很大：google了一下，有关于Vue.js多样性或者说丰富性少于其他一些有名的库。
3. 不支持IE8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="http://static.zxinc520.com/blog/20190423/bu0preO1hhfc.webp" alt="mark"></p>
<p>Angular（ <strong>最早</strong> ）是一款优秀的前端 JS 框架，已经被用于 Google 的多款产品当中。</p>
<p>_它有以下的特性_：</p>
<ol>
<li><p>良好的应用程序结构</p>
</li>
<li><p>双向数据绑定</p>
</li>
<li><p>指令</p>
</li>
<li><p>HTML 模板</p>
</li>
<li><p>可嵌入、注入和测试</p>
</li>
</ol>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">优点：
1. 模板功能强大丰富，自带了极其丰富的angular指令。
2. 是一个比较完善的前端框架，包含服务，模板，数据双向绑定，模块化，路由，过滤器，依赖注入等所有功能；
3. 自定义指令，自定义指令后可以在项目中多次使用。
4. ng模块化比较大胆的引入了Java的一些东西（依赖注入），能够很容易的写出可复用的代码，对于敏捷开发的团队来说非常有帮助。
5. angularjs是互联网巨人谷歌开发，这也意味着他有一个坚实的基础和社区支持。
缺点：
1. angular 入门很容易 但深入后概念很多, 学习中较难理解.
2. 文档例子非常少, 官方的文档基本只写了api, 一个例子都没有, 很多时候具体怎么用都是google来的, 或直接问misko,angular的作者.
3. 对IE6&#x2F;7 兼容不算特别好, 就是可以用jQuery自己手写代码解决一些.
4. 指令的应用的最佳实践教程少, angular其实很灵活, 如果不看一些作者的使用原则,很容易写出 四不像的代码, 例如js中还是像jQuery的思想有很多dom操作.
5. DI 依赖注入 如果代码压缩需要显示声明.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="Vue-与-React-两个框架的区别和优势对比"><a href="#Vue-与-React-两个框架的区别和优势对比" class="headerlink" title="Vue 与 React 两个框架的区别和优势对比"></a><a target="_blank" rel="noopener" href="http://caibaojian.com/vue-vs-react.html">Vue 与 React 两个框架的区别和优势对比</a></h1><blockquote>
<p>Vue 与 React 的区别： <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/174e8028eabd">可以参考</a></p>
</blockquote>
<p><a href="">如果你喜欢用模板搭建应用（或者有这个想法），请选择 Vue</a></p>
<p>Vue 应用的默认选项是把 markup 放在 HTML 文件中。数据绑定表达式采用的是和 Angular 相似的 mustache 语法，而指令（特殊的 HTML 属性）用来向模板添加功能。</p>
<p>相比之下，React 应用不使用模板，它要求开发者借助 JSX 在 JavaScript 中创建 DOM。</p>
<p>对于来自标准 Web 开发方式的新开发者，模板更容易理解。但是一些资深开发者也喜欢模板，因为模板可以更好的把布局和功能分割开来，还可以使用 Pug 之类的模板引擎。</p>
<p>但是使用模板的代价是不得不学习所有的 HTML 扩展语法，而渲染函数只需要会标准的 HTML 和 JavaScript。而且比起模板，渲染函数更加容易调试和<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://lib.csdn.net/base/softwaretest">测试</a>。当然你不应该因为这方面的原因错过 Vue，因为在 Vue2.0 中提供了使用模板或者渲染函数的选项。</p>
<p><a href="">如果你喜欢简单和“能用就行”的东西，请选择 Vue</a></p>
<p>一个简单的 Vue 项目可以不需要转译直接运行在浏览器中，所以使用 Vue 可以像使用<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://lib.csdn.net/base/jquery">jQuery</a>一样简单。当然这对于 React 来说在技术上也是可行的，但是典型的 React 代码是重度依赖于 JSX 和诸如 class 之类的 ES6 特性的。</p>
<p>Vue 的简单在程序设计的时候体现更深，让我们来比较一下两个框架是怎样处理应用数据的（也就是 state）。</p>
<p>React 中是通过比较当前 state 和前一个 state 来决定何时在 DOM 中进行重渲染以及渲染的内容，因此需要不可变（immutable）的 state。</p>
<p>Vue 中的数据是可变（mutated）的，所以同样的操作看起来更加简洁。</p>
<p>让我们来看看 Vue 中是如何进行状态管理的。当向 state 添加一个新对象的时候，Vue 将遍历其中的所有属性并且转换为 getter，setter 方法，现在 Vue 的响应系统开始保持对 state 的跟踪了，当 state 中的内容发生变化的时候就会自动重新渲染 DOM。令人称道的是，Vue 中改变 state 的状态的操作不仅更加简洁，而且它的重新渲染系统也比 React 的更快更有效率。</p>
<p>Vue 的响应系统还有有些坑的，例如：它不能检测属性的添加和删除和某些数组更改。这时候就要用到 Vue API 中的类似于 React 的 set 方法来解决。</p>
<p><a href="">如果你想要你的应用尽可能的小和快，请选择 Vue</a></p>
<p>当应用程序的状态改变时，React 和 Vue 都将构建一个虚拟 DOM 并同步到真实 DOM 中。 两者都有各自的方法优化这个过程。</p>
<p>Vue 核心开发者提供了一个 benchmark 测试，可以看出 Vue 的渲染系统比 React 的更快。测试方法是 10000 个项目的列表渲染 100 次，结果如下图。从实用的观点来看，这种 benchmark 只和边缘情况有关，大部分应用程序中不会经常进行这种操作，所以这不应该被视为一个重要的比较点。但是，页面大小是与所有项目有关的，这方面 Vue 再次领先，它目前的版本压缩后只有 25.6KB。React 要实现同样的功能，你需要 React DOM（37.4KB）和 React with Addon 库（11.4KB），共计 44.8KB，几乎是 Vue 的两倍大。双倍的体积并不能带来双倍的功能。</p>
<p><a href="">如果你打算构建一个大型应用程序，请选择 React</a></p>
<p>像文章开头那种同时用 Vue 和 React 实现的简单应用程序，可能会让一个开发者潜意识中更加倾向于 Vue。这是因为基于模板的应用程序第一眼看上去更加好理解，而且能很快跑起来。但是这些好处引入的技术债会阻碍应用扩展到更大的规模。模板容易出现很难注意到的运行时错误，同时也很难去测试，重构和分解。</p>
<p>相比之下，Javascript 模板可以组织成具有很好的分解性和干（DRY）代码的组件，干代码的可重用性和可测试性更好。Vue 也有组件系统和渲染函数，但是 React 的渲染系统可配置性更强，还有诸如浅（shallow）渲染的特性，和 React 的测试工具结合起来使用，使代码的可测试性和可维护性更好。</p>
<p>与此同时，React 的 immutable 应用状态可能写起来不够简洁，但它在大型应用中意义非凡，因为透明度和可测试性在大型项目中变得至关重要。</p>
<p><a href="">如果你想要一个同时适用于 Web 端和原生 APP 的框架，请选择 React</a></p>
<p><a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://lib.csdn.net/base/reactnative">React Native</a>是一个使用 Javascript 构建移动端原生应用程序（<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://lib.csdn.net/base/ios">iOS</a>，<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://lib.csdn.net/base/android">Android</a>）的库。 它与 React.js 相同，只是不使用 Web 组件，而是使用原生组件。 如果你学过 React.js，很快就能上手 React Native，反之亦然。</p>
<p>它的意义在于，开发者只需要一套知识和工具就能开发 Web 应用和移动端原生应用。如果你想同时做 Web 端开发和移动端开发，React 为你准备了一份大礼。</p>
<p>阿里的 Weex 也是一个跨平台 UI 项目，目前它以 Vue 为灵感，使用了许多相同的语法，同时计划在未来完全集成 Vue，然而集成的时间和细节还不清楚。因为 Vue 将 HTML 模板作为它设计的核心部分，并且现有特性不支持自定义渲染，因此很难看出目前的 Vue.js 的跨平台能力能像 React 和 React Native 一样强大。</p>
<p><a href="">如果你想要最大的生态系统，请选择 React</a></p>
<p>毫无疑问，React 是目前最受欢迎的前端框架。它在 NPM 上每个月的下载量超过了 250 万次，相比之下，Vue 是 22.5 万次。人气不仅仅是一个肤浅的数字，这意味着更多的文章，教程和更多 Stack Overflow 的解答，还意味有着更多的工具和插件可以在项目中使用，让开发者不再孤立无援。</p>
<p>这两个框架都是开源的，但是 React 诞生于 Facebook，有 Facebook 背书，它的开发者和 Facebook 都承诺会持续维护 React。相比之下，Vue 是独立开发者尤雨溪的作品。尤雨溪目前在全职维护 Vue，也有一些公司资助 Vue，但是规模和 Facebook 和 Google 没得比。不过请对 Vue 的团队放心，它的小规模和独立性并没有成为劣势，Vue 有着固定的发布周期，甚至更令人称道的是，Github 上 Vue 只有 54 个 open issue，3456 个 closed issue，作为对比，React 有多达 530 个 open issue，3447 个 closed issue。</p>
<h4 id="总结一下，我们发现的，Vue-的优势是："><a href="#总结一下，我们发现的，Vue-的优势是：" class="headerlink" title="总结一下，我们发现的，Vue 的优势是："></a>总结一下，我们发现的，Vue 的优势是：</h4><p>模板和渲染函数的弹性选择</p>
<p>简单的语法和项目配置</p>
<p>更快的渲染速度和更小的体积</p>
<h4 id="React-的优势是："><a href="#React-的优势是：" class="headerlink" title="React 的优势是："></a>React 的优势是：</h4><p>更适合大型应用和更好的可测试性</p>
<p>Web 端和移动端原生 APP 通吃</p>
<p>更大的生态系统，更多的支持和好用的工具</p>
<p>然而，React 和 Vue 都是很优秀的框架，它们之间的相似之处多过不同之处，并且大部分的优秀功能是相通的：</p>
<p>用虚拟 DOM 实现快速渲染</p>
<p>轻量级</p>
<p>响应式组件</p>
<p>服务端渲染</p>
<p>集成路由工具，打包工具，状态管理工具的难度低</p>
<p>优秀的支持和社区</p>
<h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h3 id="1-虚拟-DOM（Virtual-Document-Object-Model）"><a href="#1-虚拟-DOM（Virtual-Document-Object-Model）" class="headerlink" title="1. 虚拟 DOM（Virtual Document Object Model）"></a>1. 虚拟 DOM（Virtual Document Object Model）</h3><ul>
<li>DOM 的本质什么：浏览器中的概念，用 JS 对象来表示 页面上的 元素，并提供了操作 DOM 对象的 API。</li>
<li>什么是 React 中的虚拟 DOM：是框架中的概念，是 程序员 用 JS 对象来模拟 页面上的 DOM 和 DOM 嵌套。</li>
</ul>
<h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><p>先直接说一下，DOM 意思是<strong>文档对象模型（Dcoument Object Model）</strong>，它是一个结构化文本的抽象。对于 Web 开发者，这个文本是一段 HTML 代码，DOM 也就被叫做 HTML DOM。HTML 的元素在 DOM 中变成了节点。</p>
<p>所以，HTML 是一段文本，DOM 就是这段文本在内存中的表示。</p>
<blockquote>
<p>可以对比一个程序的一个进程实例。对于一个程序，可以存在多个进程，就像一段同样的 HTML 可以有多个 DOM 一样。（例：同一个页面被多个 tab 加载）。</p>
</blockquote>
<p>在 HTML DOM 中提供了遍历和修改节点的接口（API）。像<em>getElementById</em>或者<em>removeChild</em>这样的方法。我们一般使用 JavaScript 来操作 DOM，这是因为……好吧，天知道为什么。:)</p>
<p>所以，只要我们想要动态修改网页的内容的时候，我们就修改 DOM。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> item <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"myLI"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
item<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>所谓<em>document</em>就是根节点的抽象，而<em>getElementById</em>，<em>parentNode</em>和<em>emoveChild</em>则是 HTML DOM API 中的方法。</p>
<h2 id="虚拟-DOM"><a href="#虚拟-DOM" class="headerlink" title="虚拟 DOM"></a>虚拟 DOM</h2><p>首先 - 虚拟 DOM 不是 React 发明的，但是 React 用了它且免费提供。</p>
<p>虚拟 DOM 是 HTML DOM 的抽象。它是轻量的，是从浏览器特定（Browser-specific，这里意指特定的浏览器需要特定的实现）实现细节中提取出来的。由于 DOM 本身就已经是一个抽象了，所以虚拟 DOM，实际上，是一个抽象的抽象。</p>
<p>也许把虚拟 DOM 当做 React 的本地和简化版的 HTML DOM 更好。它允许 React 跳过既慢又限于特定浏览器的真实 DOM 操作，以在这个抽象世界中做自己的计算。</p>
<p>常规 DOM 和虚拟 DOM 二者并没有什么大的不同。这也是为什么 React 代码的 JSX 部分可以看起来几乎跟纯 HTML 很像的原因。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> CommentBox <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"commentBox"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div<span class="token operator">></span>Hello<span class="token punctuation">,</span> world<span class="token operator">!</span> <span class="token constant">I</span> am a CommentBox<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在大多数情况下，当你有一段 HTML 代码且想要将其写成一个 React 组件时，你只需要做这个。</p>
<ol>
<li>在 render 方法中返回 HTML 代码；</li>
<li>将 class 属性替换成 className 属性，因为 class 在 JavaScript 中是一个保留关键字。</li>
</ol>
<p>二者之间还有一些，相当细微的区别。</p>
<ul>
<li>虚拟 DOM 的这些属性不在真实的 DOM 中出现——key，ref 和 dangerouslySetInnerHTML。<a target="_blank" rel="noopener" href="https://facebook.github.io/react/docs/special-non-dom-attributes.html">查看更多</a></li>
<li>React 范的 DOM 引入了<a target="_blank" rel="noopener" href="https://facebook.github.io/react/docs/dom-differences.html">一些限制</a></li>
</ul>
<h2 id="为什么需要虚拟-DOM？"><a href="#为什么需要虚拟-DOM？" class="headerlink" title="为什么需要虚拟 DOM？"></a>为什么需要虚拟 DOM？</h2><p>先介绍浏览器加载一个 HTML 文件需要做哪些事，帮助我们理解为什么我们需要虚拟 DOM。webkit 引擎的处理流程，一图胜千言：</p>
<p><img src="http://static.zxinc520.com/blog/20190425/tKU23C1t4RLN.webp" alt="mark"></p>
<p>所有浏览器的引擎工作流程都差不多，如上图大致分 5 步：创建 DOM tree –&gt; 创建 Style Rules -&gt; 构建 Render tree -&gt; 布局 Layout –&gt; 绘制 Painting</p>
<ul>
<li><p>第一步，用 HTML 分析器，分析 HTML 元素，构建一颗 DOM 树。</p>
</li>
<li><p>第二步：用 CSS 分析器，分析 CSS 文件和元素上的 inline 样式，生成页面的样式表。</p>
</li>
<li><p>第三步：将上面的 DOM 树和样式表，关联起来，构建一颗 Render 树。这一过程又称为 Attachment。每个 DOM 节点都有 attach 方法，接受样式信息，返回一个 render 对象（又名 renderer）。这些 render 对象最终会被构建成一颗 Render 树。</p>
</li>
<li><p>第四步：有了 Render 树后，浏览器开始布局，会为每个 Render 树上的节点确定一个在显示屏上出现的精确坐标值。</p>
</li>
<li><p>第五步：Render 数有了，节点显示的位置坐标也有了，最后就是调用每个节点的 paint 方法，让它们显示出来。</p>
</li>
</ul>
<p>当你用传统的源生 api 或 jQuery 去操作 DOM 时，浏览器会从构建 DOM 树开始从头到尾执行一遍流程。比如当你在一次操作时，需要更新 10 个 DOM 节点，理想状态是一次性构建完 DOM 树，再执行后续操作。但浏览器没这么智能，收到第一个更新 DOM 请求后，并不知道后续还有 9 次更新操作，因此会马上执行流程，最终执行 10 次流程。显然例如计算 DOM 节点的坐标值等都是白白浪费性能，可能这次计算完，紧接着的下一个 DOM 更新请求，这个节点的坐标值就变了，前面的一次计算是无用功。</p>
<p>即使计算机硬件一直在更新迭代，操作 DOM 的代价仍旧是昂贵的，频繁操作还是会出现页面卡顿，影响用户的体验。真实的 DOM 节点，哪怕一个最简单的 div 也包含着很多属性，可以打印出来直观感受一下：</p>
<p>虚拟 DOM 就是为了解决这个浏览器性能问题而被设计出来的。例如前面的例子，假如一次操作中有 10 次更新 DOM 的动作，虚拟 DOM 不会立即操作 DOM，而是将这 10 次更新的 diff 内容保存到本地的一个 js 对象中，最终将这个 js 对象一次性 attach 到 DOM 树上，通知浏览器去执行绘制工作，这样可以避免大量的无谓的计算量。</p>
<h2 id="Virtual-DOM-算法"><a href="#Virtual-DOM-算法" class="headerlink" title="Virtual DOM 算法"></a>Virtual DOM 算法</h2><p>可以用新渲染的对象树去和旧的树进行对比，记录这两棵树差异。记录下来的不同就是我们需要对页面真正的 DOM 操作，然后把它们应用在真正的 DOM 树上，页面就变更了。这样就可以做到：视图的结构确实是整个全新渲染了，但是最后操作 DOM 的时候确实只变更有不同的地方。</p>
<p>这就是所谓的 Virtual DOM 算法。包括几个步骤：</p>
<ol>
<li>用 JavaScript 对象结构表示 DOM 树的结构；然后用这个树构建一个真正的 DOM 树，插到文档当中</li>
<li>当状态变更的时候，重新构造一棵新的对象树。然后用新的树和旧的树进行比较，记录两棵树差异</li>
<li>把 2 所记录的差异应用到步骤 1 所构建的真正的 DOM 树上，视图就更新了</li>
</ol>
<p>Virtual DOM 本质上就是在 JS 和 DOM 之间做了一个缓存。可以类比 CPU 和硬盘，既然硬盘这么慢，我们就在它们之间加个缓存：既然 DOM 这么慢，我们就在它们 JS 和 DOM 之间加个缓存。CPU（JS）只操作内存（Virtual DOM），最后的时候再把变更写入硬盘（DOM）。</p>
<h2 id="DIff-算法"><a href="#DIff-算法" class="headerlink" title="DIff 算法"></a>DIff 算法</h2><p>比较两棵 DOM 树的差异是 Virtual DOM 算法最核心的部分.简单的说就是新旧虚拟 dom 的比较，如果有差异就以新的为准，然后再插入的真实的 dom 中，重新渲染。、 借网络一张图片说明:</p>
<p><img src="http://static.zxinc520.com/blog/20190427/TBHlLkPiRjat.webp" alt="mark"></p>
<p><strong>比较只会在同层级进行, 不会跨层级比较。</strong><br>比较后会出现四种情况：<br>1、此节点是否被移除 -&gt; 添加新的节点<br>2、属性是否被改变 -&gt; 旧属性改为新属性<br>3、文本内容被改变-&gt; 旧内容改为新内容<br>4、节点要被整个替换 -&gt; 结构完全不相同 移除整个替换</p>
<h2 id="创建基本的-webpack4-x-项目"><a href="#创建基本的-webpack4-x-项目" class="headerlink" title="创建基本的 webpack4.x 项目"></a>创建基本的 webpack4.x 项目</h2><ol>
<li>运行 <code>npm init -y</code>快速初始化下项目</li>
<li>在项目根目录创建 <strong>src</strong> 源代码目录 和 <strong>dist</strong> 产品目录</li>
<li>在 src 目录下创建 index.html</li>
<li>使用 npm 安装 webpack，运行 <code>npm i webpack webpack-cli -D</code></li>
<li>注意：webpack4.x 提供了 约定大于配置的概念；目的是为了尽量减少 配置文件的体积。<ul>
<li>默认约定了<ul>
<li>打包的入口是 <code>src</code> -&gt;<code> index.js</code></li>
<li>打包的输出文件是 <code>dist</code> -&gt; <code>main.js</code></li>
<li>4.x 中新增的 mode 项：<u>development</u> 和 <u>production</u></li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190427/N7Qiefkt9Fwn.png?imageslim" alt="mark"></p>
<p><a target="_blank" rel="noopener" href="https://www.webpackjs.com/concepts/mode/">mode 介绍</a></p>
<p>​ <strong>mode</strong> 参数：（<u>development</u> 和 <u>production</u> ）：决定了 配置代码 （压缩代码体积）是否被压缩。</p>
<p><img src="http://static.zxinc520.com/blog/20190427/3EKcIY3d4kos.png?imageslim" alt="mark"></p>
<h3 id="配置-webpack-dev-server-自动打包"><a href="#配置-webpack-dev-server-自动打包" class="headerlink" title="配置 webpack-dev-server (自动打包)"></a>配置 webpack-dev-server (自动打包)</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 能够用于快速开发应用程序</p>
</blockquote>
<ol>
<li>安装：运行：<code>npm i webpack-dev-server -D</code></li>
<li>配置 <u>package.json</u></li>
</ol>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span><span class="token punctuation">,</span>
    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"webpack-dev-server"</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>可以在<u><em>webpack.config.js</em></u> 配置相应的 devServer（自动打开窗口，配置端口号，首页路径展示情况）</li>
</ul>
<p><img src="http://static.zxinc520.com/blog/20190427/oznoq3LcPA3S.png?imageslim" alt="mark"></p>
<h3 id="配置-html-webpack-plugin"><a href="#配置-html-webpack-plugin" class="headerlink" title="配置 html-webpack-plugin"></a>配置 html-webpack-plugin</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/jantimon/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a>简化了 HTML 文件的创建，以便为你的 webpack 包提供服务。这对于在文件名中包含每次会随着编译而发生变化哈希的 webpack bundle 尤其有用。 你可以让插件为你生成一个 HTML 文件，使用<a target="_blank" rel="noopener" href="https://lodash.com/docs#template">lodash 模板</a>提供你自己的模板，或使用你自己的<a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders">loader</a>。</p>
</blockquote>
<ol>
<li>安装：运行：<code>npm i html-webpack-plugin -D</code></li>
<li>配置 <u>package.json</u></li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190427/uzkbRIjYKMqF.png?imageslim" alt="mark"></p>
<h3 id="配置-Babel"><a href="#配置-Babel" class="headerlink" title="配置 Babel"></a>配置 Babel</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://babeljs.io/">Babel</a>是一个广泛使用的转码器，可以将 ES6 代码转为 ES5 代码</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://webpack.docschina.org/loaders/babel-loader/#%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3"> webpack 中使用 Babel 官方文档 </a></p>
<ol>
<li><p>安装 <code>npm install -D babel-loader @babel/core @babel/preset-env webpack</code></p>
</li>
<li><p><u>在 webpack 配置对象中，需要将 babel-loader 添加到 module 列表中，就像下面这样</u></p>
</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      test<span class="token operator">:</span> <span class="token regex">/\.m?js$/</span><span class="token punctuation">,</span>
      exclude<span class="token operator">:</span> <span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        loader<span class="token operator">:</span> <span class="token string">"babel-loader"</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"@babel/preset-env"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="解决之前遇到的一个-BUG"><a href="#解决之前遇到的一个-BUG" class="headerlink" title="解决之前遇到的一个 BUG"></a>解决之前遇到的一个 BUG</h3><p><img src="http://static.zxinc520.com/blog/20190427/FnivOIm1VIRg.png?imageslim" alt="mark"></p>
<p><img src="http://static.zxinc520.com/blog/20190416/vh340CYSUk0d.png?imageslim" alt="1556355771552"></p>
<p><strong>解决方案</strong>：</p>
<ol>
<li>安装：<code>npm i @babel/plugin-proposal-class-properties -D</code></li>
<li>配置 <code>webpack.config.js</code></li>
</ol>
<p><img src="http://static.zxinc520.com/blog/20190427/OWlsS3uCQONs.png?imageslim" alt="mark"></p>
<p><strong>运行结果</strong>：</p>
<p><img src="http://static.zxinc520.com/blog/20190427/gHK6mpqXfQca.png?imageslim" alt="mark"></p>
<h2 id="在项目中使用-react"><a href="#在项目中使用-react" class="headerlink" title="在项目中使用 react"></a>在项目中使用 react</h2><ol>
<li>运行 <code>npm i react react-dom -s</code> 安装包<ul>
<li>react：专门用于创建组件和虚拟 DOM 的，同时组件的生命周期都在这个包中</li>
<li>react-dom：专门进行 DOM 操作的，最主要的应用场景，就是 ReactDOM.render()</li>
</ul>
</li>
</ol>
<p><u>尝试写一个 react 项目</u>：</p>
<p><strong>index.js</strong>:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//第一步：导入包</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span> <span class="token comment">//创建组件，虚拟DOM元素，生命周期</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">"react-dom"</span><span class="token punctuation">;</span> <span class="token comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span>

<span class="token comment">//第二步：创建虚拟DOM元素</span>
<span class="token comment">//参数1：创建的元素的类型，字符串，表示元素的名称</span>
<span class="token comment">//参数2：是一个对象或 null，表示 当前这个DOM 元素的属性</span>
<span class="token comment">//参数3：子节点（包括 其它 虚拟DOM 获取 文本子节点）</span>
<span class="token comment">//参数n：其它子节点</span>
<span class="token keyword">const</span> myh1 <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
  <span class="token string">"h1"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#123;</span> id<span class="token operator">:</span> <span class="token string">"myh1"</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">"this id h1"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token string">"这是一个大大H1！"</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span>
<span class="token comment">//参数一：要渲染的那个虚拟DOM元素</span>
<span class="token comment">//参数二：指定页面上的DOM元素，当作容器</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myh1<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>index.html</strong>:</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="http://static.zxinc520.com/blog/20190427/AHtHc973OThy.png?imageslim" alt="mark"></p>
<h2 id="创建-DOM-结构"><a href="#创建-DOM-结构" class="headerlink" title="创建 DOM 结构"></a>创建 DOM 结构</h2><h3 id="方式一：（-基本不用）"><a href="#方式一：（-基本不用）" class="headerlink" title="方式一：（~基本不用）"></a>方式一：（~基本不用）</h3><p><strong>index.js</strong>:</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//第一步：导入包</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span> <span class="token comment">//创建组件，虚拟DOM元素，生命周期</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">"react-dom"</span><span class="token punctuation">;</span> <span class="token comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span>

<span class="token comment">//第二步：创建虚拟DOM元素</span>
<span class="token keyword">const</span> myh1 <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
  <span class="token string">"h1"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#123;</span> id<span class="token operator">:</span> <span class="token string">"myh1"</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">"this id h1"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token string">"这是一个大大H1！"</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mydiv <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"这是一个div元素"</span><span class="token punctuation">,</span> myh1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>mydiv<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="方式二：JSX-语法-（-important）"><a href="#方式二：JSX-语法-（-important）" class="headerlink" title="方式二：JSX 语法 （~ important）"></a>方式二：JSX 语法 （~ important）</h3><blockquote>
<p>JSX 语法：看起来可能有些奇怪的标签语法既不是字符串也不是 HTML。</p>
<p>JSX 语法的本质，还是在运行的时候，被转换成了 <u><strong>React.createElement 形式</strong></u>来执行的</p>
</blockquote>
<p>使用 <strong>babel</strong> 将 JSX 语法转换为 <u>React.createElement 形式</u> <a target="_blank" rel="noopener" href="https://react.docschina.org/docs/introducing-jsx.html">JSX 官方详细介绍</a></p>
<p>关键包：运行 <code>npm install --save-dev @babel/preset-react</code> <a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-preset-react">可以参考 babel 官方文档</a></p>
<p><img src="http://static.zxinc520.com/blog/20190427/NHy4KwgF4SNN.png?imageslim" alt="mark"></p>
<p>原因：<u>少写了中括号。（粗心大意了）</u>不该！！<del>~</del></p>
<p><strong>配置 <u>webpack.config.js</u></strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//配置 @babel/preset-react</span>
module<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      test<span class="token operator">:</span> <span class="token regex">/\.m?js$/</span><span class="token punctuation">,</span>
      exclude<span class="token operator">:</span> <span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        loader<span class="token operator">:</span> <span class="token string">"babel-loader"</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"@babel/preset-env"</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span>
              <span class="token string">"@babel/preset-react"</span><span class="token punctuation">,</span>
              <span class="token punctuation">&#123;</span>
                pragmaFrag<span class="token operator">:</span> <span class="token string">"DomFrag"</span><span class="token punctuation">,</span> <span class="token comment">// default is React.Fragment</span>
                throwIfNamespace<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// defaults to true</span>
              <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"@babel/plugin-proposal-class-properties"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h5 id="在-JSX-中使用表达式：-JSX-中使用表达式"><a href="#在-JSX-中使用表达式：-JSX-中使用表达式" class="headerlink" title="在 JSX 中使用表达式： JSX 中使用表达式"></a><strong>在 JSX 中使用表达式</strong>：<a target="_blank" rel="noopener" href="https://react.docschina.org/docs/introducing-jsx.html"> JSX 中使用表达式</a></h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//第一步：导入包</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span> <span class="token comment">//创建组件，虚拟DOM元素，生命周期</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">"react-dom"</span><span class="token punctuation">;</span> <span class="token comment">//把创建好的 组件 和 虚拟DOM 放到页面上展示的</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">"zc"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>h1<span class="token operator">></span>这是h1<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>h2<span class="token operator">></span>这是h2<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"周琛"</span><span class="token punctuation">,</span> <span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token string">"李四"</span><span class="token punctuation">,</span> <span class="token string">"王五"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//第三步：使用 ReactDOM 把虚拟 DOM 渲染到页面上</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div title<span class="token operator">=</span><span class="token punctuation">&#123;</span>str<span class="token punctuation">&#125;</span><span class="token operator">></span>
    <span class="token punctuation">&#123;</span>a <span class="token operator">+</span> <span class="token number">11</span><span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">&#123;</span>arr<span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">&#123;</span>arr1<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>h3<span class="token operator">></span><span class="token punctuation">&#123;</span>item<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="http://static.zxinc520.com/blog/20190427/EfbH8hDEnVn0.png?imageslim" alt="mark"></p>
 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          Donate
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>Copyright： </strong>
          
          Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://blog.zxinc520.com/2019/04/27/ReactLearn01/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2019/05/06/ReactLearn02/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            React 学习第二天
          
        </div>
      </a>
    
    
      <a href="/2019/04/18/VueLearn07/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">Mint-UI、MUI</div>
      </a>
    
  </nav>

   
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "r4vo4ryYh2sz7J3rIgfbrM39-gzGzoHsz",
    app_key: "90mAWj0v51lHHeSeAXqsJ27Q",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "给我的文章加点评论吧~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2020
        <i class="ri-heart-fill heart_icon"></i> zhou chen
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <span class="division">|</span>
        Theme - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/logozc.jpg" alt="菊 💗  琛"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://zxinc520.com">个人博客</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友情链接</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="http://static.zxinc520.com/blog/20190512/p4IWzLUrorWK.jpg?imageslim">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="http://static.zxinc520.com/blog/20190512/pGHOMdDF79sb.jpg?imageslim">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->


<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: 'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto'
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script>

<script src="/js/clickBoom1.js"></script>


<!-- ClickBoom2 -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>